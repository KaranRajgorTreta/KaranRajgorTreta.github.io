(self.webpackChunkng=self.webpackChunkng||[]).push([[792],{20:(ce,$e,F)=>{"use strict";var je=F(345),e=F(4438),c=F(4341),m=F(1626);class si{}class ri{}class L{}class h{constructor(l,t,n){if(this.isHidden=!1,this.isEditor=!1,this.buttons=[],this.name=l,this.description=t,this.options=JSON.parse(n),this.isHidden=this.options[0].isHidden,this.isEditor=this.options[0].isEditor,this.cellWidth=this.options[0].width,this.textAlign=this.options[0].textAlign,this.hyperLink=this.options[0].hyperLink,this.isEdit=this.options[0].isEdit,this.isDelete=this.options[0].isDelete,this.isSubbmited=this.options[0].isSubbmited,this.isReject=this.options[0].isReject,this.isBillable=this.options[0].isBillable,this.isPermissionIcon=this.options[0].isPermissionIcon,this.isSales=this.options[0].isSales,this.isFill=this.options[0].isFill,this.history=this.options[0].history,this.view=this.options[0].view,this.status=this.options[0].status,1!=this.hyperLink&&(this.hyperLink=!1),this.singleButton=this.options[0].singleButton,this.multiButton=this.options[0].multiButton,1!=this.singleButton&&(this.singleButton=!1),1==this.singleButton&&(this.buttonText=this.options[0].buttonText),1!=this.multiButton&&(this.multiButton=!1),1==this.multiButton){this.buttonText=this.options[0].buttonText;let i=this.buttonText.split("|"),o=i.length;for(let r=0;r<o;r++){let a=new ri;a.ButtonText=i[r],this.buttons.push(a)}}this.disableSorting=this.options[0].disableSorting,1!=this.disableSorting&&(this.disableSorting=!1),this.formatDate=this.options[0].formatDate,1!=this.formatDate&&(this.formatDate=!1),this.formatDateTime=this.options[0].formatDateTime,1!=this.formatDateTime&&(this.formatDateTime=!1),1!=this.isEdit&&(this.isEdit=!1),1!=this.isDelete&&(this.isDelete=!1),1!=this.isSubbmited&&(this.isSubbmited=!1),1!=this.isApproval&&(this.isApproval=!1),1!=this.isReject&&(this.isReject=!1),1!=this.isBillable&&(this.isBillable=!1),1!=this.isPermissionIcon&&(this.isPermissionIcon=!1),1!=this.history&&(this.history=!1),1!=this.view&&(this.view=!1),1!=this.status&&(this.status=!1),1!=this.isSales&&(this.isSales=!1),1!=this.isFill&&(this.isFill=!1)}}class ai{constructor(){this.direction=1}sort(l,t){this.direction=this.key===l?-1*this.direction:1,this.key=l;let n=new si;return n.Column=l,n.Direction=this.direction,n.SortDirection=-1==this.direction?"DESC":"ASC",n}}var u=F(177),E=F(9604);const ze=(s,l)=>({width:s,"text-align":l});function li(s,l){1&s&&(e.j41(0,"span"),e.nrm(1,"i",8),e.k0s())}function ci(s,l){1&s&&(e.j41(0,"span"),e.nrm(1,"i",9),e.k0s())}function hi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"b")(2,"a",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.sortData(i.name))}),e.EFF(3),e.k0s()(),e.DNE(4,li,2,0,"span",3)(5,ci,2,0,"span",3),e.k0s()}if(2&s){const t=e.XpG(2).$implicit,n=e.XpG();e.R7$(3),e.JRh(t.description),e.R7$(),e.Y8G("ngIf",t.name==n.sortColumn&&1==n.sortAscending),e.R7$(),e.Y8G("ngIf",t.name==n.sortColumn&&1==n.sortDesending)}}function di(s,l){if(1&s&&(e.j41(0,"div")(1,"b"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(t.description)}}function pi(s,l){if(1&s&&(e.j41(0,"th",6),e.DNE(1,hi,6,3,"div",3)(2,di,3,1,"div",3),e.k0s()),2&s){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.l_i(3,ze,t.cellWidth,t.textAlign)),e.R7$(),e.Y8G("ngIf",0==t.disableSorting),e.R7$(),e.Y8G("ngIf",1==t.disableSorting)}}function ui(s,l){if(1&s&&(e.qex(0),e.DNE(1,pi,3,6,"th",5),e.bVm()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf",!t.isHidden)}}function mi(s,l){if(1&s&&(e.j41(0,"div")(1,"pre",15),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(2).$implicit,n=e.XpG().$implicit;e.R7$(2),e.JRh(n[t.name])}}function gi(s,l){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,n[t.name],"MM/dd/yyyy")," ")}}function fi(s,l){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,n[t.name],"mm")," ")}}function Ai(s,l){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.R7$(),e.SpI(" ",n[t.name]," ")}}function _i(s,l){if(1&s&&(e.j41(0,"div")(1,"span",16)(2,"b"),e.EFF(3),e.k0s()(),e.DNE(4,gi,3,4,"div",3)(5,fi,3,4,"div",3)(6,Ai,2,1,"div",3),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(3),e.SpI("",t.description,":\xa0"),e.R7$(),e.Y8G("ngIf",1==t.formatDate&&0==t.formatDateTime),e.R7$(),e.Y8G("ngIf",1==t.formatDateTime&&0==t.formatDate),e.R7$(),e.Y8G("ngIf",0==t.formatDate&&0==t.formatDateTime)}}function yi(s,l){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,n[t.name],"MM/dd/yyyy")," ")}}function Si(s,l){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,n[t.name],"mm")," ")}}function Di(s,l){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.R7$(),e.SpI(" ",n[t.name]," ")}}function ji(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3),e.k0s()(),e.j41(4,"div",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.selectedRowRedirect(i.description,o))}),e.DNE(5,yi,3,4,"div",3)(6,Si,3,4,"div",3)(7,Di,2,1,"div",3),e.k0s()()}if(2&s){const t=e.XpG(2).$implicit;e.R7$(3),e.SpI("",t.description,":\xa0"),e.R7$(2),e.Y8G("ngIf",1==t.formatDate&&0==t.formatDateTime),e.R7$(),e.Y8G("ngIf",1==t.formatDateTime&&0==t.formatDate),e.R7$(),e.Y8G("ngIf",0==t.formatDate&&0==t.formatDateTime)}}function bi(s,l){if(1&s&&(e.j41(0,"div",20),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3).$implicit,n=e.XpG().$implicit;e.FS9("tooltip",n[t.name]),e.R7$(),e.SpI(" ",n[t.name]," ")}}function Mi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3),e.k0s()(),e.j41(4,"div",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.selectedRowRedirect(i.description,o))}),e.DNE(5,bi,2,2,"div",19),e.k0s()()}if(2&s){const t=e.XpG(2).$implicit;e.R7$(3),e.SpI("",t.description,":\xa0"),e.R7$(2),e.Y8G("ngIf",0==t.formatDate&&0==t.formatDateTime)}}function Ci(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3),e.k0s()(),e.j41(4,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.buttonClicked(i.buttonText,o))}),e.j41(5,"b"),e.EFF(6),e.k0s()()()}if(2&s){const t=e.XpG(2).$implicit;e.R7$(3),e.SpI("",t.description,":\xa0"),e.R7$(3),e.JRh(t.buttonText)}}function ki(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",23)(1,"button",21),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG(4).index,r=e.XpG();return e.Njj(r.buttonClicked(i.ButtonText,o))}),e.j41(2,"b"),e.EFF(3),e.k0s()(),e.EFF(4,"\xa0 "),e.k0s()}if(2&s){const t=l.$implicit;e.R7$(3),e.SpI("",t.ButtonText,"\xa0")}}function Ii(s,l){if(1&s&&(e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3),e.k0s()(),e.DNE(4,ki,5,1,"div",22),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(3),e.SpI("",t.description,":\xa0"),e.R7$(),e.Y8G("ngForOf",t.buttons)}}function vi(s,l){if(1&s){const t=e.RV6();e.j41(0,"i",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG(4).index,o=e.XpG();return e.Njj(o.selectedRowForCopy(i))}),e.k0s()}}function Ei(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Edit:\xa0"),e.k0s()(),e.j41(4,"i",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s(),e.j41(5,"span",17)(6,"b"),e.EFF(7,"Delete:\xa0"),e.k0s()(),e.j41(8,"i",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.buttonClicked(i.buttonText,o))}),e.k0s(),e.j41(9,"span",17)(10,"b"),e.EFF(11,"Copy:\xa0"),e.k0s()(),e.DNE(12,vi,1,0,"i",26),e.k0s()}if(2&s){const t=e.XpG(4);e.R7$(12),e.Y8G("ngIf",1==t.ShowFooter)}}function Fi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Fill Timesheet:\xa0"),e.k0s()(),e.j41(4,"i",33),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.selectedRowRedirect(i.description,o))}),e.k0s()()}}function Ti(s,l){1&s&&e.nrm(0,"div",34)}function wi(s,l){1&s&&e.nrm(0,"div",35)}function Pi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",28)(1,"span",17)(2,"b"),e.EFF(3,"Edit:\xa0"),e.k0s()(),e.j41(4,"i",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s(),e.j41(5,"span",17)(6,"b"),e.EFF(7,"Delete:\xa0"),e.k0s()(),e.j41(8,"i",30),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.buttonClicked(i.buttonText,o))}),e.k0s(),e.DNE(9,Fi,5,0,"div",3)(10,Ti,1,0,"div",31)(11,wi,1,0,"div",32),e.k0s()}if(2&s){const t=e.XpG(2).$implicit,n=e.XpG().$implicit;e.R7$(9),e.Y8G("ngIf",1==t.isFill&&3!=n.taskstatusID),e.R7$(),e.Y8G("ngIf",1==t.isFill&&3==n.taskstatusID),e.R7$(),e.Y8G("ngIf",1==t.isFill&&1==n.taskstatusID||2==n.taskstatusID)}}function Ri(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Edit:\xa0"),e.k0s()(),e.j41(4,"i",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG(4).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s(),e.j41(5,"span",17)(6,"b"),e.EFF(7,"Delete:\xa0"),e.k0s()(),e.j41(8,"i",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.buttonClicked(i.buttonText,o))}),e.k0s()()}}function Gi(s,l){1&s&&e.nrm(0,"div",41)}function Yi(s,l){1&s&&e.nrm(0,"div",42)}function Hi(s,l){1&s&&e.nrm(0,"div",43)}function Ni(s,l){1&s&&e.nrm(0,"div",44)}function Li(s,l){if(1&s&&(e.j41(0,"div"),e.DNE(1,Ri,9,0,"div",3)(2,Gi,1,0,"div",36)(3,Yi,1,0,"div",37)(4,Hi,1,0,"div",38)(5,Ni,1,0,"div",39),e.k0s()),2&s){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngIf",0==t.isSubmited&&0==t.isReject||1==t.isReject),e.R7$(),e.Y8G("ngIf",0==t.isSubmited&&0==t.isApproval&&0==t.isReject),e.R7$(),e.Y8G("ngIf",1==t.isSubmited&&0==t.isApproval&&0==t.isReject),e.R7$(),e.Y8G("ngIf",1==t.isApproval&&1==t.isSubmited&&0==t.isReject),e.R7$(),e.Y8G("ngIf",1==t.isReject&&0==t.isSubmited&&0==t.isApproval)}}function Bi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"View:\xa0"),e.k0s()(),e.j41(4,"i",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s(),e.j41(5,"span",17)(6,"b"),e.EFF(7,"View task wise hours:\xa0"),e.k0s()(),e.j41(8,"i",46),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRowforView(i))}),e.k0s(),e.j41(9,"span",17)(10,"b"),e.EFF(11,"Excel:\xa0"),e.k0s()(),e.j41(12,"i",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.ExportToExcel(i))}),e.k0s()()}}function Ui(s,l){1&s&&e.nrm(0,"div",48)}function Vi(s,l){1&s&&e.nrm(0,"div",49)}function xi(s,l){1&s&&e.nrm(0,"div",50)}function Qi(s,l){1&s&&e.nrm(0,"div",51)}function Oi(s,l){1&s&&(e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Billable:\xa0"),e.k0s()(),e.nrm(4,"i",52),e.k0s())}function Ji(s,l){1&s&&(e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"NonBillable:\xa0"),e.k0s()(),e.nrm(4,"i",53),e.k0s())}function $i(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Edit:\xa0"),e.k0s()(),e.j41(4,"i",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s()()}}function zi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",28)(1,"span",17)(2,"b"),e.EFF(3,"Edit:\xa0"),e.k0s()(),e.j41(4,"i",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s(),e.j41(5,"span",17)(6,"b"),e.EFF(7,"View:\xa0"),e.k0s()(),e.j41(8,"i",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRowView(i))}),e.k0s(),e.j41(9,"span",17)(10,"b"),e.EFF(11,"History:\xa0"),e.k0s()(),e.j41(12,"i",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRowHistory(i))}),e.k0s(),e.j41(13,"span",17)(14,"b"),e.EFF(15,"Report:\xa0"),e.k0s()(),e.j41(16,"i",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedProjectTrackingReport(i))}),e.k0s(),e.nrm(17,"div",6),e.k0s()}if(2&s){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,i=e.XpG();e.R7$(17),e.Y8G("ngStyle",i.setMyStyles(n[t.name]))}}function Xi(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"View:\xa0"),e.k0s()(),e.j41(4,"i",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s(),e.nrm(5,"div",6),e.k0s()}if(2&s){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,i=e.XpG();e.R7$(5),e.Y8G("ngStyle",i.setMyStyles(n[t.name]))}}function qi(s,l){1&s&&(e.j41(0,"span",17)(1,"b"),e.EFF(2,"Edit:\xa0"),e.k0s()())}function Ki(s,l){if(1&s){const t=e.RV6();e.j41(0,"i",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG(4).index,o=e.XpG();return e.Njj(o.selectedRow(i))}),e.k0s()}}function Wi(s,l){if(1&s&&e.nrm(0,"div",6),2&s){const t=e.XpG(5);e.Y8G("ngStyle",t.setInStyles())}}function Zi(s,l){if(1&s&&e.nrm(0,"div",6),2&s){const t=e.XpG(5);e.Y8G("ngStyle",t.setOutStyles())}}function en(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",28),e.DNE(1,qi,3,0,"span",57)(2,Ki,1,0,"i",58),e.j41(3,"span",17)(4,"b"),e.EFF(5,"Report:\xa0"),e.k0s()(),e.j41(6,"i",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).index,o=e.XpG();return e.Njj(o.selectedProjectTrackingReport(i))}),e.k0s(),e.DNE(7,Wi,1,1,"div",5)(8,Zi,1,1,"div",5),e.k0s()}if(2&s){const t=e.XpG(2).$implicit,n=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",0==t.isSales),e.R7$(),e.Y8G("ngIf",0==t.isSales),e.R7$(5),e.Y8G("ngIf",1==n[t.name]),e.R7$(),e.Y8G("ngIf",0==n[t.name])}}function tn(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Delete:\xa0"),e.k0s()(),e.j41(4,"i",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,o=e.XpG().index,r=e.XpG();return e.Njj(r.buttonClicked(i.buttonText,o))}),e.k0s()()}}function nn(s,l){1&s&&(e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Active:\xa0"),e.k0s()(),e.nrm(4,"i",60),e.k0s())}function on(s,l){1&s&&(e.j41(0,"div")(1,"span",17)(2,"b"),e.EFF(3,"Active:\xa0"),e.k0s()(),e.nrm(4,"i",61),e.k0s())}function sn(s,l){if(1&s&&(e.j41(0,"td",6),e.DNE(1,mi,3,1,"div",3)(2,_i,7,4,"div",3)(3,ji,8,4,"div",3)(4,Mi,6,2,"div",3)(5,Ci,7,2,"div",3)(6,Ii,5,2,"div",3)(7,Ei,13,1,"div",3)(8,Pi,12,3,"div",10)(9,Li,6,5,"div",3)(10,Bi,13,0,"div",3)(11,Ui,1,0,"div",11)(12,Vi,1,0,"div",12)(13,xi,1,0,"div",13)(14,Qi,1,0,"div",14)(15,Oi,5,0,"div",3)(16,Ji,5,0,"div",3)(17,$i,5,0,"div",3)(18,zi,18,1,"div",10)(19,Xi,6,1,"div",3)(20,en,9,4,"div",10)(21,tn,5,0,"div",3)(22,nn,5,0,"div",3)(23,on,5,0,"div",3),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG().$implicit,i=e.XpG();e.Y8G("ngStyle",e.l_i(24,ze,t.width,t.textAlign)),e.R7$(),e.Y8G("ngIf",t.isEditor),e.R7$(),e.Y8G("ngIf",0==t.hyperLink&&0==t.singleButton&&0==t.multiButton&&0==t.isDelete&&0==t.isEdit&&0==t.isPermissionIcon&&0==t.history&&1!=t.isEditor&&0==t.isBillable),e.R7$(),e.Y8G("ngIf",1==t.hyperLink&&0==t.disableSorting),e.R7$(),e.Y8G("ngIf",1==t.hyperLink&&1==t.disableSorting),e.R7$(),e.Y8G("ngIf",1==t.singleButton&&0==t.isEdit&&0==t.isDelete&&0==t.isPermissionIcon),e.R7$(),e.Y8G("ngIf",1==t.multiButton&&0==t.isEdit&&0==t.isDelete),e.R7$(),e.Y8G("ngIf",1==t.isEdit&&1==t.isDelete),e.R7$(),e.Y8G("ngIf",1==t.isFill),e.R7$(),e.Y8G("ngIf",1==t.isSubbmited&&0==t.multiButton),e.R7$(),e.Y8G("ngIf",1==t.view),e.R7$(),e.Y8G("ngIf",1==t.status&&0==n.isSubmited&&0==n.isApproval&&0==n.isReject),e.R7$(),e.Y8G("ngIf",1==t.status&&1==n.isSubmited&&0==n.isApproval&&0==n.isReject),e.R7$(),e.Y8G("ngIf",1==t.status&&1==n.isApproval&&1==n.isSubmited&&0==n.isReject),e.R7$(),e.Y8G("ngIf",1==t.status&&1==n.isReject&&0==n.isSubmited&&0==n.isApproval),e.R7$(),e.Y8G("ngIf",1==t.isBillable&&1==n[t.name]),e.R7$(),e.Y8G("ngIf",1==t.isBillable&&0==n[t.name]),e.R7$(),e.Y8G("ngIf",1==t.isEdit&&0==t.multiButton&&0==i.ShowStatus&&0==i.ShowProjStatus),e.R7$(),e.Y8G("ngIf",1==t.isEdit&&0==t.multiButton&&1==i.ShowStatus),e.R7$(),e.Y8G("ngIf",1==t.history),e.R7$(),e.Y8G("ngIf",1==t.isEdit&&0==t.multiButton&&1==i.ShowProjStatus),e.R7$(),e.Y8G("ngIf",1==t.isDelete&&0==t.multiButton),e.R7$(),e.Y8G("ngIf",1==t.isPermissionIcon&&1==n[t.name]),e.R7$(),e.Y8G("ngIf",1==t.isPermissionIcon&&0==n[t.name])}}function rn(s,l){if(1&s&&(e.qex(0),e.DNE(1,sn,24,27,"td",5),e.bVm()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf",!t.isHidden)}}function an(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,rn,2,1,"ng-container",2),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.columns)}}function ln(s,l){1&s&&(e.j41(0,"th",64),e.EFF(1,"Total Actual Hours"),e.k0s())}function cn(s,l){1&s&&e.nrm(0,"th")}function hn(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,ln,2,0,"th",62),e.j41(2,"th",63),e.EFF(3),e.k0s(),e.DNE(4,cn,1,0,"th",3),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",1==t.Hours),e.R7$(2),e.JRh(t.Total),e.R7$(),e.Y8G("ngIf",1==t.list)}}function dn(s,l){1&s&&(e.j41(0,"th",66),e.EFF(1,"Total Hours"),e.k0s())}function pn(s,l){1&s&&(e.j41(0,"th"),e.EFF(1,"Total Hours"),e.k0s())}function un(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,dn,2,0,"th",65)(2,pn,2,0,"th",3),e.j41(3,"th",63),e.EFF(4),e.k0s(),e.j41(5,"th",63),e.EFF(6),e.k0s(),e.nrm(7,"th"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",0==t.ShowStatus),e.R7$(),e.Y8G("ngIf",1==t.ShowStatus),e.R7$(2),e.JRh(t.TotalEstimated),e.R7$(2),e.JRh(t.Total)}}function mn(s,l){1&s&&(e.j41(0,"div")(1,"h5",67),e.EFF(2," No Record Found! "),e.k0s()())}function gn(s,l){if(1&s&&(e.j41(0,"option",78),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t),e.R7$(),e.JRh(t)}}function fn(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",68)(1,"div",23)(2,"button",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.buttonFirstPage())}),e.j41(3,"div",70),e.nrm(4,"div",71),e.k0s()(),e.j41(5,"button",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.buttonPreviousPage())}),e.nrm(6,"div",72),e.k0s(),e.EFF(7),e.j41(8,"button",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.buttonNextPage())}),e.nrm(9,"div",73),e.k0s(),e.j41(10,"button",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.buttonLastPage())}),e.j41(11,"div",73),e.nrm(12,"div",74),e.k0s()(),e.j41(13,"select",75),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.pageSize,i)||(o.pageSize=i),e.Njj(i)}),e.bIt("change",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.pageSizeChanged(i.target.value))}),e.DNE(14,gn,2,2,"option",76),e.k0s(),e.EFF(15," \xa0items per page "),e.k0s(),e.j41(16,"div",77),e.EFF(17),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("disabled",t.disableFirstPageButton||1==t.totalPages&&1==t.currentPageNumber),e.R7$(3),e.Y8G("disabled",t.disablePreviousPageButton||1==t.totalPages&&1==t.currentPageNumber),e.R7$(2),e.Lme(" \xa0",t.currentPageNumber,"\xa0/\xa0",t.totalPages,"\xa0 "),e.R7$(),e.Y8G("disabled",t.disableNextPageButton||1==t.totalPages&&1==t.currentPageNumber),e.R7$(2),e.Y8G("disabled",t.disableLastPageButton||1==t.totalPages&&1==t.currentPageNumber),e.R7$(3),e.R50("ngModel",t.pageSize),e.R7$(),e.Y8G("ngForOf",t.pageSizes),e.R7$(3),e.E5c(" \xa0",t.itemNumberBegin,"\xa0-\xa0",t.itemNumberEnd,"\xa0of\xa0",t.totalRows,"\xa0items\xa0 ")}}Date.now();let _=(()=>{class s{constructor(){this.rows=[],this.pageSizes=[],this.Productivity=!0,this.sorter=new ai,this.datagridEvent=new e.bkB,this.disableNextPageButton=!1,this.disableLastPageButton=!1,this.disableFirstPageButton=!1,this.disablePreviousPageButton=!1,this.disableFirstPageButton=!0,this.disablePreviousPageButton=!0,this.pageSizes.push(5),this.pageSizes.push(10),this.pageSizes.push(15),this.pageSizes.push(30),this.pageSizeForGrid=15,this.sortColumn="",this.sortAscending=!1,this.sortDesending=!1}ngOnInit(){}databind(t){this.currentPageNumber=t.currentPageNumber,this.totalPages=t.totalPages,this.totalRows=t.totalRows,this.itemNumberBegin=(this.currentPageNumber-1)*this.pageSize+1,this.itemNumberEnd=this.currentPageNumber*this.pageSize,this.itemNumberEnd>this.totalRows&&(this.itemNumberEnd=this.totalRows),this.disableNextPageButton=!1,this.disableLastPageButton=!1,this.disableFirstPageButton=!1,this.disablePreviousPageButton=!1,1==this.currentPageNumber&&(this.disableFirstPageButton=!0,this.disablePreviousPageButton=!0),this.currentPageNumber==this.totalPages&&(this.disableNextPageButton=!0,this.disableLastPageButton=!0)}sortData(t){let n=this.sorter.sort(t,this.rows);this.sortColumn!=t?(this.sortAscending=!0,this.sortDesending=!1,this.sortColumn=t):(this.sortAscending=!this.sortAscending,this.sortDesending=!this.sortDesending);let i=new L;i.EventType="Sorting",i.Direction=n.Direction,i.SortDirection=n.SortDirection,i.SortExpression=n.Column,this.datagridEvent.emit({value:i})}selectedRow(t){let n=new L;n.EventType="ItemSelected",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowforView(t){let n=new L;n.EventType="ItemSelectedforView",n.ItemSelected=t,this.datagridEvent.emit({value:n})}ExportToExcel(t){let n=new L;n.EventType="ExportToExcel",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowView(t){let n=new L;n.EventType="ItemSelectedView",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowSubmit(t){let n=new L;n.EventType="ItemSelectedSubmit",n.ItemSelected=t,this.datagridEvent.emit({value:n})}MultiSelectedApprovalReject(t){let n=new L;n.EventType="MultiItemSelectedAproveReject",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowApproval(t){let n=new L;n.EventType="ItemSelectedApproval",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowReject(t){let n=new L;n.EventType="ItemSelectedReject",n.ItemSelected=t,this.datagridEvent.emit({value:n})}buttonClicked(t,n){let i=new L;i.EventType="ButtonClicked",i.ButtonClicked=t,i.ItemSelected=n,this.datagridEvent.emit({value:i})}selectedRowHistory(t){let n=new L;n.EventType="ItemSelectedHistory",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowProjectSetUp(t){let n=new L;n.EventType="ItemSelectedProjectSetUp",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedProjectTrackingReport(t){let n=new L;n.EventType="ItemSelectedProjectTrackReport",n.ItemSelected=t,this.datagridEvent.emit({value:n})}SelectedClientReport(t){let n=new L;n.EventType="ItemSelectedClientReport",n.ItemSelected=t,this.datagridEvent.emit({value:n})}selectedRowRedirect(t,n){let i=new L;i.EventType="ItemRedirect",i.ItemSelected=n,i.header=t,this.datagridEvent.emit({value:i})}selectedRowForCopy(t){let n=new L;n.EventType="ItemSelectedForCopy",n.ItemSelected=t,this.datagridEvent.emit({value:n})}pageSizeChanged(t){let n=new L;n.EventType="PageSizeChanged",this.pageSize=parseInt(t)+0,n.PageSize=this.pageSize,this.datagridEvent.emit({value:n})}buttonNextPage(){let t=this.currentPageNumber+1,n=new L;n.EventType="PagingEvent",n.CurrentPageNumber=t,this.datagridEvent.emit({value:n})}buttonPreviousPage(){this.currentPageNumber=this.currentPageNumber-1;let t=new L;t.EventType="PagingEvent",t.CurrentPageNumber=this.currentPageNumber,this.datagridEvent.emit({value:t})}buttonFirstPage(){this.currentPageNumber=1;let t=new L;t.EventType="PagingEvent",t.CurrentPageNumber=this.currentPageNumber,this.datagridEvent.emit({value:t})}buttonLastPage(){this.currentPageNumber=this.totalPages;let t=new L;t.EventType="PagingEvent",t.CurrentPageNumber=this.currentPageNumber,this.datagridEvent.emit({value:t})}setMyStyles(t){return{height:"15px",width:"15px","margin-top":"4px",float:"right","background-color":t}}setInStyles(){return{height:"15px",width:"15px","margin-top":"4px",float:"right","background-color":"green"}}setOutStyles(){return{height:"18px",width:"16px",float:"right","background-color":"red"}}setNotSubmittedStyles(){return{height:"16px",width:"15px",float:"right","background-color":"rgb(231, 231, 63)"}}setSubmittedStyles(){return{height:"16px",width:"15px",float:"right","background-color":"rgb(0, 162, 255)"}}setApprovedStyles(){return{height:"16px",width:"15px",float:"right","background-color":"green"}}setRejectedStyles(){return{height:"16px",width:"15px",float:"right","background-color":"red"}}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["datagrid"]],inputs:{rows:"rows",columns:"columns",pageSize:"pageSize",ShowFooter:"ShowFooter",Total:"Total",TotalEstimated:"TotalEstimated",ShowStatus:"ShowStatus",ShowProjStatus:"ShowProjStatus",list:"list",Hours:"Hours",Taskwisehour:"Taskwisehour",Productivity:"Productivity"},outputs:{datagridEvent:"datagridEvent"},decls:11,vars:6,consts:[[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","",4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"click"],[1,"fa","fa-arrow-down"],[1,"fa","fa-arrow-up"],["class","smart-d-flex align-items-center","style","justify-content:space-between",4,"ngIf"],["style","margin-left: 20px;height: 16px;width: 15px;background-color: rgb(231, 231, 63);","tooltip","Pending","placement","bottom",4,"ngIf"],["style","margin-left: 20px;height: 16px; width: 15px;background-color: rgb(0, 162, 255)","tooltip","Submitted","placement","bottom",4,"ngIf"],["style","margin-left: 20px;height: 16px; width: 15px;background-color: green","tooltip","Approved","placement","bottom",4,"ngIf"],["style","margin-left: 20px;height: 16px;width: 15px;background-color: red;","tooltip","Rejected","placement","bottom",4,"ngIf"],[1,"pre-description",2,"text-align","left","white-space","pre-line"],[1,"table-responsive-custom"],[1,"table-responsive-custom",2,"width","100%"],[2,"text-decoration","underline","cursor","pointer",3,"click"],["class","text-truncate",3,"tooltip",4,"ngIf"],[1,"text-truncate",3,"tooltip"],["type","button",1,"btn","btn-primary",3,"click"],["style","float: left;",4,"ngFor","ngForOf"],[2,"float","left"],["aria-hidden","true","tooltip","Edit","placement","bottom",1,"fa","fa-pencil",2,"cursor","pointer","margin-left","10px",3,"click"],["aria-hidden","true","tooltip","Delete","placement","bottom",1,"fa","fa-trash",2,"cursor","pointer","margin-left","10px",3,"click"],["id","openCopyModalButton","data-toggle","modal","data-target","#CopyModal","class","fa fa-clone","aria-hidden","true","style","cursor: pointer;margin-left: 10px;","tooltip","Copy","placement","bottom",3,"click",4,"ngIf"],["id","openCopyModalButton","data-toggle","modal","data-target","#CopyModal","aria-hidden","true","tooltip","Copy","placement","bottom",1,"fa","fa-clone",2,"cursor","pointer","margin-left","10px",3,"click"],[1,"smart-d-flex","align-items-center",2,"justify-content","space-between"],["aria-hidden","true","tooltip","Edit","placement","bottom",1,"fa","fa-pencil",2,"cursor","pointer","margin-left","5px",3,"click"],["aria-hidden","true","tooltip","Delete","placement","bottom",1,"fa","fa-trash",2,"cursor","pointer","margin-left","5px",3,"click"],["style","margin-left: 8px;height: 16px; width: 15px;background-color: green","tooltip","Completed Task","placement","bottom",4,"ngIf"],["style","margin-left: 8px;height: 16px;width: 15px;background-color: red;","tooltip","Panding Task","placement","bottom",4,"ngIf"],["aria-hidden","true","tooltip","Fill Timesheet","placement","bottom",1,"fa","fa-user-plus",2,"cursor","pointer","margin-left","5px",3,"click"],["tooltip","Completed Task","placement","bottom",2,"margin-left","8px","height","16px","width","15px","background-color","green"],["tooltip","Panding Task","placement","bottom",2,"margin-left","8px","height","16px","width","15px","background-color","red"],["style","margin-left: 10px;height: 16px;width: 15px;background-color: rgb(231, 231, 63);margin-top: -20px;","tooltip","Pending","placement","bottom",4,"ngIf"],["style","margin-left: 12px;height: 16px; width: 15px;background-color: rgb(0, 162, 255)","tooltip","Submitted","placement","bottom",4,"ngIf"],["style","margin-left: 12px;height: 16px; width: 15px;background-color: green","tooltip","Approved","placement","bottom",4,"ngIf"],["style","margin-left: 10px;height: 16px;width: 15px;background-color: red;margin-top: -20px;","tooltip","Rejected","placement","bottom",4,"ngIf"],["aria-hidden","true","tooltip","Edit","placement","bottom",1,"fa","fa-pencil",2,"cursor","pointer","margin-left","30px",3,"click"],["tooltip","Pending","placement","bottom",2,"margin-left","10px","height","16px","width","15px","background-color","rgb(231, 231, 63)","margin-top","-20px"],["tooltip","Submitted","placement","bottom",2,"margin-left","12px","height","16px","width","15px","background-color","rgb(0, 162, 255)"],["tooltip","Approved","placement","bottom",2,"margin-left","12px","height","16px","width","15px","background-color","green"],["tooltip","Rejected","placement","bottom",2,"margin-left","10px","height","16px","width","15px","background-color","red","margin-top","-20px"],["aria-hidden","true","tooltip","View","placement","bottom",1,"fa","fa-eye",2,"cursor","pointer",3,"click"],["aria-hidden","true","tooltip","View task wise hours","placement","bottom",1,"fa","fa-clock-o",2,"cursor","pointer","margin-left","5px",3,"click"],["aria-hidden","true","tooltip","Excel","placement","bottom",1,"fa","fa-file-excel-o",2,"cursor","pointer","margin-left","5px",3,"click"],["tooltip","Pending","placement","bottom",2,"margin-left","20px","height","16px","width","15px","background-color","rgb(231, 231, 63)"],["tooltip","Submitted","placement","bottom",2,"margin-left","20px","height","16px","width","15px","background-color","rgb(0, 162, 255)"],["tooltip","Approved","placement","bottom",2,"margin-left","20px","height","16px","width","15px","background-color","green"],["tooltip","Rejected","placement","bottom",2,"margin-left","20px","height","16px","width","15px","background-color","red"],["aria-hidden","true","tooltip","Billable","placement","bottom",1,"fa","fa-check",2,"color","black"],["aria-hidden","true","tooltip","Non Billable","placement","bottom",1,"fa","fa-times",2,"color","black"],["aria-hidden","true","tooltip","Edit","placement","bottom",1,"fa","fa-pencil",2,"cursor","pointer",3,"click"],["aria-hidden","true","tooltip","History","placement","bottom",1,"fa","fa-history",2,"cursor","pointer",3,"click"],["aria-hidden","true","tooltip","Report","placement","bottom",1,"fa","fa-users",2,"cursor","pointer",3,"click"],["class","table-responsive-custom","style","width: 100%;",4,"ngIf"],["class","fa fa-pencil","aria-hidden","true","style","cursor: pointer;","tooltip","Edit","placement","bottom",3,"click",4,"ngIf"],["aria-hidden","true","tooltip","Delete","placement","bottom",1,"fa","fa-trash",2,"cursor","pointer",3,"click"],["aria-hidden","true","tooltip","Active","placement","bottom",1,"fa","fa-check",2,"color","green"],["aria-hidden","true","tooltip","In Active","placement","bottom",1,"fa","fa-times",2,"color","red"],["colspan","6",4,"ngIf"],[2,"text-align","end"],["colspan","6"],["colspan","5",4,"ngIf"],["colspan","5"],[1,"search_no_results"],[1,""],["type","button",1,"btn","ui-grid-pager-control",3,"click","disabled"],[1,"first-triangle"],[1,"first-bar"],[1,"first-triangle","prev-triangle"],[1,"last-triangle"],[1,"last-bar"],[1,"ui-grid-pager-row-count-picker",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"grid-pager-responsive-custom"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"table",1)(2,"thead")(3,"tr"),e.DNE(4,ui,2,1,"ng-container",2),e.k0s()(),e.j41(5,"tbody"),e.DNE(6,an,2,1,"tr",2)(7,hn,5,3,"tr",3)(8,un,8,4,"tr",3),e.k0s()()(),e.DNE(9,mn,3,0,"div",3)(10,fn,18,11,"div",4)),2&n&&(e.R7$(4),e.Y8G("ngForOf",i.columns),e.R7$(2),e.Y8G("ngForOf",i.rows),e.R7$(),e.Y8G("ngIf",0!==i.Total&&i.Hours),e.R7$(),e.Y8G("ngIf",0!==i.Total&&i.Taskwisehour),e.R7$(),e.Y8G("ngIf",i.rows&&0==(null==i.rows?null:i.rows.length)),e.R7$(),e.Y8G("ngIf",1==i.Productivity))},dependencies:[u.Sq,u.bT,u.B3,c.xH,c.y7,c.wz,c.BC,c.vS,E.dg,u.vh],styles:[".last-triangle[_ngcontent-%COMP%]{width:0;height:0;border-style:solid;border-width:5px 0 5px 8.7px;border-color:transparent transparent transparent #4d4d4d;margin-left:-1px}.ui-grid-pager-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:25px;min-width:26px;display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-webkit-user-select:none;user-select:none;color:#eee;background-color:#f3f3f3;border-color:#ccc}.last-bar[_ngcontent-%COMP%]{width:10px;border-left:2px solid #4d4d4d;margin-top:-6px;height:12px;margin-left:1px}.prev-triangle[_ngcontent-%COMP%]{margin-left:0}.first-triangle[_ngcontent-%COMP%]{width:0;height:0;border-style:solid;border-width:5px 8.7px 5px 0;border-color:transparent #4d4d4d transparent transparent;margin-left:2px}.first-bar[_ngcontent-%COMP%]{width:10px;border-left:2px solid #4d4d4d;margin-top:-6px;height:12px;margin-left:-3px}*[_ngcontent-%COMP%]{box-sizing:border-box}.ui-grid-pager-control[_ngcontent-%COMP%]{height:25px;min-width:26px;display:inline-block;margin:2px;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-webkit-user-select:none;user-select:none;color:#eee;background-color:#f3f3f3;border-color:#ccc}.ui-grid-pager-row-count-picker[_ngcontent-%COMP%]{display:block;width:100%;height:34px;font-size:14px;line-height:1.42857143;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;box-shadow:inset 0 1px 1px #00000013;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;height:30px;padding:0 10px;font-size:12px;line-height:1.5;border-radius:3px;height:26px;width:67px;display:inline}.table-responsive-custom[_ngcontent-%COMP%]{display:none;visibility:hidden}.grid-pager-responsive-custom[_ngcontent-%COMP%]{visibility:visible;float:right}.grid-pager-break[_ngcontent-%COMP%]{visibility:hidden}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{border:1px solid #ccc;padding:5px}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding-left:0%}td[_ngcontent-%COMP%]   span.table-responsive-custom[_ngcontent-%COMP%]{visibility:visible;display:inline}td[_ngcontent-%COMP%]:before{position:absolute;top:6px;left:6px;padding-right:100px;white-space:nowrap}.grid-pager-responsive-custom[_ngcontent-%COMP%]{visibility:hidden}.grid-pager-break[_ngcontent-%COMP%]{visibility:visible}}"]});static#i=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var f=F(7813),j=F(6354);let p=(()=>{class s{static#e=this.apiUrl="https://localhost:44388/"}return s})();var S=F(2490);const Xe={headers:new m.Lr({"Content-Type":"application/json"})};let be=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n}login(t){var n=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Login/Login",n,Xe).pipe((0,j.T)(i=>i))}logout(){this.cookieService.delete("currentUser"),this.cookieService.deleteAll()}IsUndermaintenance(){return this.http.post(p.apiUrl+"api/Login/UnderMaintenance",Xe).pipe((0,j.T)(t=>t))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})(),An=(()=>{class s{constructor(t,n,i){this.router=t,this.loginservice=n,this.cookieService=i}ngOnInit(){this.IsUndermaintenance(),this.router.events.subscribe(t=>{t instanceof f.wF&&window.scrollTo(0,0)})}IsUndermaintenance(){this.loginservice.IsUndermaintenance().subscribe(t=>{1==t&&this.router.navigate(["/Undermaintenance"])})}removeAllCookies(){this.cookieService.delete("currentUser"),this.cookieService.deleteAll()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(f.Ix),e.rXU(be),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["body"]],features:[e.Jv_([be])],decls:1,vars:0,template:function(n,i){1&n&&e.nrm(0,"router-outlet")},dependencies:[f.n3],encapsulation:2})}return s})();const _n=[{name:"Monthly Hours",url:"/SmartDesk/MonthlyTimeSheetList",icon:"icon-calculator"},{name:"Masters",url:"/Master",iconComponent:"icon-note",children:[{name:"Projects",url:"/Master/ProjectList",icon:"icon-book-open"},{name:"Clients",url:"/Master/ClientList",icon:"icon-user"},{name:"Core Skills",url:"/Master/CoreSkillList",icon:"icon-chart"},{name:"Resources",url:"/Master/EmployeeList",icon:"icon-people"},{name:"Environment",url:"/Environment",icon:"icon-note",class:"third-group",children:[{name:"Front Ends",url:"/Environment/FrontEndList",icon:"icon-screen-desktop"},{name:"Back Ends",url:"/Environment/BackEndList",icon:"icon-layers"},{name:"Third Party APIs",url:"/Environment/ThiedPartyAPI",icon:"icon-note"}]}]},{name:"TimeSheet",url:"/TimeSheet",icon:"icon-calendar",children:[{name:"Tasks",url:"/TimeSheet/Tasklist",icon:"icon-notebook"}]},{name:"Settings",url:"/Settings",icon:"icon-settings",children:[{name:"Public Holidays",url:"/Settings/PublicHolidaysList",icon:"icon-present"},{name:"Financial Year",url:"/Settings/FinancialYearList",icon:"icon-calendar"},{name:"Targeted Hours",url:"/Settings/TargetedHours",icon:"icon-calendar"}]},{name:"Reports",url:"/Reports",icon:"icon-notebook",children:[{name:"Resources Productivity",url:"/Reports/ResourcesProductivityReport",icon:"icon-graph"},{name:"Annual Billable Hours",url:"/Reports/YearlyResourceHours",icon:"icon-grid"},{name:"Monthly Resource Hours",url:"/Reports/MonthlyResourceHours",icon:"icon-calculator"},{name:"Resource Availability",url:"/Reports/AvailableResource",icon:"icon-user"},{name:"Project Resource",url:"/Reports/ResourceProjectTask",icon:"icon-organization"},{name:"User TimeSheet",url:"/Reports/UserTimeSheetReport",icon:"icon-people"}]}],yn=[{name:"Dashboard",url:"/SmartDesk/Dashboard",icon:"icon-pie-chart"},{name:"Monthly Hours",url:"/SmartDesk/MonthlyTimeSheetList",icon:"icon-calculator"},{name:"Sales",url:"/SmartDesk/SalesList",icon:"icon-basket-loaded"},{name:"Masters",url:"/Master",icon:"icon-note",children:[{name:"Projects",url:"/Master/ProjectList",icon:"icon-book-open"},{name:"Clients",url:"/Master/ClientList",icon:"icon-user"},{name:"Resources",url:"/Master/EmployeeList",icon:"icon-people"}]},{name:"TimeSheet",url:"/TimeSheet",icon:"icon-speedometer",children:[{name:"Tasks",url:"/TimeSheet/Tasklist",icon:"icon-notebook"}]},{name:"Settings",url:"/Settings",icon:"icon-settings",children:[{name:"Financial Year",url:"/Settings/FinancialYearList",icon:"icon-calendar"}]},{name:"Reports",url:"/Reports",icon:"icon-notebook",children:[{name:"Resources Productivity",url:"/Reports/ResourcesProductivityReport",icon:"icon-graph"},{name:"Annual Billable Hours",url:"/Reports/AnnualBillableHours",icon:"icon-calculator"},{name:"Monthly Resource Hours",url:"/Reports/MonthlyResourceHours",icon:"icon-calculator"},{name:"Resource Availability",url:"/Reports/AvailableResource",icon:"icon-user"},{name:"User TimeSheet",url:"/Reports/UserTimeSheetReport",icon:"icon-people"}]}],Sn=[{name:"Dashboard",url:"/SmartDesk/Dashboard",icon:"icon-pie-chart"},{name:"Monthly Hours",url:"/SmartDesk/MonthlyTimeSheetList",icon:"icon-calculator"},{name:"Sales",url:"/SmartDesk/SalesList",icon:"icon-basket-loaded"},{name:"Masters",url:"/Master",icon:"icon-note",children:[{name:"Projects",url:"/Master/ProjectList",icon:"icon-book-open"},{name:"Clients",url:"/Master/ClientList",icon:"icon-user"},{name:"Core Skills",url:"/Master/CoreSkillList",icon:"icon-chart"},{name:"Task",url:"/Master/Tasklist",icon:"icon-notebook"},{name:"Resources",url:"/Master/EmployeeList",icon:"icon-people"},{name:"Environment",url:"/Environment",icon:"icon-note",class:"third-group",children:[{name:"Front Ends",url:"/Environment/FrontEndList",icon:"icon-screen-desktop"},{name:"Back Ends",url:"/Environment/BackEndList",icon:"icon-layers"},{name:"Third Party APIs",url:"/Environment/ThiedPartyAPI",icon:"icon-note"}]}]},{name:"Settings",url:"/Settings",icon:"icon-settings",children:[{name:"Public Holidays",url:"/Settings/PublicHolidaysList",icon:"icon-present"},{name:"Financial Year",url:"/Settings/FinancialYearList",icon:"icon-calendar"},{name:"Targeted Hours",url:"/Settings/TargetedHours",icon:"icon-calendar"}]},{name:"Reports",url:"/Reports",icon:"icon-notebook",children:[{name:"Resources Productivity",url:"/Reports/ResourcesProductivityReport",icon:"icon-graph"},{name:"Annual Billable Hours",url:"/Reports/AnnualBillableHours",icon:"icon-calculator"},{name:"Monthly Resource Hours",url:"/Reports/MonthlyResourceHours",icon:"icon-calculator"},{name:"Resource Availability",url:"/Reports/AvailableResource",icon:"icon-user"},{name:"Project Resource",url:"/Reports/ResourceProjectTask",icon:"icon-organization"},{name:"User TimeSheet",url:"/Reports/UserTimeSheetReport",icon:"icon-people"}]}],Dn=[{name:"Masters",url:"/Master",icon:"icon-note",children:[{name:"Projects",url:"/Master/ProjectList",icon:"icon-book-open"}]}],Me=[{name:"TimeSheet",url:"/TimeSheet",iconComponent:"icon-calendar",children:[{name:"Tasks",url:"/TimeSheet/Tasklist",icon:"icon-notebook"},{name:"Manage",url:"/TimeSheet/Manage",icon:"icon-user"}]},{name:"Reports",url:"/Reports",icon:"icon-layers",children:[{name:"User TimeSheet",url:"/Reports/UserTimeSheetReport",icon:"icon-people"},{name:"Annual Billable Hours",url:"/Reports/YearlyResourceHours",icon:"icon-grid"}]}],jn=[{name:"TimeSheet",url:"/TimeSheet",icon:"icon-note",children:[{name:"Tasks",url:"/TimeSheet/Tasklist",icon:"icon-notebook"},{name:"Manage",url:"/TimeSheet/Manage",icon:"icon-user"}]},{name:"Reports",url:"/Reports",icon:"icon-notebook",children:[{name:"User TimeSheet",url:"/Reports/UserTimeSheetReport",icon:"icon-people"},{name:"Annual Billable Hours",url:"/Reports/YearlyResourceHours",icon:"icon-grid"}]}],bn=[{name:"TimeSheet",url:"/TimeSheet",icon:"icon-calendar",children:[{name:"Tasks",url:"/TimeSheet/Tasklist",icon:"icon-notebook"},{name:"Manage",url:"/TimeSheet/Manage",icon:"icon-user"}]},{name:"Reports",url:"/Reports",icon:"icon-layers",children:[{name:"User TimeSheet",url:"/Reports/UserTimeSheetReport",icon:"icon-people"},{name:"Annual Billable Hours",url:"/Reports/YearlyResourceHours",icon:"icon-grid"}]}];var N=function(s){return s[s.CEO=1]="CEO",s[s.PM=2]="PM",s[s.PL=3]="PL",s[s.TL=4]="TL",s[s.BDM=5]="BDM",s[s.Developer=6]="Developer",s[s.Trainee=7]="Trainee",s[s.Designer=8]="Designer",s[s.QA=9]="QA",s[s.SrDeveloper=10]="SrDeveloper",s[s.SalesSupportExecutive=11]="SalesSupportExecutive",s[s.BusinessAnalyst=12]="BusinessAnalyst",s[s.ITSupport=13]="ITSupport",s[s.BDE=14]="BDE",s}(N||{}),qe=function(s){return s[s.Read=1]="Read",s[s.All=2]="All",s}(qe||{}),Ke=function(s){return s[s.New=1]="New",s[s.InProgress=2]="InProgress",s[s.Completed=3]="Completed",s[s.ReOpen=4]="ReOpen",s[s.Hold=5]="Hold",s[s.Cancel=6]="Cancel",s}(Ke||{}),We=function(s){return s[s.Local=1]="Local",s[s.Stage=2]="Stage",s[s.Production=3]="Production",s}(We||{}),Ce=function(s){return s[s.Admin=1]="Admin",s[s.User=2]="User",s[s.Sales=3]="Sales",s}(Ce||{});var Re=F(5909),ke=F(1870),G=F(1424),Ze=F(8306);const Mn=()=>[],Cn=()=>({icon:!1}),kn=()=>["/SmartDesk/Dashboard"],In=()=>["active"],vn=()=>["/SmartDesk/ChangePassword"];function En(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",31)(1,"a",32),e.nrm(2,"i",33),e.EFF(3," Change Password"),e.k0s(),e.j41(4,"a",34),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.logout())}),e.nrm(5,"i",35),e.EFF(6," Logout"),e.k0s()()}2&s&&(e.R7$(),e.Y8G("routerLinkActive",e.lJ4(2,In))("routerLink",e.lJ4(3,vn)))}function Fn(s,l){1&s&&(e.j41(0,"c-sidebar-footer",28),e.nrm(1,"button",36),e.k0s())}let ie=(()=>{class s{constructor(t,n,i){this.router=t,this.cookieService=n,this.authService=i,this.sidebarMinimized=!0,this.element=document.body,this.designationEnum=N,this.roleEnum=Ce,this.changes=new MutationObserver(r=>{this.sidebarMinimized=document.body.classList.contains("sidebar-minimized")}),this.changes.observe(this.element,{attributes:!0}),this.currentUser=JSON.parse(this.cookieService.get("currentUser")),this.currentUser&&(this.Loader=!1,this.UserName=this.currentUser.firstName+" "+this.currentUser.lastName,this.NavItems=this.roleEnum.User==this.currentUser.roleID?Me:this.designationEnum.TL==this.currentUser.designationID?bn:this.designationEnum.CEO==this.currentUser.designationID?Sn:this.designationEnum.BDM==this.currentUser.designationID?yn:this.designationEnum.BDE==this.currentUser.designationID?jn:this.designationEnum.ITSupport==this.currentUser.designationID?Dn:this.designationEnum.PM==this.currentUser.designationID?_n:Me),this.CurrentYear=(new Date).getFullYear()}logout(){"undefined"!=this.cookieService.get("isMicrosoftLogin")&&"true"==this.cookieService.get("isMicrosoftLogin")&&this.authService.logoutRedirect({postLogoutRedirectUri:"https://smartdesk.tretainfotech.com"}),this.cookieService.delete("currentUser"),this.cookieService.delete("ProjectGitHistory"),this.cookieService.deleteAll(),setTimeout(()=>{this.router.navigate(["/login"]).then()},1e3)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(f.Ix),e.rXU(S.O),e.rXU(Re.dl))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-dashboard"]],decls:40,vars:12,consts:[["sidebar1","cSidebar"],["scrollbar","ngScrollbar"],["overflow",""],[1,"header-customclass","justify-content-start"],["href","#",1,"navbar-brand"],["src","assets/img/brand/smartDesk-logo.png","width","auto","height","auto","alt","SmartDesk Logo",1,"navbar-brand-full","ng-star-inserted"],["cSidebarToggle","sidebar1","cHeaderToggler","","toggle","visible","type","button",1,"btn"],["aria-hidden","true",1,"fa","fa-bars"],[1,"nav","navbar-nav","navbar-custom"],["dropdown","","placement","bottom right",1,"nav-item","dropdown","username-dropdown"],["href","#","role","button","aria-haspopup","true","aria-expanded","false","dropdownToggle","",1,"nav-link",3,"click"],[1,"fa","fa","fa-user-circle","mx-1"],[1,"username"],[1,"fa","fa-angle-down","m-2"],["class","dropdown-menu dropdown-menu-right dropdown-content","aria-labelledby","simple-dropdown",4,"dropdownMenu"],[1,"app-body"],["id","loader",3,"hidden"],[1,"blockUI","blockOverlay","loader-main"],[1,"blockUI","blockMsg","blockElement","loader-body"],[1,"loading-message","loading-message-boxed"],["src","assets/loading-spinner-grey.gif"],["colorScheme","dark","id","sidebar1","visible","",1,"d-print-none","sidebar","sidebar-fixed","border-end","sidebar-blue"],[1,"border-bottom"],[3,"routerLink"],["cIcon","","height","32","name","logo","title","CoreUI Logo",1,"sidebar-brand-full"],["cIcon","","height","32","name","signet","title","CoreUI Logo",1,"sidebar-brand-narrow"],["pointerEventsMethod","scrollbar","visibility","hover",1,"overflow"],["dropdownMode","close","compact","",3,"navItems"],["cSidebarToggle","sidebar1","toggle","unfoldable",1,"border-top","d-none","d-lg-flex",2,"cursor","pointer"],[1,"main"],[1,"container-fluid","animated-margin"],["aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right","dropdown-content"],[1,"dropdown-item",3,"routerLinkActive","routerLink"],[1,"fa","fa-lock"],[1,"dropdown-item",3,"click"],[1,"fa","fa-sign-out"],["cSidebarToggler",""]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"c-header",3)(1,"a",4),e.nrm(2,"img",5),e.k0s(),e.j41(3,"button",6),e.nrm(4,"i",7),e.k0s(),e.j41(5,"ul",8)(6,"li",9)(7,"a",10),e.bIt("click",function(){return e.eBV(o),e.Njj(!1)}),e.nrm(8,"i",11),e.j41(9,"span",12),e.EFF(10),e.k0s(),e.nrm(11,"i",13),e.k0s(),e.DNE(12,En,7,4,"div",14),e.k0s()()(),e.j41(13,"div",15)(14,"div",16),e.nrm(15,"div",17),e.j41(16,"div",18)(17,"div",19),e.nrm(18,"img",20),e.j41(19,"span"),e.EFF(20,"\xa0\xa0LOADING..."),e.k0s()()()(),e.j41(21,"c-sidebar",21,0)(23,"c-sidebar-header",22)(24,"c-sidebar-brand",23),e.qSk(),e.nrm(25,"svg",24)(26,"svg",25),e.k0s()(),e.joV(),e.j41(27,"ng-scrollbar",26,1),e.nrm(29,"c-sidebar-nav",27,2),e.k0s(),e.DNE(31,Fn,2,0,"c-sidebar-footer",28),e.k0s(),e.j41(32,"main",29)(33,"div",30),e.nrm(34,"router-outlet"),e.k0s()()(),e.j41(35,"c-footer")(36,"span")(37,"a",23),e.EFF(38,"SmartDesk"),e.k0s(),e.EFF(39),e.k0s()()}if(2&n){const o=e.sdS(22);e.R7$(10),e.JRh(i.UserName),e.R7$(4),e.Y8G("hidden",!i.Loader),e.R7$(10),e.Y8G("routerLink",e.lJ4(9,Mn)),e.R7$(),e.HbH(e.lJ4(10,Cn)),e.R7$(4),e.Y8G("navItems",i.NavItems),e.R7$(2),e.vxM(31,o.narrow?-1:31),e.R7$(6),e.Y8G("routerLink",e.lJ4(11,kn)),e.R7$(2),e.SpI(" \xa9 ",i.CurrentYear," Treta Infotech Pvt Ltd.")}},dependencies:[f.n3,f.Wk,f.wQ,ke.hs,ke.UL,ke.Kk,G.kc$,G.kvK,G.jgS,G.pjP,G.VCm,G.fML,G.lZj,G.B7R,G.n5m,Ze.Yh],styles:[".loader-body[_ngcontent-%COMP%]{z-index:9999;position:fixed;padding:0;margin:0 auto;width:30%;top:40%;left:0;text-align:center;color:#000;border:0px none;cursor:wait;right:0}.loader-main[_ngcontent-%COMP%]{z-index:9997;border:medium none;margin:0;padding:0;width:100%;height:100%;top:0;left:0;background-color:#555;opacity:.2;cursor:wait;position:fixed}textarea[_ngcontent-%COMP%]{resize:none}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ddd}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%]{background-color:#3e8e41}.header-customclass[_ngcontent-%COMP%]{z-index:999;position:sticky;background-color:#e2f3ff;border-bottom:1px solid #c8ced3;box-shadow:0 .5rem 1rem #00000026;transition:margin-left .25s,margin-right .25s,width .25s,flex .25s}.navbar-custom[_ngcontent-%COMP%]{margin-left:auto}.username-dropdown[_ngcontent-%COMP%]{color:#73818f;font-size:1.15rem}"]})}return s})();var I=F(8256);let et=(()=>{class s{constructor(t){this.http=t}logMessage(t){const n=(new Date).toISOString();return this.http.post(`${p.apiUrl}api/Log/LogMessage`,`"${t} : ${n} "`,{headers:{"Content-Type":"application/json",Accept:"*/*"}})}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();const tt=s=>({"has-error":s});function wn(s,l){1&s&&(e.j41(0,"div",33),e.EFF(1,"Email is required"),e.k0s())}function Pn(s,l){1&s&&(e.j41(0,"div",33),e.EFF(1,"Email format is invalid"),e.k0s())}function Rn(s,l){1&s&&(e.j41(0,"div",33),e.EFF(1,"Password is required"),e.k0s())}function Gn(s,l){1&s&&e.nrm(0,"img",34)}let it=(()=>{class s{constructor(t,n,i,o,r,a,d){this.router=t,this.route=n,this.userService=i,this.cookieService=o,this.authService=r,this.toastyService=a,this.logService=d,this.login={email:"",password:"",isMicrosoftLogin:!1},this.loading=!1,this.roleEnum=Ce,this.designation=N,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.login={email:"",password:"",isMicrosoftLogin:!1}}Userlogin(t=""){this.loading=!0,!0===this.login.isMicrosoftLogin&&(this.login.email=t),this.logService.logMessage("From Angular : API Name : api/Login/Login : Making Request At Time :").subscribe(i=>{},i=>{}),this.userService.login(this.login).subscribe(i=>{this.logService.logMessage("From Angular : API Name : api/Login/Login : Receive a Response At Time :").subscribe(r=>{},r=>{}),1==i.returnval?null!=i.isAuthenticate&&null!=i.isAuthenticate&&0!=i.isAuthenticate&&null!=i.authtoken&&null!=i.authtoken?(this.cookieService.set("currentUser",JSON.stringify(i)),this.roleEnum.User==i.roleID||this.designation.BDE==i.designationID||this.designation.BusinessAnalyst==i.designationID?this.returnUrl="/TimeSheet/Tasklist":(this.designation.PL==i.designationID||this.designation.PM==i.designationID)&&(this.returnUrl="/SmartDesk/MonthlyTimeSheetList"),this.router.navigateByUrl(this.returnUrl)):(this.toastyService.error("Please Enter valid Email or Password.","Login"),this.clearform()):(this.toastyService.warning("Please Enter valid Email or Password.","Login"),this.clearform()),this.loading=!1},i=>{this.loading=!1})}ngOnInit(){this.userService.logout(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/SmartDesk/Dashboard"}clearform(){document}MSLoginSubmit(){this.authService.acquireTokenPopup({scopes:["User.ReadWrite"],prompt:"select_account"}).subscribe({next:n=>{this.cookieService.set("isMicrosoftLogin","true"),this.login.isMicrosoftLogin=!0,this.Userlogin(n.account.username)},error:n=>console.log(n)})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(f.Ix),e.rXU(f.nX),e.rXU(be),e.rXU(S.O),e.rXU(Re.dl),e.rXU(I.tw),e.rXU(et))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],features:[e.Jv_([be])],decls:41,vars:13,consts:[["f","ngForm"],["email","ngModel"],["password","ngModel"],["href",e.wXG`/assets/TosterCss/style-default.css`,"rel","stylesheet"],["href",e.wXG`/assets/TosterCss/style-bootstrap.css`,"rel","stylesheet"],["href",e.wXG`/assets/TosterCss/style-material.css`,"rel","stylesheet"],[1,"login-overlay","app","flex-row","align-items-center","login-bg-wrap","d-flex"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-3","col-md-12","col-sm-12"],[1,"fxt-header"],["src","assets/img/brand/smartDesk-logo.png","alt","SmartDesk Logo",1,""],[1,"col-lg-6"],[1,"fxt-content"],[1,"mb-4","fw-bold",2,"text-align","center"],[1,"fxt-form"],["name","form","novalidate","",1,"login-form",3,"ngSubmit"],[1,"row"],[1,"input-group","mb-3","col-md-12",3,"ngClass"],[1,"input-group-prepend"],[1,"input-group-text","py-3"],[1,"icon-user"],["id","email","placeholder","Email","type","text","name","email","required","","pattern","^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$","maxlength","50",1,"form-control","col-md-12","login-control",3,"ngModelChange","ngModel"],["class","col-md-12 help-block error-msg",4,"ngIf"],[1,"col-md-12","input-group","mb-4",3,"ngClass"],[1,"icon-lock"],["type","password","placeholder","Password","name","password","required","","maxlength","14",1,"col-md-12","form-control","login-control",3,"ngModelChange","ngModel"],[1,"col-lg-4"],["type","submit",1,"btn","btn-primary","btn-login",3,"disabled"],["aria-hidden","true",1,"fa","fa-sign-in","fa-lg",2,"margin-right","5px"],["class","ml-3","src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],[1,"col-6","m-auto"],["type","button",1,"btn","btn-link","px-0"],[1,"col-md-12","help-block","error-msg"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",1,"ml-3"]],template:function(n,i){if(1&n){const o=e.RV6();e.nrm(0,"link",3)(1,"link",4)(2,"link",5),e.j41(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10),e.nrm(8,"img",11),e.k0s()(),e.j41(9,"div",12)(10,"div",13)(11,"h2",14),e.EFF(12,"LOGIN INTO YOUR ACCOUNT"),e.k0s(),e.j41(13,"div",15)(14,"form",16,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(15);return e.Njj(a.form.valid&&i.Userlogin())}),e.j41(16,"div",17)(17,"div",18)(18,"div",19)(19,"span",20),e.nrm(20,"i",21),e.k0s()(),e.j41(21,"input",22,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.login.email,a)||(i.login.email=a),e.Njj(a)}),e.k0s(),e.DNE(23,wn,2,0,"div",23)(24,Pn,2,0,"div",23),e.k0s(),e.j41(25,"div",24)(26,"div",19)(27,"span",20),e.nrm(28,"i",25),e.k0s()(),e.j41(29,"input",26,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.login.password,a)||(i.login.password=a),e.Njj(a)}),e.k0s(),e.DNE(31,Rn,2,0,"div",23),e.k0s()(),e.j41(32,"div",17)(33,"div",27)(34,"button",28),e.nrm(35,"i",29),e.EFF(36," Login "),e.DNE(37,Gn,1,0,"img",30),e.k0s()(),e.j41(38,"div",31)(39,"button",32),e.EFF(40,"Forgot password?"),e.k0s()()()()()()()()()()}if(2&n){const o=e.sdS(15),r=e.sdS(22),a=e.sdS(30);e.R7$(17),e.Y8G("ngClass",e.eq3(9,tt,o.submitted&&!r.valid)),e.R7$(4),e.R50("ngModel",i.login.email),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid&&r.errors&&r.errors.required),e.R7$(),e.Y8G("ngIf",o.submitted&&r.errors&&r.errors.pattern),e.R7$(),e.Y8G("ngClass",e.eq3(11,tt,o.submitted&&!a.valid)),e.R7$(4),e.R50("ngModel",i.login.password),e.R7$(2),e.Y8G("ngIf",o.submitted&&!a.valid),e.R7$(3),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.YU,u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.R_,c.vS,c.cV],styles:[".error-msg[_ngcontent-%COMP%]{color:red;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}.loader-body[_ngcontent-%COMP%]{z-index:9999;position:fixed;padding:0;margin:0 auto;width:30%;top:40%;left:0;text-align:center;color:#000;border:0px none;cursor:wait;right:0}.loader-main[_ngcontent-%COMP%]{z-index:9997;border:medium none;margin:0;padding:0;width:100%;height:100%;top:0;left:0;background-color:#555;opacity:.2;cursor:wait;position:fixed}"]})}return s})();class C{}var he=F(1413);let R=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.refreshFromChid=new he.B,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getProjectDetails(){return this.http.get(p.apiUrl+"api/Project/GetProjectDetails?CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}getProjectByID(t){return this.http.get(p.apiUrl+"api/Project/GetProjectByID?ProjectID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}saveProject(t,n){const i=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Project/SaveUpdateProject?EmployeeID="+n+"&CompanyID="+this.currentUser.companyID,i,{headers:this.headers}).pipe((0,j.T)(o=>o))}deleteProject(t,n,i){return this.http.get(p.apiUrl+"/api/Project/DeleteProject?ProjectID="+t+"&KeepDelete="+n+"&EmployeeID="+i,{headers:this.headers}).map(o=>o)}getProjectHistoryByID(t){return this.http.get(p.apiUrl+"api/Project/GetProjectHistoryByID?ProjectHistoryID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}CheckProjectExists(t,n){return this.http.get(p.apiUrl+"api/Project/CheckProjectExists?ProjectID="+n+"&Name="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(i=>i)}GetViewProjectByID(t){return this.http.get(p.apiUrl+"api/Project/GetViewProjectByID?ProjectID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}SaveProjectGit(t,n,i){const o=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Project/SaveProjectGit?ProjectID="+i+"&EmployeeID="+n,o,{headers:this.headers}).pipe((0,j.T)(r=>r))}GetProjectSetUpDetails(t){return this.http.get(p.apiUrl+"api/Project/GetProjectSetupDetails?ProjectID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}GetProjectGitPermissionByID(t,n){return this.http.get(p.apiUrl+"api/Project/GetProjectGitPermissionByID?ProjectID="+t+"&ProjectGitID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}saveProjectGitPermissionDetails(t,n,i,o){const r=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Project/SaveProjectGitPermissionDetails?IsGitChange="+n+"&IsPermissionChange="+i+"&EmployeeID="+o,r,{headers:this.headers}).pipe((0,j.T)(a=>a))}GetEnvironmentList(){return this.http.get(p.apiUrl+"api/Project/GetEnvironmentList?CompanyID="+this.currentUser.companyID,{headers:this.headers})}SaveProjectEnvironment(t,n){return this.http.post(p.apiUrl+"api/Project/SaveProjectEnvironment?EmployeeID="+this.currentUser.employeeID+"&IsChange="+n,JSON.stringify(t),{headers:this.headers})}GetProjectEnvironment(t){return this.http.get(p.apiUrl+"api/Project/GetProjectEnvironment?ProjectID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers})}SaveProjectEstimationDocument(t,n,i){var o=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Project/SaveProjectEstimationDocument?ProjectID="+i+"&EmployeeID="+n,o,{headers:this.headers})}SendEmail(t,n){return this.http.post(p.apiUrl+"api/Project/SendEmail?CompanyID="+this.currentUser.companyID+"&ProjectID="+n,JSON.stringify(t),{headers:this.headers})}GetProjectIsDoneStatus(t){return this.http.get(p.apiUrl+"api/Project/GetProjectIsDoneStatus?ProjectID="+t,{headers:this.headers})}GetProjectGitList(t){return this.http.get(p.apiUrl+"api/Project/GetProjectGitList?ProjectID="+t,{headers:this.headers})}GetProjectGitHistory(t,n){return this.http.get(p.apiUrl+"api/Project/GetProjectGitHistory?ProjectID="+t+"&ProjectGitID="+n,{headers:this.headers})}CheckProjectGitExists(t,n,i){return this.http.get(p.apiUrl+"api/Project/CheckProjectGitExists?Name="+t+"&ProjectID="+n+"&ProjectgitID="+i,{headers:this.headers}).map(o=>o)}SendGitPermissionEmail(t,n){return this.http.post(p.apiUrl+"api/Project/SendGitPermissionEmail?CompanyID="+this.currentUser.companyID+"&ProjectID="+n,JSON.stringify(t),{headers:this.headers})}SendDatabaseCredentials(t){return this.http.post(p.apiUrl+"api/Project/SendDatabaseCredentials",JSON.stringify(t),{headers:this.headers})}GetDeploymentMasterList(t){return this.http.get(p.apiUrl+"api/Project/GetDeploymentMasterList?ProjectID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers})}SaveProjectDeploymentDetails(t,n){return this.http.post(p.apiUrl+"api/Project/SaveProjectDeploymentDetails?IsChanged="+n,JSON.stringify(t),{headers:this.headers})}GetDeploymentServerDetails(t,n){return this.http.get(p.apiUrl+"api/Project/GetDeploymentServerDetails?ProjectID="+t+"&DeploymentMasterID="+n,{headers:this.headers})}SendItSupportDevelopmentEmail(t){return this.http.post(p.apiUrl+"api/Project/SendItSupportDevelopmentEmail?CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}SendDeploymentCredentials(t){return this.http.post(p.apiUrl+"api/Project/SendDeploymentCredentials?CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}SendFirwallBypassURLEmail(t){return this.http.post(p.apiUrl+"api/Project/SendFirwallBypassURLEmail?CompanyID="+this.currentUser.companyID+"&LoginUserID="+this.currentUser.employeeID,JSON.stringify(t),{headers:this.headers})}saveAdditionalWork(t,n){const i=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Project/SaveUpdateAdditionalWork?employeeID="+n,i,{headers:this.headers}).pipe((0,j.T)(o=>o))}GetAdditionalWorkDetails(t){return this.http.get(p.apiUrl+"api/Project/GetAdditionalWorkDetails?ProjectID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}DeleteAddtionalWork(t,n){return this.http.get(p.apiUrl+"api/Project/DeleteAddtionalWork?projectID="+n+"&addtionalWorkID="+t,{headers:this.headers}).pipe((0,j.T)(i=>i))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();class nt{}class Ie extends C{}class Yn extends C{}class ot{constructor(){this.projectGitID=0,this.name="",this.isDone=0}}class st{constructor(){this.id=0,this.isDone=0}}class Hn{}class Nn{}class Ln{}class Bn{}class Un{}class Ge{constructor(){this.id=0,this.host="",this.userName="",this.password="",this.port=""}}class Ye{constructor(){this.serverName=""}}class Vn{constructor(){this.hostName=""}}class He{constructor(){this.id=0}}class xn{}class rt{constructor(){this.ProjectID=0,this.LocalEnvironment=!1,this.StageEnvironment=!1,this.ProductionEnvironment=!1,this.Comment="",this.EncProjectID=""}}class at{constructor(){this.ProjectID=0,this.LocalEnvironmentFrontEnd=!1,this.LocalEnvironmentBackEnd=!1,this.LocalEnvironmentHosting=!1,this.StageEnvironmentFrontEnd=!1,this.StageEnvironmentBackEnd=!1,this.StageEnvironmentHosting=!1,this.ProductionEnvironmentFrontEnd=!1,this.ProductionEnvironmentBackend=!1,this.ProductionEnvironmentHosting=!1,this.ToUsers="",this.AdditionalUser="",this.Comment="",this.EncProjectID=""}}class Qn{constructor(){this.ProjectID=0,this.DeploymentMasterID=0,this.DeveloperName="",this.AdditionalUser="",this.Comment="",this.EncProjectID=""}}class On{}class de{}class lt extends C{}F(1653),F(2239);var k=F(4326),D=F(6554),w=F(7482);function Jn(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",30)(1,"button",31),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showProjectSetup())}),e.nrm(2,"i",32),e.k0s()()}}function $n(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function zn(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function Xn(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}function qn(s,l){if(1&s&&(e.j41(0,"div")(1,"div",34),e.nrm(2,"div",35),e.j41(3,"div",36),e.EFF(4),e.k0s()()()),2&s){const t=l.$implicit,n=e.XpG();e.R7$(),e.FS9("tooltip",t.name),e.R7$(),e.Y8G("ngStyle",n.setMyStyles(t.color)),e.R7$(2),e.JRh(t.name)}}let ct=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.router=i,this.spinner=o,this.projectService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Project List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.TechnologyList=[],this.Technology=0,this.ProjectTypeList=[],this.ProjectType=0,this.SourceList=[],this.Source=0,this.ProjectStatusList=[],this.ProjectStatus=0,this.ClientList=[],this.ClientID=0,this.filterModel=new Ie,this.selectedItems=[],this.dropdownSettings={},this.dpConfig=new k.iP,this.designationEnum=N,this.IsItSupport=!1,this.datagrid=n,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="ProjectID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer",this.currentUser&&(this.IsItSupport=this.designationEnum.ITSupport==this.currentUser.designationID),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY"})}ngOnInit(){this.spinner.show(),this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("client","Client",'[{"width": "15%" , "hyperLink": true,"disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("pmName","PM/PL",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),("Sales"==this.currentUser.designation||"CEO"==this.currentUser.designation)&&this.columns.push(new h("source","Source",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("dateOfConfirmation","Confirmation Date",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("color","Action",'[{"width": "18%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Edit","isEdit":true}]')),this.fillFilterModel(),this.GetProjectStatus(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showProjectForm(){this.router.navigate(["/Master/Project"])}showProjectSetup(){this.router.navigate(["/Master/ProjectSetup"])}history(){this.router.navigate(["/Master/History"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getProjectList()},t),this.spinner.hide()}DeleteProject(t,n){this.spinner.show(),this.projectService.deleteProject(t,n,this.currentUser.employeeID).subscribe(i=>{this.spinner.hide(),this.deleteOnSuccess(i)},i=>{this.spinner.hide(),this.deleteOnError(i)})}gettoken(){return this.currentUser.authtoken}GetProjectStatus(){this.spinner.show();const t=new Ie,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectStatus",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.ProjectStatusList=o,this.selectedItems=this.ProjectStatusList.filter(r=>1==r.projectStatusID||2==r.projectStatusID||4==r.projectStatusID)},error:o=>{this.getRowOnError(o)}})}getProjectList(){const t=new Ie;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Technology=parseInt(this.Technology.toString()),t.ProjectType=parseInt(this.ProjectType.toString()),t.Source=this.Source,t.ClientID=+this.ClientID,t.Year=this.SelectYear?this.SelectYear.getFullYear():0,t.CompanyID=this.currentUser.companyID;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Project/GetProjectList",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Project deleted successfully.","Delete")):2==t?this.toastyService.warning("Project associated with TimeSheet.","Warning"):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.TechnologyList=t.technologyDropdownModel,this.ProjectTypeList=t.projectTypeDropdownModel,this.ClientList=t.clientDropdownModel,this.SourceList=t.sourceDropdownModel,this.projectListViewModel=t.projectListModel,this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ItemSelectedHistory"==n.EventType?this.selectedRowHistory(n.ItemSelected):"ItemSelectedProjectTrackReport"==n.EventType?this.selectedProjectTrackingReport(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemRedirect"==n.EventType?this.selectedRowRedirect(n.ItemSelected,n.header):"ItemSelectedView"==n.EventType?this.selectedRowView(n.ItemSelected):"ItemSelectedProjectSetUp"==n.EventType&&this.selectedRowProjectSetUp(n.ItemSelected)}selectedRowForEditDelete(t){let i=this.projectListViewModel[t];var o=this;"CEO"!=this.currentUser.designation?jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this project?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteProject(i.projectID,!1)}},cancel:function(){}}}):jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this timesheet?",type:"blue",buttons:{"Keep Delete":function(){o.DeleteProject(i.projectID,!0)},ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteProject(i.projectID,!1)}},cancel:function(){}}})}selectedRow(t){return this.router.navigate(["/Master/ProjectSetup"],{queryParams:{id:this.projectListViewModel[t].projectID,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowView(t){return this.router.navigate(["/Master/ViewProject"],{queryParams:{id:this.projectListViewModel[t].projectID,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowProjectSetUp(t){return this.router.navigate(["/Master/ProjectSetup"],{queryParams:{id:this.projectListViewModel[t].projectID,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowHistory(t){return this.router.navigate(["/Master/History"],{queryParams:{id:this.projectListViewModel[t].projectID,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedProjectTrackingReport(t){let i=this.projectListViewModel[t];return this.router.navigate(["/Master/ProjectResources"],{queryParams:{id:i.projectID,name:i.name,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.Source=0,this.Technology=0,this.ProjectType=0,this.ProjectStatus=0,this.selectedItems=[],this.SelectYear=null,this.ClientID=0,this.selectedItems=this.ProjectStatusList.filter(t=>1==t.projectStatusID||2==t.projectStatusID||4==t.projectStatusID),this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.ClientID=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchSource(t){0!=this.autoFilter&&""!=t&&(this.Source=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}CheckBDEAccess(){return!("Sales"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation)}setMyStyles(t){return{height:"15px",width:"15px","margin-top":"0px",float:"left","background-color":t}}SearchProjectStatus(t){0!=this.autoFilter&&""!=t&&(this.ProjectStatus=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}selectedRowRedirect(t,n){let i=n,a=this.projectListViewModel[t].client.split(" ");if("Client"==i)return this.router.navigate(["/Master/ClientList"],{queryParams:{search:a[0]},skipLocationChange:!0})}getCookiesFilterData(t){if(""!=t&&null!=t&&"{}"!=t&&(t=JSON.parse(t),this.Search=t.Search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.Technology=t.Technology,this.ProjectType=t.ProjectType,this.Source=t.Source,this.currentUser.companyID=t.CompanyID,""!=t.ProjectStatus&&null!=t.ProjectStatus)){let n=[];t.ProjectStatus.split(",").forEach(o=>{n.push(this.ProjectStatusList.find(r=>r.projectStatusID===parseInt(o)))}),this.selectedItems=n}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(R),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([R])],decls:49,vars:21,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],["class","pull-right",4,"ngIf"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","text","placeholder","Date Of Confirmation","bsDatepicker","","name","DateOfConfirmation",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-6","paddingbottom"],[4,"ngFor","ngForOf"],[1,"col-md-6"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","",3,"ngModelChange","ngModel"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus"],["size","medium",3,"type"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"value"],["placement","bottom",1,"div-small",3,"tooltip"],[3,"ngStyle"],[1,"div-smalltext"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Projects"),e.k0s(),e.DNE(8,Jn,3,0,"div",7),e.k0s(),e.j41(9,"div",8)(10,"div",1)(11,"div",9)(12,"input",10),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(13,"div",9)(14,"select",11),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(15,"option",12),e.EFF(16,"-- Project Type --"),e.k0s(),e.DNE(17,$n,2,2,"option",13),e.k0s()(),e.j41(18,"div",9)(19,"select",14),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(20,"option",12),e.EFF(21,"-- Technology --"),e.k0s(),e.DNE(22,zn,2,2,"option",13),e.k0s()(),e.j41(23,"div",9)(24,"ng-multiselect-dropdown",15),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(25,"div",9)(26,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectYear,r)||(i.SelectYear=r),r}),e.k0s()(),e.j41(27,"div",9)(28,"select",17),e.mxI("ngModelChange",function(r){return e.DH7(i.ClientID,r)||(i.ClientID=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(29,"option",12),e.EFF(30,"-- Client --"),e.k0s(),e.DNE(31,Xn,2,2,"option",13),e.k0s()(),e.j41(32,"div",9)(33,"button",18),e.bIt("click",function(){return i.search()}),e.nrm(34,"i",19),e.k0s(),e.j41(35,"button",20),e.bIt("click",function(){return i.reset()}),e.nrm(36,"i",21),e.k0s()()(),e.j41(37,"div",1)(38,"div",22),e.DNE(39,qn,5,3,"div",23),e.k0s(),e.j41(40,"div",24)(41,"div",25)(42,"label")(43,"input",26),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(44," Auto Filter "),e.k0s()()()(),e.j41(45,"div",1)(46,"div",27)(47,"datagrid",28),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(48,"ngx-spinner",29)),2&n&&(e.R7$(8),e.Y8G("ngIf",!i.IsItSupport),e.R7$(4),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.TechnologyList),e.R7$(2),e.Y8G("placeholder","-- Project Status --")("data",i.ProjectStatusList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.R50("ngModel",i.SelectYear),e.Y8G("bsConfig",i.dpConfig),e.R7$(2),e.R50("ngModel",i.ClientID),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(8),e.Y8G("ngForOf",i.ProjectStatusList),e.R7$(4),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.projectListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,u.B3,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,k.pc,k.p0,E.dg,D.et,w.b,_],encapsulation:2})}return s})();var z=F(1471);let ne=(()=>{class s{constructor(t){this.cookieService=t,this.tokenFromUI="0123456789123456",this.designationEnum=N,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}encryptUsingAES256(t){let n=z.enc.Utf8.parse(this.tokenFromUI),i=z.enc.Utf8.parse(this.tokenFromUI);return z.AES.encrypt(JSON.stringify(t),n,{keySize:16,iv:i,mode:z.mode.ECB,padding:z.pad.Pkcs7}).toString()}decryptUsingAES256(t){let n=z.enc.Utf8.parse(this.tokenFromUI),i=z.enc.Utf8.parse(this.tokenFromUI);return z.AES.decrypt(t,n,{keySize:16,iv:i,mode:z.mode.ECB,padding:z.pad.Pkcs7}).toString(z.enc.Utf8)}IsITSupport(){return this.designationEnum.ITSupport==this.currentUser.designationID}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var B=F(7382);let ve=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getClientDetails(){return this.http.get(p.apiUrl+"api/Client/GetClientDetails?CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}getClientByID(t){return this.http.get(p.apiUrl+"api/Client/GetClientByID?ClientID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}saveClient(t,n){const i=JSON.stringify(t);return this.http.post(`${p.apiUrl}api/Client/SaveUpdateClient?EmployeeID=${n}&CompanyID=${this.currentUser.companyID}`,i,{headers:this.headers}).pipe((0,j.T)(r=>r))}deleteClient(t,n){return this.http.get(p.apiUrl+"/api/Client/DeleteClient?ClientID="+t+"&EmployeeID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();class Kn{}class ht extends C{}const Wn=s=>({"has-error":s});function Zn(s,l){1&s&&(e.j41(0,"span",37),e.EFF(1,"Client Name is required"),e.k0s())}function eo(s,l){1&s&&(e.j41(0,"span",37),e.EFF(1,"Last Name is required"),e.k0s())}function to(s,l){1&s&&e.nrm(0,"img",38)}let Ne=(()=>{class s{constructor(t,n,i,o,r,a,d){this.clientService=t,this.projectService=n,this.elRef=i,this.route=o,this.router=r,this.cookieService=a,this.toastyService=d,this.clientViewModel=new Kn,this.ClientID=0,this.loading=!1,this.result=[],this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){let t=this.router.parseUrl(this.router.url);if(this.ClientID=+t.queryParams.id,this.filterModel=t.queryParams.filterModel,window.location.href.toLowerCase().indexOf("project")>0){var o=document.getElementById("TechnologyHeader");null!=o&&(o.style.display="none",this.ClientID=0,this.resetFormClient())}this.ClientID>0?this.getClientByID(this.ClientID):this.getProjectDetails()}getClientByID(t){this.clientService.getClientByID(this.ClientID).subscribe(n=>{""!=n&&(this.result=n,this.clientViewModel=n.clientViewModel)},n=>{console.log(n)})}getProjectDetails(){this.clientService.getClientDetails().subscribe(t=>{""!=t&&(this.result=t)},t=>{console.log(t)})}saveClient(t=""){this.loading=!0,this.currentUser?(this.route.params.subscribe(i=>{this.ClientID=+i.id,this.ClientID>0&&(this.clientViewModel.clientID=this.ClientID)}),this.clientService.saveClient(this.clientViewModel,this.currentUser.employeeID).subscribe(i=>{this.loading=!1,0!=i?(this.toastyService.success("Profile Save Successfully.","Save"),this.route.params.subscribe(r=>{this.clientViewModel.clientID>0?this.toastyService.success("Client updated successfully.","Update Client"):this.toastyService.success("Client saved successfully.","Save Client"),window.location.href.toLowerCase().indexOf("project")<0?this.router.navigate(["/Master/ClientList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0}):(document.getElementById("P").click(),this.resetFormClient(),this.projectService.refreshFromChid.next({clientID:i,TechID:0}))})):this.toastyService.error(0==i?"Client already exists.":"Something error.","Save Client")},i=>{console.log(i)})):(this.loading=!0,this.router.navigate(["/login"]))}clearInputdata(){this.router.navigate(["/Master/ClientList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}resetFormClient(){document.getElementById("ClientForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(ve),e.rXU(R),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-client"]],features:[e.Jv_([ve])],decls:64,vars:13,consts:[["f","ngForm"],["name","ngModel"],["country","ngModel"],["lastName","ngModel"],["state","ngModel"],["company","ngModel"],["city","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],["id","backtolist",1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],["action","","method","post","id","ClientForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row","mb-3"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["type","text","name","name","placeholder","Client Name","required","","maxlength","50","tabindex","1",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label"],["type","text","id","country","name","country","placeholder","Country","maxlength","50","tabindex","4",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","lastName","name","lastName","placeholder","Last Name","required","","maxlength","50","tabindex","2",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","state","name","state","placeholder","Province","maxlength","50","tabindex","5",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","company","name","company","placeholder","Company","maxlength","70","tabindex","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","city","name","city","placeholder","City","maxlength","50","tabindex","6",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div"),e.nrm(7,"i",13),e.EFF(8," Client "),e.k0s(),e.j41(9,"button",14),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",15),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",16)(13,"form",17,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(14);return e.Njj(a.form.valid&&i.saveClient(a))}),e.j41(15,"div",18)(16,"div",19)(17,"label",20),e.EFF(18,"First Name"),e.k0s(),e.j41(19,"div",21)(20,"input",22,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.clientViewModel.name,a)||(i.clientViewModel.name=a),e.Njj(a)}),e.k0s(),e.DNE(22,Zn,2,0,"span",23),e.k0s()(),e.j41(23,"div",24)(24,"label",25),e.EFF(25,"Country"),e.k0s(),e.j41(26,"div",21)(27,"input",26,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.clientViewModel.country,a)||(i.clientViewModel.country=a),e.Njj(a)}),e.k0s()()()(),e.j41(29,"div",18)(30,"div",24)(31,"label",20),e.EFF(32,"Last Name"),e.k0s(),e.j41(33,"div",21)(34,"input",27,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.clientViewModel.lastName,a)||(i.clientViewModel.lastName=a),e.Njj(a)}),e.k0s(),e.DNE(36,eo,2,0,"span",23),e.k0s()(),e.j41(37,"div",24)(38,"label",25),e.EFF(39,"Province"),e.k0s(),e.j41(40,"div",21)(41,"input",28,4),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.clientViewModel.state,a)||(i.clientViewModel.state=a),e.Njj(a)}),e.k0s()()()(),e.j41(43,"div",18)(44,"div",24)(45,"label",25),e.EFF(46,"Company"),e.k0s(),e.j41(47,"div",21)(48,"input",29,5),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.clientViewModel.company,a)||(i.clientViewModel.company=a),e.Njj(a)}),e.k0s()()(),e.j41(50,"div",24)(51,"label",25),e.EFF(52,"City"),e.k0s(),e.j41(53,"div",21)(54,"input",30,6),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.clientViewModel.city,a)||(i.clientViewModel.city=a),e.Njj(a)}),e.k0s()()()(),e.j41(56,"div",31)(57,"button",32),e.nrm(58,"i",33),e.EFF(59," Submit "),e.k0s(),e.DNE(60,to,1,0,"img",34),e.j41(61,"button",35),e.nrm(62,"i",36),e.EFF(63," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(14),r=e.sdS(21),a=e.sdS(35);e.R7$(16),e.Y8G("ngClass",e.eq3(11,Wn,o.submitted&&!r.valid)),e.R7$(4),e.R50("ngModel",i.clientViewModel.name),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid),e.R7$(5),e.R50("ngModel",i.clientViewModel.country),e.R7$(7),e.R50("ngModel",i.clientViewModel.lastName),e.R7$(2),e.Y8G("ngIf",o.submitted&&!a.valid),e.R7$(5),e.R50("ngModel",i.clientViewModel.state),e.R7$(7),e.R50("ngModel",i.clientViewModel.company),e.R7$(6),e.R50("ngModel",i.clientViewModel.city),e.R7$(3),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.YU,u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV],encapsulation:2})}return s})(),dt=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getTechnologyDetails(){return this.http.get(p.apiUrl+"api/Technology/GetTechnologyDetails?CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}getTechnologyByID(t){return this.http.get(p.apiUrl+"api/Technology/GetTechnologyDetailsByID?TechnologyID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}saveTechnology(t,n){const i=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Technology/SaveUpdateTechnology?EmployeeID="+n+"&CompanyID="+this.currentUser.companyID,i,{headers:this.headers}).pipe((0,j.T)(o=>o))}deleteTechnology(t,n){return this.http.get(p.apiUrl+"/api/Technology/DeleteTechnology?TechnologyID="+t+"&EmployeeID="+n,{headers:this.headers}).map(i=>i)}CheckTechnologyExists(t,n){return this.http.get(p.apiUrl+"api/Technology/CheckTechnologyExists?Name="+t+"&departmentID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();const io=s=>({"has-error":s});function no(s,l){if(1&s&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function oo(s,l){1&s&&(e.j41(0,"div",28),e.EFF(1,"Please Select Department"),e.k0s())}function so(s,l){1&s&&(e.j41(0,"span",28),e.EFF(1,"Technology Name is required"),e.k0s())}function ro(s,l){1&s&&e.nrm(0,"img",29)}let pt=(()=>{class s{constructor(t,n,i,o,r,a,d){this.technologyService=t,this.elRef=n,this.projectService=i,this.route=o,this.router=r,this.cookieService=a,this.toastyService=d,this.technologyViewModel={technologyID:0,name:"",departmentID:0},this.TechnologyID=0,this.departmentID=0,this.loading=!1,this.result=[],this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){let t=this.router.parseUrl(this.router.url);this.TechnologyID=+t.queryParams.id,window.location.href.toLowerCase().indexOf("project")>0&&(document.getElementById("backtolist").style.display="none",this.TechnologyID=0),this.TechnologyID>0?this.getTechnologyByID(this.TechnologyID):this.getTechnologyDetails()}getTechnologyByID(t){this.technologyService.getTechnologyByID(t).subscribe(n=>{""!=n&&(this.result=n,this.technologyViewModel=n.technologyViewModel)},n=>{console.log(n)})}getTechnologyDetails(){this.technologyService.getTechnologyDetails().subscribe(t=>{""!=t&&(this.result=t)},t=>{console.log(t)})}saveTechnology(t=""){this.loading=!0,this.currentUser?(this.route.params.subscribe(i=>{this.TechnologyID=+i.id,this.TechnologyID>0&&(this.technologyViewModel.technologyID=+this.TechnologyID)}),this.technologyViewModel.departmentID=+this.departmentID,this.CheckTechnologyExists(this.technologyViewModel.name),this.technologyService.saveTechnology(this.technologyViewModel,this.currentUser.employeeID).subscribe(i=>{this.loading=!1,i>0?this.route.params.subscribe(r=>{this.technologyViewModel.technologyID>0?this.toastyService.success("Technology updated successfully.","Update Technology"):this.toastyService.success("Technology saved successfully.","Save Technology"),window.location.href.toLowerCase().indexOf("project")<0?this.router.navigate(["/Master/TechnologyList"]):(document.getElementById("TechPopup").click(),this.resetFormInputs(),this.projectService.refreshFromChid.next({clientID:0,TechID:i}))}):this.toastyService.success("Something error.","Save Technology")},i=>{console.log(i)})):(this.loading=!0,this.router.navigate(["/login"]))}resetFormInputs(){document.getElementById("TechnologyForm").reset()}CheckTechnologyExists(t){this.technologyService.CheckTechnologyExists(t,this.departmentID).subscribe(n=>{1==n&&(this.toastyService.warning("Technology name is already exists.","Check Technology Exists"),this.technologyViewModel.name="")},n=>{console.log(n),this.toastyService.error("Something error.","Check Technology Exists")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(dt),e.rXU(e.aKT),e.rXU(R),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-technology"]],decls:37,vars:10,consts:[["f","ngForm"],["name","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],["id","TechnologyHeader",1,"card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],["action","","method","post","id","TechnologyForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row","mb-3"],[1,"col-md-10","row"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["name","departmentID","id","departmentID","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"col-md-10","row",3,"ngClass"],["type","text","id","name","name","name","placeholder","Enter Technology Name","required","","maxlength","50","tabindex","1",1,"form-control",3,"ngModelChange","focusout","ngModel"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","reset","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[3,"value"],[1,"error"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),e.nrm(6,"i",8),e.EFF(7," Technology "),e.k0s()(),e.j41(8,"div",9)(9,"form",10,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(10);return e.Njj(a.form.valid&&i.saveTechnology(a))}),e.j41(11,"div",11)(12,"div",12)(13,"label",13),e.EFF(14,"Department"),e.k0s(),e.j41(15,"div",14)(16,"select",15),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.departmentID,a)||(i.departmentID=a),e.Njj(a)}),e.j41(17,"option",16),e.EFF(18,"-- Technology --"),e.k0s(),e.DNE(19,no,2,2,"option",17),e.k0s(),e.DNE(20,oo,2,0,"div",18),e.k0s()()(),e.j41(21,"div",11)(22,"div",19)(23,"label",13),e.EFF(24,"Technology Name"),e.k0s(),e.j41(25,"div",14)(26,"input",20,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.technologyViewModel.name,a)||(i.technologyViewModel.name=a),e.Njj(a)}),e.bIt("focusout",function(a){return e.eBV(o),e.Njj(i.CheckTechnologyExists(a.target.value))}),e.k0s(),e.DNE(28,so,2,0,"span",18),e.k0s()()(),e.j41(29,"div",21)(30,"button",22),e.nrm(31,"i",23),e.EFF(32," Submit"),e.k0s(),e.DNE(33,ro,1,0,"img",24),e.j41(34,"button",25),e.nrm(35,"i",26),e.EFF(36," Reset"),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(10),r=e.sdS(27);e.R7$(16),e.R50("ngModel",i.departmentID),e.R7$(3),e.Y8G("ngForOf",i.result.departmentDropdownModel),e.R7$(),e.Y8G("ngIf",o.submitted&&0==i.departmentID),e.R7$(2),e.Y8G("ngClass",e.eq3(8,io,o.submitted&&!r.valid)),e.R7$(4),e.R50("ngModel",i.technologyViewModel.name),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.YU,u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV],encapsulation:2})}return s})();function ao(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",17)(1,"span",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.downloadBase64File(i))}),e.j41(2,"span",19),e.nrm(3,"i",20),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"span",21),e.EFF(6),e.k0s(),e.j41(7,"span",18),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.RemoveDocument(i))}),e.nrm(8,"i",22),e.k0s()()}if(2&s){const t=l.$implicit;e.R7$(4),e.SpI("",t.FileName," "),e.R7$(2),e.SpI(" ",t.FileUrl," ")}}function lo(s,l){if(1&s&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"Document List"),e.k0s(),e.j41(3,"div",15),e.DNE(4,ao,9,2,"div",16),e.k0s()()),2&s){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.FileData)}}function co(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",23)(1,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SaveDocument())}),e.nrm(2,"i",25),e.EFF(3," Submit "),e.k0s()()}}let ho=(()=>{class s{constructor(t,n){this.cookieService=t,this.projectService=n,this.OnAddDocument=new e.bkB,this.FileData=[],this.DocumentList=new Array,this.designationEnum=N,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){}ngOnChanges(){null!=this.edittimesheetDocument&&this.edittimesheetDocument.length>0&&(this.edittimesheetDocument.forEach(t=>{this.FileData.push({FileName:t.fileName,FileSize:t.fileSize,FileType:t.fileType,FileUrl:t.fileUrl})}),setTimeout(()=>{this.DocumentList=this.FileData,this.OnAddDocument.emit(this.DocumentList)},100))}onFileChange(t){for(const i of t.target.files){var n=new FileReader;n.readAsDataURL(i),n.onload=o=>{this.FileData.push({FileName:i.name,FileSize:i.size,FileType:i.type,FileUrl:o.target.result})}}setTimeout(()=>{this.DocumentList=this.FileData},100),t.srcElement.value=null}downloadBase64File(t){var n;n=`${t.FileUrl}`;const i=document.createElement("a");document.body.appendChild(i),i.href=n,i.target="_self",i.download=t.FileName,i.click()}RemoveDocument(t){this.FileData.splice(t,1),this.DocumentList=this.FileData}SaveDocument(){document.getElementById("Estimationpopup").click(),this.ProjectID>0&&this.projectService.SaveProjectEstimationDocument(this.DocumentList,this.currentUser.employeeID,this.ProjectID).subscribe(n=>{}),this.OnAddDocument.emit(this.DocumentList)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(S.O),e.rXU(R))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-estimation-document"]],inputs:{edittimesheetDocument:"edittimesheetDocument",ProjectID:"ProjectID"},outputs:{OnAddDocument:"OnAddDocument"},features:[e.OA$],decls:14,vars:2,consts:[["fileBrowse",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-md-10","row"],[1,"col-md-3"],[1,"col-md-6"],["type","file","multiple","",3,"change"],["class","col-md-10 row mt-3",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"col-md-10","row","mt-3"],[1,"col-md-3","mb-0"],[1,"col"],["class","kpi mb-3",4,"ngFor","ngForOf"],[1,"kpi","mb-3"],[3,"click"],[1,"file-upload-icon"],["aria-hidden","true",1,"fa","fa-file-excel-o"],["hidden",""],[1,"fa","fa-times"],[1,"card-footer"],["type","button","tabindex","6",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-floppy-o"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"label",8),e.EFF(8,"Document"),e.k0s(),e.j41(9,"div",9)(10,"input",10,0),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.onFileChange(a))}),e.k0s()()(),e.DNE(12,lo,5,1,"div",11),e.k0s(),e.DNE(13,co,4,0,"div",12),e.k0s()()()()()}2&n&&(e.R7$(12),e.Y8G("ngIf",i.FileData.length>0),e.R7$(),e.Y8G("ngIf",i.designationEnum.ITSupport!=i.currentUser.designationID))},dependencies:[u.Sq,u.bT]})}return s})();function po(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Title is required "),e.k0s())}function uo(s,l){if(1&s&&(e.j41(0,"div",42),e.DNE(1,po,2,0,"div",43),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function mo(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Start date is required "),e.k0s())}function go(s,l){if(1&s&&(e.j41(0,"div",42),e.DNE(1,mo,2,0,"div",43),e.k0s()),2&s){e.XpG();const t=e.sdS(24);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function fo(s,l){if(1&s&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Ao(s,l){if(1&s&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function _o(s,l){if(1&s&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function yo(s,l){if(1&s&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function So(s,l){1&s&&(e.j41(0,"span",42),e.EFF(1," Estimated hours is required "),e.k0s())}function Do(s,l){1&s&&e.nrm(0,"img",45)}let ut=(()=>{class s{constructor(t,n,i,o,r){this.projectService=t,this.route=n,this.datePipe=i,this.cookieService=o,this.toastyService=r,this.SaveSuccess=new e.bkB,this.additionalWorkModals=new de,this.dpConfig=new k.iP,this.additionalWorkId=0,this.loading=!1,this.selectedItems=[],this.dropdownSettings={},this.result=[],this.Develpoer=[],this.formData=new de,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY"})}ngOnInit(){if(null!=this.model&&(this.formData.AdditionalWorkID=void 0!==this.model.AdditionalWorkID?this.model.AdditionalWorkID:0,this.formData.ProjectID=this.model.ProjectID,this.formData.Title=this.model.Title,this.formData.StartDate=this.model.StartDate,this.formData.EndDate=this.model.EndDate,this.formData.PM=void 0!==this.model.PM?this.model.PM:0,this.formData.TL=void 0!==this.model.TL?this.model.TL:0,this.formData.Designer=void 0!==this.model.Designer?this.model.Designer:0,this.formData.QA=void 0!==this.model.QA?this.model.QA:0,this.formData.EstimatedHours=this.model.EstimatedHours,this.formData.EmployeeID=this.model.EmployeeID,null!=this.model.DeveloperEmployeeID)){let t=this.model.DeveloperEmployeeID.split(",");this.formData.Developer=t,this.model.Developer=this.formData.Developer}this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.getProjectDetails()}onItemSelect(t){this.SelectedDeveloper=null!=t?this.selectedItems.map(n=>n.name).join(", "):null}SaveAdditionalWork(t=""){if(this.loading=!0,null==this.formData.EstimatedHours||this.formData.EstimatedHours<0)this.loading=!1;else{this.additionalWorkModals.AdditionalWorkID=void 0!==this.formData.AdditionalWorkID?this.formData.AdditionalWorkID:0,this.additionalWorkModals.Title=this.formData.Title,this.additionalWorkModals.ProjectID=this.formData.ProjectID,this.additionalWorkModals.PM="string"==typeof this.formData.PM?parseFloat(this.formData.PM):this.formData.PM,this.additionalWorkModals.TL="string"==typeof this.formData.TL?parseFloat(this.formData.TL):this.formData.TL,this.additionalWorkModals.DeveloperEmployeeID=this.selectedItems.map(g=>g.id).join(","),this.additionalWorkModals.Designer="string"==typeof this.formData.Designer?parseFloat(this.formData.Designer):this.formData.Designer,this.additionalWorkModals.QA="string"==typeof this.formData.QA?parseFloat(this.formData.QA):this.formData.QA,this.additionalWorkModals.EstimatedHours=this.formData.EstimatedHours;var n="string"==typeof this.formData.StartDate?this.formData.StartDate.split("-"):"",i="string"==typeof this.formData.StartDate?new Date(+n[2],+n[1]-1,+n[0]):new Date,o=this.formData.StartDate&&this.datePipe.transform("object"==typeof this.formData.StartDate?this.formData.StartDate:i,"yyyy-MM-dd");this.additionalWorkModals.StartDate=o;var r="string"==typeof this.formData.EndDate?this.formData.EndDate.split("-"):"",a="string"==typeof this.formData.EndDate?new Date(+r[2],+r[1]-1,+r[0]):new Date,d=this.formData.EndDate&&this.datePipe.transform("object"==typeof this.formData.EndDate?this.formData.EndDate:a,"yyyy-MM-dd");this.additionalWorkModals.EndDate=d,this.projectService.saveAdditionalWork(this.additionalWorkModals,this.formData.EmployeeID).subscribe(g=>{this.loading=!1,g>0?(document.getElementById("AdditionalWorkPopup").click(),document.getElementById("reset").click(),this.SaveSuccess.emit("success"),this.projectService.refreshFromChid.next(g),this.route.params.subscribe(v=>{this.toastyService.success("Additional work details are save successfully.","Success")})):this.toastyService.error("Something error.","Error")},g=>{console.log(g)})}}getProjectDetails(){this.projectService.getProjectDetails().subscribe(t=>{if(""!=t){this.result=t,this.Develpoer=t.devloperDropdownModel;let n=[];null!=this.model.Developer&&(this.model.Developer.forEach(i=>{n.push(this.Develpoer.find(o=>o.id===parseInt(i)))}),this.selectedItems=n)}},t=>{console.log(t)})}resetFormInputs(){this.model.Developer="",this.SelectedDeveloper="",document.getElementById("AdditionalWorkForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(f.nX),e.rXU(u.vh),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-additional-work"]],inputs:{model:[e.Mj6.None,"parentData","model"]},outputs:{SaveSuccess:"SaveSuccess"},features:[e.Jv_([u.vh,R])],decls:104,vars:25,consts:[["f","ngForm"],["Title","ngModel"],["StartDate","ngModel"],["EndDate","ngModel"],["PM","ngModel"],["TL","ngModel"],["selectedItem","ngModel"],["Designer","ngModel"],["QA","ngModel"],["EstimatedHours","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","AdditionalWorkForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"mb-3"],[1,"col-md-2","col-form-label","required"],[1,"col-md-10"],["type","hidden","name","ProjectID",3,"ngModelChange","ngModel"],["placeholder","Enter work title...","name","Title","maxlength","1000","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"col-md-6","mb-3"],[1,"col-md-4","col-form-label","required"],[1,"col-md-8"],["type","text","placeholder","Start Date","bsDatepicker","","name","StartDate","required","",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],[1,"col-md-4","col-form-label"],["type","text","placeholder","End Date","bsDatepicker","","name","EndDate",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["id","PM","name","PM",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected",""],[3,"value",4,"ngFor","ngForOf"],["id","TL","name","TL",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","Designer","id","Designer","name","Designer",1,"form-control",3,"ngModelChange","ngModel"],["id","QA","name","QA",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","EstimatedHours","placeholder","Estimated hours",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","reset","tabindex","7",1,"btn","btn-danger"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"error"],[4,"ngIf"],[3,"value"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"form",15,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.SaveAdditionalWork(a))}),e.j41(7,"div",16)(8,"div",11)(9,"label",17),e.EFF(10,"Title"),e.k0s(),e.j41(11,"div",18)(12,"input",19),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.ProjectID,a)||(i.formData.ProjectID=a),e.Njj(a)}),e.k0s(),e.j41(13,"textarea",20,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.Title,a)||(i.formData.Title=a),e.Njj(a)}),e.k0s(),e.DNE(15,uo,2,1,"div",21),e.k0s()()(),e.j41(16,"div")(17,"div",11)(18,"div",22)(19,"div",11)(20,"label",23),e.EFF(21,"Start Date"),e.k0s(),e.j41(22,"div",24)(23,"input",25,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.StartDate,a)||(i.formData.StartDate=a),e.Njj(a)}),e.k0s(),e.DNE(25,go,2,1,"div",21),e.k0s()()(),e.j41(26,"div",22)(27,"div",11)(28,"label",26),e.EFF(29,"End Date"),e.k0s(),e.j41(30,"div",24)(31,"input",27,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.EndDate,a)||(i.formData.EndDate=a),e.Njj(a)}),e.k0s()()()()()(),e.j41(33,"div")(34,"div",11)(35,"div",22)(36,"div",11)(37,"label",26),e.EFF(38,"PM/PL"),e.k0s(),e.j41(39,"div",24)(40,"select",28,4),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.PM,a)||(i.formData.PM=a),e.Njj(a)}),e.j41(42,"option",29),e.EFF(43,"-- PM/PL --"),e.k0s(),e.DNE(44,fo,2,2,"option",30),e.k0s()()()(),e.j41(45,"div",22)(46,"div",11)(47,"label",26),e.EFF(48,"TL/Sr.Developer"),e.k0s(),e.j41(49,"div",24)(50,"select",31,5),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.TL,a)||(i.formData.TL=a),e.Njj(a)}),e.j41(52,"option",29),e.EFF(53,"-- TL/Sr.Developer --"),e.k0s(),e.DNE(54,Ao,2,2,"option",30),e.k0s()()()()()(),e.j41(55,"div")(56,"div",11)(57,"div",22)(58,"div",11)(59,"label",26),e.EFF(60,"Develpoer"),e.k0s(),e.j41(61,"div",24)(62,"ng-multiselect-dropdown",32,6),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedItems,a)||(i.selectedItems=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onItemSelect(a))}),e.k0s(),e.j41(64,"div"),e.EFF(65),e.k0s()()()(),e.j41(66,"div",22)(67,"div",11)(68,"label",26),e.EFF(69,"Designer"),e.k0s(),e.j41(70,"div",24)(71,"select",33,7),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.Designer,a)||(i.formData.Designer=a),e.Njj(a)}),e.j41(73,"option",29),e.EFF(74,"-- Designer --"),e.k0s(),e.DNE(75,_o,2,2,"option",30),e.k0s()()()()()(),e.j41(76,"div")(77,"div",11)(78,"div",22)(79,"div",11)(80,"label",26),e.EFF(81,"QA"),e.k0s(),e.j41(82,"div",24)(83,"select",34,8),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.QA,a)||(i.formData.QA=a),e.Njj(a)}),e.j41(85,"option",29),e.EFF(86,"-- QA --"),e.k0s(),e.DNE(87,yo,2,2,"option",30),e.k0s()()()(),e.j41(88,"div",22)(89,"div",11)(90,"label",23),e.EFF(91,"Estimated Hours"),e.k0s(),e.j41(92,"div",24)(93,"input",35,9),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.EstimatedHours,a)||(i.formData.EstimatedHours=a),e.Njj(a)}),e.k0s(),e.DNE(95,So,2,0,"span",21),e.k0s()()()()(),e.j41(96,"div",36)(97,"button",37),e.nrm(98,"i",38),e.EFF(99," SUBMIT "),e.k0s(),e.DNE(100,Do,1,0,"img",39),e.j41(101,"button",40),e.nrm(102,"i",41),e.EFF(103," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14),a=e.sdS(24);e.R7$(12),e.R50("ngModel",i.formData.ProjectID),e.R7$(),e.R50("ngModel",i.formData.Title),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(8),e.R50("ngModel",i.formData.StartDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(2),e.Y8G("ngIf",a.invalid&&o.submitted),e.R7$(6),e.R50("ngModel",i.formData.EndDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(9),e.R50("ngModel",i.formData.PM),e.R7$(4),e.Y8G("ngForOf",i.result.pmDropdownModel),e.R7$(6),e.R50("ngModel",i.formData.TL),e.R7$(4),e.Y8G("ngForOf",i.result.plDropdownModel),e.R7$(8),e.Y8G("placeholder","-- Developer --")("data",i.Develpoer),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(3),e.SpI(" ",i.SelectedDeveloper," "),e.R7$(6),e.R50("ngModel",i.formData.Designer),e.R7$(4),e.Y8G("ngForOf",i.result.designerDropdownModel),e.R7$(8),e.R50("ngModel",i.formData.QA),e.R7$(4),e.Y8G("ngForOf",i.result.qaDropdownModel),e.R7$(6),e.R50("ngModel",i.formData.EstimatedHours),e.R7$(2),e.Y8G("ngIf",o.submitted&&(null==i.formData.EstimatedHours||null==i.formData.EstimatedHours||0==i.formData.EstimatedHours)),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,k.pc,k.p0,w.b],encapsulation:2})}return s})();const jo=["AdditionalWorkModals"],bo=s=>({"has-error":s}),Mo=s=>({required:s});function Co(s,l){1&s&&(e.j41(0,"span",60),e.EFF(1,"'|' character is not allow in Name."),e.k0s())}function ko(s,l){1&s&&(e.j41(0,"span",60),e.EFF(1,"Name is required"),e.k0s())}function Io(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}function vo(s,l){if(1&s){const t=e.RV6();e.j41(0,"span",62),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(100);return e.Njj(i.show())}),e.nrm(1,"i",63),e.k0s()}}function Eo(s,l){1&s&&(e.j41(0,"div",60),e.EFF(1," Please select client"),e.k0s())}function Fo(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function To(s,l){if(1&s){const t=e.RV6();e.j41(0,"span",64),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(113);return e.Njj(i.show())}),e.nrm(1,"i",65),e.k0s()}}function wo(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Po(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.sourceID),e.R7$(),e.SpI(" ",t.name," ")}}function Ro(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Go(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",18)(1,"div",24)(2,"label",30),e.EFF(3,"Source"),e.k0s(),e.j41(4,"div",21)(5,"select",66),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Source,i)||(o.Source=i),e.Njj(i)}),e.j41(6,"option",27),e.EFF(7,"-- Source --"),e.k0s(),e.DNE(8,Po,2,2,"option",28),e.k0s()()(),e.j41(9,"div",24)(10,"label",30),e.EFF(11,"Sales"),e.k0s(),e.j41(12,"div",21)(13,"select",67),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Sales,i)||(o.Sales=i),e.Njj(i)}),e.j41(14,"option",27),e.EFF(15,"-- Sales --"),e.k0s(),e.DNE(16,Ro,2,2,"option",28),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.R50("ngModel",t.Source),e.R7$(3),e.Y8G("ngForOf",t.result.sourceDropdownModel),e.R7$(5),e.R50("ngModel",t.Sales),e.R7$(3),e.Y8G("ngForOf",t.result.salesDropdownModel)}}function Yo(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectStatusID),e.R7$(),e.SpI(" ",t.name," ")}}function Ho(s,l){1&s&&(e.j41(0,"div",60),e.EFF(1," Please select project status"),e.k0s())}function No(s,l){if(1&s){const t=e.RV6();e.j41(0,"span")(1,"a",68),e.bIt("click",function(){e.eBV(t);const i=e.XpG(),o=e.sdS(139);return e.Njj(i.openModal(o))}),e.nrm(2,"i",69),e.k0s()()}}function Lo(s,l){1&s&&(e.j41(0,"span",60),e.EFF(1,"URL format is invalid"),e.k0s())}function Bo(s,l){if(1&s&&(e.j41(0,"a",70),e.nrm(1,"i",71),e.k0s()),2&s){const t=e.XpG();e.Y8G("href",t.projectViewModel.teamsURL,e.B4B)}}function Uo(s,l){1&s&&(e.j41(0,"span",60),e.EFF(1," Please enter estimated hours "),e.k0s())}function Vo(s,l){if(1&s&&(e.j41(0,"div"),e.DNE(1,Uo,2,0,"span",23),e.k0s()),2&s){const t=e.XpG(),n=e.sdS(8);e.R7$(),e.Y8G("ngIf",n.submitted&&(null==t.EstimatedHours||null==t.EstimatedHours||""==t.EstimatedHours||0==t.EstimatedHours))}}function xo(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Qo(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",24)(1,"label",30),e.EFF(2,"PM/PL"),e.k0s(),e.j41(3,"div",21)(4,"select",74),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.DH7(o.PM,i)||(o.PM=i),e.Njj(i)}),e.j41(5,"option",73),e.EFF(6,"-- PM/PL --"),e.k0s(),e.DNE(7,xo,2,2,"option",28),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.PM),e.R7$(3),e.Y8G("ngForOf",t.result.pmDropdownModel)}}function Oo(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Jo(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",18),e.DNE(1,Qo,8,2,"div",45),e.j41(2,"div",24)(3,"label",30),e.EFF(4,"TL/Sr.Developer"),e.k0s(),e.j41(5,"div",21)(6,"select",72),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.TL,i)||(o.TL=i),e.Njj(i)}),e.j41(7,"option",73),e.EFF(8,"-- TL/Sr.Developer --"),e.k0s(),e.DNE(9,Oo,2,2,"option",28),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.CheckExecutionAccess()),e.R7$(5),e.R50("ngModel",t.TL),e.R7$(3),e.Y8G("ngForOf",t.result.plDropdownModel)}}function $o(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function zo(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",18)(1,"div",24)(2,"label",30),e.EFF(3,"Develpoer"),e.k0s(),e.j41(4,"div",21)(5,"ng-multiselect-dropdown",75),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedItems,i)||(o.selectedItems=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.onItemSelect(i))}),e.k0s(),e.j41(6,"div"),e.EFF(7),e.k0s()()(),e.j41(8,"div",24)(9,"label",30),e.EFF(10,"Designer"),e.k0s(),e.j41(11,"div",21)(12,"select",76),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Designer,i)||(o.Designer=i),e.Njj(i)}),e.j41(13,"option",73),e.EFF(14,"-- Designer --"),e.k0s(),e.DNE(15,$o,2,2,"option",28),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.Y8G("placeholder","-- Developer --")("data",t.Develpoer),e.R50("ngModel",t.selectedItems),e.Y8G("settings",t.dropdownSettings),e.R7$(2),e.SpI(" ",t.SelectedDeveloper," "),e.R7$(5),e.R50("ngModel",t.Designer),e.R7$(3),e.Y8G("ngForOf",t.result.designerDropdownModel)}}function Xo(s,l){if(1&s&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function qo(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",24)(1,"label",30),e.EFF(2,"QA"),e.k0s(),e.j41(3,"div",21)(4,"select",77),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.QA,i)||(o.QA=i),e.Njj(i)}),e.j41(5,"option",73),e.EFF(6,"-- QA --"),e.k0s(),e.DNE(7,Xo,2,2,"option",28),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.QA),e.R7$(3),e.Y8G("ngForOf",t.result.qaDropdownModel)}}function Ko(s,l){1&s&&e.nrm(0,"img",84)}function Wo(s,l){if(1&s&&(e.j41(0,"div",78)(1,"button",79),e.nrm(2,"i",80),e.EFF(3," Submit "),e.k0s(),e.DNE(4,Ko,1,0,"img",81),e.j41(5,"button",82),e.nrm(6,"i",83),e.EFF(7," Reset "),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading),e.R7$(3),e.Y8G("ngIf",t.loading)}}function Zo(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",50)(1,"h4",51),e.EFF(2,"Additional Work"),e.k0s(),e.j41(3,"button",85),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.modalRef.hide())}),e.j41(4,"span",53),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",54),e.qex(7),e.j41(8,"app-additional-work",86),e.bIt("SaveSuccess",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.Successmessage)}),e.k0s(),e.bVm(),e.k0s()}if(2&s){const t=e.XpG();e.R7$(8),e.Y8G("parentData",t.model)}}let Le=(()=>{class s{constructor(t,n,i,o,r,a,d,g,y){this.modalService=t,this.projectService=n,this.elRef=i,this.route=o,this.router=r,this.datePipe=a,this.cookieService=d,this.commonFunctionsService=g,this.toastyService=y,this.projectViewModel=new nt,this.additionalWork=new de,this.ProjectID=0,this.loading=!1,this.ProjectType=0,this.Client=0,this.Source=0,this.Technology=0,this.PM=0,this.TL=0,this.Develpoer=[],this.DeveloperID=[],this.Designer=0,this.QA=0,this.Sales=0,this.result=[],this.Months=[],this.selectedItems=[],this.dropdownSettings={},this.ProjectStatus=0,this.included=!0,this.OldResult=[],this.NewResult=[],this.designationEnum=N,this.ProjectStatusEnum=Ke,this.dpConfig=new k.iP,this.editGitList=[],this.timesheetDocument=new Array,this.edittimesheetDocument=new Array,this.FixProject=!1,this.formData=new de,this.config={keyboard:!1,ignoreBackdropClick:!0},this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){this.projectService.refreshFromChid.subscribe(n=>{this.getProjectDetails(),n.clientID>0&&(this.Client=n.clientID),n.TechID>0&&(this.Technology=n.TechID)}),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Project?(this.ProjectID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.Project),console.log(this.ProjectID)):this.ProjectID=null!=t.queryParams.id?+t.queryParams.id:0,this.filterModel=t.queryParams.filterModel,this.ProjectID>0?this.getProjectByID(this.ProjectID):this.getProjectDetails()}getProjectDetails(){this.projectService.getProjectDetails().subscribe(t=>{""!=t&&(this.Develpoer=t.devloperDropdownModel,this.result=t)},t=>{console.log(t)})}getProjectByID(t){this.projectService.getProjectByID(t).subscribe(n=>{if(""!=n){this.OldResult=[],this.projectViewModel=new nt,this.projectViewModel.teamsID=n.projectViewModel.projectViewDataModel.teamsID,this.projectViewModel.teamsURL=n.projectViewModel.projectViewDataModel.teamsURL,this.EstimatedHours=n.projectViewModel.projectViewDataModel.estimatedHours,this.projectViewModel.channelID=n.projectViewModel.projectViewDataModel.channelID,this.DateOfConfirmation=n.projectViewModel.projectViewDataModel.dateOfConfirmation,this.StartDate=n.projectViewModel.projectViewDataModel.startDate,this.EndDate=n.projectViewModel.projectViewDataModel.endDate,this.Client=n.projectViewModel.projectViewDataModel.client,this.ProjectType=n.projectViewModel.projectViewDataModel.projectType,this.Source=n.projectViewModel.projectViewDataModel.source,this.Technology=n.projectViewModel.projectViewDataModel.technology,this.PM=n.projectViewModel.projectViewDataModel.pmEmployeeID,this.TL=n.projectViewModel.projectViewDataModel.tlEmployeeID,this.Designer=n.projectViewModel.projectViewDataModel.designerEmployeeID,this.QA=n.projectViewModel.projectViewDataModel.qaEmployeeID,this.Sales=n.projectViewModel.projectViewDataModel.salesEmployeeID,this.ProjectStatus=n.projectViewModel.projectViewDataModel.projectStatus,this.result=n,this.Develpoer=n.devloperDropdownModel,null!=n.projectViewModel.projectViewDataModel.developerEmployeeID?this.DeveloperID=n.projectViewModel.projectViewDataModel.developerEmployeeID.split(","):n.projectViewModel.projectViewDataModel.developerEmployeeID="",this.projectViewModel=n.projectViewModel.projectViewDataModel,this.editGitList=n.projectViewModel.gitFieldList,this.edittimesheetDocument=n.projectViewModel.timsheetDocument,this.OldResult=JSON.stringify(n.projectViewModel.projectViewDataModel).toLowerCase();let i=[];this.DeveloperID.forEach(o=>{i.push(this.Develpoer.find(r=>r.id===parseInt(o)))}),this.selectedItems=i,this.GetAdditionalWorkDetails(this.ProjectID)}},n=>{console.log(n)})}GetAdditionalWorkDetails(t){this.projectService.GetAdditionalWorkDetails(t).subscribe(n=>{""!=n&&(this.AdditionalWorkID=n.additionalWorkID,this.additionalWork.AdditionalWorkID=n.additionalWorkID,this.additionalWork.ProjectID=n.projectID,this.additionalWork.Title=n.title,this.additionalWork.EstimatedHours=n.estimatedHours,this.additionalWork.PM=n.pm,this.additionalWork.TL=n.tl,this.additionalWork.DeveloperEmployeeID=n.developerEmployeeID,this.additionalWork.Designer=n.designer,this.additionalWork.QA=n.qa,this.additionalWork.StartDate=n.startDate,this.additionalWork.EndDate=n.endDate)},n=>{console.log(n)})}saveProject(t=""){1==this.FixProject&&(0==this.EstimatedHours||null==this.EstimatedHours)||(this.loading=!0,this.currentUser?((this.ProjectStatus==this.ProjectStatusEnum.Completed||this.ProjectStatus==this.ProjectStatusEnum.Cancel)&&0!=this.ProjectID&&(this.PM=0,this.TL=0,this.selectedItems=[],this.Designer=0,this.QA=0),this.projectViewModel.timesheetDocument=this.timesheetDocument?this.timesheetDocument:null,this.projectViewModel.projectID=this.ProjectID,this.projectViewModel.client=+this.Client,this.projectViewModel.projectType=+this.ProjectType,this.projectViewModel.source=+this.Source,this.projectViewModel.technology=+this.Technology,null==this.EstimatedHours&&(this.EstimatedHours=0),this.projectViewModel.estimatedHours=this.EstimatedHours,this.projectViewModel.dateOfConfirmation=this.datePipe.transform(this.DateOfConfirmation,"yyyy-MM-dd"),this.projectViewModel.StartDate=this.datePipe.transform(this.StartDate,"yyyy-MM-dd"),this.projectViewModel.EndDate=this.datePipe.transform(this.EndDate,"yyyy-MM-dd"),this.projectViewModel.PMEmployeeID=+this.PM,this.projectViewModel.TLEmployeeID=+this.TL,this.projectViewModel.QAEmployeeID=+this.QA,this.projectViewModel.DesignerEmployeeID=+this.Designer,this.projectViewModel.SalesEmployeeID=+this.Sales,this.projectViewModel.ProjectStatus=+this.ProjectStatus,this.projectViewModel.DeveloperEmployeeID=this.selectedItems.map(n=>n.id).join(","),this.NewResult={projectID:this.ProjectID,name:this.projectViewModel.name,client:+this.Client,source:+this.Source,technology:+this.Technology,dateOfConfirmation:this.projectViewModel.dateOfConfirmation,projectType:+this.ProjectType,pmEmployeeID:+this.PM,tlEmployeeID:+this.TL,qaEmployeeID:+this.QA,designerEmployeeID:+this.Designer,salesEmployeeID:+this.Sales,developerEmployeeID:this.projectViewModel.DeveloperEmployeeID,projectStatus:+this.ProjectStatus,estimatedHours:this.EstimatedHours,teamsURL:this.projectViewModel.teamsURL,channelId:this.projectViewModel.channelID},JSON.stringify(this.NewResult).toLowerCase()===this.OldResult&&0!=this.ProjectID?this.router.navigate(["/Master/ProjectList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0}):(isNaN(this.projectViewModel.projectID)&&(this.projectViewModel.projectID=0),this.projectService.CheckProjectExists(this.projectViewModel.name,this.ProjectID).subscribe(n=>{0==n?this.projectService.saveProject(this.projectViewModel,this.currentUser.employeeID).subscribe(i=>{this.loading=!1,i>0?(this.toastyService.success("Profile Save Successfully.","Save"),this.route.params.subscribe(r=>{this.projectViewModel.projectID>0?this.toastyService.success("Project update successfully.","Update Project"):this.toastyService.success("Project save successfully.","Save Project"),this.router.navigate(["/Master/ProjectList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})})):this.toastyService.error("Something error.","Save Project")},i=>{console.log(i)}):(this.loading=!1,this.toastyService.warning("Project name is already exists.","Check Project Exists"))},n=>{console.log(n),this.toastyService.error("Something error.","Check Project Exists")}))):(this.loading=!0,this.router.navigate(["/login"])))}GetProjectType(t){this.FixProject="2"==t}IsFixProject(){return 1==this.FixProject}clearInputdata(){this.router.navigate(["/Master/ProjectList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}CheckBDEAccess(){return!("BDM"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation)}CheckExecutionAccess(){return"BDM"!=this.currentUser.designation}onItemSelect(t){this.SelectedDeveloper=this.selectedItems.map(n=>n.name).join(", ")}CheckProjectExists(t){this.projectService.CheckProjectExists(t,this.ProjectID).subscribe(n=>{1==n&&this.toastyService.warning("Project name is already exists.","Check Project Exists")},n=>{console.log(n),this.toastyService.error("Something error.","Check Project Exists")})}ChangeProjectStatus(t){t==this.ProjectStatusEnum.Completed&&(this.PM=0,this.TL=0,this.selectedItems=[],this.Designer=0,this.QA=0)}onGitAddEvent(t){this.projectViewModel.gitFieldList=t}OnAddDocument(t){this.timesheetDocument=t}openModal(t){this.model=null,this.formData.ProjectID=this.ProjectID,this.formData.PM=this.PM,this.formData.TL=this.TL,this.formData.Developer=this.DeveloperID,this.formData.Designer=this.Designer,this.formData.QA=this.QA,this.formData.EstimatedHours+=this.EstimatedHours,this.formData.EmployeeID=this.currentUser.employeeID,this.model=this.formData,this.modalRef=this.modalService.show(t,Object.assign({},{class:"AdditionalWorkPopup modal-xl"},this.config))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(B.I8),e.rXU(R),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O),e.rXU(ne),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-project"]],viewQuery:function(n,i){if(1&n&&e.GBs(jo,7),2&n){let o;e.mGM(o=e.lsd())&&(i.template=o.first)}},features:[e.Jv_([u.vh,R])],decls:140,vars:40,consts:[["f","ngForm"],["name","ngModel"],["teamsURL","ngModel"],["largeModal","bs-modal"],["appClient",""],["largeTechModal","bs-modal"],["appTechnology",""],["documentModal","bs-modal"],["appDocument",""],["AdditionalWorkModals",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,""],[1,"card-header"],[1,"caption"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"card-body","shadow-md","mb-3"],[1,"form-group","row","mb-3"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["type","text","name","name","placeholder","Name","required","","maxlength","50","pattern","^[^|]*$",1,"form-control","projectname",3,"ngModelChange","focusout","ngModel"],["class","error",4,"ngIf"],[1,"col-md-6","row"],[1,"col-md-7"],["name","Client","id","Client","required","",1,"form-control",2,"width","84%","display","inline-block",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["data-toggle","modal","id","clientModel","class","table-responsive-custom",3,"click",4,"ngIf"],[1,"col-md-4","col-form-label"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["data-toggle","modal","id","TechnologyModel","class","table-responsive-custom",3,"click",4,"ngIf"],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group row mb-3",4,"ngIf"],["type","text","placeholder","Date Of Confirmation","bsDatepicker","","name","DateOfConfirmation",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["name","ProjectStatus","id","ProjectStatus","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Start Date","bsDatepicker","","name","StartDate",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["type","text","placeholder","End Date","bsDatepicker","","name","EndDate",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],[1,"card-header","card-header","d-flex","justify-content-between"],[4,"ngIf"],["type","text","name","teamsURL","placeholder","Teams URL","maxlength","1000","pattern","https?://.+",1,"form-control",2,"display","inline-block !important","width","90% !important",3,"ngModelChange","ngModel"],["class","table-responsive-custom ml-2","target","_blank",3,"href",4,"ngIf"],[1,"col-md-4","col-form-label",3,"ngClass"],["type","number","name","EstimatedHours","placeholder","Estimated hours",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-6 row",4,"ngIf"],["class","card-footer py-3",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","P","aria-label","Close",1,"close","btn","fs-4",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","button","id","TechPopup","aria-label","Close",1,"close","btn",3,"click"],["aria-hidden","true",1,"fs-4"],["bsModal","","tabindex","-1","role","dialog",1,"modal","fade"],["type","button","id","Estimationpopup","aria-label","Close",1,"close",3,"click"],[3,"OnAddDocument","edittimesheetDocument","ProjectID"],[1,"error"],[3,"value"],["data-toggle","modal","id","clientModel",1,"table-responsive-custom",3,"click"],["aria-hidden","true","tooltip","Add Client","placement","bottom",1,"fa","fa-plus",2,"cursor","pointer"],["data-toggle","modal","id","TechnologyModel",1,"table-responsive-custom",3,"click"],["aria-hidden","true","tooltip","Add Technology","placement","bottom",1,"fa","fa-plus",2,"cursor","pointer"],["name","Source","id","Source",1,"form-control",3,"ngModelChange","ngModel"],["name","Sales","id","Sales",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Add Additional Work","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["target","_blank",1,"table-responsive-custom","ml-2",3,"href"],["aria-hidden","true","tooltip","Redirect to teams","placement","bottom",1,"fa","fa-link",2,"cursor","pointer"],["name","TL","id","TL",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected",""],["name","PM","id","PM",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","Designer","id","Designer",1,"form-control",3,"ngModelChange","ngModel"],["name","QA","id","QA",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer","py-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset",1,"btn","btn-danger","text-white"],["aria-hidden","true",1,"fa","fa-refresh"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],["type","button","id","AdditionalWorkPopup","aria-label","Close",1,"close",3,"click"],[3,"SaveSuccess","parentData"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),e.EFF(6," Project Details "),e.k0s()(),e.j41(7,"form",16,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(8);return e.Njj(a.form.valid&&i.ProjectStatus>0&&i.saveProject(a))}),e.j41(9,"div",17)(10,"div",18)(11,"div",19)(12,"label",20),e.EFF(13,"Name"),e.k0s(),e.j41(14,"div",21)(15,"input",22,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectViewModel.name,a)||(i.projectViewModel.name=a),e.Njj(a)}),e.bIt("focusout",function(a){return e.eBV(o),e.Njj(i.CheckProjectExists(a.target.value))}),e.k0s(),e.DNE(17,Co,2,0,"span",23)(18,ko,2,0,"span",23),e.k0s()(),e.j41(19,"div",24)(20,"label",20),e.EFF(21,"Client"),e.k0s(),e.j41(22,"div",25)(23,"select",26),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Client,a)||(i.Client=a),e.Njj(a)}),e.j41(24,"option",27),e.EFF(25,"-- Client --"),e.k0s(),e.DNE(26,Io,2,2,"option",28),e.k0s(),e.DNE(27,vo,2,0,"span",29)(28,Eo,2,0,"div",23),e.k0s()()(),e.j41(29,"div",18)(30,"div",24)(31,"label",30),e.EFF(32,"Technology"),e.k0s(),e.j41(33,"div",21)(34,"select",31),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Technology,a)||(i.Technology=a),e.Njj(a)}),e.j41(35,"option",27),e.EFF(36," -- Technology -- "),e.k0s(),e.DNE(37,Fo,2,2,"option",28),e.k0s(),e.DNE(38,To,2,0,"span",32),e.k0s()(),e.j41(39,"div",24)(40,"label",30),e.EFF(41,"Project Type"),e.k0s(),e.j41(42,"div",21)(43,"select",33),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.ProjectType,a)||(i.ProjectType=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.GetProjectType(a))}),e.j41(44,"option",27),e.EFF(45," -- Project Type -- "),e.k0s(),e.DNE(46,wo,2,2,"option",28),e.k0s()()()(),e.DNE(47,Go,17,4,"div",34),e.j41(48,"div",18)(49,"div",24)(50,"label",30),e.EFF(51,"Date of Confirmation"),e.k0s(),e.j41(52,"div",21)(53,"input",35),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DateOfConfirmation,a)||(i.DateOfConfirmation=a),e.Njj(a)}),e.k0s()()(),e.j41(54,"div",24)(55,"label",20),e.EFF(56,"Project Status"),e.k0s(),e.j41(57,"div",21)(58,"select",36),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.ProjectStatus,a)||(i.ProjectStatus=a),e.Njj(a)}),e.j41(59,"option",27),e.EFF(60," -- Project Status -- "),e.k0s(),e.DNE(61,Yo,2,2,"option",28),e.k0s(),e.DNE(62,Ho,2,0,"div",23),e.k0s()()(),e.j41(63,"div",18)(64,"div",24)(65,"label",30),e.EFF(66,"Start Date"),e.k0s(),e.j41(67,"div",21)(68,"input",37),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.StartDate,a)||(i.StartDate=a),e.Njj(a)}),e.k0s()()(),e.j41(69,"div",24)(70,"label",30),e.EFF(71,"End Date"),e.k0s(),e.j41(72,"div",21)(73,"input",38),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.EndDate,a)||(i.EndDate=a),e.Njj(a)}),e.k0s()()()()(),e.j41(74,"div",39)(75,"div",15),e.EFF(76,"Estimation & Resource Deatils"),e.k0s(),e.DNE(77,No,3,0,"span",40),e.k0s(),e.j41(78,"div",17)(79,"div",18)(80,"div",24)(81,"label",30),e.EFF(82,"Teams URL"),e.k0s(),e.j41(83,"div",21)(84,"input",41,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectViewModel.teamsURL,a)||(i.projectViewModel.teamsURL=a),e.Njj(a)}),e.k0s(),e.DNE(86,Lo,2,0,"span",23)(87,Bo,2,1,"a",42),e.k0s()(),e.j41(88,"div",24)(89,"label",43),e.EFF(90,"Estimated Hours"),e.k0s(),e.j41(91,"div",21)(92,"input",44),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.EstimatedHours,a)||(i.EstimatedHours=a),e.Njj(a)}),e.k0s(),e.DNE(93,Vo,2,1,"div",40),e.k0s()()(),e.DNE(94,Jo,10,3,"div",34)(95,zo,16,7,"div",34),e.j41(96,"div",18),e.DNE(97,qo,8,2,"div",45),e.k0s(),e.DNE(98,Wo,8,2,"div",46),e.k0s()()()()()(),e.j41(99,"div",47,3)(101,"div",48)(102,"div",49)(103,"div",50)(104,"h4",51),e.EFF(105,"Clients"),e.k0s(),e.j41(106,"button",52),e.bIt("click",function(){e.eBV(o);const a=e.sdS(100),d=e.sdS(111);return a.hide(),e.Njj(d.resetFormClient())}),e.j41(107,"span",53),e.EFF(108,"\xd7"),e.k0s()()(),e.j41(109,"div",54),e.nrm(110,"app-client",null,4),e.k0s()()()(),e.j41(112,"div",47,5)(114,"div",48)(115,"div",49)(116,"div",50)(117,"h4",51),e.EFF(118,"Technology"),e.k0s(),e.j41(119,"button",55),e.bIt("click",function(){e.eBV(o);const a=e.sdS(113),d=e.sdS(124);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(120,"span",56),e.EFF(121,"\xd7"),e.k0s()()(),e.j41(122,"div",54),e.nrm(123,"app-technology",null,6),e.k0s()()()(),e.j41(125,"div",57,7)(127,"div",48)(128,"div",49)(129,"div",50)(130,"h4",51),e.EFF(131,"Estimation Document"),e.k0s(),e.j41(132,"button",58),e.bIt("click",function(){e.eBV(o);const a=e.sdS(126);return e.Njj(a.hide())}),e.j41(133,"span",53),e.EFF(134,"\xd7"),e.k0s()()(),e.j41(135,"div",54)(136,"app-estimation-document",59,8),e.bIt("OnAddDocument",function(a){return e.eBV(o),e.Njj(i.OnAddDocument(a))}),e.k0s()()()()(),e.DNE(138,Zo,9,1,"ng-template",null,9,e.C5r)}if(2&n){const o=e.sdS(8),r=e.sdS(16),a=e.sdS(85);e.R7$(11),e.Y8G("ngClass",e.eq3(36,bo,o.submitted&&!r.valid)),e.R7$(4),e.R50("ngModel",i.projectViewModel.name),e.R7$(2),e.Y8G("ngIf",o.submitted&&r.errors&&r.errors.pattern),e.R7$(),e.Y8G("ngIf",o.submitted&&!r.valid&&r.errors.required),e.R7$(5),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.result.clientDropdownModel),e.R7$(),e.Y8G("ngIf",i.designationEnum.ITSupport!=i.currentUser.designationID),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.Client||null==i.Client||0==i.Client||!(i.Client>0))),e.R7$(6),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.result.technologyDropdownModel),e.R7$(),e.Y8G("ngIf",i.designationEnum.ITSupport!=i.currentUser.designationID),e.R7$(5),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.result.projectTypeDropdownModel),e.R7$(),e.Y8G("ngIf",i.CheckBDEAccess()),e.R7$(6),e.R50("ngModel",i.DateOfConfirmation),e.Y8G("bsConfig",i.dpConfig),e.R7$(5),e.R50("ngModel",i.ProjectStatus),e.R7$(3),e.Y8G("ngForOf",i.result.projectStatusModel),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.ProjectStatus||null==i.ProjectStatus||0==i.ProjectStatus||!(i.ProjectStatus>0))),e.R7$(6),e.R50("ngModel",i.StartDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(5),e.R50("ngModel",i.EndDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(4),e.Y8G("ngIf",i.ProjectID>0),e.R7$(7),e.R50("ngModel",i.projectViewModel.teamsURL),e.R7$(2),e.Y8G("ngIf",o.submitted&&a.errors&&a.errors.pattern),e.R7$(),e.Y8G("ngIf",null!=i.projectViewModel.teamsURL),e.R7$(2),e.Y8G("ngClass",e.eq3(38,Mo,i.IsFixProject())),e.R7$(3),e.R50("ngModel",i.EstimatedHours),e.R7$(),e.Y8G("ngIf",i.IsFixProject()),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(2),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(),e.Y8G("ngIf",i.designationEnum.ITSupport!=i.currentUser.designationID),e.R7$(38),e.Y8G("edittimesheetDocument",i.edittimesheetDocument)("ProjectID",i.ProjectID)}},dependencies:[u.YU,u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.tU,c.R_,c.vS,c.cV,B.hZ,k.pc,k.p0,E.dg,w.b,Ne,pt,ho,ut],styles:["#Technology[_ngcontent-%COMP%]{width:92%!important;display:inline-block!important}"]})}return s})(),V=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.options={headers:new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json"})}}gettoken(){return this.currentUser?.authtoken??""}getProjectProjectType(t){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetProjectProjectType?CompanyID="+this.currentUser.companyID+"&FinancialYear="+t,this.options)}GetActiveClient(t){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetActiveClient?FinancialYear="+t+"&CompanyID="+this.currentUser.companyID,this.options)}GetProjectByClientID(t){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetProjectByClientID?ClientID="+t,this.options)}getMonthlyTimeSheetByID(t){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetMonthlyTimeSheetByID?MonthlyTimeSheetID="+t+"&CompanyID="+this.currentUser.companyID,this.options)}saveMonthlyTimeSheet(t,n){return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/SaveUpdateMonthlyTimeSheet?EmployeeID="+n,t,this.options)}deleteMonthlyTimeSheet(t,n){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/DeleteMonthlyTimeSheet?MonthlyTimeSheetID="+t+"&EmployeeID="+n,this.options)}getProjectDetailsByID(t,n,i,o){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetProjectDetailsByID?ProjectID="+t+"&CompanyID="+this.currentUser.companyID+"&MonthlyTimeSheetID="+n+"&Month="+i+"&FinancialYearID="+o,this.options)}CheckTimeSheetExists(t,n,i,o){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/CheckTimeSheetExists?ProjectID="+t+"&FinancialYearID="+n+"&Months="+i+"&MonthlyTimeSheetID="+o+"&CompanyID="+this.currentUser.companyID,this.options)}CopyMonthlyHours(t,n,i){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/CopyMonthlyHours?FinancialYearID="+t+"&Months="+n+"&MonthlyTimeSheetID="+i+"&EmployeeID="+this.currentUser.employeeID,this.options)}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class es{}let pe=(()=>{class s{constructor(t){this.el=t,this.elemRef=t}onKeyDown(t){let n=t;if(this.OnlyNumber){if(-1!==[46,8,9,27,13,110,190].indexOf(n.keyCode)||65==n.keyCode&&!0===n.ctrlKey||67==n.keyCode&&!0===n.ctrlKey||88==n.keyCode&&!0===n.ctrlKey||n.keyCode>=35&&n.keyCode<=39)return;(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}}onKeyPress(t){const n=t,i=parseFloat(n.target.value);if(this.minValue&&this.minValue.length&&(i<parseFloat(this.minValue)||isNaN(i)&&"0"===n.key)&&n.preventDefault(),this.maxValue&&this.maxValue.length&&i>parseFloat(this.maxValue)&&n.preventDefault(),this.DecimalPlaces){let o=-1;"number"==typeof this.elemRef.nativeElement.selectionStart?o=this.elemRef.nativeElement.selectionStart:console.log("This browser doesn't support selectionStart");const r=(n.target.value.match(/\./g)||[]).length,a=n.target.value.split(".")[1]?n.target.value.split(".")[1].length:0;(r>1||1===r&&"."===n.key||a>parseInt(this.DecimalPlaces)-1&&o>n.target.value.indexOf(".")&&-1===["Backspace","ArrowLeft","ArrowRight"].indexOf(n.key))&&n.preventDefault()}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(e.aKT))};static#t=this.\u0275dir=e.FsC({type:s,selectors:[["","OnlyNumber",""]],hostBindings:function(n,i){1&n&&e.bIt("keydown",function(r){return i.onKeyDown(r)})("keypress",function(r){return i.onKeyPress(r)})},inputs:{OnlyNumber:"OnlyNumber",DecimalPlaces:"DecimalPlaces",minValue:"minValue",maxValue:"maxValue"}})}return s})();const X=s=>({"has-error":s});function ts(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.selectedRowForEditDelete(i.monthlyTimeSheetModel.monthlyTimeSheetID))}),e.nrm(2,"i",48),e.k0s()()}}function is(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function ns(s,l){1&s&&(e.j41(0,"div",50),e.EFF(1," Financial Year is required "),e.k0s())}function os(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function ss(s,l){1&s&&(e.j41(0,"div",50),e.EFF(1," Month is required "),e.k0s())}function rs(s,l){1&s&&(e.j41(0,"div",50),e.EFF(1," Client is required "),e.k0s())}function as(s,l){if(1&s){const t=e.RV6();e.j41(0,"td",51)(1,"div",52)(2,"ng-multiselect-dropdown",53),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedProjects,i)||(o.selectedProjects=i),e.Njj(i)}),e.bIt("onSelect",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.SearchClient(i))}),e.k0s(),e.DNE(3,rs,2,0,"div",28),e.k0s()()}if(2&s){const t=e.XpG(),n=e.sdS(17);e.R7$(),e.Y8G("ngClass",e.eq3(6,X,n.submitted&&(null==t.Client||null==t.Client||""==t.Client||!t.Client>0))),e.R7$(),e.Y8G("placeholder","-- Clients --")("data",t.ClientList),e.R50("ngModel",t.selectedProjects),e.Y8G("settings",t.clientProjectDropdownSettings),e.R7$(),e.Y8G("ngIf",n.submitted&&(null==t.Client||null==t.Client||""==t.Client||!t.Client>0))}}function ls(s,l){if(1&s&&(e.j41(0,"td",54),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.JRh(t.Client)}}function cs(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectID),e.R7$(),e.SpI(" ",t.name," ")}}function hs(s,l){1&s&&(e.j41(0,"div",50),e.EFF(1," Project is required "),e.k0s())}function ds(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"div",52)(2,"select",55),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Project,i)||(o.Project=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.onProjectChange(i,o.monthlyTimeSheetModel.monthlyTimeSheetID,o.Months,o.FinancialYear))}),e.j41(3,"option",25),e.EFF(4,"-- Project --"),e.k0s(),e.DNE(5,cs,2,2,"option",26),e.k0s(),e.DNE(6,hs,2,0,"div",28),e.k0s()()}if(2&s){const t=e.XpG(),n=e.sdS(17);e.R7$(),e.Y8G("ngClass",e.eq3(4,X,n.submitted&&""==t.Project)),e.R7$(),e.R50("ngModel",t.Project),e.R7$(3),e.Y8G("ngForOf",t.result.projectDropdownModel),e.R7$(),e.Y8G("ngIf",n.submitted&&""==t.Project)}}function ps(s,l){1&s&&(e.j41(0,"div",50),e.EFF(1," Project is required "),e.k0s())}function us(s,l){if(1&s){const t=e.RV6();e.j41(0,"td",56)(1,"div",52)(2,"ng-multiselect-dropdown",57),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.ProjectDrp,i)||(o.ProjectDrp=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.onSearchProjectChange(i,o.monthlyTimeSheetModel.monthlyTimeSheetID,o.Months,o.FinancialYear))}),e.k0s(),e.DNE(3,ps,2,0,"div",28),e.k0s()()}if(2&s){const t=e.XpG(),n=e.sdS(17);e.R7$(),e.Y8G("ngClass",e.eq3(6,X,n.submitted&&(null==t.Project||null==t.Project||""==t.Project||!t.Project>0))),e.R7$(),e.Y8G("placeholder","-- Project --")("data",t.result.projectDropdownModel)("settings",t.SinglSelectdropdownSettings),e.R50("ngModel",t.ProjectDrp),e.R7$(),e.Y8G("ngIf",n.submitted&&(null==t.Project||null==t.Project||""==t.Project||!t.Project>0))}}function ms(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1," PM Hours "),e.k0s()),2&s){const t=e.XpG(3);e.BMQ("rowspan",t.PMMonthlyhours.length)}}function gs(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function fs(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewPM())}),e.nrm(1,"i",72),e.k0s()}}function As(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,o=e.XpG(2);return e.Njj(o.DeletePM(i))}),e.nrm(1,"i",48),e.k0s()}}function _s(s,l){if(1&s){const t=e.RV6();e.j41(0,"th")(1,"div",52)(2,"input",74,1),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.DH7(o.monthlyTimeSheetModel.pmHours,i)||(o.monthlyTimeSheetModel.pmHours=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.AutoTotal())}),e.k0s()()()}if(2&s){const t=e.sdS(3),n=e.XpG(3),i=e.sdS(17);e.BMQ("rowspan",n.PMMonthlyhours.length),e.R7$(),e.Y8G("ngClass",e.eq3(3,X,i.submitted&&!t.valid)),e.R7$(),e.R50("ngModel",n.monthlyTimeSheetModel.pmHours)}}function ys(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",62),e.DNE(1,ms,2,1,"th",17),e.j41(2,"td")(3,"div",31)(4,"select",63),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.employeeID,i)||(o.employeeID=i),e.Njj(i)}),e.j41(5,"option",64),e.EFF(6,"-- PM --"),e.k0s(),e.DNE(7,gs,2,2,"option",26),e.k0s()()(),e.j41(8,"td")(9,"input",65),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.estimatedHours,i)||(o.estimatedHours=i),e.Njj(i)}),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.AutoPMTotal())}),e.k0s()(),e.j41(10,"td")(11,"input",66),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.isTempResource,i)||(o.isTempResource=i),e.Njj(i)}),e.k0s(),e.j41(12,"div",67)(13,"input",68),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.actualHours,i)||(o.actualHours=i),e.Njj(i)}),e.k0s(),e.DNE(14,fs,2,0,"button",69)(15,As,2,0,"button",70),e.k0s()(),e.DNE(16,_s,4,5,"th",17),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG(2);e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(3),e.Mz_("name","PM_employeeID_",n,""),e.Mz_("id","PM_employeeID_",n,""),e.R50("ngModel",t.employeeID),e.R7$(3),e.Y8G("ngForOf",i.PMDropdownModel),e.R7$(2),e.Mz_("name","PM_estimatedHours_",n,""),e.Mz_("id","PM_estimatedHours_",n,""),e.FS9("value",t.estimatedHours),e.R50("ngModel",t.estimatedHours),e.R7$(2),e.FS9("value",t.isTempResource),e.Mz_("name","PM_isTempResource_",n,""),e.Mz_("id","PM_isTempResource_",n,""),e.R50("ngModel",t.isTempResource),e.R7$(2),e.Mz_("name","PM_actualHours_",n,""),e.Mz_("id","PM_actualHours_",n,""),e.FS9("value",t.actualHours),e.R50("ngModel",t.actualHours),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(),e.Y8G("ngIf",1==t.isTempResource&&n>0),e.R7$(),e.Y8G("ngIf",0==n)}}function Ss(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1," TL Hours "),e.k0s()),2&s){const t=e.XpG(3);e.BMQ("rowspan",t.TLMonthlyhours.length)}}function Ds(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function js(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewTL())}),e.nrm(1,"i",72),e.k0s()}}function bs(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,o=e.XpG(2);return e.Njj(o.DeleteTL(i))}),e.nrm(1,"i",48),e.k0s()}}function Ms(s,l){if(1&s){const t=e.RV6();e.j41(0,"th")(1,"div",75)(2,"input",76,2),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.DH7(o.monthlyTimeSheetModel.tlHours,i)||(o.monthlyTimeSheetModel.tlHours=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.AutoTotal())}),e.k0s()()()}if(2&s){const t=e.sdS(3),n=e.XpG(3),i=e.sdS(17);e.BMQ("rowspan",n.TLMonthlyhours.length),e.R7$(),e.Y8G("ngClass",e.eq3(3,X,i.submitted&&!t.valid)),e.R7$(),e.R50("ngModel",n.monthlyTimeSheetModel.tlHours)}}function Cs(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",62),e.DNE(1,Ss,2,1,"th",17),e.j41(2,"td")(3,"div",31)(4,"select",63),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.employeeID,i)||(o.employeeID=i),e.Njj(i)}),e.j41(5,"option",64),e.EFF(6,"-- TL --"),e.k0s(),e.DNE(7,Ds,2,2,"option",26),e.k0s()()(),e.j41(8,"td")(9,"input",65),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.estimatedHours,i)||(o.estimatedHours=i),e.Njj(i)}),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.AutoTLTotal())}),e.k0s()(),e.j41(10,"td")(11,"input",66),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.isTempResource,i)||(o.isTempResource=i),e.Njj(i)}),e.k0s(),e.j41(12,"div",67)(13,"input",68),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.actualHours,i)||(o.actualHours=i),e.Njj(i)}),e.k0s(),e.DNE(14,js,2,0,"button",69)(15,bs,2,0,"button",70),e.k0s()(),e.DNE(16,Ms,4,5,"th",17),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG(2);e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(3),e.Mz_("name","TL_employeeID_",n,""),e.Mz_("id","TL_employeeID_",n,""),e.R50("ngModel",t.employeeID),e.R7$(3),e.Y8G("ngForOf",i.TLDropdownModel),e.R7$(2),e.Mz_("name","TL_estimatedHours_",n,""),e.Mz_("id","TL_estimatedHours_",n,""),e.FS9("value",t.estimatedHours),e.R50("ngModel",t.estimatedHours),e.R7$(2),e.FS9("value",t.isTempResource),e.Mz_("name","TL_isTempResource_",n,""),e.Mz_("id","TL_isTempResource_",n,""),e.R50("ngModel",t.isTempResource),e.R7$(2),e.Mz_("name","TL_actualHours_",n,""),e.Mz_("id","TL_actualHours_",n,""),e.FS9("value",t.actualHours),e.R50("ngModel",t.actualHours),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(),e.Y8G("ngIf",1==t.isTempResource&&n>0),e.R7$(),e.Y8G("ngIf",0==n)}}function ks(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1," Developer Hours "),e.k0s()),2&s){const t=e.XpG(3);e.BMQ("rowspan",t.DeveloperMonthlyhours.length)}}function Is(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function vs(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewDeveloper())}),e.nrm(1,"i",72),e.k0s()}}function Es(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,o=e.XpG(2);return e.Njj(o.DeleteDeveloper(i))}),e.nrm(1,"i",48),e.k0s()}}function Fs(s,l){if(1&s){const t=e.RV6();e.j41(0,"th")(1,"div",75)(2,"input",78,3),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.DH7(o.monthlyTimeSheetModel.developerHours,i)||(o.monthlyTimeSheetModel.developerHours=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.AutoTotal())}),e.k0s()()()}if(2&s){const t=e.sdS(3),n=e.XpG(3),i=e.sdS(17);e.BMQ("rowspan",n.DeveloperMonthlyhours.length),e.R7$(),e.Y8G("ngClass",e.eq3(3,X,i.submitted&&!t.valid)),e.R7$(),e.R50("ngModel",n.monthlyTimeSheetModel.developerHours)}}function Ts(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",62),e.DNE(1,ks,2,1,"th",17),e.j41(2,"td")(3,"div",31)(4,"select",63),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.employeeID,i)||(o.employeeID=i),e.Njj(i)}),e.j41(5,"option",64),e.EFF(6,"-- Developer --"),e.k0s(),e.DNE(7,Is,2,2,"option",26),e.k0s()()(),e.j41(8,"td")(9,"input",77),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.AutoDeveloperTotal())}),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.estimatedHours,i)||(o.estimatedHours=i),e.Njj(i)}),e.k0s()(),e.j41(10,"td")(11,"input",66),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.isTempResource,i)||(o.isTempResource=i),e.Njj(i)}),e.k0s(),e.j41(12,"div",67)(13,"input",68),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.actualHours,i)||(o.actualHours=i),e.Njj(i)}),e.k0s(),e.DNE(14,vs,2,0,"button",69)(15,Es,2,0,"button",70),e.k0s()(),e.DNE(16,Fs,4,5,"th",17),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG(2);e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(3),e.Mz_("name","DV_employeeID_",n,""),e.Mz_("id","DV_employeeID_",n,""),e.R50("ngModel",t.employeeID),e.R7$(3),e.Y8G("ngForOf",i.DevloperDropdownModel),e.R7$(2),e.Mz_("name","DV_estimatedHours_",n,""),e.Mz_("id","DV_estimatedHours_",n,""),e.FS9("value",t.estimatedHours),e.R50("ngModel",t.estimatedHours),e.R7$(2),e.FS9("value",t.isTempResource),e.Mz_("name","DV_isTempResource_",n,""),e.Mz_("id","DV_isTempResource_",n,""),e.R50("ngModel",t.isTempResource),e.R7$(2),e.Mz_("name","DV_actualHours_",n,""),e.Mz_("id","DV_actualHours_",n,""),e.FS9("value",t.actualHours),e.R50("ngModel",t.actualHours),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(),e.Y8G("ngIf",1==t.isTempResource&&n>0),e.R7$(),e.Y8G("ngIf",0==n)}}function ws(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1," Designer Hours "),e.k0s()),2&s){const t=e.XpG(3);e.BMQ("rowspan",t.DesignerMonthlyhours.length)}}function Ps(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function Rs(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewDesigner())}),e.nrm(1,"i",72),e.k0s()}}function Gs(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,o=e.XpG(2);return e.Njj(o.DeleteDesigner(i))}),e.nrm(1,"i",48),e.k0s()}}function Ys(s,l){if(1&s){const t=e.RV6();e.j41(0,"th")(1,"div",75)(2,"input",79,4),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.DH7(o.monthlyTimeSheetModel.designerHours,i)||(o.monthlyTimeSheetModel.designerHours=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.AutoTotal())}),e.k0s()()()}if(2&s){const t=e.sdS(3),n=e.XpG(3),i=e.sdS(17);e.BMQ("rowspan",n.DesignerMonthlyhours.length),e.R7$(),e.Y8G("ngClass",e.eq3(3,X,i.submitted&&!t.valid)),e.R7$(),e.R50("ngModel",n.monthlyTimeSheetModel.designerHours)}}function Hs(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",62),e.DNE(1,ws,2,1,"th",17),e.j41(2,"td")(3,"div",31)(4,"select",63),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.employeeID,i)||(o.employeeID=i),e.Njj(i)}),e.j41(5,"option",64),e.EFF(6,"-- Designer --"),e.k0s(),e.DNE(7,Ps,2,2,"option",26),e.k0s()()(),e.j41(8,"td")(9,"input",77),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.AutoDesignerTotal())}),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.estimatedHours,i)||(o.estimatedHours=i),e.Njj(i)}),e.k0s()(),e.j41(10,"td")(11,"input",66),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.isTempResource,i)||(o.isTempResource=i),e.Njj(i)}),e.k0s(),e.j41(12,"div",67)(13,"input",68),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.actualHours,i)||(o.actualHours=i),e.Njj(i)}),e.k0s(),e.DNE(14,Rs,2,0,"button",69)(15,Gs,2,0,"button",70),e.k0s()(),e.DNE(16,Ys,4,5,"th",17),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG(2);e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(3),e.Mz_("name","DS_employeeID_",n,""),e.Mz_("id","DS_employeeID_",n,""),e.R50("ngModel",t.employeeID),e.R7$(3),e.Y8G("ngForOf",i.DesignerDropdownModel),e.R7$(2),e.Mz_("name","DS_estimatedHours_",n,""),e.Mz_("id","DS_estimatedHours_",n,""),e.FS9("value",t.estimatedHours),e.R50("ngModel",t.estimatedHours),e.R7$(2),e.FS9("value",t.isTempResource),e.Mz_("name","DS_isTempResource_",n,""),e.Mz_("id","DS_isTempResource_",n,""),e.R50("ngModel",t.isTempResource),e.R7$(2),e.Mz_("name","DS_actualHours_",n,""),e.Mz_("id","DS_actualHours_",n,""),e.FS9("value",t.actualHours),e.R50("ngModel",t.actualHours),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(),e.Y8G("ngIf",1==t.isTempResource&&n>0),e.R7$(),e.Y8G("ngIf",0==n)}}function Ns(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1," QA Hours "),e.k0s()),2&s){const t=e.XpG(3);e.BMQ("rowspan",t.QAMonthlyhours.length)}}function Ls(s,l){if(1&s&&(e.j41(0,"option",49),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function Bs(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewQA())}),e.nrm(1,"i",72),e.k0s()}}function Us(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const i=e.XpG().index,o=e.XpG(2);return e.Njj(o.DeleteQA(i))}),e.nrm(1,"i",48),e.k0s()}}function Vs(s,l){if(1&s){const t=e.RV6();e.j41(0,"th")(1,"div",75)(2,"input",80,5),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.DH7(o.monthlyTimeSheetModel.qaHours,i)||(o.monthlyTimeSheetModel.qaHours=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.AutoTotal())}),e.k0s()()()}if(2&s){const t=e.sdS(3),n=e.XpG(3),i=e.sdS(17);e.BMQ("rowspan",n.QAMonthlyhours.length),e.R7$(),e.Y8G("ngClass",e.eq3(3,X,i.submitted&&!t.valid)),e.R7$(),e.R50("ngModel",n.monthlyTimeSheetModel.qaHours)}}function xs(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",62),e.DNE(1,Ns,2,1,"th",17),e.j41(2,"td")(3,"div",31)(4,"select",63),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.employeeID,i)||(o.employeeID=i),e.Njj(i)}),e.j41(5,"option",64),e.EFF(6,"-- QA --"),e.k0s(),e.DNE(7,Ls,2,2,"option",26),e.k0s()()(),e.j41(8,"td")(9,"input",77),e.bIt("keyup",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.AutoQATotal())}),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.estimatedHours,i)||(o.estimatedHours=i),e.Njj(i)}),e.k0s()(),e.j41(10,"td")(11,"input",66),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.isTempResource,i)||(o.isTempResource=i),e.Njj(i)}),e.k0s(),e.j41(12,"div",67)(13,"input",68),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.actualHours,i)||(o.actualHours=i),e.Njj(i)}),e.k0s(),e.DNE(14,Bs,2,0,"button",69)(15,Us,2,0,"button",70),e.k0s()(),e.DNE(16,Vs,4,5,"th",17),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG(2);e.FCK("id","QA_",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(3),e.Mz_("name","QA_employeeID_",n,""),e.Mz_("id","QA_employeeID_",n,""),e.R50("ngModel",t.employeeID),e.R7$(3),e.Y8G("ngForOf",i.QADropdownModel),e.R7$(2),e.Mz_("name","QA_estimatedHours_",n,""),e.Mz_("id","QA_estimatedHours_",n,""),e.FS9("value",t.estimatedHours),e.R50("ngModel",t.estimatedHours),e.R7$(2),e.FS9("value",t.isTempResource),e.Mz_("name","QA_isTempResource_",n,""),e.Mz_("id","QA_isTempResource_",n,""),e.R50("ngModel",t.isTempResource),e.R7$(2),e.Mz_("name","QA_actualHours_",n,""),e.Mz_("id","QA_actualHours_",n,""),e.FS9("value",t.actualHours),e.R50("ngModel",t.actualHours),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(),e.Y8G("ngIf",1==t.isTempResource&&n>0),e.R7$(),e.Y8G("ngIf",0==n)}}function Qs(s,l){if(1&s&&(e.j41(0,"table",58)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"Resource Hours"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Name"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Estimated Hours"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Actual Hours"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Total Estimated Hours"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,ys,17,31,"tr",59)(15,Cs,17,31,"tr",59)(16,Ts,17,31,"tr",59)(17,Hs,17,31,"tr",59)(18,xs,17,31,"tr",59),e.k0s(),e.j41(19,"tfoot",60)(20,"tr")(21,"th"),e.EFF(22,"Total Hours"),e.k0s(),e.nrm(23,"th",61),e.j41(24,"th")(25,"label"),e.EFF(26),e.k0s()()()()()),2&s){const t=e.XpG();e.R7$(14),e.Y8G("ngForOf",t.PMMonthlyhours),e.R7$(),e.Y8G("ngForOf",t.TLMonthlyhours),e.R7$(),e.Y8G("ngForOf",t.DeveloperMonthlyhours),e.R7$(),e.Y8G("ngForOf",t.DesignerMonthlyhours),e.R7$(),e.Y8G("ngForOf",t.QAMonthlyhours),e.R7$(8),e.SpI(" ",t.AutoTotal(),"")}}function Os(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",81)(1,"div",82)(2,"label",83),e.EFF(3,"Comment"),e.k0s(),e.j41(4,"div",84)(5,"textarea",85,6),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.monthlyTimeSheetModel.comment,i)||(o.monthlyTimeSheetModel.comment=i),e.Njj(i)}),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.R50("ngModel",t.monthlyTimeSheetModel.comment)}}function Js(s,l){1&s&&e.nrm(0,"img",86)}let mt=(()=>{class s{constructor(t,n,i,o,r,a){this.monthlyTimeSheetService=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.toastyService=a,this.ProjectList=[],this.ClientList=[],this.ClientDrp=[],this.Client=[],this.monthlyResourceTimeSheetModel={PMMonthlyhours:[],TLMonthlyhours:[],DeveloperMonthlyhours:[],DesignerMonthlyhours:[],QAMonthlyhours:[]},this.monthlyTimeSheetModel={monthlyTimeSheetID:0,project:"",projectType:0,comment:"",month:0,financialYear:0,pMTIMSHours:0,pmHours:0,tLTIMSHours:0,tlHours:0,developerTIMSHours:0,developerHours:0,designerTIMSHours:0,designerHours:0,qATIMSHours:0,qaHours:0,invoiceNo:"",monthlyResourceTimeSheetModel:this.monthlyResourceTimeSheetModel},this.loading=!1,this.ProjectDrp=[],this.Project=[],this.ProjectType=[],this.FinancialYear=[],this.MonthlyTimeSheetID=0,this.result=[],this.Months=[],this.projectdropdownControl=!0,this.Disabled=!0,this.TotalHours=0,this.ProjectClient="",this.ProjectTechnology="",this.ProjectFlow="",this.CopyMonthltTimeSheet=!1,this.OldID=0,this.SinglSelectdropdownSettings={},this.SinglSelectClientdropdownSettings={},this.PMMonthlyhours=new Array,this.TLMonthlyhours=new Array,this.DeveloperMonthlyhours=new Array,this.DesignerMonthlyhours=new Array,this.QAMonthlyhours=new Array,this.clientProjectDropdownSettings={},this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.clientProjectDropdownSettings={singleSelection:!1,idField:"clientID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},"Sales"==this.currentUser.designation&&this.router.navigate(["/SmartDesk/AccessDenied"]),this.SinglSelectClientdropdownSettings={singleSelection:!0,text:"Select Client",selectAllText:"Select All",unSelectAllText:"UnSelect All",enableSearchFilter:!0,classes:"form-control project-drp",showCheckbox:!1,primaryKey:"clientID",enableCheckAll:!1,enableFilterSelectAll:!1,maxHeight:125,searchBy:["name"],searchAutofocus:!0},this.SinglSelectdropdownSettings={singleSelection:!0,idField:"projectID",textField:"name",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0,closeDropDownOnSelection:!0,text:"Select Project",selectAllText:"Select All",unSelectAllText:"UnSelect All",enableSearchFilter:!0,classes:"form-control project-drp",showCheckbox:!1,primaryKey:"projectID",enableCheckAll:!1,enableFilterSelectAll:!1,searchBy:["name"],searchAutofocus:!0};let t=this.router.parseUrl(this.router.url);this.MonthlyTimeSheetID=+t.queryParams.id,this.filterModel=t.queryParams.filterModel,this.MonthlyTimeSheetID>0?this.getMonthlyTimeSheetByID(this.MonthlyTimeSheetID):this.getProjectProjectType()}getProjectProjectType(){this.monthlyTimeSheetService.getProjectProjectType(this.FinancialYear).subscribe(t=>{""!=t&&(this.Months=t.month,this.FinancialYear=t.financialYear,this.result=t,this.ClientList=t.clientDropdownModel,this.ProjectList=[])},t=>{console.log(t)})}Activeclient(){this.monthlyTimeSheetService.GetActiveClient(this.FinancialYear).subscribe(t=>{""!=t&&(this.ClientList=[],this.ClientList=t.clientDropdownModel,this.ClientDrp=null,this.reset())},t=>{console.log(t)})}reset(){this.ProjectDrp=null,this.ProjectList=[],this.ProjectClient="",this.ProjectFlow="",this.ProjectTechnology="",this.ProjectType=0,this.PMMonthlyhours=[],this.TLMonthlyhours=[],this.DeveloperMonthlyhours=[],this.DesignerMonthlyhours=[],this.QAMonthlyhours=[],this.PMDropdownModel=[],this.TLDropdownModel=[],this.DevloperDropdownModel=[],this.DesignerDropdownModel=[],this.QADropdownModel=0}SearchClient(t){""==t||null==t||(this.Client=t?.clientID,this.reset(),this.ClientWiseProject(this.Client))}ClientWiseProject(t){this.Client=t,this.monthlyTimeSheetService.GetProjectByClientID(t).subscribe(n=>{""!=n&&(this.ProjectList=n)},n=>{console.log(n)})}onSearchProjectChange(t,n,i,o){this.ProjectDrp=t,this.Project=null!=this.ProjectDrp?parseInt(t.map(r=>r.projectID).join(",")):0,this.onProjectChange(this.Project,n,i,o)}onProjectChange(t,n,i,o){t>0&&(this.monthlyTimeSheetService.getProjectDetailsByID(t,n,i,o).subscribe(r=>{if(this.loading=!1,""!=r.projectDetailViewModel)if(this.ProjectClient=r.projectDetailViewModel.client,this.ProjectType=r.projectDetailViewModel.projectTypeID,this.ProjectTechnology=r.projectDetailViewModel.technology,this.ProjectFlow=r.projectDetailViewModel.flow,this.PMMonthlyhours=r.pmMonthlyhours,this.TLMonthlyhours=r.tlMonthlyhours,this.DeveloperMonthlyhours=r.developerMonthlyhours,this.DesignerMonthlyhours=r.designerMonthlyhours,this.QAMonthlyhours=r.qaMonthlyhours,this.PMDropdownModel=r.pmDropdownModel,this.TLDropdownModel=r.tlDropdownModel,this.DevloperDropdownModel=r.devloperDropdownModel,this.DesignerDropdownModel=r.designerDropdownModel,this.QADropdownModel=r.qaDropdownModel,this.MonthlyTimeSheetID>0){let a=this.router.parseUrl(this.router.url);this.ProjectTypeName=a.queryParams.projectType,this.MonthlyTimeSheetID=+a.queryParams.id,this.Client=a.queryParams.Client}else this.ProjectTypeName=r.projectDetailViewModel.projectType;else this.toastyService.error("Something error.","Update")},r=>{console.log(r)}),this.CheckTimeSheetExists())}getMonthlyTimeSheetByID(t){this.monthlyTimeSheetService.getMonthlyTimeSheetByID(t).subscribe(n=>{""!=n&&(this.Months=[],this.FinancialYear=[],this.Project=n.monthlyTimeSheetViewModel.project,this.FinancialYear=n.monthlyTimeSheetViewModel.financialYear,this.Months=n.monthlyTimeSheetViewModel.month,this.result=n,this.monthlyTimeSheetModel=n.monthlyTimeSheetViewModel,this.onProjectChange(n.monthlyTimeSheetViewModel.project,n.monthlyTimeSheetViewModel.monthlyTimeSheetID,this.Months,this.FinancialYear),this.ProjectType=[],this.ProjectType=n.monthlyTimeSheetViewModel.projectType)},n=>{console.log(n)})}setTwoNumberDecimal(t){t.target.value=parseFloat(t.target.value).toFixed(2)}resetpage(){this.ProjectList=[],this.ProjectClient="",this.ProjectFlow="",this.ProjectTechnology="",this.ProjectType=""}saveTimeSheet(t=""){this.loading=!0,this.currentUser?(Number.isNaN(this.MonthlyTimeSheetID)&&this.route.params.subscribe(i=>{this.MonthlyTimeSheetID=+i.id}),this.MonthlyTimeSheetID>0&&(this.monthlyTimeSheetModel.monthlyTimeSheetID=this.MonthlyTimeSheetID),this.SaveUpdateTimeSheet()):this.router.navigate(["/login"])}clearInputdata(){"#/SmartDesk/NestedMonthlyTimeSheetList"==window.location.hash?this.router.navigate(["/SmartDesk/NestedMonthlyTimeSheetList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0}):this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}DeleteTimeSheet(t){this.monthlyTimeSheetService.deleteMonthlyTimeSheet(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n)},n=>{this.deleteOnError(n)})}selectedRowForEditDelete(t){var n=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this hours?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){n.DeleteTimeSheet(t)}},cancel:function(){}}})}deleteOnSuccess(t){1==t?(this.clearInputdata(),this.toastyService.success("Monthly hours deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}.`,"Error")}EnableFinancialYear(){this.Disabled=!1}GetTotalClick(t){this.TotalHours=this.TotalHours+t}ConvertToInt(t){return parseFloat(t)}AutoTotal(){let t=0;return t=(0!=this.monthlyTimeSheetModel.pmHours?this.ConvertToInt(this.monthlyTimeSheetModel.pmHours):0)+(0!=this.monthlyTimeSheetModel.tlHours?this.ConvertToInt(this.monthlyTimeSheetModel.tlHours):0)+(0!=this.monthlyTimeSheetModel.developerHours?this.ConvertToInt(this.monthlyTimeSheetModel.developerHours):0)+(0!=this.monthlyTimeSheetModel.designerHours?this.ConvertToInt(this.monthlyTimeSheetModel.designerHours):0)+(0!=this.monthlyTimeSheetModel.qaHours?this.ConvertToInt(this.monthlyTimeSheetModel.qaHours):0),t}AutoDeveloperTotal(){let t=0;return this.DeveloperMonthlyhours.forEach(n=>{t+=this.ConvertToInt(n.estimatedHours=n.estimatedHours)}),this.monthlyTimeSheetModel.developerHours=t,t}AutoDesignerTotal(){let t=0;return this.DesignerMonthlyhours.forEach(n=>{t+=this.ConvertToInt(n.estimatedHours=n.estimatedHours)}),this.monthlyTimeSheetModel.designerHours=t,t}AutoQATotal(){let t=0;return this.QAMonthlyhours.forEach(n=>{t+=this.ConvertToInt(n.estimatedHours=n.estimatedHours)}),this.monthlyTimeSheetModel.qaHours=t,t}AutoPMTotal(){let t=0;return this.PMMonthlyhours.forEach(n=>{t+=this.ConvertToInt(n.estimatedHours=n.estimatedHours)}),this.monthlyTimeSheetModel.pmHours=t,t}AutoTLTotal(){let t=0;return this.TLMonthlyhours.forEach(n=>{t+=this.ConvertToInt(n.estimatedHours=n.estimatedHours)}),this.monthlyTimeSheetModel.tlHours=t,t}CheckTimeSheetExists(){this.Project>0&&this.monthlyTimeSheetService.CheckTimeSheetExists(this.Project,this.FinancialYear,this.Months,this.MonthlyTimeSheetID).subscribe(t=>{this.loading=!1,1==t&&this.toastyService.warning("Monthly hours already exists for this project.","Check Monthly hours")},t=>{console.log(t),this.toastyService.error("Something error.","Check Monthly hours")})}SaveUpdateTimeSheet(){this.monthlyTimeSheetModel.project=this.Project,this.monthlyTimeSheetModel.projectType=this.ProjectType,this.monthlyTimeSheetModel.financialYear=this.ConvertToInt(this.FinancialYear),this.monthlyTimeSheetModel.month=this.ConvertToInt(this.Months);let t=!1;if(!t){let n=this.PMMonthlyhours.map(function(i){return i.employeeID});t=n.some(function(i,o){return n.indexOf(i)!=o})}if(!t){let n=this.TLMonthlyhours.map(function(i){return i.employeeID});t=n.some(function(i,o){return n.indexOf(i)!=o})}if(!t){let n=this.DesignerMonthlyhours.map(function(i){return i.employeeID});t=n.some(function(i,o){return n.indexOf(i)!=o})}if(!t){let n=this.DeveloperMonthlyhours.map(function(i){return i.employeeID});t=n.some(function(i,o){return n.indexOf(i)!=o})}if(!t){let n=this.QAMonthlyhours.map(function(i){return i.employeeID});t=n.some(function(i,o){return n.indexOf(i)!=o})}t?(this.loading=!1,this.toastyService.warning("You Can't select duplcate employee for the same designation.","Duplicate Employee Selection")):(this.DeveloperMonthlyhours.forEach(n=>{n.estimatedHours=+n.estimatedHours,n.employeeID=+n.employeeID,n.actualHours=+n.actualHours}),this.DesignerMonthlyhours.forEach(n=>{n.estimatedHours=+n.estimatedHours,n.employeeID=+n.employeeID,n.actualHours=+n.actualHours}),this.PMMonthlyhours.forEach(n=>{n.estimatedHours=+n.estimatedHours,n.employeeID=+n.employeeID,n.actualHours=+n.actualHours}),this.TLMonthlyhours.forEach(n=>{n.estimatedHours=+n.estimatedHours,n.employeeID=+n.employeeID,n.actualHours=+n.actualHours}),this.QAMonthlyhours.forEach(n=>{n.estimatedHours=+n.estimatedHours,n.employeeID=+n.employeeID,n.actualHours=+n.actualHours}),this.monthlyTimeSheetModel.monthlyResourceTimeSheetModel=new es,this.monthlyTimeSheetModel.monthlyResourceTimeSheetModel.DeveloperMonthlyhours=this.DeveloperMonthlyhours,this.monthlyTimeSheetModel.monthlyResourceTimeSheetModel.DesignerMonthlyhours=this.DesignerMonthlyhours,this.monthlyTimeSheetModel.monthlyResourceTimeSheetModel.PMMonthlyhours=this.PMMonthlyhours,this.monthlyTimeSheetModel.monthlyResourceTimeSheetModel.TLMonthlyhours=this.TLMonthlyhours,this.monthlyTimeSheetModel.monthlyResourceTimeSheetModel.QAMonthlyhours=this.QAMonthlyhours,1==this.CopyMonthltTimeSheet&&(this.OldID=this.monthlyTimeSheetModel.monthlyTimeSheetID,this.monthlyTimeSheetModel.monthlyTimeSheetID=0),this.monthlyTimeSheetService.CheckTimeSheetExists(this.Project,this.FinancialYear,this.Months,this.monthlyTimeSheetModel.monthlyTimeSheetID).subscribe(n=>{this.loading=!1,0==n?this.monthlyTimeSheetService.saveMonthlyTimeSheet(this.monthlyTimeSheetModel,this.currentUser.employeeID).subscribe(i=>{this.loading=!1,i>0?(this.toastyService.success("Profile Save Successfully.","Save"),this.route.params.subscribe(r=>{"#/SmartDesk/NestedMonthlyTimeSheetList"==window.location.hash?this.router.navigate(["/SmartDesk/NestedMonthlyTimeSheetList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0}):this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}),this.monthlyTimeSheetModel.monthlyTimeSheetID>0?this.toastyService.success("Monthly hours update successfully.","Update"):this.toastyService.success("Monthly hours save successfully.","Save")):this.toastyService.warning("Something error.","Update")},i=>{console.log(i)}):(1==this.CopyMonthltTimeSheet&&(this.CopyMonthltTimeSheet=!1,this.MonthlyTimeSheetID=this.OldID),this.monthlyTimeSheetModel.monthlyTimeSheetID=this.MonthlyTimeSheetID,this.toastyService.warning("Monthly hours already exists for this project.","Check Monthly hours"))}))}CopyTimeSheet(){this.CopyMonthltTimeSheet=!0,this.SaveUpdateTimeSheet()}addNewDeveloper(){this.DeveloperMonthlyhours.push({firstName:"",designationID:0,employeeID:0,estimatedHours:0,actualHours:0,isTempResource:1})}DeleteDeveloper(t){this.DeveloperMonthlyhours.splice(t,1),this.AutoDeveloperTotal()}addNewDesigner(){this.DesignerMonthlyhours.push({firstName:"",designationID:0,employeeID:0,estimatedHours:0,actualHours:0,isTempResource:1})}DeleteDesigner(t){this.DesignerMonthlyhours.splice(t,1),this.AutoDesignerTotal()}addNewPM(){this.PMMonthlyhours.push({firstName:"",designationID:0,employeeID:0,estimatedHours:0,actualHours:0,isTempResource:1})}DeletePM(t){this.PMMonthlyhours.splice(t,1),this.AutoPMTotal()}addNewTL(){this.TLMonthlyhours.push({firstName:"",designationID:0,employeeID:0,estimatedHours:0,actualHours:0,isTempResource:1})}DeleteTL(t){this.TLMonthlyhours.splice(t,1),this.AutoTLTotal()}addNewQA(){this.QAMonthlyhours.push({firstName:"",designationID:0,employeeID:0,estimatedHours:0,actualHours:0,isTempResource:1})}DeleteQA(t){this.QAMonthlyhours.splice(t,1),this.AutoQATotal()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(V),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],features:[e.Jv_([V])],decls:78,vars:25,consts:[["f","ngForm"],["PMHours","ngModel"],["TLHours","ngModel"],["DeveloperHours","ngModel"],["DesignerHours","ngModel"],["QAHours","ngModel"],["Comment","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"pull-right","ml-2"],[4,"ngIf"],[1,"card-body"],["name","form","novalidate","",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-4","col-form-label","required"],[1,"col-md-8"],["name","FinancialYear","id","FinancialYear","required","",1,"form-control",2,"width","70%","display","inline-block",3,"ngModelChange","change","ngModel","disabled"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fa","fa-pencil",2,"margin-left","3%",3,"click"],["class","error",4,"ngIf"],[1,"col-md-8","paddingbottom"],["name","Months","id","Months","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,""],[1,"table","table-responsive-sm","table-striped","table-center"],[1,"required"],["width","25%",4,"ngIf"],["width","25%","style","font-size: medium;",4,"ngIf"],["width","30%",4,"ngIf"],[1,"testcls"],[1,"col-md-12","table-responsive"],["class","table table-responsive-sm MonthlyRSTM","id","tblMonthltTS",4,"ngIf"],["class","form-group row mb-3",4,"ngIf"],[1,"card-footer","py-3"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset",1,"btn","btn-sm","btn-danger","text-white",3,"click"],[1,"fa","fa-ban"],["type","button","tooltip","Delete","placement","bottom",1,"btn","btn-danger","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[3,"value"],[1,"error"],["width","25%"],[1,"",3,"ngClass"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],["width","25%",2,"font-size","medium"],["name","Project","id","Project","required","","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["width","30%"],["name","ProjectDrp","id","ProjectDrp","required","",1,"form-f",3,"ngModelChange","placeholder","data","settings","ngModel"],["id","tblMonthltTS",1,"table","table-responsive-sm","MonthlyRSTM"],["class","projecthours",3,"id",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #c8ced3"],["colspan","3"],[1,"projecthours",3,"id"],["required","",1,"form-control",3,"ngModelChange","name","id","ngModel"],["value","0"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00",1,"form-control","hoursdata",3,"ngModelChange","keyup","name","id","ngModel","value"],["type","hidden",3,"ngModelChange","value","name","id","ngModel"],[1,"divAddMore"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00",1,"form-control","hoursdata",3,"ngModelChange","name","id","ngModel","value"],["type","button","class","btn btn-sm btn-primary btnAddMore btn-small","tooltip","Add","placement","bottom",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-danger btnAddMore btnDelRec btn-small","tooltip","Delete","placement","bottom",3,"click",4,"ngIf"],["type","button","tooltip","Add","placement","bottom",1,"btn","btn-sm","btn-primary","btnAddMore","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["type","button","tooltip","Delete","placement","bottom",1,"btn","btn-sm","btn-danger","btnAddMore","btnDelRec","btn-small",3,"click"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","PMHours","disabled","",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngClass"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","TLHours","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00",1,"form-control","hoursdata",3,"keyup","ngModelChange","name","id","ngModel","value"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","DeveloperHours","name","DeveloperHours","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","DesignerHours","name","DesignerHours","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","QAHours","name","QAHours","disabled","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","row","mb-3"],[1,"col-md-6","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["rows","2","maxlength","500","name","Comment","name","Comment",1,"form-control",3,"ngModelChange","ngModel"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div"),e.nrm(7,"i",13),e.EFF(8," Monthly Hours "),e.k0s(),e.j41(9,"div")(10,"button",14),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(11,"i",15),e.EFF(12," Back To List "),e.k0s(),e.j41(13,"div",16),e.DNE(14,ts,3,0,"div",17),e.k0s()()()(),e.j41(15,"div",18)(16,"form",19,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(17);return e.Njj(a.form.valid&&i.saveTimeSheet(a))}),e.j41(18,"div",20)(19,"div",21)(20,"label",22),e.EFF(21,"Financial Year"),e.k0s(),e.j41(22,"div",23)(23,"select",24),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.CheckTimeSheetExists())})("change",function(){return e.eBV(o),e.Njj(i.Activeclient())}),e.j41(24,"option",25),e.EFF(25,"-- Financial Year --"),e.k0s(),e.DNE(26,is,2,2,"option",26),e.k0s(),e.j41(27,"i",27),e.bIt("click",function(){return e.eBV(o),e.Njj(i.EnableFinancialYear())}),e.k0s(),e.DNE(28,ns,2,0,"div",28),e.k0s()(),e.j41(29,"div",21)(30,"label",22),e.EFF(31,"Month"),e.k0s(),e.j41(32,"div",29)(33,"select",30),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Months,a)||(i.Months=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.CheckTimeSheetExists())}),e.j41(34,"option",25),e.EFF(35,"-- Month --"),e.k0s(),e.DNE(36,os,2,2,"option",26),e.k0s(),e.DNE(37,ss,2,0,"div",28),e.k0s()()(),e.j41(38,"div",8)(39,"div",9)(40,"div",31)(41,"table",32)(42,"thead")(43,"tr")(44,"th",33),e.EFF(45,"Client"),e.k0s(),e.j41(46,"th",33),e.EFF(47,"Project"),e.k0s(),e.j41(48,"th"),e.EFF(49,"Project Type"),e.k0s(),e.j41(50,"th"),e.EFF(51,"Technology"),e.k0s(),e.j41(52,"th"),e.EFF(53,"Flow"),e.k0s()()(),e.j41(54,"tbody")(55,"tr"),e.DNE(56,as,4,8,"td",34)(57,ls,2,1,"td",35)(58,ds,7,6,"td",17)(59,us,4,8,"td",36),e.j41(60,"td",37),e.EFF(61),e.k0s(),e.j41(62,"td"),e.EFF(63),e.k0s(),e.j41(64,"td"),e.EFF(65),e.k0s()()()()()()(),e.j41(66,"div",8)(67,"div",38),e.DNE(68,Qs,27,6,"table",39),e.k0s()(),e.DNE(69,Os,7,1,"div",40),e.j41(70,"div",41)(71,"button",42),e.nrm(72,"i",43),e.EFF(73," Submit "),e.k0s(),e.DNE(74,Js,1,0,"img",44),e.j41(75,"button",45),e.bIt("click",function(){return e.eBV(o),e.Njj(i.resetpage())}),e.nrm(76,"i",46),e.EFF(77," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(17);e.R7$(14),e.Y8G("ngIf",0!=i.monthlyTimeSheetModel.monthlyTimeSheetID),e.R7$(5),e.Y8G("ngClass",e.eq3(21,X,o.submitted&&""==i.FinancialYear)),e.R7$(4),e.R50("ngModel",i.FinancialYear),e.Y8G("disabled",i.Disabled),e.R7$(3),e.Y8G("ngForOf",i.result.financialYearDropdownModel),e.R7$(2),e.Y8G("ngIf",o.submitted&&""==i.FinancialYear),e.R7$(),e.Y8G("ngClass",e.eq3(23,X,o.submitted&&""==i.Months)),e.R7$(4),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.result.months),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.Months),e.R7$(19),e.Y8G("ngIf",0==i.monthlyTimeSheetModel.monthlyTimeSheetID),e.R7$(),e.Y8G("ngIf",0!=i.monthlyTimeSheetModel.monthlyTimeSheetID),e.R7$(),e.Y8G("ngIf",0!=i.monthlyTimeSheetModel.monthlyTimeSheetID),e.R7$(),e.Y8G("ngIf",0==i.monthlyTimeSheetModel.monthlyTimeSheetID),e.R7$(2),e.JRh(i.ProjectTypeName),e.R7$(2),e.JRh(i.ProjectTechnology),e.R7$(2),e.JRh(i.ProjectFlow),e.R7$(3),e.Y8G("ngIf",i.Project>0),e.R7$(),e.Y8G("ngIf",i.Project>0),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.YU,u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,E.dg,w.b,pe],encapsulation:2})}return s})();class W extends C{}const gt=()=>["active"],$s=()=>["/SmartDesk/MonthlyTimeSheetList"],zs=()=>["/SmartDesk/NestedMonthlyTimeSheetList"];function Xs(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",51)(1,"button",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showTimeSheetForm())}),e.nrm(2,"i",53),e.k0s()()}}function qs(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Ks(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Ws(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Zs(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function er(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function tr(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}function ir(s,l){1&s&&e.nrm(0,"i",60)}function nr(s,l){1&s&&e.nrm(0,"i",61)}function or(s,l){1&s&&(e.j41(0,"td")(1,"div",62)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",9)}function sr(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",55)(1,"tr"),e.nrm(2,"td"),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"a",64),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG(4);return e.Njj(o.selectedRowRedirect(i))}),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s()()()}if(2&s){const t=l.$implicit,n=l.index;e.FS9("id",t.EmployeeID),e.R7$(4),e.JRh(n+1),e.R7$(2),e.JRh(t.Month),e.R7$(3),e.JRh(t.ClientName),e.R7$(2),e.JRh(t.ProjectType),e.R7$(2),e.JRh(t.Technology),e.R7$(2),e.JRh(t.PMName),e.R7$(2),e.JRh(t.PMHours),e.R7$(2),e.JRh(t.TLHours),e.R7$(2),e.JRh(t.DeveloperHours),e.R7$(2),e.JRh(t.DesignerHours),e.R7$(2),e.JRh(t.QAHours),e.R7$(2),e.JRh(t.TotalHours)}}function rr(s,l){if(1&s&&(e.j41(0,"table",46)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5,"#"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Month"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Client"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Project Type"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Technology"),e.k0s(),e.j41(14,"th"),e.EFF(15,"PM"),e.k0s(),e.j41(16,"th"),e.EFF(17,"PM/PL"),e.k0s(),e.j41(18,"th"),e.EFF(19,"TL"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Developer"),e.k0s(),e.j41(22,"th"),e.EFF(23,"Designer"),e.k0s(),e.j41(24,"th"),e.EFF(25,"QA"),e.k0s(),e.j41(26,"th"),e.EFF(27,"Total"),e.k0s()()(),e.DNE(28,sr,28,13,"tbody",47),e.k0s()),2&s){const t=e.XpG(3);e.R7$(28),e.Y8G("ngForOf",t.MonthlyTimesheetlist)}}function ar(s,l){if(1&s&&(e.j41(0,"td"),e.DNE(1,rr,29,1,"table",63),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG();e.BMQ("colspan",9),e.R7$(),e.Y8G("ngIf",t.MonthID===n.expandedTimesheet)}}function lr(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",55)(1,"tr")(2,"td",56),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.Collaps(i.MonthID))}),e.DNE(3,ir,1,0,"i",57)(4,nr,1,0,"i",58),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s()(),e.j41(21,"tr"),e.DNE(22,or,4,1,"td",59),e.k0s(),e.j41(23,"tr"),e.DNE(24,ar,2,2,"td",59),e.k0s()()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.MonthID),e.R7$(3),e.Y8G("ngIf",t.MonthID!==i.expandedTimesheet),e.R7$(),e.Y8G("ngIf",t.MonthID===i.expandedTimesheet),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.Months),e.R7$(2),e.JRh(t.PMHours),e.R7$(2),e.JRh(t.TLHours),e.R7$(2),e.JRh(t.DevHours),e.R7$(2),e.JRh(t.DesiHours),e.R7$(2),e.JRh(t.QAHours),e.R7$(2),e.JRh(t.TotalHours),e.R7$(2),e.Y8G("ngIf",i.MonthWiseTimesheetCount<0),e.R7$(2),e.Y8G("ngIf",t.MonthID===i.expandedTimesheet&&i.MonthlyTimesheetCount>0)}}function cr(s,l){if(1&s&&(e.j41(0,"tr",65),e.nrm(1,"td"),e.j41(2,"td"),e.EFF(3,"Total Hours"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&s){const t=e.XpG();e.R7$(2),e.BMQ("colspan",2),e.R7$(3),e.JRh(t.TotalPMHours),e.R7$(2),e.JRh(t.TotalTLHours),e.R7$(2),e.JRh(t.TotalDeveloperHours),e.R7$(2),e.JRh(t.TotalDesignerHours),e.R7$(2),e.JRh(t.TotalQAHours),e.R7$(2),e.JRh(t.Total)}}let ft=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.monthlyTimeSheetService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Monthly Time Sheet",this.columns=[],this.FinancialYear=0,this.FinancialYearList=[],this.alerts=[],this.currentPageNumber=1,this.Search="",this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.ProjectTypeList=[],this.ProjectType=0,this.Client=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.dropdownSettings={},this.filterModel=new W,this.MonthWiseTimesheetlist=[],this.MonthWiseTimesheetCount=0,this.expandedTimesheet=0,this.MonthlyTimesheetlist=[],this.MonthlyTimesheetCount=0,this.datagrid=i,this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.totalPages=0,this.totalRows=0,this.pageSize=15,this.sortDirection="ASC",this.sortExpression="Month",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show(),this.expandedTimesheet=-1,"BDM"==this.currentUser.designation&&(this.AddAccess=!1),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.month&&(this.Months=+t.queryParams.month),null!=t.queryParams.department&&(this.Department=+t.queryParams.department),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),null!=t.queryParams.ProjectType&&(this.ProjectType=t.queryParams.ProjectType),null!=t.queryParams.Technology&&(this.Technology=t.queryParams.Technology),this.columns.push(new h("month","Month",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("clientName","Client",'[{"width": "20%" , "hyperLink": true,"disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("pm","PM",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("pmHours","PM/PL",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("tlHours","TL",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("developerHours","Developer",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designerHours","Designer",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("qaHours","QA",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalHours","Total",'[{"width": "8%" ,"hyperLink": false, "disableSorting": true}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showTimeSheetForm(){this.router.navigate(["/SmartDesk/MonthlyTimeSheet"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getMonthWiseTimeSheetList()},t),this.spinner.hide()}DeleteTimeSheet(t){this.spinner.show(),this.monthlyTimeSheetService.deleteMonthlyTimeSheet(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getMonthWiseTimeSheetList(){this.spinner.show(),this.expandedTimesheet=0;let t=new W;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=+this.FinancialYear,t.month=+this.Months,t.ProjectType=+this.ProjectType,t.Client=+this.Client,t.Technology=+this.Technology,t.Department=+this.Department,t.CompanyID=+this.currentUser.companyID,this.filterModel=t;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/GetMonthWiseTimeSheetList",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.TechnologyList=t.technologyDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.ClientList=t.clientDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.pageTotal=0,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID==t.financialYear&&(this.CurrentYear=i.name)}),this.MonthWiseTimesheetlist=[],this.MonthWiseTimsheet=t.monthWiseTimesheetList,this.MonthWiseTimesheetCount=t.monthWiseTimesheetList.length,this.MonthWiseTimsheet.forEach(i=>{this.MonthWiseTimesheetlist.push({MonthID:i.monthID,Months:i.monthName,PMHours:i.pmHours,TLHours:i.tlHours,DevHours:i.developerHours,DesiHours:i.designerHours,QAHours:i.qaHours,TotalHours:i.totalHours})}),this.TotalPMHours=t.totalPMHours,this.TotalTLHours=t.totalTLHours,this.TotalDeveloperHours=t.totalDevHours,this.TotalDesignerHours=t.totalDesiHours,this.TotalQAHours=t.totalQAHours,this.Total=+this.TotalPMHours+ +this.TotalTLHours+ +this.TotalDeveloperHours+ +this.TotalDesignerHours+ +this.TotalQAHours,this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}Collaps(t){0!=t&&(this.expandedTimesheet=t===this.expandedTimesheet?-1:t,this.MonthlyTimesheetlist=[],this.getTimeSheetList(t))}getTimeSheetList(t){this.spinner.show();let n=new W;n.search=this.Search,n.pageSize=this.pageSize,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,n.currentPageNumber=this.currentPageNumber,n.FinancialYear=+this.FinancialYear,n.month=t,n.ProjectType=+this.ProjectType,n.Client=+this.Client,n.Technology=+this.Technology,n.Department=+this.Department,n.CompanyID=+this.currentUser.companyID,this.filterModel=n;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/GetClientMonthlyTimeSheetList",n,{headers:i}).subscribe(r=>{this.getRowOnListSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}getRowOnListSuccess(t){this.MonthlyTimesheetlist=[],this.MonthlyTimsheet=t.monthlyTimeSheetListModel,this.MonthlyTimesheetCount=t.monthlyTimeSheetListModel.length,this.MonthlyTimsheet.forEach(n=>{this.MonthlyTimesheetlist.push({ClientID:n.clientID,Month:n.month,ClientName:n.clientName,ProjectType:n.projectType,Technology:n.technology,PMName:n.pm,PMHours:n.pmHours,TLHours:n.tlHours,DeveloperHours:n.developerHours,DesignerHours:n.designerHours,QAHours:n.qaHours,TotalHours:n.totalHours})}),this.monthlyTimeSheetViewModels=t.monthlyTimeSheetListModel,this.runningSearch=!1,this.fillFilterModel()}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("TimeSheet deleted successfully.","Delete")):this.toastyService.error("Something error.","Errors")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.Months=0,this.ProjectType=0,this.Technology=0,this.Department=0,this.Client=0,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedRowRedirect(t,n){let r=this.monthlyTimeSheetViewModels[t];return this.router.navigate(["/SmartDesk/ClientTimesheetList"],{queryParams:{clientID:r.clientID,clientName:r.clientName,Months:r.month,FinancialYear:this.FinancialYear,ProjectType:this.ProjectType,Department:this.Department,Technology:this.Technology},skipLocationChange:!0})}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Department=t.Department,this.currentUser.companyID=t.CompanyID)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(V),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([V])],decls:129,vars:34,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],["class","pull-right",4,"ngIf"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-tree"],[1,"col-sm-6","col-lg-4"],[1,"card-body","p-0"],[1,"col-6","pe-0"],[1,"bg-info","text-center","p-2","text-white"],[1,"icon-speedometer","bg-info","bg-info","fs-4","fw-bold"],[1,"text-uppercase","fw-bold","fs-6","bg-info"],[1,"col-6","bg-light"],[1,"text-center","p-2"],[1,"text-value-sm","text-info","fw-bold","fs-5"],[1,"text-muted","text-uppercase","fw-bold","fs-6"],[1,"col-sm-6","col-lg-8"],[1,"brand-card"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12","table-responsive","mt-2"],[1,"table","table-responsive-sm","table-striped"],[3,"id",4,"ngFor","ngForOf"],["style","font-weight: bold;",4,"ngIf"],[3,"datagridEvent","rows","pageSize"],["size","medium",3,"type"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"value"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],[1,"search_no_results"],["class","table table-responsive-sm table-striped",4,"ngIf"],[2,"text-decoration","underline","cursor","pointer",3,"click"],[2,"font-weight","bold"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Monthly Hours "),e.k0s(),e.DNE(8,Xs,3,0,"div",7),e.k0s(),e.j41(9,"div",8)(10,"div",1)(11,"div",9)(12,"ul",10)(13,"li",11)(14,"a",12),e.nrm(15,"i",13),e.EFF(16," All Month Hours "),e.k0s()(),e.j41(17,"li",11)(18,"a",14),e.nrm(19,"i",15),e.EFF(20," Month wise Hours "),e.k0s()()()()(),e.j41(21,"div",1)(22,"div",16)(23,"div",3)(24,"div",17)(25,"div",1)(26,"div",18)(27,"div",19),e.nrm(28,"i",20),e.j41(29,"div",21),e.EFF(30),e.k0s()()(),e.j41(31,"div",22)(32,"div",23)(33,"div",24),e.EFF(34),e.k0s(),e.j41(35,"div",25),e.EFF(36,"Total"),e.k0s()()()()()()(),e.j41(37,"div",26)(38,"div",27)(39,"div",28)(40,"div")(41,"div",29),e.EFF(42),e.k0s(),e.j41(43,"div",30),e.EFF(44,"PM/PL"),e.k0s()(),e.j41(45,"div")(46,"div",29),e.EFF(47),e.k0s(),e.j41(48,"div",30),e.EFF(49,"TL"),e.k0s()(),e.j41(50,"div")(51,"div",29),e.EFF(52),e.k0s(),e.j41(53,"div",30),e.EFF(54,"Developer"),e.k0s()(),e.j41(55,"div")(56,"div",29),e.EFF(57),e.k0s(),e.j41(58,"div",30),e.EFF(59,"Designer"),e.k0s()(),e.j41(60,"div")(61,"div",29),e.EFF(62),e.k0s(),e.j41(63,"div",30),e.EFF(64,"QA"),e.k0s()()()()()(),e.j41(65,"div",1)(66,"div",31)(67,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(68,"div",31)(69,"select",33),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(70,qs,2,2,"option",34),e.k0s()(),e.j41(71,"div",31)(72,"select",35),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(73,"option",36),e.EFF(74,"-- Month --"),e.k0s(),e.DNE(75,Ks,2,2,"option",34),e.k0s()(),e.j41(76,"div",31)(77,"select",37),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(78,"option",36),e.EFF(79,"-- Project Type --"),e.k0s(),e.DNE(80,Ws,2,2,"option",34),e.k0s()(),e.j41(81,"div",31)(82,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(83,"option",36),e.EFF(84,"-- Department --"),e.k0s(),e.DNE(85,Zs,2,2,"option",34),e.k0s()(),e.j41(86,"div",31)(87,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(88,"option",36),e.EFF(89,"-- Technology --"),e.k0s(),e.DNE(90,er,2,2,"option",34),e.k0s()(),e.j41(91,"div",31)(92,"select",40),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(93,"option",36),e.EFF(94,"-- Client --"),e.k0s(),e.DNE(95,tr,2,2,"option",34),e.k0s()(),e.j41(96,"div",31)(97,"button",41),e.bIt("click",function(){return i.search()}),e.nrm(98,"i",42),e.k0s(),e.j41(99,"button",43),e.bIt("click",function(){return i.reset()}),e.nrm(100,"i",44),e.k0s()(),e.nrm(101,"div",31),e.k0s(),e.j41(102,"div",1)(103,"div",45)(104,"table",46)(105,"thead")(106,"tr"),e.nrm(107,"th"),e.j41(108,"th"),e.EFF(109,"#"),e.k0s(),e.j41(110,"th"),e.EFF(111,"Month"),e.k0s(),e.j41(112,"th"),e.EFF(113,"PM Hours"),e.k0s(),e.j41(114,"th"),e.EFF(115,"TL Hours"),e.k0s(),e.j41(116,"th"),e.EFF(117,"Developer Hours"),e.k0s(),e.j41(118,"th"),e.EFF(119,"Designer Hours"),e.k0s(),e.j41(120,"th"),e.EFF(121,"QA Hours"),e.k0s(),e.j41(122,"th"),e.EFF(123,"Total Hours"),e.k0s()()(),e.DNE(124,lr,25,13,"tbody",47),e.j41(125,"tbody"),e.DNE(126,cr,16,7,"tr",48),e.k0s()(),e.j41(127,"datagrid",49),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(128,"ngx-spinner",50)),2&n&&(e.R7$(8),e.Y8G("ngIf",i.AddAccess),e.R7$(6),e.Y8G("routerLinkActive",e.lJ4(30,gt))("routerLink",e.lJ4(31,$s)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(32,gt))("routerLink",e.lJ4(33,zs)),e.R7$(12),e.SpI(" ",i.CurrentYear,""),e.R7$(4),e.JRh(i.result.totalHours),e.R7$(8),e.JRh(i.result.pmTotalHours),e.R7$(5),e.JRh(i.result.tlTotalHours),e.R7$(5),e.JRh(i.result.developerTotalHours),e.R7$(5),e.JRh(i.result.designerTotalHours),e.R7$(5),e.JRh(i.result.qaTotalHours),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(29),e.Y8G("ngForOf",i.MonthWiseTimesheetlist),e.R7$(2),e.Y8G("ngIf",i.MonthWiseTimesheetCount>1),e.R7$(),e.Y8G("rows",i.monthlyTimeSheetViewModels)("pageSize",i.pageSize),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})();const At=()=>["active"],hr=()=>["/SmartDesk/MonthlyTimeSheetList"],dr=()=>["/SmartDesk/NestedMonthlyTimeSheetList"];function pr(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",57)(1,"button",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showTimeSheetForm())}),e.nrm(2,"i",59),e.k0s()()}}function ur(s,l){if(1&s&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function mr(s,l){if(1&s&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function gr(s,l){if(1&s&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function fr(s,l){if(1&s&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Ar(s,l){if(1&s&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function _r(s,l){if(1&s&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}function yr(s,l){1&s&&(e.j41(0,"tbody")(1,"tr")(2,"td")(3,"div",61)(4,"h5"),e.EFF(5,"No Record Found!"),e.k0s()()()()()),2&s&&(e.R7$(2),e.BMQ("colspan",3))}function Sr(s,l){1&s&&e.nrm(0,"i",66)}function Dr(s,l){1&s&&e.nrm(0,"i",67)}function jr(s,l){1&s&&(e.j41(0,"td")(1,"div",61)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",3)}function br(s,l){1&s&&(e.j41(0,"th"),e.EFF(1,"Client"),e.k0s())}function Mr(s,l){1&s&&(e.j41(0,"th"),e.EFF(1,"Flow"),e.k0s())}function Cr(s,l){1&s&&(e.j41(0,"th"),e.EFF(1,"Action"),e.k0s())}function kr(s,l){if(1&s&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.client)}}function Ir(s,l){if(1&s&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.flow)}}function vr(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"i",68),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG(4);return e.Njj(o.selectedRow(i.monthlyTimeSheetID))}),e.k0s(),e.j41(2,"i",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG(4);return e.Njj(o.selectedRowForEditDelete(i.monthlyTimeSheetID))}),e.k0s()()}}function Er(s,l){if(1&s&&(e.j41(0,"tbody",62)(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.DNE(8,kr,2,1,"td",54)(9,Ir,2,1,"td",54),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.DNE(24,vr,3,0,"td",54),e.k0s()()),2&s){const t=l.$implicit,n=e.XpG(4);e.FS9("id",t.ProjectID),e.R7$(3),e.JRh(t.project),e.R7$(2),e.JRh(t.projectType),e.R7$(2),e.JRh(t.technology),e.R7$(),e.Y8G("ngIf",n.showColumn),e.R7$(),e.Y8G("ngIf",n.showColumn),e.R7$(2),e.JRh(t.pm),e.R7$(2),e.JRh(t.pmHours),e.R7$(2),e.JRh(t.tlHours),e.R7$(2),e.JRh(t.developerHours),e.R7$(2),e.JRh(t.designerHours),e.R7$(2),e.JRh(t.qaHours),e.R7$(2),e.JRh(t.totalHours),e.R7$(),e.Y8G("ngIf",n.CheckActionAccess())}}function Fr(s,l){if(1&s&&(e.j41(0,"td")(1,"table",53)(2,"thead")(3,"tr")(4,"th"),e.EFF(5,"Project"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Project Type"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Technology"),e.k0s(),e.DNE(10,br,2,0,"th",54)(11,Mr,2,0,"th",54),e.j41(12,"th"),e.EFF(13,"PM"),e.k0s(),e.j41(14,"th"),e.EFF(15,"PM/PL"),e.k0s(),e.j41(16,"th"),e.EFF(17,"TL"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Developer"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Designer"),e.k0s(),e.j41(22,"th"),e.EFF(23,"QA"),e.k0s(),e.j41(24,"th"),e.EFF(25,"Total"),e.k0s(),e.DNE(26,Cr,2,0,"th",54),e.k0s()(),e.DNE(27,Er,25,14,"tbody",55),e.k0s()()),2&s){const t=e.XpG(2).$implicit,n=e.XpG();e.BMQ("colspan",3),e.R7$(10),e.Y8G("ngIf",n.showColumn),e.R7$(),e.Y8G("ngIf",n.showColumn),e.R7$(15),e.Y8G("ngIf",n.CheckActionAccess()),e.R7$(),e.Y8G("ngForOf",t.Data)}}function Tr(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,jr,4,1,"td",54)(2,Fr,28,5,"td",54),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.timeSheetCount<1),e.R7$(),e.Y8G("ngIf",t.timeSheetCount>0)}}function wr(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",62)(1,"tr")(2,"td",63),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.toggleExpand(i.MonthName))}),e.DNE(3,Sr,1,0,"i",64)(4,Dr,1,0,"i",65),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s()(),e.DNE(9,Tr,3,2,"tr",54),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.MonthName),e.R7$(3),e.Y8G("ngIf",t.MonthName!==i.expandedMonth),e.R7$(),e.Y8G("ngIf",t.MonthName===i.expandedMonth),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.MonthName),e.R7$(),e.Y8G("ngIf",t.MonthName===i.expandedMonth)}}let _t=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.monthlyTimeSheetService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Monthly Time Sheet",this.columns=[],this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.currentPageNumber=1,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.timeSheetlistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new W,this.timesheetlist=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.translations={indexColumn:"Index column",expandColumn:"Expand column",selectColumn:"Select column",paginationLimit:"Max results",paginationRange:"Result range"},this.expandedMonth=null,this.datagrid=i,this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=1e3,this.sortDirection="DESC",this.sortExpression="MonthlyTimeSheetID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.monthCount=12}ngOnInit(){this.spinner.show(),"Sales"==this.currentUser.designation&&(this.AddAccess=!1),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.month&&(this.Months=+t.queryParams.month),null!=t.queryParams.department&&(this.Department=+t.queryParams.department),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),this.columns.push(new h("month","Month",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "20%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("client","Client",'[{"width": "20%" ,"hyperLink":false, "disableSorting": false}]')),this.columns.push(new h("flow","Flow",'[{"width": "35%" ,"hyperLink": false, "disableSorting": true}]'))),this.columns.push(new h("pmHours","PM/PL",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("tlHours","TL",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("developerHours","Developer",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designerHours","Designer",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("qaHours","QA",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalHours","Total",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true}]')),"Sales"!=this.currentUser.designation&&this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showTimeSheetForm(){this.router.navigate(["/SmartDesk/MonthlyTimeSheet"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getTimeSheetList()},t),this.spinner.hide()}DeleteTimeSheet(t){this.spinner.show(),this.monthlyTimeSheetService.deleteMonthlyTimeSheet(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getTimeSheetList(){this.spinner.show();const t=new W;t.search=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=this.FinancialYear,t.month=this.Months,t.ProjectType=this.ProjectType,t.Technology=this.Technology,t.Client=this.Client,t.Department=this.Department,t.CompanyID=this.currentUser.companyID;const n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){const r=JSON.parse(n.queryParams.filterModel);""!=r.EmployeeID&&null!=r.EmployeeID&&(t.EmployeeID=r.EmployeeID)}else t.EmployeeID=this.selectedItems.map(r=>r.id).join(",");const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/GetMonthlyTimeSheetList",JSON.stringify(t),{headers:i}).subscribe({next:r=>{this.getRowOnSuccess(r),this.spinner.hide()},error:r=>{this.getRowOnError(r),this.spinner.hide()}})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("TimeSheet deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.pageTotal=0,t.monthlyTimeSheetListModel.forEach(i=>{i.totalHours=0,i.totalHours=i.pmHours+i.tlHours+i.developerHours+i.designerHours+i.qaHours,this.pageTotal=this.pageTotal+i.totalHours}),this.monthlyTimeSheetViewModels=t.monthlyTimeSheetListModel,this.timesheetlist=t.monthlyTimeSheetListModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID==t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.timesheetlist),this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRowForEditDelete(t){var i=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this timesheet?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){i.DeleteTimeSheet(t)}},cancel:function(){}}})}selectedRow(t){return this.router.navigate(["/SmartDesk/MonthlyTimeSheet"],{queryParams:{id:t,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.cookieService.delete("filterData"),this.Project="",this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.timeSheetlistmonthWise=[],this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.timeSheetlistmonthWise=[],this.ngOnInit()}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=+t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}createJsonResultForTable(t,n){var i;this.timeSheetlistmonthWise=[];let a=0,d=this.getCurrentFinancialYear();this.FinancialYearList.map(function(A){d==A.name&&(a=A.financialYearID)}),i=a===this.FinancialYear?(new Date).getMonth()+1:a<this.FinancialYear?4:3;let y=!1;t.forEach((A,v)=>{if(y)return!1;i==A.monthID&&(y=!0);let b=n.filter(T=>T.month==A.name);this.timeSheetlistmonthWise.push({MonthID:A.monthID,MonthName:A.name,timeSheetCount:b.length,Data:b})}),setTimeout(()=>{var A;(A=0!=this.Months?this.Months-3:(new Date).getMonth()-2)<=0&&(A+=12);var b=document.querySelectorAll('[ng-reflect-index="'+(A-1)+'"].data-table-row-wrapper');[].forEach.call(b,function(T){"innerTable"!=T.parentNode.parentNode.parentNode.parentNode.id&&T.firstElementChild.firstElementChild.firstElementChild.click()});var Y=document.querySelectorAll(".column-selector-button");[].forEach.call(Y,function(T){T.title="column selector"})},1)}CheckActionAccess(){return"Sales"!=this.currentUser.designation}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}getCurrentFinancialYear(){var n=new Date;return(n.getMonth()+1<=3?n.getFullYear()-1+" - "+n.getFullYear():n.getFullYear()+" - "+(n.getFullYear()+1)).trim()}toggleExpand(t){this.expandedMonth=this.expandedMonth===t?null:t}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(V),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([V])],decls:123,vars:38,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],["class","pull-right",4,"ngIf"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],["data-toggle","tab","role","tab",1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"fa","fa-tree"],[1,"col-sm-6","col-lg-4"],[1,"card-body","p-0"],[1,"col-6","pr-0"],[1,"bg-info","text-center","p-2","text-white"],[1,"icon-speedometer","bg-info","font-2xl"],[1,"text-uppercase","font-weight-bold","small","bg-info"],[1,"col-6","bg-light"],[1,"text-center","p-2"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"col-sm-6","col-lg-8"],[1,"brand-card"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],[1,"col-lg-3","col-md-4","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-lg-3","col-md-6","paddingbottom"],["name","basicExampleSelectedItems","id","emp-ddl",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-3","paddingbottom"],[1,"col-md-12"],[1,"checkbox","pull-right","pl-2"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],[1,"table","table-responsive-sm","table-striped"],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],["size","medium",3,"type"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"value"],[1,"search_no_results"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],["aria-hidden","true","tooltip","Edit","placement","bottom",1,"fa","fa-pencil",2,"cursor","pointer",3,"click"],["aria-hidden","true","tooltip","Delete","placement","bottom",1,"fa","fa-trash",2,"cursor","pointer",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Monthly Hours "),e.k0s(),e.DNE(8,pr,3,0,"div",7),e.k0s(),e.j41(9,"div",8)(10,"div",1)(11,"div",9)(12,"ul",10)(13,"li",11)(14,"a",12),e.nrm(15,"i",13),e.EFF(16," All Month Hours "),e.k0s()(),e.j41(17,"li",11)(18,"a",14),e.nrm(19,"i",15),e.EFF(20," Month wise Hours "),e.k0s()()()()(),e.j41(21,"div",1)(22,"div",16)(23,"div",3)(24,"div",17)(25,"div",1)(26,"div",18)(27,"div",19),e.nrm(28,"i",20),e.j41(29,"div",21),e.EFF(30),e.k0s()()(),e.j41(31,"div",22)(32,"div",23)(33,"div",24),e.EFF(34),e.k0s(),e.j41(35,"div",25),e.EFF(36,"Total "),e.k0s()()()()()()(),e.j41(37,"div",26)(38,"div",27)(39,"div",28)(40,"div")(41,"div",29),e.EFF(42),e.k0s(),e.j41(43,"div",30),e.EFF(44,"PM/PL"),e.k0s()(),e.j41(45,"div")(46,"div",29),e.EFF(47),e.k0s(),e.j41(48,"div",30),e.EFF(49,"TL"),e.k0s()(),e.j41(50,"div")(51,"div",29),e.EFF(52),e.k0s(),e.j41(53,"div",30),e.EFF(54,"Developer"),e.k0s()(),e.j41(55,"div")(56,"div",29),e.EFF(57),e.k0s(),e.j41(58,"div",30),e.EFF(59,"Designer"),e.k0s()(),e.j41(60,"div")(61,"div",29),e.EFF(62),e.k0s(),e.j41(63,"div",30),e.EFF(64,"QA"),e.k0s()()()()()(),e.j41(65,"div",1)(66,"div",31)(67,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.Project,r)||(i.Project=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(68,"div",31)(69,"select",33),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(70,ur,2,2,"option",34),e.k0s()(),e.j41(71,"div",31)(72,"select",35),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(73,"option",36),e.EFF(74,"-- Month --"),e.k0s(),e.DNE(75,mr,2,2,"option",34),e.k0s()(),e.j41(76,"div",31)(77,"select",37),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(78,"option",36),e.EFF(79,"-- Project Type --"),e.k0s(),e.DNE(80,gr,2,2,"option",34),e.k0s()(),e.j41(81,"div",31)(82,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(83,"option",36),e.EFF(84,"-- Department --"),e.k0s(),e.DNE(85,fr,2,2,"option",34),e.k0s()(),e.j41(86,"div",31)(87,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(88,"option",36),e.EFF(89,"-- Technology --"),e.k0s(),e.DNE(90,Ar,2,2,"option",34),e.k0s()(),e.j41(91,"div",31)(92,"select",40),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(93,"option",36),e.EFF(94,"-- Client --"),e.k0s(),e.DNE(95,_r,2,2,"option",34),e.k0s()(),e.j41(96,"div",41)(97,"ng-multiselect-dropdown",42),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s(),e.j41(98,"button",43),e.bIt("click",function(){return i.search()}),e.nrm(99,"i",44),e.k0s(),e.j41(100,"button",45),e.bIt("click",function(){return i.reset()}),e.nrm(101,"i",46),e.k0s()(),e.nrm(102,"div",47),e.k0s(),e.j41(103,"div",1)(104,"div",48)(105,"div",49)(106,"label",50)(107,"input",51),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(108," Auto Filter "),e.k0s(),e.j41(109,"label",52)(110,"input",51),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(111," Show Column "),e.k0s()(),e.j41(112,"table",53)(113,"thead")(114,"tr"),e.nrm(115,"th"),e.j41(116,"th"),e.EFF(117,"#"),e.k0s(),e.j41(118,"th"),e.EFF(119,"Month"),e.k0s()()(),e.DNE(120,yr,6,1,"tbody",54)(121,wr,10,6,"tbody",55),e.k0s()()()()()()()(),e.nrm(122,"ngx-spinner",56)),2&n&&(e.R7$(8),e.Y8G("ngIf",i.AddAccess),e.R7$(6),e.Y8G("routerLinkActive",e.lJ4(34,At))("routerLink",e.lJ4(35,hr)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(36,At))("routerLink",e.lJ4(37,dr)),e.R7$(12),e.SpI(" ",i.CurrentYear,""),e.R7$(4),e.JRh(i.result.totalHours),e.R7$(8),e.JRh(i.result.pmTotalHours),e.R7$(5),e.JRh(i.result.tlTotalHours),e.R7$(5),e.JRh(i.result.developerTotalHours),e.R7$(5),e.JRh(i.result.designerTotalHours),e.R7$(5),e.JRh(i.result.qaTotalHours),e.R7$(5),e.R50("ngModel",i.Project),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(10),e.Y8G("ngIf",i.timeSheetlistmonthWise.length<1),e.R7$(),e.Y8G("ngForOf",i.timeSheetlistmonthWise),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b],encapsulation:2})}return s})(),Be=(()=>{class s{constructor(t,n){this.validateEqual=t,this.reverse=n}get isReverse(){return!!this.reverse&&"true"===this.reverse}validate(t){let n=t.value,i=t.root.get(this.validateEqual);return i&&n!==i.value&&!this.isReverse?{validateEqual:!1}:(i&&n===i.value&&this.isReverse&&(delete i.errors.validateEqual,Object.keys(i.errors).length||i.setErrors(null)),i&&n!==i.value&&this.isReverse&&i.setErrors({validateEqual:!1}),null)}static#e=this.\u0275fac=function(n){return new(n||s)(e.kS0("validateEqual"),e.kS0("reverse"))};static#t=this.\u0275dir=e.FsC({type:s,selectors:[["","validateEqual","","formControlName",""],["","validateEqual","","formControl",""],["","validateEqual","","ngModel",""]],features:[e.Jv_([{provide:c.cz,useExisting:(0,e.Rfq)(()=>s),multi:!0}])]})}return s})();var Ue=F(6650);let yt=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getTechnologywiseTotalHours(t,n){let i=new m.Lr({Authorization:"Bearer "+this.gettoken()});return this.http.get(p.apiUrl+"api/Dashboard/GetTechnologywiseTotalHours?FinancialYear="+t+"&CompanyID="+this.currentUser.companyID+"&Month="+n+"&UserID="+this.currentUser.employeeID,{headers:i})}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})(),Ee=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}changePassword(t,n){const i=JSON.stringify(t);return this.http.post(`${p.apiUrl}api/Employee/ChangePassword?EmployeeID=${n}`,i,{headers:this.headers}).pipe((0,j.T)(r=>r))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();class St extends C{}class Pr extends C{}class Ve extends C{}class Dt extends C{}class Q extends C{}class Fe extends C{}class jt extends C{}const Rr=(s,l)=>({background:s,"border-color":l});function Gr(s,l){if(1&s&&(e.j41(0,"option",67),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Yr(s,l){if(1&s&&(e.j41(0,"option",67),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Hr(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",14)(1,"div",68),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.KPIGotoTimeSheetMonthDepHours(i.id))}),e.j41(2,"div",69)(3,"div",17),e.nrm(4,"i",18),e.k0s(),e.j41(5,"div",19),e.EFF(6),e.k0s(),e.j41(7,"div",20),e.EFF(8),e.k0s(),e.j41(9,"div",21),e.nrm(10,"div",22),e.k0s(),e.j41(11,"div",20),e.EFF(12),e.k0s(),e.j41(13,"div",23),e.EFF(14),e.nI1(15,"slice"),e.k0s()()()()}if(2&s){const t=l.$implicit,n=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(10,Rr,t.color,t.borderColor)),e.R7$(5),e.JRh(t.totalHours),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("ngStyle",n.setStyles(t.width)),e.R7$(2),e.JRh(n.CurrentMonthName),e.R7$(2),e.JRh(e.brH(15,6,t.name,0,10))}}function Nr(s,l){if(1&s){const t=e.RV6();e.j41(0,"canvas",70),e.bIt("chartHover",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.chartHovered(i))})("chartClick",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.chartClicked(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("datasets",t.barChartData)("labels",t.barChartLabels)("options",t.barChartOptions)("legend",t.barChartLegend)("chartType",t.barChartType)}}function Lr(s,l){if(1&s&&e.nrm(0,"canvas",71),2&s){const t=e.XpG();e.Y8G("datasets",t.ProductivitybarChartData)("labels",t.ProductivitybarChartLabels)("options",t.ProductivitybarChartOptions)("legend",t.ProductivitybarChartLegend)("chartType",t.ProductivitybarChartType)}}function Br(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function Ur(s,l){if(1&s&&(e.j41(0,"label",73)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(2),e.JRh(t.MonthlyHours)}}function Vr(s,l){if(1&s&&(e.j41(0,"label",73)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(2),e.JRh(t.MonthlyHours)}}function xr(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"span",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG().$implicit,r=e.XpG();return e.Njj(r.GotoTimeSheetMonthDepHours(o.technologyID,i.monthID))}),e.DNE(2,Ur,3,1,"label",72)(3,Vr,3,1,"label",72),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.Y8G("ngIf",i.GetChecked(n.technologyID,t.monthID,i.result.technologywiseTotalHoursModel)),e.R7$(),e.Y8G("ngIf",!i.GetChecked(n.technologyID,t.monthID,i.result.technologywiseTotalHoursModel))}}function Qr(s,l){if(1&s&&(e.j41(0,"label",73)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.JRh(t.TechnologyHours)}}function Or(s,l){if(1&s&&(e.j41(0,"label",73)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.JRh(t.TechnologyHours)}}function Jr(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td",44),e.EFF(2),e.k0s(),e.DNE(3,xr,4,2,"td",39),e.j41(4,"td")(5,"span",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.GotoTimeSheetMonthDepHours(i.technologyID))}),e.DNE(6,Qr,3,1,"label",72)(7,Or,3,1,"label",72),e.k0s()()()}if(2&s){const t=l.$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngForOf",n.result.months),e.R7$(3),e.Y8G("ngIf",n.GetTechnologyTotalHours(t.technologyID,n.result.technologyHoursList)),e.R7$(),e.Y8G("ngIf",!n.GetTechnologyTotalHours(t.technologyID,n.result.technologyHoursList))}}function $r(s,l){if(1&s&&(e.j41(0,"label",73)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.JRh(t.MonthlyTotalHours)}}function zr(s,l){if(1&s&&(e.j41(0,"label",73)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.JRh(t.MonthlyTotalHours)}}function Xr(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"span",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.GotoTimeSheetMonthHours(i.monthID))}),e.DNE(2,$r,3,1,"label",72)(3,zr,3,1,"label",72),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG();e.R7$(2),e.Y8G("ngIf",n.GetMonthlyTotalHours(t.monthID,n.result.monthlyTotalHoursList)),e.R7$(),e.Y8G("ngIf",!n.GetMonthlyTotalHours(t.monthID,n.result.monthlyTotalHoursList))}}function qr(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label")(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function Kr(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label")(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function Wr(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label")(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function Zr(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label")(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function ea(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"span",74),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG();return e.Njj(o.GotoMonthlyEmployeeList(o.Monthlist[i].monthID))}),e.j41(2,"label",73)(3,"span"),e.EFF(4),e.k0s()()()()}if(2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function ta(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label")(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function ia(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label")(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}function na(s,l){if(1&s&&(e.j41(0,"td")(1,"span")(2,"label",75)(3,"span"),e.EFF(4),e.k0s()()()()),2&s){const t=l.$implicit;e.R7$(4),e.JRh(t)}}let bt=(()=>{class s{constructor(t,n,i,o,r,a,d,g,y){this.http=t,this.spinner=n,this.dashboardService=i,this.elRef=o,this.route=r,this.router=a,this.changePasswordService=d,this.cookieService=g,this.toastyService=y,this.changePasswordModel={oldPassword:"",password:"",employeeID:0,confirmPassword:"",InitLogIn:1},this.FinancialYear=0,this.result=[],this.MonthlyHours=0,this.TechnologyHours=0,this.MonthlyTotalHours=0,this.TotalHours=0,this.TotalEmployee=0,this.Average=0,this.KPIMonthlyTotalHours=0,this.KPICurrentMonthASPNETHours=0,this.KPICurrentMonthSharePointHours=0,this.loading=!1,this.technologywiseMonthlyTotalHoursModel=[],this.technologyTotalHoursList=[],this.monthlyTotalHourList=[],this.monthlyTotalResourceList=[],this.Months=[],this.ProductivityNumber=[],this.LineASPNETMonthlyHours=[],this.LineSharePointMonthlyHours=[],this.LineTotalMonthlyHours=[],this.MonthsList=[],this.ProjectType=[],this.projectTypeWiseTotalHours=[],this.PieChartHours=[],this.isDataAvailable=!1,this.lineChartData=[],this.barChartData=[],this.ProductivitybarChartData=[],this.pieChartLabels=[],this.pieChartData=[],this.LineToltalHours=[],this.InProject=0,this.NotInProject=0,this.TechnologyViewModel=[],this.YearlyResourHoursReportModel=[],this.MonthDays=[],this.PublicHolidays=[],this.Weekends=[],this.WorkingDays=[],this.BillableResources=[],this.WorkingHours=[],this.ActualHours=[],this.Productivity=[],this.TotalHolidays=0,this.TotalMonthDays=0,this.TotalResources=0,this.TotalWeekends=0,this.TotalWorkingDays=0,this.TotalActualHours=0,this.TotalWorkingHours=0,this.TotalProductivity=0,this.Linechartlabel="",this.ProductivityLinechartlabel="",this.chartlabel=[],this.Dataset=[],this.MonthlyTargetedHours=0,this.monthlyTargetedHoursList=[],this.TotalTargetedHours=0,this.TotalHoursPercentage=0,this.KPIMonthlyTargetedHours=0,this.MonthlyHoursPercentage=0,this.departmentwiseTargetedHoursModel=[],this.KPIDepartmentTargetedHours=0,this.KPIDepartmentHoursPercentage=0,this.TotalResource=0,this.InResourcePercentage=0,this.NotInRespurcePercentage=0,this.DiffHours=0,this.ResourceProjectCount=[],this.TotalHourDiff=0,this.SelectedMonth=0,this.designationEnum=N,this.Monthlist=[],this.lineChartLabels=["January","February","March","April","May","June","July","August","September","October","November","December"],this.lineChartOptions={animation:!1,responsive:!0},this.lineChartColours=[{backgroundColor:"rgba(148,159,177,0.2)",borderColor:"rgba(148,159,177,1)",pointBackgroundColor:"rgba(148,159,177,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(220,220,220,0.2)",borderColor:"#0c670c",pointBackgroundColor:"#0c670c",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"}],this.lineChartLegend=!0,this.lineChartType="line",this.pieChartColors=[{backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"]}],this.pieChartType="pie",this.barChartOptions={scaleShowVerticalLines:!1,responsive:!0},this.barChartLabels=["April","May","June","July","August","September","October","November","December","January","February","March"],this.ProductivitybarChartLabels=["April","May","June","July","August","September","October","November","December","January","February","March"],this.ProductivitybarChartOptions={responsive:!0},this.ProductivitybarChartLegend=!0,this.ProductivitybarChartType="bar",this.barChartType="bar",this.barChartLegend=!0,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){if(this.spinner.show(),this.currentUser){if(this.designationEnum.ITSupport==this.currentUser.designationID)return this.router.navigate(["/Master/ProjectList"]);if(this.designationEnum.TL==this.currentUser.designationID)return this.router.navigate(["/TimeSheet/Manage"])}this.getTotalMonthlyHours(this.FinancialYear,0),this.GetProductivityReport(this.FinancialYear),(0==this.currentUser.initLogIn||(" "+document.getElementById("primaryModal").className+" ").indexOf(" show ")>-1)&&document.getElementById("openModalButton").click(),this.spinner.hide()}hasClass(t,n){return(" "+t.className+" ").indexOf(" "+n+" ")>-1}getTotalMonthlyHours(t,n){this.dashboardService.getTechnologywiseTotalHours(t,n).subscribe(i=>{this.result=i,this.Monthlist=i.months,this.TechnologyViewModel=i.technologyViewModel,this.TotalHours=Math.round(i.totalHoursModel.totalHours),this.TotalTargetedHours=i.totalTargetedHoursModel.totalTargetedHours,this.TotalHourDiff=this.TotalHours-this.TotalTargetedHours,this.TotalHoursPercentage=Math.round(this.TotalHours/this.TotalTargetedHours*100),this.FinancialYear=i.financialYear,this.SelectedMonth=i.currentMonth,i.months.forEach(r=>{this.Months.push(r.name)}),this.CurrentMonth=(new Date).getMonth(),this.CurrentMonthName=i.months.filter(r=>r.monthID==i.currentMonth)[0].name,this.GetKPIMonthlyTotalHours(i.monthlyTotalHoursList),this.GetKPIMonthlyTargetedHours(i.monthlyTargetedHoursList),this.GetKPICurrentMonthASPNETHours(i.technologywiseTotalHoursModel,i.departmentwiseTargetedHoursModel),i.financialYearDropdownModel.forEach(r=>{r.financialYearID==i.financialYear&&(this.CurrentYear=r.name)}),this.GetLineASPNETMonthlyHours(i.technologywiseTotalHoursModel,i.months,i.monthlyTotalHoursList),this.GetProjectTypeTotalHours(i.projectTypeTotalHoursList),this.InProject=i.resourceProjectCountModel.employeeProjectModel.inProject,this.NotInProject=i.resourceProjectCountModel.employeeProjectModel.notInProject,this.TotalResource=i.resourceProjectCountModel.employeeProjectModel.inProject+i.resourceProjectCountModel.employeeProjectModel.notInProject,this.InResourcePercentage=this.InProject/this.TotalResource*100,this.NotInRespurcePercentage=this.NotInProject/this.TotalResource*100,this.ResourceProjectCount=i.resourceProjectCountModel.totalInOutProjectResource},i=>{console.log(i)})}GetChecked(t,n,i){this.technologywiseMonthlyTotalHoursModel=[],this.technologywiseMonthlyTotalHoursModel=i;for(var o=0;o<this.technologywiseMonthlyTotalHoursModel.length;o++)if(t==this.technologywiseMonthlyTotalHoursModel[o].technologyID&&n==this.technologywiseMonthlyTotalHoursModel[o].month)return this.MonthlyHours=this.technologywiseMonthlyTotalHoursModel[o].monthlyHours;return this.MonthlyHours=0}GetTechnologyTotalHours(t,n){this.technologyTotalHoursList=[],this.technologyTotalHoursList=n;for(var i=0;i<this.technologyTotalHoursList.length;i++)if(t==this.technologyTotalHoursList[i].technologyID)return this.TechnologyHours=this.technologyTotalHoursList[i].technologyHours;return this.TechnologyHours=0}GetMonthlyTotalHours(t,n){this.monthlyTotalHourList=[],this.monthlyTotalHourList=n;for(var i=0;i<this.monthlyTotalHourList.length;i++)if(t==this.monthlyTotalHourList[i].month)return this.MonthlyTotalHours=Math.round(this.monthlyTotalHourList[i].monthlyHours);return this.MonthlyTotalHours=0}GetResourceChecked(t,n){this.monthlyTotalResourceList=[],this.monthlyTotalResourceList=n;for(var i=0;i<this.monthlyTotalResourceList.length;i++)if(t==this.monthlyTotalResourceList[i].month)return this.TotalEmployee=this.monthlyTotalResourceList[i].employee;return this.TotalEmployee=0}GetAverage(t,n,i){this.monthlyTotalResourceList=[],this.monthlyTotalHourList=[],this.monthlyTotalHourList=i,this.monthlyTotalResourceList=n;for(var o=0;o<this.monthlyTotalResourceList.length;o++)for(var r=0;r<this.monthlyTotalHourList.length;r++)if(t==this.monthlyTotalResourceList[o].month&&t==this.monthlyTotalHourList[r].month)return this.Average=this.monthlyTotalHourList[r].monthlyHours/this.monthlyTotalResourceList[o].employee;return this.Average=0}ChangeYear(t){if(""==t)return;this.FinancialYear=+t;this.getTotalMonthlyHours(t,this.SelectedMonth),this.GetProductivityReport(t)}GetKPIMonthlyTotalHours(t){this.monthlyTotalHourList=[],this.monthlyTotalHourList=t;for(var n=0;n<this.monthlyTotalHourList.length;n++)if(this.SelectedMonth==this.monthlyTotalHourList[n].month)return this.KPIMonthlyTotalHours=this.monthlyTotalHourList[n].monthlyHours;return this.KPIMonthlyTotalHours=0}GetKPICurrentMonthASPNETHours(t,n){this.technologywiseMonthlyTotalHoursModel=[],this.departmentwiseTargetedHoursModel=[],this.Dataset=[],this.technologywiseMonthlyTotalHoursModel=t,this.departmentwiseTargetedHoursModel=n;var i=["linear-gradient(to right, rgb(255 99 132) 0%, rgb(255 142 166) 100%)","linear-gradient(to right, rgb(55 122 167) 0%, rgb(20 106 165) 100%)","linear-gradient(to right, #e3b04b 0%, #e3b04b 100%)"],o=[];return this.TechnologyViewModel.forEach((r,a)=>{this.KPIDepartmentHoursPercentage=0,this.KPIDepartmentTargetedHours=0,this.KPICurrentMonthASPNETHours=0;for(var d=0;d<this.technologywiseMonthlyTotalHoursModel.length;d++)r.technologyID==this.technologywiseMonthlyTotalHoursModel[d].technologyID&&this.SelectedMonth==this.technologywiseMonthlyTotalHoursModel[d].month&&(this.KPICurrentMonthASPNETHours=this.technologywiseMonthlyTotalHoursModel[d].monthlyHours);for(d=0;d<this.departmentwiseTargetedHoursModel.length;d++)r.technologyID==this.departmentwiseTargetedHoursModel[d].departmentID&&this.SelectedMonth==this.departmentwiseTargetedHoursModel[d].month&&(this.KPIDepartmentTargetedHours=this.departmentwiseTargetedHoursModel[d].targetedHours);this.KPIDepartmentHoursPercentage=this.KPICurrentMonthASPNETHours/this.KPIDepartmentTargetedHours*100,this.Dataset.push({totalHours:this.KPICurrentMonthASPNETHours,name:r.name,id:r.technologyID,width:this.KPIDepartmentHoursPercentage,color:i[a],borderColor:o[a]})}),this.Dataset}onlyUnique(t,n,i){return i.indexOf(t)===n}gettoken(){return this.currentUser.authtoken}GetProductivityReport(t){let n=new Q,i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetProductivityReport?FinancialYearID="+t,n,{headers:i}).subscribe(r=>{this.GetProductivityChart(r),this.GetProductivityData(r)},r=>{console.log(r)})}GetProductivityChart(t){this.ProductivitybarChartData=[],this.YearlyResourHoursReportModel=t.filter(i=>"Productivity"==i.month);var n=[];this.YearlyResourHoursReportModel.forEach((i,o)=>{var r=this.YearlyResourHoursReportModel.filter(a=>"Productivity"==a.month);this.chartlabel.push(i.month),this.ProductivityLinechartlabel=i.month,this.MonthsList=["April","May","June","July","August","September","October","November","December","January","February","March"],this.ProductivityNumber=[],this.MonthsList.forEach(a=>{var d=Object.keys(r[0]).filter(g=>g.toLowerCase()==a.toLowerCase()).reduce((g,y)=>Object.assign(g,{[y]:r[0][y.toLowerCase()]}),{});n.push(Object.values(d))}),this.ProductivitybarChartData.push({data:n,label:this.ProductivityLinechartlabel,stack:"a"})})}GetProductivityData(t){this.TotalHolidays=0,this.TotalMonthDays=0,this.TotalResources=0,this.TotalWeekends=0,this.TotalWorkingDays=0,this.TotalActualHours=0,this.TotalWorkingHours=0,this.TotalProductivity=0;let n=t.filter(A=>"Days"==A.month);this.MonthDays=n.map(Object.values),this.MonthDays=this.MonthDays[0],this.MonthDays.splice(0,1);for(let A=0;A<this.MonthDays.length;A++)this.TotalMonthDays+=+this.MonthDays[A];let i=t.filter(A=>"Public Holidays"==A.month);this.PublicHolidays=i.map(Object.values),this.PublicHolidays=this.PublicHolidays[0],this.PublicHolidays.splice(0,1);for(let A=0;A<this.PublicHolidays.length;A++)this.TotalHolidays+=+this.PublicHolidays[A];let o=t.filter(A=>"Saturday/Sunday"==A.month);this.Weekends=o.map(Object.values),this.Weekends=this.Weekends[0],this.Weekends.splice(0,1);for(let A=0;A<this.Weekends.length;A++)this.TotalWeekends+=+this.Weekends[A];let r=t.filter(A=>"Working Days"==A.month);this.WorkingDays=r.map(Object.values),this.WorkingDays=this.WorkingDays[0],this.WorkingDays.splice(0,1);for(let A=0;A<this.WorkingDays.length;A++)this.TotalWorkingDays+=+this.WorkingDays[A];let a=t.filter(A=>"Billable Resources"==A.month);a.push(t[0]),this.BillableResources=a.map(Object.values),this.BillableResources=this.BillableResources[0],this.BillableResources.splice(0,1);for(let A=0;A<this.BillableResources.length;A++)this.TotalResources+=+this.BillableResources[A];let d=t.filter(A=>"Working Hours"==A.month);this.WorkingHours=d.map(Object.values),this.WorkingHours=this.WorkingHours[0],this.WorkingHours.splice(0,1);for(let A=0;A<this.WorkingHours.length;A++)this.TotalWorkingHours+=+this.WorkingHours[A];let g=t.filter(A=>"Actual Hours"==A.month);this.ActualHours=g.map(Object.values),this.ActualHours=this.ActualHours[0],this.ActualHours.splice(0,1);for(let A=0;A<this.ActualHours.length;A++)this.TotalActualHours+=+this.ActualHours[A];let y=t.filter(A=>"Productivity"==A.month);this.Productivity=y.map(Object.values),this.Productivity=this.Productivity[0],this.Productivity.splice(0,1),this.TotalProductivity=Math.round(100*this.TotalActualHours/this.TotalWorkingHours)}GetLineASPNETMonthlyHours(t,n,i){this.technologywiseMonthlyTotalHoursModel=[],this.LineToltalHours=[],this.technologywiseMonthlyTotalHoursModel=t,this.LineToltalHours=i,this.MonthsList=[],this.LineASPNETMonthlyHours=[],this.LineSharePointMonthlyHours=[],this.LineTotalMonthlyHours=[],this.MonthsList=n,this.barChartData=[],this.TechnologyViewModel.forEach((o,r)=>{this.chartlabel.push(o.name),this.Linechartlabel="",this.Linechartlabel=o.name,this.LineASPNETMonthlyHours=[],this.MonthsList.forEach(a=>{var A=this.technologywiseMonthlyTotalHoursModel.filter(b=>b.technologyID===o.technologyID&&b.month===a.monthID);this.LineASPNETMonthlyHours.push(A.length>0?A[0].monthlyHours:0);var v=this.LineToltalHours.filter(b=>b.month===a.monthID);this.LineTotalMonthlyHours.push(v.length>0?v[0].monthlyHours:0)}),this.barChartData.push({data:this.LineASPNETMonthlyHours,label:this.Linechartlabel})}),this.barChartData.push({data:this.LineTotalMonthlyHours,label:"Total"})}GetProjectTypeTotalHours(t){this.projectTypeWiseTotalHours=[],this.ProjectType=[],this.PieChartHours=[],this.projectTypeWiseTotalHours=t,this.projectTypeWiseTotalHours.forEach(n=>{this.ProjectType.push(n.projectType),this.PieChartHours.push(n.totalHours)}),this.pieChartLabels=this.ProjectType,this.pieChartData=this.PieChartHours}chartClicked(t){console.log(t)}chartHovered(t){console.log(t)}GotoTimesheetTotal(){this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{FinancialYear:this.FinancialYear},skipLocationChange:!0})}GotoTimeSheetMonthHours(t=void 0){return this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{month:null!=t?t:this.SelectedMonth,FinancialYear:this.FinancialYear},skipLocationChange:!0})}GotoTimeSheetMonthDepHours(t,n){return this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{month:null!=n?n:"0",department:t,FinancialYear:this.FinancialYear},skipLocationChange:!0})}KPIGotoTimeSheetMonthDepHours(t){return this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{month:this.SelectedMonth,department:t,FinancialYear:this.FinancialYear},skipLocationChange:!0})}GotoMonthlyEmployeeList(t){if(this.currentUser.designationID!=this.designationEnum.BDM)return this.router.navigate(["/Master/EmployeeList"],{queryParams:{month:null!=t?t:"0",FinancialYear:this.FinancialYear,CounterDashboard:!0},skipLocationChange:!0})}ChangePassword(t=""){this.loading=!0,this.currentUser?this.changePasswordService.changePassword(this.changePasswordModel,this.currentUser.employeeID).subscribe(n=>{this.loading=!1,n>0?(1==n?(this.toastyService.success("Password Changed successfully.","Change Password"),this.currentUser.initLogIn=1,this.cookieService.delete("currentUser"),this.cookieService.set("currentUser",JSON.stringify(this.currentUser))):this.toastyService.error("Password Change Failed. Check your old password.","Change Password"),(" "+document.getElementById("primaryModal").className+" ").indexOf(" show ")>-1&&document.getElementById("openModalButton").click()):this.toastyService.error("Password Change Failed.","Change Password")},n=>{console.log(n)}):(this.loading=!0,this.router.navigate(["/login"]))}GetMonthlyTargetedHours(t,n){this.monthlyTargetedHoursList=[],this.monthlyTargetedHoursList=n;for(var i=0;i<this.monthlyTargetedHoursList.length;i++)if(t==this.monthlyTargetedHoursList[i].month)return this.MonthlyTargetedHours=this.monthlyTargetedHoursList[i].targetedHours;return this.MonthlyTargetedHours=0}GetKPIMonthlyTargetedHours(t){this.monthlyTargetedHoursList=[],this.monthlyTargetedHoursList=t;for(var n=0;n<this.monthlyTargetedHoursList.length;n++)this.SelectedMonth==this.monthlyTargetedHoursList[n].month&&(this.KPIMonthlyTargetedHours=this.monthlyTargetedHoursList[n].targetedHours);return this.MonthlyHoursPercentage=this.KPIMonthlyTotalHours/this.KPIMonthlyTargetedHours*100}GetDiffHours(t,n,i){this.monthlyTargetedHoursList=[],this.monthlyTotalHourList=[],this.monthlyTotalHourList=i,this.monthlyTargetedHoursList=n;var o=0,r=0;return o=this.monthlyTotalHourList.find(a=>a.month===t),r=this.monthlyTargetedHoursList.find(a=>a.month===t),this.DiffHours=(o=null==o?0:o.monthlyHours)-(null==r?0:r.targetedHours)}setStyles(t){return{width:t+"%"}}ChangeMonthlyData(t){this.SelectedMonth=t;let n=0;this.SelectedMonth>0&&(n=this.SelectedMonth),this.GetMonthIndex(n),this.getTotalMonthlyHours(this.FinancialYear,this.SelectedMonth),this.GetProductivityReport(this.FinancialYear)}GetMonthIndex(t){return this.result.months.filter(o=>o.monthID==t)[0].monthID}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(yt),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(Ee),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["home"]],viewQuery:function(n,i){if(1&n&&e.GBs(Ue.j9,7),2&n){let o;e.mGM(o=e.lsd())&&(i.chart=o.first)}},features:[e.Jv_([yt,Ee])],decls:199,vars:40,consts:[["primaryModal","bs-modal"],["f","ngForm"],["password","ngModel"],["confirmPassword","ngModel"],[1,"animated","fadeIn"],[1,""],[1,"dash-drp"],[1,"row"],[1,"col-sm-6","col-lg-2","offset-lg-8","col-md-3","offset-md-6","paddingbottom"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-2","col-md-3","paddingbottom"],["name","SelectedMonth","id","SelectedMonth",1,"form-control",3,"ngModelChange","ngModel"],["value","","selected","","disabled",""],[1,"col-custom"],[1,"card","text-center","overflow-hidden","border-0","dash-1"],[1,"card-body","kpi","p-3",3,"click"],[1,"dashboard-card-icon"],["aria-hidden","true",1,"fa","fa-calendar-check-o"],[1,"h4","m-0","count-value"],[1,"card-info-label"],[1,"progress","progress-xs","my-2"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",3,"ngStyle"],[1,"dashboard-card-head"],[1,"card","text-center","overflow-hidden","border-0","dash-2"],["class","col-custom",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card"],[1,"card-header","main-card-header"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"chart-wrapper"],["baseChart","","class","chart",3,"datasets","labels","options","legend","chartType","chartHover","chartClick",4,"ngIf"],["baseChart","","class","chart",3,"datasets","labels","options","legend","chartType",4,"ngIf"],[1,"col-lg-12"],[1,"caption"],[1,"col-md-12"],[1,"form-group","table-responsive"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"totaltd"],[1,"kpi",3,"click"],[1,"kpi"],["colspan","14"],[1,"technologytd"],[1,"resourcetd"],["id","openModalButton","data-toggle","modal","data-target","#primaryModal",3,"hidden"],["id","hideModalButton","type","button","aria-label","Close",1,"close",3,"click","hidden"],["aria-hidden","true"],["id","primaryModal","bsModal","","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-primary"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12","row"],[1,"col-md-4","col-form-label","required"],["type","password","id","password","name","password","placeholder","Password","required","","maxlength","14","validateEqual","confirmPassword","reverse","true",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-block","error",3,"hidden"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm Password","validateEqual","password","required","","maxlength","14",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["size","medium",3,"type"],[3,"value"],[1,"card","text-center","overflow-hidden","border-0",3,"click","ngStyle"],[1,"card-body","p-3"],["baseChart","",1,"chart",3,"chartHover","chartClick","datasets","labels","options","legend","chartType"],["baseChart","",1,"chart",3,"datasets","labels","options","legend","chartType"],["class","mt-checkbox kpi",4,"ngIf"],[1,"mt-checkbox","kpi"],[3,"click"],[1,"mt-checkbox"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"select",9),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.ChangeYear(a))}),e.DNE(6,Gr,2,2,"option",10),e.k0s()(),e.j41(7,"div",11)(8,"select",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.SelectedMonth,a)||(i.SelectedMonth=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.ChangeMonthlyData(a))}),e.j41(9,"option",13),e.EFF(10,"-- Month --"),e.k0s(),e.DNE(11,Yr,2,2,"option",10),e.k0s()()()()(),e.j41(12,"div",7)(13,"div",14)(14,"div",15)(15,"div",16),e.bIt("click",function(){return e.eBV(o),e.Njj(i.GotoTimesheetTotal())}),e.j41(16,"div",17),e.nrm(17,"i",18),e.k0s(),e.j41(18,"div",19),e.EFF(19),e.k0s(),e.j41(20,"div",20),e.EFF(21,"Total Yearly Hours"),e.k0s(),e.j41(22,"div",21),e.nrm(23,"div",22),e.k0s(),e.j41(24,"div",20),e.EFF(25),e.k0s(),e.j41(26,"div",23),e.EFF(27,"YEARLY"),e.k0s()()()(),e.j41(28,"div",14)(29,"div",24)(30,"div",16),e.bIt("click",function(){return e.eBV(o),e.Njj(i.GotoTimeSheetMonthHours())}),e.j41(31,"div",17),e.nrm(32,"i",18),e.k0s(),e.j41(33,"div",19),e.EFF(34),e.k0s(),e.j41(35,"div",20),e.EFF(36,"Total Monthly Hours"),e.k0s(),e.j41(37,"div",21),e.nrm(38,"div",22),e.k0s(),e.j41(39,"div",20),e.EFF(40),e.k0s(),e.j41(41,"div",23),e.EFF(42,"MONTHLY"),e.k0s()()()(),e.DNE(43,Hr,16,13,"div",25),e.k0s(),e.j41(44,"div",7)(45,"div",26)(46,"div",27)(47,"div",28),e.nrm(48,"i",29),e.EFF(49," Monthly Total Hours Chart "),e.k0s(),e.j41(50,"div",30)(51,"div",31),e.DNE(52,Nr,1,5,"canvas",32),e.k0s()()()(),e.j41(53,"div",26)(54,"div",27)(55,"div",28),e.nrm(56,"i",29),e.EFF(57," Productivity "),e.k0s(),e.j41(58,"div",30)(59,"div",31),e.DNE(60,Lr,1,5,"canvas",33),e.k0s()()()()(),e.j41(61,"div",7)(62,"div",34)(63,"div",27)(64,"div",28)(65,"div",35),e.nrm(66,"i",29),e.EFF(67," Dashboard "),e.k0s()(),e.j41(68,"div",30)(69,"div",7)(70,"div",36)(71,"div",37)(72,"table",38)(73,"thead")(74,"tr")(75,"th"),e.EFF(76," Months "),e.k0s(),e.DNE(77,Br,2,1,"th",39),e.j41(78,"th"),e.EFF(79," Total "),e.k0s()()(),e.DNE(80,Jr,8,4,"tr",39),e.j41(81,"tr",40)(82,"td"),e.EFF(83," Total "),e.k0s(),e.DNE(84,Xr,4,2,"td",39),e.j41(85,"td",41),e.bIt("click",function(){return e.eBV(o),e.Njj(i.GotoTimesheetTotal())}),e.j41(86,"label",42)(87,"span"),e.EFF(88),e.k0s()()()(),e.j41(89,"tr"),e.nrm(90,"td",43),e.k0s(),e.j41(91,"tr")(92,"td",44),e.EFF(93," Days "),e.k0s(),e.DNE(94,qr,5,1,"td",39),e.j41(95,"td")(96,"label")(97,"span"),e.EFF(98),e.k0s()()()(),e.j41(99,"tr")(100,"td",44),e.EFF(101," Public Holidays "),e.k0s(),e.DNE(102,Kr,5,1,"td",39),e.j41(103,"td")(104,"label")(105,"span"),e.EFF(106),e.k0s()()()(),e.j41(107,"tr")(108,"td",44),e.EFF(109," Saturday/Sunday "),e.k0s(),e.DNE(110,Wr,5,1,"td",39),e.j41(111,"td")(112,"label")(113,"span"),e.EFF(114),e.k0s()()()(),e.j41(115,"tr")(116,"td",44),e.EFF(117," Working Days "),e.k0s(),e.DNE(118,Zr,5,1,"td",39),e.j41(119,"td")(120,"label")(121,"span"),e.EFF(122),e.k0s()()()(),e.j41(123,"tr",45)(124,"td",44),e.EFF(125," Billable Resources "),e.k0s(),e.DNE(126,ea,5,1,"td",39),e.j41(127,"td")(128,"label")(129,"span"),e.EFF(130),e.k0s()()()(),e.j41(131,"tr")(132,"td",44),e.EFF(133," Working Hours "),e.k0s(),e.DNE(134,ta,5,1,"td",39),e.j41(135,"td")(136,"label")(137,"span"),e.EFF(138),e.k0s()()()(),e.j41(139,"tr")(140,"td",44),e.EFF(141," Actual Hours "),e.k0s(),e.DNE(142,ia,5,1,"td",39),e.j41(143,"td")(144,"label")(145,"span"),e.EFF(146),e.k0s()()()(),e.j41(147,"tr"),e.nrm(148,"td",43),e.k0s(),e.j41(149,"tr",40)(150,"td"),e.EFF(151," Productivity "),e.k0s(),e.DNE(152,na,5,1,"td",39),e.j41(153,"td")(154,"label")(155,"span"),e.EFF(156),e.k0s()()()()()()()()()()()(),e.j41(157,"button",46),e.EFF(158,"Open Modal"),e.k0s(),e.j41(159,"button",47),e.bIt("click",function(){e.eBV(o);const a=e.sdS(163);return e.Njj(a.hide())}),e.j41(160,"span",48),e.EFF(161,"\xd7"),e.k0s()()(),e.j41(162,"div",49,0)(164,"div",50)(165,"div",51)(166,"div",52)(167,"h4",53),e.EFF(168,"Change Password"),e.k0s(),e.j41(169,"button",54),e.bIt("click",function(){e.eBV(o);const a=e.sdS(163);return e.Njj(a.hide())}),e.j41(170,"span",48),e.EFF(171,"\xd7"),e.k0s()()(),e.j41(172,"form",55,1),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(173);return e.Njj(a.form.valid&&i.ChangePassword(a))}),e.j41(174,"div",56)(175,"div",57)(176,"div",58)(177,"label",59),e.EFF(178,"New Password"),e.k0s(),e.j41(179,"div",26)(180,"input",60,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.changePasswordModel.password,a)||(i.changePasswordModel.password=a),e.Njj(a)}),e.k0s(),e.j41(182,"span",61),e.EFF(183," Password is required "),e.k0s()()()(),e.j41(184,"div",57)(185,"div",58)(186,"label",59),e.EFF(187,"Retype password"),e.k0s(),e.j41(188,"div",26)(189,"input",62,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.changePasswordModel.confirmPassword,a)||(i.changePasswordModel.confirmPassword=a),e.Njj(a)}),e.k0s(),e.j41(191,"span",61),e.EFF(192," Password mismatch "),e.k0s()()()()(),e.j41(193,"div",63)(194,"button",64),e.bIt("click",function(){e.eBV(o);const a=e.sdS(163);return e.Njj(a.hide())}),e.EFF(195,"I'll do it later"),e.k0s(),e.j41(196,"button",65),e.EFF(197,"Change Password"),e.k0s()()()()()(),e.nrm(198,"ngx-spinner",66)}if(2&n){const o=e.sdS(173),r=e.sdS(181),a=e.sdS(190);e.R7$(5),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.result.financialYearDropdownModel),e.R7$(2),e.R50("ngModel",i.SelectedMonth),e.R7$(3),e.Y8G("ngForOf",i.result.months),e.R7$(8),e.JRh(i.TotalHours),e.R7$(4),e.Y8G("ngStyle",i.setStyles(i.TotalHoursPercentage)),e.R7$(2),e.SpI(" ",i.CurrentYear,""),e.R7$(9),e.JRh(i.KPIMonthlyTotalHours),e.R7$(4),e.Y8G("ngStyle",i.setStyles(i.MonthlyHoursPercentage)),e.R7$(2),e.JRh(i.CurrentMonthName),e.R7$(3),e.Y8G("ngForOf",i.Dataset),e.R7$(9),e.Y8G("ngIf",i.barChartData.length>1),e.R7$(8),e.Y8G("ngIf",i.ProductivitybarChartData.length>0),e.R7$(17),e.Y8G("ngForOf",i.result.months),e.R7$(3),e.Y8G("ngForOf",i.result.technologyViewModel),e.R7$(4),e.Y8G("ngForOf",i.result.months),e.R7$(4),e.JRh(i.TotalHours),e.R7$(6),e.Y8G("ngForOf",i.MonthDays),e.R7$(4),e.JRh(i.TotalMonthDays),e.R7$(4),e.Y8G("ngForOf",i.PublicHolidays),e.R7$(4),e.JRh(i.TotalHolidays),e.R7$(4),e.Y8G("ngForOf",i.Weekends),e.R7$(4),e.JRh(i.TotalWeekends),e.R7$(4),e.Y8G("ngForOf",i.WorkingDays),e.R7$(4),e.JRh(i.TotalWorkingDays),e.R7$(4),e.Y8G("ngForOf",i.BillableResources),e.R7$(4),e.JRh(i.TotalResources),e.R7$(4),e.Y8G("ngForOf",i.WorkingHours),e.R7$(4),e.JRh(i.TotalWorkingHours),e.R7$(4),e.Y8G("ngForOf",i.ActualHours),e.R7$(4),e.JRh(i.TotalActualHours),e.R7$(6),e.Y8G("ngForOf",i.Productivity),e.R7$(4),e.JRh(i.TotalProductivity),e.R7$(),e.Y8G("hidden",!0),e.R7$(2),e.Y8G("hidden",!0),e.R7$(21),e.R50("ngModel",i.changePasswordModel.password),e.R7$(2),e.Y8G("hidden",r.valid||r.pristine&&!o.submitted),e.R7$(7),e.R50("ngModel",i.changePasswordModel.confirmPassword),e.R7$(2),e.Y8G("hidden",a.valid||a.pristine&&!o.submitted),e.R7$(7),e.Y8G("type",i.typeSelected)}},dependencies:[u.Sq,u.bT,u.B3,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,Ue.j9,B.hZ,D.et,Be,u.P9],encapsulation:2})}return s})(),Mt=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.clientService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Client List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.IsActive=!0,this.filterModel=new ht,this.datagrid=i,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="ClientID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","First Name",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("lastName","Last Name",'[{"width": "20%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("company","Company",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("country","Country",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("state","Province",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("city","City",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("Action","Action",'[{"width": "20%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Edit","isEdit":true}]')),this.getCookiesFilterData(t.queryParams.filterModel),this.executeSearch(),this.spinner.hide()}showClientForm(){this.router.navigate(["/Master/Client"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getProjectList()},t),this.spinner.hide()}DeleteProject(t){this.spinner.show(),this.clientService.deleteClient(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}getProjectList(){this.spinner.show();const t=new ht;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.companyID=this.currentUser.companyID,this.filterModel=t,null==this.IsActive&&(this.IsActive=!1);const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Client/GetClientList?IsActive="+this.IsActive,JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Client deleted successfully.","Delete")):2==t?this.toastyService.warning("Client associated with TimeSheet.","Warning"):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.clientListViewModel=t.clientListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRowForEditDelete(t){let i=this.clientListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this client?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteProject(i.clientID)}},cancel:function(){}}})}selectedRow(t){return this.router.navigate(["/Master/Client"],{queryParams:{id:this.clientListViewModel[t].clientID,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.IsActive=!1,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchSource(t){0!=this.autoFilter&&""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(ve),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-list"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([ve])],decls:34,vars:9,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"row","d-flex"],[1,"col-md-3"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],[2,"margin-top","10px"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],["tooltip","If check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","","tooltip","If check-box checked then grid will filter on text type","placement","bottom",3,"ngModelChange","ngModel"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Clients "),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.showClientForm()}),e.nrm(10,"i",9),e.k0s()()(),e.j41(11,"div",10)(12,"div",11)(13,"div",12)(14,"input",13),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(15,"div",12)(16,"label",14)(17,"input",15),e.mxI("ngModelChange",function(r){return e.DH7(i.IsActive,r)||(i.IsActive=r),r}),e.k0s(),e.EFF(18," Active Clients "),e.k0s()(),e.j41(19,"div",12)(20,"button",16),e.bIt("click",function(){return i.search()}),e.nrm(21,"i",17),e.k0s(),e.j41(22,"button",18),e.bIt("click",function(){return i.reset()}),e.nrm(23,"i",19),e.k0s()()(),e.j41(24,"div",1)(25,"div",20)(26,"div",21)(27,"label")(28,"input",22),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(29," Auto Filter "),e.k0s()()()(),e.j41(30,"div",1)(31,"div",20)(32,"datagrid",23),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(33,"ngx-spinner",24)),2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(3),e.R50("ngModel",i.IsActive),e.R7$(11),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.clientListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})(),J=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getEmployeeByID(t,n){return this.http.get(p.apiUrl+"api/Employee/GetEmployeeByID?EmployeeID="+t+"&FinancialYear="+n+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(i=>i)}updateResourceAvailability(t){let n=(new m.Nl).set("EmployeeID",t.EmployeeID.toString()).set("FinancialYear",t.FinancialYear.toString()).set("FirstName",t.firstName).set("LastName",t.lastName).set("Designation",t.designation).set("DesignationID",t.DesignationID.toString()).set("CoreSkillID",t.CoreSkillID.toString()).set("AdditionalSkillID",t.AdditionalSkillID.toString()).set("TotalExperiance",t.totalExperiance.toString()).set("ReportsToID",t.ReportsToID.toString()).set("PlanningToBook",null===t.PlanningToBook?"":t.PlanningToBook.toString()).set("AvailableDate",t.AvailableDate.toString()).set("DaysFromToday",t.DaysFromToday.toString()).set("Status",t.status.toString()).set("ProjectID",t.project.toString()).set("Project",t.Project.toString()).set("JoiningDate",t.JoiningDate.toString()).set("LeavingDate",null===t.LeavingDate?"":t.LeavingDate.toString()).set("IsActive",t.isActive.toString()).set("DepartmentID",t.DepartmentID.toString()).set("EmailID",t.emailID).set("ContactNumber",t.contactNumber);return this.http.post(p.apiUrl+"api/Employee/UpdateResourceAvailability?CreatedBy="+this.currentUser.employeeID,{},{headers:this.headers,params:n}).pipe((0,j.T)(i=>i))}deleteEmployee(t,n){return this.http.get(p.apiUrl+"/api/Employee/DeleteEmployee?EmployeeID="+t+"&LoginEmployeeID="+n,{headers:this.headers}).map(i=>i)}deleteProjectFromResource(t,n,i){return this.http.get(p.apiUrl+"api/Employee/DeleteProjectFromResource?ProjectID="+t+"&EmployeeID="+n+"&DesignationID="+i+"&LoginEmployeeID="+this.currentUser.employeeID,{headers:this.headers}).map(o=>o)}getEmploeeDetails(){return this.http.get(p.apiUrl+"api/Employee/GetEmploeeDetails?CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(t=>t)}SaveEmployee(t){var n=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Employee/SaveEmployee?LoginID="+this.currentUser.employeeID+"&companyID="+this.currentUser.companyID,n,{headers:this.headers}).pipe((0,j.T)(i=>i))}CheckEmployeeExists(t){return this.http.get(p.apiUrl+"api/Employee/CheckEmployeeExists?Email="+t,{headers:this.headers}).map(n=>n)}GetProductivity(){return this.http.get(p.apiUrl+"api/Employee/GetProductivity",{headers:this.headers}).pipe((0,j.T)(t=>t))}GetEmployeeProductivityList(){return this.http.post(p.apiUrl+"api/Employee/GetEmployeeProductivityList",{},{headers:this.headers}).pipe((0,j.T)(t=>t))}CheckEmployeeProductivityExsist(t,n,i,o){return this.http.get(p.apiUrl+"api/Employee/CheckEmployeeProductivityExsist?FinancialYear="+t+"&FromMonth="+n+"&ToMonth="+i+"&EmployeeID="+o,{headers:this.headers}).pipe((0,j.T)(r=>r))}SaveUpdateEmployeeProductivity(t){var n=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Employee/SaveUpdateEmployeeProductivity",n,{headers:this.headers}).pipe((0,j.T)(i=>i))}DeleteEmployeeProductivity(t){return this.http.get(p.apiUrl+"api/Employee/DeleteEmployeeProductivity?EmployeeProductivityID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();class oa{constructor(){this.status=0,this.isActive=0}}class Te extends C{}class sa{constructor(){this.FinancialYear=0,this.DesignationID=0,this.DepartmentID=0}}class Ct{}class kt extends C{constructor(){super(...arguments),this.ProductivityLevel=0,this.FromMonth=0,this.ToMonth=0,this.FinancialYear=0}}const It=()=>["active"],ra=()=>["/Master/Employee"];function aa(s,l){if(1&s&&(e.j41(0,"option",70),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function la(s,l){1&s&&(e.j41(0,"span",71),e.EFF(1,"First Name is required"),e.k0s())}function ca(s,l){1&s&&(e.j41(0,"span",71),e.EFF(1,"Last Name is required"),e.k0s())}function ha(s,l){1&s&&(e.j41(0,"span",71),e.EFF(1,"Email is required"),e.k0s())}function da(s,l){1&s&&(e.j41(0,"span",71),e.EFF(1,"Email format is invalid"),e.k0s())}function pa(s,l){1&s&&(e.j41(0,"span",71),e.EFF(1,"Contact number is required"),e.k0s())}function ua(s,l){if(1&s&&(e.j41(0,"option",70),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function ma(s,l){if(1&s&&(e.j41(0,"option",70),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.designationID),e.R7$(),e.SpI(" ",t.name," ")}}function ga(s,l){1&s&&(e.j41(0,"span",71),e.EFF(1,"Leaving Date is required"),e.k0s())}function fa(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",72)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span",73),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.RemoveProject(i.projectID,o.employeeViewModel.designationID))}),e.nrm(4,"i",74),e.k0s()()}if(2&s){const t=l.$implicit;e.R7$(2),e.SpI(" ",t.name,"")}}function Aa(s,l){1&s&&e.nrm(0,"img",75)}let vt=(()=>{class s{constructor(t,n,i,o,r,a,d){this.employeeService=t,this.elRef=n,this.route=i,this.router=o,this.datePipe=r,this.cookieService=a,this.toastyService=d,this.employeeViewModel=new oa,this.EmployeeID=0,this.loading=!1,this.CoreSkillselectedID=[],this.AdditionalSkillselectedID=[],this.ReportsToselectedID=[],this.ProjectselectedID=[],this.ProjectName=[],this.CoreSkillID=[],this.AdditionalSkillID=[],this.ReportsToID=[],this.ProjectID=[],this.CoreSkilldropdownSettings={},this.AddtionalSkilldropdownSettings={},this.ReportsTodropdownSettings={},this.ProjectdropdownSettings={},this.result=[],this.FinancialYear=0,this.Department=0,this.Designation=0,this.dpConfig=new k.iP,this.IsActiveError=!1,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){this.currentUser.designationID==N.BDM&&this.router.navigate(["/SmartDesk/AccessDenied"]);let t=this.router.parseUrl(this.router.url);this.EmployeeID=+t.queryParams.id,this.EmployeeName=t.queryParams.name,this.FinancialYear=+t.queryParams.FinancialYear,this.filterModel=t.queryParams.filterModel,this.CoreSkilldropdownSettings={singleSelection:!1,idField:"coreSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.AddtionalSkilldropdownSettings={singleSelection:!1,idField:"additionalSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.ReportsTodropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.ProjectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.EmployeeID>0&&this.getEmployeeByID(this.EmployeeID,this.FinancialYear)}toggleEllipsis(){document.querySelector("#ellipsis-ex").classList.toggle("text-truncate")}getEmployeeByID(t,n){this.employeeService.getEmployeeByID(t,n).subscribe(i=>{if(""!=i){this.AvailableDate=i.employeeViewModel.availableDate,this.PlanningToBook=i.employeeViewModel.planningToBook,this.JoiningDate=i.employeeViewModel.joiningDate,this.LeavingDate=i.employeeViewModel.leavingDate,this.DaysFromToday=i.employeeViewModel.daysFromToday,this.result=i,this.employeeViewModel=i.employeeViewModel,this.FinancialYear=i.employeeViewModel.financialYear,this.Department=i.employeeViewModel.departmentID,this.Designation=i.employeeViewModel.designationID;let o=[],r=[],a=[],d=[];""!=i.employeeViewModel.coreSkillID&&(this.CoreSkillID=i.employeeViewModel.coreSkillID.split(","),this.CoreSkillID.forEach(g=>{o.push(i.coreskillDropdownModel.find(y=>y.coreSkillID===parseInt(g)))}),this.CoreSkillselectedID=o),""!=i.employeeViewModel.additionalSkillID&&(this.AdditionalSkillID=i.employeeViewModel.additionalSkillID.split(","),this.AdditionalSkillID.forEach(g=>{a.push(i.additionalskillDropdownModel.find(y=>y.additionalSkillID===parseInt(g)))}),this.AdditionalSkillselectedID=a),""!=i.employeeViewModel.reportsToID&&(this.ReportsToID=i.employeeViewModel.reportsToID.split(","),this.ReportsToID.forEach(g=>{r.push(i.reportsToDropdownModel.find(y=>y.id===parseInt(g)))}),this.ReportsToselectedID=r),this.ProjectselectedID=[],""!=i.employeeViewModel.projectID&&(this.ProjectID=i.employeeViewModel.projectID.split(","),this.ProjectID.forEach(g=>{d.push(i.projectDropdownModel.find(y=>y.projectID===parseInt(g)))}),this.ProjectselectedID=d,this.onProjectSelect(""))}},i=>{console.log(i)})}onCoreSkillSelect(t){this.SelectedCoreSkill=this.CoreSkillselectedID.map(n=>n.name).join(", ")}onAdditionalSkillSelect(t){this.SelectedAdditionalSkill=this.AdditionalSkillselectedID.map(n=>n.name).join(", ")}onReportsToSelect(t){this.SelectedReportsTo=this.ReportsToselectedID.map(n=>n.name).join(", ")}onProjectSelect(t){this.SelectedProject=this.ProjectselectedID.map(n=>n.name).join(", ")}onValueChange(t){var n=new Date(t),i=new Date,o=n.getTime()-i.getTime(),r=Math.ceil(o/864e5);this.DaysFromToday=r}clearInputdata(){this.router.navigate(["/Master/EmployeeList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}RedirectEmployeeProductivity(){this.router.navigate(["/Master/EmployeeProductivity"],{queryParams:{EmployeeID:this.EmployeeID,FinancialYear:this.FinancialYear,filterModel:this.filterModel},skipLocationChange:!0})}saveResourceAvailability(t=""){if(this.loading=!0,this.currentUser){var n=this.employeeViewModel.isActive;this.employeeViewModel.status=this.employeeViewModel.status?1:0,this.employeeViewModel.isActive=n?1:0,this.employeeViewModel.EmployeeID=this.EmployeeID,this.employeeViewModel.FinancialYear=this.FinancialYear,this.employeeViewModel.DepartmentID=this.Department,this.employeeViewModel.DesignationID=this.Designation,this.employeeViewModel.CoreSkillID=this.CoreSkillselectedID.map(o=>o.coreSkillID).join(","),this.employeeViewModel.AdditionalSkillID=this.AdditionalSkillselectedID.map(o=>o.additionalSkillID).join(","),this.employeeViewModel.AvailableDate=this.datePipe.transform(this.AvailableDate,"yyyy-MM-dd"),this.employeeViewModel.PlanningToBook=this.datePipe.transform(this.PlanningToBook,"yyyy-MM-dd"),this.employeeViewModel.LeavingDate=this.datePipe.transform(this.LeavingDate,"yyyy-MM-dd"),this.employeeViewModel.JoiningDate=this.datePipe.transform(this.JoiningDate,"yyyy-MM-dd"),this.employeeViewModel.ReportsToID=this.ReportsToselectedID.map(o=>o.id).join(","),this.employeeViewModel.DaysFromToday=this.DaysFromToday,0==this.IsActiveError?this.employeeService.updateResourceAvailability(this.employeeViewModel).subscribe(o=>{this.loading=!1,o.result>0?(this.toastyService.success("Resource availability update successfully.","Update Resource Availability"),this.router.navigate(["/Master/EmployeeList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})):this.toastyService.error("Something error.","Update Resource Availability")},o=>{this.loading=!1,this.toastyService.error("Something went wrong.","Update Resource Availability"),console.log(o)}):this.loading=!1}else this.loading=!0,this.router.navigate(["/login"])}ChangeIsActive(t){this.IsActiveError=0==t&&null==this.LeavingDate}onLeavingDatechange(t){console.log(t),this.IsActiveError=""==t}RemoveProject(t,n){var i=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to remove this resource from this project?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){i.DeleteProject(t,n)}},cancel:function(){}}})}DeleteProject(t,n){this.employeeService.deleteProjectFromResource(t,this.EmployeeID,n).subscribe(i=>{this.deleteOnSuccess(i)},i=>{this.deleteOnError(i)})}deleteOnSuccess(t){1==t?(this.employeeService.getEmployeeByID(this.EmployeeID,this.FinancialYear).subscribe(n=>{if(""!=n){this.ProjectselectedID=[];let i=[];""!=n.employeeViewModel.projectID&&(this.ProjectID=n.employeeViewModel.projectID.split(","),this.ProjectID.forEach(o=>{i.push(n.projectDropdownModel.find(r=>r.projectID===parseInt(o)))}),this.ProjectselectedID=i,this.onProjectSelect(""))}}),this.toastyService.success("Project deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}GetClientDetail(){return this.router.navigate(["/Master/ClientWiseProject"],{queryParams:{id:this.EmployeeID,name:this.EmployeeName,isEdit:!0,FinancialYear:this.FinancialYear},skipLocationChange:!0})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(J),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-employee"]],features:[e.Jv_([u.vh,J])],decls:177,vars:58,consts:[["f","ngForm"],["status","ngModel"],["isActive","ngModel"],["firstName","ngModel"],["lastName","ngModel"],["Email","ngModel"],["ContactNumber","ngModel"],["joiningDate","ngModel"],["totalExperiance","ngModel"],["daysFromToday","ngModel"],["project","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-user-following"],[1,"nav-link",3,"click","routerLinkActive"],[1,"fa","fa-hourglass-half"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["name","FinancialYear","id","FinancialYear","required","","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","col-form-label"],[1,"col-md-1","pt-2"],["type","checkbox","value","","name","status",1,"",3,"ngModelChange","ngModel"],[1,"col-md-3","col-form-label"],["type","checkbox","value","","name","isActive",1,"",3,"ngModelChange","ngModel"],["type","text","id","firstName","name","firstName","placeholder","First Name","maxlength","30","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["type","text","id","lastName","name","lastName","placeholder","Last Name","maxlength","30","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","email","id","Email","name","Email","placeholder","Email","maxlength","100","required","","pattern","^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","ContactNumber","name","ContactNumber","placeholder","Contact Number","maxlength","10","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","Designation","id","Designation","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","text","placeholder","Leaving Date","bsDatepicker","","name","LeavingDate","placement","top",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["name","AddtionalSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","ReportsToSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","text","id","joiningDate","name","joiningDate","bsDatepicker","","placeholder","Joining Date","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["type","text","id","totalExperiance","name","totalExperiance","maxlength","50","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Planning to book","bsDatepicker","","name","PlanningToBook","placement","top",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["type","text","placeholder","Available Date","bsDatepicker","","name","AvailableDate","placement","top",1,"form-control",3,"ngModelChange","bsValueChange","ngModel","bsConfig"],["type","text","id","daysFromToday","name","daysFromToday","maxlength","50","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","project","name","project","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],["name","ProjectSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["class","",4,"ngFor","ngForOf"],[1,"col-md-5"],["type","text","id","client","name","client","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["placement","bottom","tooltip","View all clients","ng-reflect-tooltip","Search","ng-reflect-placement","bottom",1,"btn","btn-outline-primary",3,"click"],["aria-hidden","true",1,"fa","fa-user"],[1,"card-footer"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[3,"value"],[1,"error"],[1,""],[1,"icon-cancel",3,"click"],["aria-hidden","true",1,"fa","fa-times"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div"),e.nrm(7,"i",17),e.EFF(8," Resource Setup"),e.k0s(),e.j41(9,"button",18),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",19),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",20)(13,"div",12)(14,"div",21)(15,"ul",22)(16,"li",23)(17,"a",24),e.nrm(18,"i",25),e.EFF(19," Update Resources "),e.k0s()(),e.j41(20,"li",23)(21,"a",26),e.bIt("click",function(){return e.eBV(o),e.Njj(i.RedirectEmployeeProductivity())}),e.nrm(22,"i",27),e.EFF(23," Resource Productivity "),e.k0s()()()()(),e.j41(24,"form",28,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(25);return e.Njj(a.form.valid&&i.saveResourceAvailability(a))}),e.j41(26,"div",29)(27,"div",30)(28,"label",31),e.EFF(29,"Financial Year"),e.k0s(),e.j41(30,"div",32)(31,"select",33),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.j41(32,"option",34),e.EFF(33,"-- Financial Year --"),e.k0s(),e.DNE(34,aa,2,2,"option",35),e.k0s()()(),e.j41(35,"div",30)(36,"label",36),e.EFF(37,"In Project"),e.k0s(),e.j41(38,"div",37)(39,"input",38,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.status,a)||(i.employeeViewModel.status=a),e.Njj(a)}),e.k0s()(),e.j41(41,"label",39),e.EFF(42,"Is Active"),e.k0s(),e.j41(43,"div",37)(44,"input",40,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.isActive,a)||(i.employeeViewModel.isActive=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.ChangeIsActive(a))}),e.k0s()()()(),e.j41(46,"div",29)(47,"div",30)(48,"label",31),e.EFF(49,"First Name"),e.k0s(),e.j41(50,"div",32)(51,"input",41,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.FirstName,a)||(i.employeeViewModel.FirstName=a),e.Njj(a)}),e.k0s(),e.DNE(53,la,2,0,"span",42),e.k0s()(),e.j41(54,"div",30)(55,"label",31),e.EFF(56,"Last Name"),e.k0s(),e.j41(57,"div",32)(58,"input",43,4),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.LastName,a)||(i.employeeViewModel.LastName=a),e.Njj(a)}),e.k0s(),e.DNE(60,ca,2,0,"span",42),e.k0s()()(),e.j41(61,"div",29)(62,"div",30)(63,"label",31),e.EFF(64,"Email"),e.k0s(),e.j41(65,"div",32)(66,"input",44,5),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.EmailID,a)||(i.employeeViewModel.EmailID=a),e.Njj(a)}),e.k0s(),e.DNE(68,ha,2,0,"span",42)(69,da,2,0,"span",42),e.k0s()(),e.j41(70,"div",30)(71,"label",31),e.EFF(72,"Contact Number"),e.k0s(),e.j41(73,"div",32)(74,"input",45,6),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.ContactNumber,a)||(i.employeeViewModel.ContactNumber=a),e.Njj(a)}),e.k0s(),e.DNE(76,pa,2,0,"span",42),e.k0s()()(),e.j41(77,"div",29)(78,"div",30)(79,"label",31),e.EFF(80,"Department"),e.k0s(),e.j41(81,"div",32)(82,"select",46),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Department,a)||(i.Department=a),e.Njj(a)}),e.j41(83,"option",34),e.EFF(84,"-- Department --"),e.k0s(),e.DNE(85,ua,2,2,"option",35),e.k0s()()(),e.j41(86,"div",30)(87,"label",31),e.EFF(88,"Designation"),e.k0s(),e.j41(89,"div",32)(90,"select",47),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Designation,a)||(i.Designation=a),e.Njj(a)}),e.j41(91,"option",34),e.EFF(92,"-- Designation --"),e.k0s(),e.DNE(93,ma,2,2,"option",35),e.k0s()()()(),e.j41(94,"div",29)(95,"div",30)(96,"label",36),e.EFF(97,"Core Skill"),e.k0s(),e.j41(98,"div",32)(99,"ng-multiselect-dropdown",48),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.CoreSkillselectedID,a)||(i.CoreSkillselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onCoreSkillSelect(a))}),e.k0s(),e.j41(100,"div"),e.EFF(101),e.k0s()()(),e.j41(102,"div",30)(103,"label",36),e.EFF(104,"Leaving Date"),e.k0s(),e.j41(105,"div",32)(106,"input",49),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.LeavingDate,a)||(i.LeavingDate=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onLeavingDatechange(a))}),e.k0s(),e.DNE(107,ga,2,0,"span",42),e.k0s()()(),e.j41(108,"div",29)(109,"div",30)(110,"label",36),e.EFF(111,"Additional Skill"),e.k0s(),e.j41(112,"div",32)(113,"ng-multiselect-dropdown",50),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AdditionalSkillselectedID,a)||(i.AdditionalSkillselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onAdditionalSkillSelect(a))}),e.k0s(),e.j41(114,"div"),e.EFF(115),e.k0s()()(),e.j41(116,"div",30)(117,"label",36),e.EFF(118,"Reports to"),e.k0s(),e.j41(119,"div",32)(120,"ng-multiselect-dropdown",51),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.ReportsToselectedID,a)||(i.ReportsToselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onReportsToSelect(a))}),e.k0s(),e.j41(121,"div"),e.EFF(122),e.k0s()()()(),e.j41(123,"div",29)(124,"div",30)(125,"label",36),e.EFF(126,"Joining Date"),e.k0s(),e.j41(127,"div",32)(128,"input",52,7),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.JoiningDate,a)||(i.JoiningDate=a),e.Njj(a)}),e.k0s()()(),e.j41(130,"div",30)(131,"label",36),e.EFF(132,"Exp. In Years"),e.k0s(),e.j41(133,"div",32)(134,"input",53,8),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.TotalExperiance,a)||(i.employeeViewModel.TotalExperiance=a),e.Njj(a)}),e.k0s()()()(),e.j41(136,"div",29)(137,"div",30)(138,"label",36),e.EFF(139,"Planning to book"),e.k0s(),e.j41(140,"div",32)(141,"input",54),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.PlanningToBook,a)||(i.PlanningToBook=a),e.Njj(a)}),e.k0s()()(),e.j41(142,"div",30)(143,"label",36),e.EFF(144,"Available date"),e.k0s(),e.j41(145,"div",32)(146,"input",55),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AvailableDate,a)||(i.AvailableDate=a),e.Njj(a)}),e.bIt("bsValueChange",function(a){return e.eBV(o),e.Njj(i.onValueChange(a))}),e.k0s()()()(),e.j41(147,"div",29)(148,"div",30)(149,"label",36),e.EFF(150,"Days from Today"),e.k0s(),e.j41(151,"div",32)(152,"input",56,9),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DaysFromToday,a)||(i.DaysFromToday=a),e.Njj(a)}),e.k0s()()(),e.j41(154,"div",30)(155,"label",36),e.EFF(156,"Project"),e.k0s(),e.j41(157,"div",32)(158,"input",57,10),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.Project,a)||(i.employeeViewModel.Project=a),e.Njj(a)}),e.k0s(),e.j41(160,"ng-multiselect-dropdown",58),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.ProjectselectedID,a)||(i.ProjectselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onProjectSelect(a))}),e.k0s(),e.DNE(161,fa,5,1,"div",59),e.k0s()(),e.j41(162,"div",30)(163,"label",36),e.EFF(164,"Client"),e.k0s(),e.j41(165,"div",60)(166,"input",61),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeViewModel.ClientName,a)||(i.employeeViewModel.ClientName=a),e.Njj(a)}),e.k0s()(),e.j41(167,"button",62),e.bIt("click",function(){return e.eBV(o),e.Njj(i.GetClientDetail())}),e.nrm(168,"i",63),e.k0s()()(),e.j41(169,"div",64)(170,"button",65),e.nrm(171,"i",66),e.EFF(172," Submit "),e.k0s(),e.DNE(173,Aa,1,0,"img",67),e.j41(174,"button",68),e.nrm(175,"i",69),e.EFF(176," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(25),r=e.sdS(52),a=e.sdS(59),d=e.sdS(67),g=e.sdS(75);e.R7$(17),e.Y8G("routerLinkActive",e.lJ4(55,It))("routerLink",e.lJ4(56,ra)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(57,It)),e.R7$(10),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.result.financialYearDropdownModel),e.R7$(5),e.R50("ngModel",i.employeeViewModel.status),e.R7$(5),e.R50("ngModel",i.employeeViewModel.isActive),e.R7$(7),e.R50("ngModel",i.employeeViewModel.FirstName),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid),e.R7$(5),e.R50("ngModel",i.employeeViewModel.LastName),e.R7$(2),e.Y8G("ngIf",o.submitted&&!a.valid),e.R7$(6),e.R50("ngModel",i.employeeViewModel.EmailID),e.R7$(2),e.Y8G("ngIf",o.submitted&&!d.valid&&d.errors&&d.errors.required),e.R7$(),e.Y8G("ngIf",o.submitted&&d.errors&&d.errors.pattern),e.R7$(5),e.R50("ngModel",i.employeeViewModel.ContactNumber),e.R7$(2),e.Y8G("ngIf",o.submitted&&!g.valid),e.R7$(6),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.result.departmentDropdownModel),e.R7$(5),e.R50("ngModel",i.Designation),e.R7$(3),e.Y8G("ngForOf",i.result.designationDropdownModel),e.R7$(6),e.Y8G("placeholder","-- Core Skill --")("data",i.result.coreskillDropdownModel),e.R50("ngModel",i.CoreSkillselectedID),e.Y8G("settings",i.CoreSkilldropdownSettings),e.R7$(2),e.SpI(" ",i.SelectedCoreSkill," "),e.R7$(5),e.R50("ngModel",i.LeavingDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",i.IsActiveError),e.R7$(6),e.Y8G("placeholder","-- Additional Skill --")("data",i.result.additionalskillDropdownModel),e.R50("ngModel",i.AdditionalSkillselectedID),e.Y8G("settings",i.AddtionalSkilldropdownSettings),e.R7$(2),e.SpI(" ",i.SelectedAdditionalSkill," "),e.R7$(5),e.Y8G("placeholder","-- Reports to --")("data",i.result.reportsToDropdownModel),e.R50("ngModel",i.ReportsToselectedID),e.Y8G("settings",i.ReportsTodropdownSettings),e.R7$(2),e.SpI(" ",i.SelectedReportsTo," "),e.R7$(6),e.R50("ngModel",i.JoiningDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(6),e.R50("ngModel",i.employeeViewModel.TotalExperiance),e.R7$(7),e.R50("ngModel",i.PlanningToBook),e.Y8G("bsConfig",i.dpConfig),e.R7$(5),e.R50("ngModel",i.AvailableDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(6),e.R50("ngModel",i.DaysFromToday),e.R7$(6),e.R50("ngModel",i.employeeViewModel.Project),e.R7$(2),e.Y8G("placeholder","-- Project --")("data",i.result.projectDropdownModel),e.R50("ngModel",i.ProjectselectedID),e.Y8G("settings",i.ProjectdropdownSettings),e.R7$(),e.Y8G("ngForOf",i.ProjectselectedID),e.R7$(5),e.R50("ngModel",i.employeeViewModel.ClientName),e.R7$(4),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.qT,c.xH,c.y7,c.me,c.Q0,c.Zm,c.wz,c.BC,c.cb,c.YS,c.tU,c.R_,c.vS,c.cV,k.pc,k.p0,E.dg,w.b],encapsulation:2})}return s})();const _a=s=>({"background-color":s});function ya(s,l){if(1&s&&(e.j41(0,"div",11)(1,"div",12)(2,"div",49),e.nrm(3,"i",50),e.j41(4,"div",51),e.EFF(5),e.k0s()(),e.j41(6,"div",16)(7,"div")(8,"div",17),e.EFF(9),e.k0s(),e.j41(10,"div",18),e.EFF(11,"In"),e.k0s()(),e.j41(12,"div")(13,"div",17),e.EFF(14),e.k0s(),e.j41(15,"div",18),e.EFF(16,"Not In"),e.k0s()()()()()),2&s){const t=l.$implicit;e.R7$(2),e.Y8G("ngStyle",e.eq3(5,_a,t.color)),e.R7$(2),e.FS9("tooltip",t.heading),e.R7$(),e.SpI(" ",t.heading," "),e.R7$(4),e.JRh(t.inProject),e.R7$(5),e.JRh(t.notInProject)}}function Sa(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Da(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function ja(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}let Et=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.employeeService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Employee List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.DesignationList=[],this.CoreSkillList=[],this.AdditionalSkillList=[],this.Designation=0,this.DepartmentList=[],this.Department=0,this.Months=0,this.FinancialYear=0,this.MonthList=[],this.FinancialYearList=[],this.CounterDashboard=!1,this.selectedItems=[],this.dropdownSettings={},this.SelectedCoreSkill=[],this.coreSkillSettings={},this.SelectedAdditionalSkill=[],this.additionalSkillSettings={},this.TotalResourceProjectCount=[],this.ResourceProjectCount=[],this.filterModel=new Te,this.datagrid=i,this.Search="",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="EmployeeID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){this.spinner.show(),this.dropdownSettings={singleSelection:!1,idField:"designationID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.coreSkillSettings={singleSelection:!1,idField:"coreSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.additionalSkillSettings={singleSelection:!1,idField:"additionalSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.month&&(this.Months=+t.queryParams.month),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),null!=t.queryParams.CounterDashboard&&(this.CounterDashboard=!!t.queryParams.CounterDashboard),null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designation","Designation",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalExperiance","Experience",'[{"width": "5%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("reportTo","Report To",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("coreSkill","Core Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("additionalSkill","Additional Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("availableDate","Available Date",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("productivityLevel","Productivity",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("daysFromToday","Days From Today",'[{"width": "10%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("clientName","Client",'[{"width": "10%" , "hyperLink": true,"disableSorting": true}]')),this.columns.push(new h("isActive","Active",'[{"width": "3%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Active","isPermissionIcon":true}]')),this.columns.push(new h("status","Action",this.currentUser.designationID==N.BDM?'[{"width": "15%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Edit","isEdit":true,"isSales":true}]':'[{"width": "15%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Edit","isEdit":true ,"isSales":false}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showEmployeeForm(){this.router.navigate(["/Master/AddEmployee"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getEmployeeList()},t),this.spinner.hide()}DeleteEmployee(t){this.spinner.show(),this.employeeService.deleteEmployee(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getEmployeeList(){this.spinner.show();let t=new Te;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Department=+this.Department,t.FinancialYear=this.FinancialYear,t.Month=this.Months,t.IsActive=this.IsActive,t.InActive=this.InActive,t.InProject=this.InProject,t.NotInProject=this.NotInProject,t.companyID=this.currentUser.companyID,t.CounterDashboard=this.CounterDashboard;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let r=JSON.parse(n.queryParams.filterModel);""!=r.Designation&&null!=r.Designation&&(t.Designation=r.Designation),""!=r.CoreSkill&&null!=r.CoreSkill&&(t.CoreSkill=r.CoreSkill),""!=r.AdditionalSkill&&null!=r.AdditionalSkill&&(t.AdditionalSkill=r.AdditionalSkill)}else t.Designation=this.selectedItems.map(r=>r.designationID).join(","),t.CoreSkill=this.SelectedCoreSkill.map(r=>r.coreSkillID).join(","),t.AdditionalSkill=this.SelectedAdditionalSkill.map(r=>r.additionalSkillID).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Employee/GetEmployeeList",t,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Employee deleted successfully.","Delete")):2==t?this.toastyService.warning("Employee associated with TimeSheet.","Warning"):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}.`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.Months=t.month,this.MonthList=t.monthList,this.FinancialYearList=t.financialYearDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.DesignationList=t.designationDropdownModel,this.CoreSkillList=t.coreskillDropdownModel,this.AdditionalSkillList=t.additionalskillDropdownModel,this.employeeListViewModel=t.employeeListModel,this.TotalResourceProjectCount=t.resourceProjectCountModel.employeeProjectModel,this.ResourceProjectCount=t.resourceProjectCountModel.totalInOutProjectResource;let i=[];1==this.CounterDashboard&&(this.DesignationList.forEach(o=>{1==o.counterDashboard&&i.push(o)}),this.selectedItems=i,this.CounterDashboard=!1),this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemSelectedProjectTrackReport"==n.EventType?this.selectedProjectReport(n.ItemSelected):"ItemSelectedClientReport"==n.EventType?this.GetSelectedClientReport(n.ItemSelected):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRowForEditDelete(t){let i=this.employeeListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this employee?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteEmployee(i.employeeID)}},cancel:function(){}}})}selectedRow(t){let i=this.employeeListViewModel[t];return this.router.navigate(["/Master/Employee"],{queryParams:{id:i.employeeID,name:i.name,FinancialYear:this.FinancialYear,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.spinner.show(),this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.Department=0,this.Designation=0,this.Months=0,this.FinancialYear=0,this.sortExpression="EmployeeID",this.selectedItems=[],this.SelectedCoreSkill=[],this.SelectedAdditionalSkill=[],this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.CounterDashboard=!1,this.clearFilterUrl(),this.spinner.hide(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDesignation(t){0!=this.autoFilter&&""!=t&&(this.Designation=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedProjectReport(t){let i=this.employeeListViewModel[t];return this.router.navigate(["/Master/ResourceProjects"],{queryParams:{id:i.employeeID,name:i.name,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowRedirect(t,n){let r=this.employeeListViewModel[t];if("Client"==n)return this.router.navigate(["/Master/ClientWiseProject"],{queryParams:{id:r.employeeID,name:r.name,isEdit:!1,FinancialYear:this.FinancialYear,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}GetSelectedClientReport(t){let i=this.employeeListViewModel[t];return this.router.navigate(["/Master/OldClientWiseProject"],{queryParams:{id:i.employeeID,FinancialYear:this.FinancialYear,Month:this.Months,name:i.name,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}getCookiesFilterData(t){if(""!=t&&null!=t){if(t=JSON.parse(t),this.Search=t.Search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.Department=t.Department,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.IsActive=t.IsActive,this.InActive=t.InActive,this.InProject=t.InProject,this.NotInProject=t.NotInProject,this.currentUser.companyID=t.companyID,this.CounterDashboard=t.CounterDashboard,""!=t.Designation&&null!=t.Designation){let n=[];t.Designation.split(",").forEach(o=>{n.push(this.DesignationList.find(r=>r.designationID===parseInt(o)))}),this.selectedItems=n}if(""!=t.CoreSkill&&null!=t.CoreSkill){let n=[];t.CoreSkill.split(",").forEach(o=>{n.push(this.CoreSkillList.find(r=>r.coreSkillID===parseInt(o)))}),this.SelectedCoreSkill=n}if(""!=t.AdditionalSkill&&null!=t.AdditionalSkill){let n=[];t.AdditionalSkill.split(",").forEach(o=>{n.push(this.AdditionalSkillList.find(r=>r.additionalSkillID===parseInt(o)))}),this.SelectedAdditionalSkill=n}}}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(J),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-employeelist"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([J])],decls:95,vars:34,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-sm-6","col-lg-2"],[1,"brand-card"],[1,"brand-card-header","bg-facebook"],[1,"fa","fa-check-circle"],["tooltip","Total","placement","top",1,"text-value-sm","p-2","text-white"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],["class","col-sm-6 col-lg-2",4,"ngFor","ngForOf"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","selectedCoreSkill",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","selectedAdditionalSkill",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["type","checkbox","value","",2,"margin-left","8px",3,"ngModelChange","ngModel"],[1,"col-md-6","paddingbottom"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],["tooltip","In Project","placement","bottom",1,"div-small"],[1,"inProject"],[1,"div-smalltext"],["tooltip","Not In Project","placement","bottom",1,"div-small"],[1,"notinProject"],[1,"col-md-6"],[1,"checkbox","pull-right"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["tooltip","if check-box checked then display all columns","placement","bottom"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[1,"brand-card-header",3,"ngStyle"],[1,"fa","fa-group"],["placement","top",1,"text-value-sm","p-2","text-white",3,"tooltip"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resources "),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.showEmployeeForm()}),e.nrm(10,"i",9),e.k0s()()(),e.j41(11,"div",10)(12,"div",1)(13,"div",11)(14,"div",12)(15,"div",13),e.nrm(16,"i",14),e.j41(17,"div",15),e.EFF(18," Total "),e.k0s()(),e.j41(19,"div",16)(20,"div")(21,"div",17),e.EFF(22),e.k0s(),e.j41(23,"div",18),e.EFF(24,"In"),e.k0s()(),e.j41(25,"div")(26,"div",17),e.EFF(27),e.k0s(),e.j41(28,"div",18),e.EFF(29,"Not In"),e.k0s()()()()(),e.DNE(30,ya,17,7,"div",19),e.k0s(),e.j41(31,"div",1)(32,"div",20)(33,"input",21),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(34,"div",20)(35,"select",22),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(36,Sa,2,2,"option",23),e.k0s()(),e.j41(37,"div",20)(38,"select",24),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(39,"option",25),e.EFF(40,"-- Month --"),e.k0s(),e.DNE(41,Da,2,2,"option",23),e.k0s()(),e.j41(42,"div",20)(43,"select",26),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(44,"option",25),e.EFF(45,"-- Department --"),e.k0s(),e.DNE(46,ja,2,2,"option",23),e.k0s()(),e.j41(47,"div",20)(48,"ng-multiselect-dropdown",27),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(49,"div",20)(50,"ng-multiselect-dropdown",28),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectedCoreSkill,r)||(i.SelectedCoreSkill=r),r}),e.k0s()(),e.j41(51,"div",20)(52,"ng-multiselect-dropdown",29),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectedAdditionalSkill,r)||(i.SelectedAdditionalSkill=r),r}),e.k0s()(),e.j41(53,"div",20)(54,"label")(55,"input",30),e.mxI("ngModelChange",function(r){return e.DH7(i.InProject,r)||(i.InProject=r),r}),e.k0s(),e.EFF(56," In Project "),e.k0s(),e.j41(57,"label")(58,"input",31),e.mxI("ngModelChange",function(r){return e.DH7(i.NotInProject,r)||(i.NotInProject=r),r}),e.k0s(),e.EFF(59," Not In Project "),e.k0s()(),e.j41(60,"div",32)(61,"label")(62,"input",30),e.mxI("ngModelChange",function(r){return e.DH7(i.IsActive,r)||(i.IsActive=r),r}),e.k0s(),e.EFF(63," Active "),e.k0s(),e.j41(64,"label")(65,"input",31),e.mxI("ngModelChange",function(r){return e.DH7(i.InActive,r)||(i.InActive=r),r}),e.k0s(),e.EFF(66," In Active "),e.k0s(),e.j41(67,"button",33),e.bIt("click",function(){return i.search()}),e.nrm(68,"i",34),e.k0s(),e.j41(69,"button",35),e.bIt("click",function(){return i.reset()}),e.nrm(70,"i",36),e.k0s()()(),e.j41(71,"div",1)(72,"div",32)(73,"div")(74,"div",37),e.nrm(75,"div",38),e.j41(76,"div",39),e.EFF(77,"In Project"),e.k0s()()(),e.j41(78,"div")(79,"div",40),e.nrm(80,"div",41),e.j41(81,"div",39),e.EFF(82,"Not In Project"),e.k0s()()()(),e.j41(83,"div",42)(84,"div",43)(85,"label",44)(86,"input",30),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(87," Auto Filter "),e.k0s(),e.j41(88,"label",45)(89,"input",30),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(90," Show Column "),e.k0s()()()(),e.j41(91,"div",1)(92,"div",46)(93,"datagrid",47),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(94,"ngx-spinner",48)),2&n&&(e.R7$(22),e.SpI(" ",i.TotalResourceProjectCount.inProject," "),e.R7$(5),e.SpI(" ",i.TotalResourceProjectCount.notInProject," "),e.R7$(3),e.Y8G("ngForOf",i.ResourceProjectCount),e.R7$(3),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.Y8G("placeholder","-- Designation --")("data",i.DesignationList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Core Skill --")("data",i.CoreSkillList),e.R50("ngModel",i.SelectedCoreSkill),e.Y8G("settings",i.coreSkillSettings),e.R7$(2),e.Y8G("placeholder","-- Addtional Skill --")("data",i.AdditionalSkillList),e.R50("ngModel",i.SelectedAdditionalSkill),e.Y8G("settings",i.additionalSkillSettings),e.R7$(3),e.R50("ngModel",i.InProject),e.R7$(3),e.R50("ngModel",i.NotInProject),e.R7$(4),e.R50("ngModel",i.IsActive),e.R7$(3),e.R50("ngModel",i.InActive),e.R7$(21),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(4),e.Y8G("rows",i.employeeListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.B3,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_],encapsulation:2})}return s})();function ba(s,l){if(1&s&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Ma(s,l){if(1&s&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function Ca(s,l){if(1&s&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.sourceID),e.R7$(),e.SpI(" ",t.name," ")}}function ka(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",10)(1,"select",33),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Source,i)||(o.Source=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.SearchSource(i))}),e.j41(2,"option",13),e.EFF(3,"-- Source --"),e.k0s(),e.DNE(4,Ca,2,2,"option",14),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.R50("ngModel",t.Source),e.R7$(3),e.Y8G("ngForOf",t.SourceList)}}function Ia(s,l){if(1&s&&(e.j41(0,"div")(1,"div",34),e.nrm(2,"div",35),e.j41(3,"div",36),e.EFF(4),e.k0s()()()),2&s){const t=l.$implicit,n=e.XpG();e.R7$(),e.FS9("tooltip",t.name),e.R7$(),e.Y8G("ngStyle",n.setMyStyles(t.color)),e.R7$(2),e.JRh(t.name)}}let Ft=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.projectService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Project List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.TechnologyList=[],this.Technology=0,this.ProjectTypeList=[],this.ProjectType=0,this.SourceList=[],this.Source=0,this.ProjectStatusList=[],this.ProjectStatus=0,this.ProjectID=0,this.selectedItems=[],this.dropdownSettings={},this.datagrid=i,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="ProjectHistoryID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){this.spinner.show(),this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);this.ProjectID=+t.queryParams.id,this.filterModel=t.queryParams.filterModel,this.columns.push(new h("name","Name",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("client","Client",'[{"width": "8%" , "hyperLink": true,"disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),("Sales"==this.currentUser.designation||"CEO"==this.currentUser.designation)&&this.columns.push(new h("source","Source",'[{"width": "7%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("dateOfConfirmation","Confirmation Date",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("pmEmployee","PM/PL",'[{"width": "8%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("tlEmployee","TL/Sr.Dev",'[{"width": "10%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("developerEmployee","Developer",'[{"width": "10%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("designerEmployee","Designer",'[{"width": "10%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("qaEmployee","QA",'[{"width": "8%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("salesEmployee","Sales",'[{"width": "12%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("historyDate","History Date",'[{"width": "25%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("color","Action",'[{"width": "10%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Edit","isEdit":false,"history":true}]')),this.executeSearch(),this.spinner.hide()}showProjectForm(){this.router.navigate(["/Master/Project"])}clearInputdata(){this.router.navigate(["/Master/ProjectList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getProjectList()},t),this.spinner.hide()}DeleteProject(t,n){this.spinner.show(),this.projectService.deleteProject(t,n,this.currentUser.employeeID).subscribe(i=>{this.deleteOnSuccess(i),this.spinner.hide()},i=>{this.deleteOnError(i),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getProjectList(){this.spinner.show();let t=new Yn;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Technology=this.Technology,t.ProjectType=this.ProjectType,t.Source=this.Source,t.ProjectStatus=this.selectedItems.map(o=>o.projectStatusID).join(","),t.CompanyID=this.currentUser.companyID,t.projectID=this.ProjectID;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Project/GetProjectHistoryList",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Project deleted successfully.","Delete")):2==t?this.toastyService.warning("Project associated with TimeSheet.","Warning"):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.TechnologyList=t.technologyDropdownModel,this.ProjectTypeList=t.projectTypeDropdownModel,this.SourceList=t.sourceDropdownModel,this.projectListViewModel=t.projectHistoryListModel,this.ProjectStatusList=t.projectStatusModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRowForEditDelete(t){let i=this.projectListViewModel[t];var o=this;"CEO"!=this.currentUser.designation?jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this project?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteProject(i.projectID,!1)}},cancel:function(){}}}):jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this timesheet?",type:"blue",buttons:{"Keep Delete":function(){o.DeleteProject(i.projectID,!0)},ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteProject(i.projectID,!1)}},cancel:function(){}}})}selectedRow(t){return this.router.navigate(["/Master/ViewProjectHistory"],{queryParams:{id:this.projectListViewModel[t].projectHistoryID},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.Source=0,this.Technology=0,this.ProjectType=0,this.ProjectStatus=0,this.selectedItems=[],this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchSource(t){0!=this.autoFilter&&""!=t&&(this.Source=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}CheckBDEAccess(){return!("Sales"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation)}setMyStyles(t){return{height:"15px",width:"15px","margin-top":"0px",float:"left","background-color":t}}SearchProjectStatus(t){0!=this.autoFilter&&""!=t&&(this.ProjectStatus=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}selectedRowRedirect(t,n){let i=n,r=this.projectListViewModel[t];return"Client"==i?this.router.navigate(["/Master/ClientList"],{queryParams:{search:r.client.split(" ")[0]},skipLocationChange:!0}):"PM/PL"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.pmEmployee.split(" ")[0]},skipLocationChange:!0}):"TL/Sr.Dev"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.tlEmployee.split(" ")[0]},skipLocationChange:!0}):"Developer"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.developerEmployee.split(" ")[0]},skipLocationChange:!0}):"QA"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.qaEmployee.split(" ")[0]},skipLocationChange:!0}):"Designer"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.designerEmployee.split(" ")[0]},skipLocationChange:!0}):"Sales"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.salesEmployee.split(" ")[0]},skipLocationChange:!0}):void 0}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(R),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([R])],decls:49,vars:18,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-2","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-2 paddingbottom",4,"ngIf"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-6","paddingbottom"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"checkbox","pull-right"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus"],["size","medium",3,"type"],[3,"value"],["name","Source","id","Source",1,"form-control",3,"ngModelChange","ngModel"],["placement","bottom",2,"font-size","12px","margin-right","8px","float","left",3,"tooltip"],[3,"ngStyle"],[2,"float","none","padding-left","17px"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div"),e.nrm(7,"i",6),e.EFF(8," Project History "),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(10,"i",8),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",9)(13,"div",1)(14,"div",10)(15,"input",11),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(16,"div",10)(17,"select",12),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(18,"option",13),e.EFF(19,"-- Project Type --"),e.k0s(),e.DNE(20,ba,2,2,"option",14),e.k0s()(),e.j41(21,"div",10)(22,"select",15),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(23,"option",13),e.EFF(24,"-- Technology --"),e.k0s(),e.DNE(25,Ma,2,2,"option",14),e.k0s()(),e.DNE(26,ka,5,2,"div",16),e.j41(27,"div",10)(28,"ng-multiselect-dropdown",17),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(29,"div",10)(30,"button",18),e.bIt("click",function(){return i.search()}),e.nrm(31,"i",19),e.k0s(),e.j41(32,"button",20),e.bIt("click",function(){return i.reset()}),e.nrm(33,"i",21),e.k0s()()(),e.j41(34,"div",1)(35,"div",22),e.DNE(36,Ia,5,3,"div",23),e.k0s(),e.j41(37,"div",24)(38,"div",25)(39,"label",26)(40,"input",27),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(41," Auto Filter "),e.k0s(),e.j41(42,"label",28)(43,"input",27),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(44," Show Column "),e.k0s()()()(),e.j41(45,"div",1)(46,"div",29)(47,"datagrid",30),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(48,"ngx-spinner",31)),2&n&&(e.R7$(15),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.TechnologyList),e.R7$(),e.Y8G("ngIf",i.CheckBDEAccess()),e.R7$(2),e.Y8G("placeholder","-- Project Status --")("data",i.ProjectStatusList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(8),e.Y8G("ngForOf",i.ProjectStatusList),e.R7$(4),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(4),e.Y8G("rows",i.projectListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,u.B3,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_],encapsulation:2})}return s})();function va(s,l){if(1&s&&(e.j41(0,"div",14)(1,"div",15)(2,"label",18),e.EFF(3,"Source"),e.k0s(),e.j41(4,"div",17),e.EFF(5),e.k0s()(),e.j41(6,"div",15)(7,"label",18),e.EFF(8,"Sales"),e.k0s(),e.j41(9,"div",17),e.EFF(10),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.source," "),e.R7$(5),e.SpI(" ",t.result.salesEmployee," ")}}function Ea(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",25)(1,"span",26),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.downloadBase64File(i))}),e.EFF(2),e.k0s()()}if(2&s){const t=l.$implicit;e.R7$(2),e.SpI(" ",t.fileName," ")}}function Fa(s,l){if(1&s&&(e.j41(0,"div",14)(1,"div",15)(2,"label",18),e.EFF(3,"PM/PL"),e.k0s(),e.j41(4,"div",17),e.EFF(5),e.k0s()(),e.j41(6,"div",15)(7,"label",18),e.EFF(8,"TL/Sr.Developer"),e.k0s(),e.j41(9,"div",17),e.EFF(10),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.pmEmployee," "),e.R7$(5),e.SpI(" ",t.result.tlEmployee," ")}}function Ta(s,l){if(1&s&&(e.j41(0,"div",14)(1,"div",15)(2,"label",18),e.EFF(3,"Develpoer"),e.k0s(),e.j41(4,"div",17),e.EFF(5),e.k0s()(),e.j41(6,"div",15)(7,"label",18),e.EFF(8,"Designer"),e.k0s(),e.j41(9,"div",17),e.EFF(10),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.developerEmployee," "),e.R7$(5),e.SpI(" ",t.result.designerEmployee," ")}}function wa(s,l){if(1&s&&(e.j41(0,"div",14)(1,"div",15)(2,"label",18),e.EFF(3,"QA"),e.k0s(),e.j41(4,"div",17),e.EFF(5),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.qaEmployee," ")}}let Tt=(()=>{class s{constructor(t,n,i,o,r,a){this.projectService=t,this.elRef=n,this.route=i,this.router=o,this.datePipe=r,this.cookieService=a,this.ProjectID=0,this.loading=!1,this.ProjectType=0,this.Client=0,this.Source=0,this.Technology=0,this.PM=0,this.TL=0,this.Develpoer=[],this.DeveloperID=[],this.Designer=0,this.QA=0,this.Sales=0,this.result=[],this.Months=[],this.selectedItems=[],this.dropdownSettings={},this.ProjectStatus=0,this.EstimationDoument=[],this.dpConfig=new k.iP,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);this.ProjectID=+t.queryParams.id,this.ProjectID>0&&this.getProjectByID(this.ProjectID)}getProjectByID(t){this.projectService.GetViewProjectByID(t).subscribe(n=>{""!=n&&(this.ProjectID=n.viewProjectModel.projectID,this.result=n.viewProjectModel,this.EstimationDoument=n.timsheetDocument)},n=>{console.log(n)})}clearInputdata(){this.router.navigate(["/Master/ProjectList"])}CheckBDEAccess(){return!("Sales"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation)}CheckExecutionAccess(){return"Sales"!=this.currentUser.designation}onItemSelect(t){this.SelectedDeveloper=this.selectedItems.map(n=>n.name).join(", ")}downloadBase64File(t){var n;n=`${t.FileUrl}`;const i=document.createElement("a");document.body.appendChild(i),i.href=n,i.target="_self",i.download=t.FileName,i.click()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],features:[e.Jv_([u.vh,R])],decls:86,vars:14,consts:[["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],["action","","method","post","novalidate","",1,"form-horizontal"],[1,"card-header"],[1,"caption"],[1,"form-group","row"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6","form-txt"],[1,"col-md-4","col-form-label"],["class","form-group row",4,"ngIf"],[1,"col","form-txt"],["class","kpi",4,"ngFor","ngForOf"],[1,"card-footer"],["type","reset",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-ban"],[1,"kpi"],[3,"click"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div"),e.nrm(7,"i",7),e.EFF(8," Project "),e.k0s(),e.j41(9,"button",8),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",9),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",10)(13,"form",11,0)(15,"div",12)(16,"div",13),e.EFF(17," Project Deatils "),e.k0s()(),e.j41(18,"div",10)(19,"div",14)(20,"div",15)(21,"label",16),e.EFF(22,"Name"),e.k0s(),e.j41(23,"div",17),e.EFF(24),e.k0s()(),e.j41(25,"div",15)(26,"label",18),e.EFF(27,"Client"),e.k0s(),e.j41(28,"div",17),e.EFF(29),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"label",18),e.EFF(33,"Technology"),e.k0s(),e.j41(34,"div",17),e.EFF(35),e.k0s()(),e.j41(36,"div",15)(37,"label",18),e.EFF(38,"Project Type"),e.k0s(),e.j41(39,"div",17),e.EFF(40),e.k0s()()(),e.DNE(41,va,11,2,"div",19),e.j41(42,"div",14)(43,"div",15)(44,"label",18),e.EFF(45,"Date of Confirmation"),e.k0s(),e.j41(46,"div",17),e.EFF(47),e.k0s()(),e.j41(48,"div",15)(49,"label",18),e.EFF(50,"Project Status"),e.k0s(),e.j41(51,"div",17),e.EFF(52),e.k0s()()(),e.j41(53,"div",14)(54,"div",15)(55,"label",18),e.EFF(56,"Start Date"),e.k0s(),e.j41(57,"div",17),e.EFF(58),e.k0s()(),e.j41(59,"div",15)(60,"label",18),e.EFF(61,"End Date"),e.k0s(),e.j41(62,"div",17),e.EFF(63),e.k0s()()()(),e.j41(64,"div",12)(65,"div",13),e.EFF(66," Estimation & Resource Deatils "),e.k0s()(),e.j41(67,"div",10)(68,"div",14)(69,"div",15)(70,"label",18),e.EFF(71,"Teams URL"),e.k0s(),e.j41(72,"div",17),e.EFF(73),e.k0s()(),e.j41(74,"div",15)(75,"label",18),e.EFF(76,"Timesheet Document"),e.k0s(),e.j41(77,"div",20),e.DNE(78,Ea,3,1,"div",21),e.k0s()()(),e.DNE(79,Fa,11,2,"div",19)(80,Ta,11,2,"div",19)(81,wa,6,1,"div",19),e.k0s(),e.j41(82,"div",22)(83,"button",23),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(84,"i",24),e.EFF(85," Back to List "),e.k0s()()()()()()()()}2&n&&(e.R7$(24),e.SpI(" ",i.result.name," "),e.R7$(5),e.SpI(" ",i.result.client," "),e.R7$(6),e.SpI(" ",i.result.technology," "),e.R7$(5),e.SpI(" ",i.result.projectType," "),e.R7$(),e.Y8G("ngIf",i.CheckBDEAccess()),e.R7$(6),e.SpI(" ",i.result.dateOfConfirmation," "),e.R7$(5),e.SpI(" ",i.result.projectStatus," "),e.R7$(6),e.SpI(" ",i.result.startDate," "),e.R7$(5),e.SpI(" ",i.result.endDate," "),e.R7$(10),e.SpI(" ",i.result.teamsURL," "),e.R7$(5),e.Y8G("ngForOf",i.EstimationDoument),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()))},dependencies:[u.Sq,u.bT,c.qT,c.cb,c.cV],encapsulation:2})}return s})();var Pa=F(3380);const wt=(s=[],l)=>{for(const t of s){const n=t.url===l?t:wt(t.children,l);if(n)return n}};let M=(()=>{class s{constructor(t,n){this.router=t,this.cookieService=n,this.roleEnum=Ce}canActivate(t,n){if(this.cookieService.check("currentUser")){if(this.currentUser=JSON.parse(this.cookieService.get("currentUser")),this.currentUser){let i=n.url.split("/");this.roleEnum.User==this.currentUser.roleID&&!wt(Me,"/"+i[1])&&"ChangePassword"!=i[2]&&this.router.navigate(["/login"])}return!0}return this.router.navigate(["/login"],{queryParams:{returnUrl:n.url}}),!1}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(f.Ix),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})(),Ra=(()=>{class s{constructor(t){this.router=t}ngOnInit(){}BackToHome(){this.router.navigate(["/SmartDesk/Dashboard"])}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(f.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-access-denied"]],decls:14,vars:0,consts:[[1,"app","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"clearfix"],[1,"float-left","display-3","mr-4"],[1,"pt-3"],[1,"text-muted"],[1,"input-prepend","input-group"],["type","button",1,"btn","btn-info",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e.EFF(6,"401"),e.k0s(),e.j41(7,"h4",6),e.EFF(8,"Access Denied"),e.k0s(),e.j41(9,"p",7),e.EFF(10,"You can not access this page."),e.k0s()(),e.j41(11,"div",8)(12,"button",9),e.bIt("click",function(){return i.BackToHome()}),e.EFF(13,"Back to home"),e.k0s()()()()()())},encapsulation:2})}return s})(),se=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getProjectProjectType(){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetProjectProjectType?CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(t=>t))}getSalesByID(t){return this.http.get(p.apiUrl+"api/Sales/GetSalesByID?SalesID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}saveSales(t,n){const i=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Sales/SaveUpdateSales?EmployeeID="+n,i,{headers:this.headers}).pipe((0,j.T)(o=>o))}deleteSales(t,n){return this.http.get(p.apiUrl+"/api/Sales/DeleteSales?SalesID="+t+"&EmployeeID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}getProjectDetailsByID(t){return this.http.get(p.apiUrl+"api/MonthlyTimeSheet/GetProjectDetailsByID?ProjectID="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}getProjectTotalHours(t,n,i){return this.http.get(p.apiUrl+"api/Sales/GetProjectTotalHours?ProjectID="+t+"&Month="+n+"&FinancialYear="+i,{headers:this.headers}).pipe((0,j.T)(o=>o))}CheckSalesExists(t,n,i,o){return this.http.get(p.apiUrl+"api/Sales/CheckSalesExists?ProjectID="+t+"&FinancialYearID="+n+"&Months="+i+"&MonthlySalesID="+o+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(r=>r))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();const xe=s=>({"has-error":s}),Ga=s=>({"error-control":s});function Ya(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Ha(s,l){1&s&&(e.j41(0,"div",48),e.EFF(1,"Financial Year is required"),e.k0s())}function Na(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function La(s,l){1&s&&(e.j41(0,"div",48),e.EFF(1,"Month is required"),e.k0s())}function Ba(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectID),e.R7$(),e.SpI(" ",t.name," ")}}function Ua(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"select",49),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Project,i)||(o.Project=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.onProjectChange(i))}),e.j41(2,"option",22),e.EFF(3,"-- Project --"),e.k0s(),e.DNE(4,Ba,2,2,"option",23),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.R50("ngModel",t.Project),e.R7$(3),e.Y8G("ngForOf",t.result.projectDropdownModel)}}function Va(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectID),e.R7$(),e.SpI(" ",t.name," ")}}function xa(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"select",50),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Project,i)||(o.Project=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.onProjectChange(i))}),e.j41(2,"option",22),e.EFF(3,"-- Project --"),e.k0s(),e.DNE(4,Va,2,2,"option",23),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.R50("ngModel",t.Project),e.R7$(3),e.Y8G("ngForOf",t.result.projectDropdownModel)}}function Qa(s,l){1&s&&(e.j41(0,"div",48),e.EFF(1,"Project is required"),e.k0s())}let Oa=(()=>{class s{constructor(t,n,i,o,r,a){this.salesService=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.toastyService=a,this.salesViewModel={monthlySalesID:0,effectiveRate:0,financialYear:"",month:"",project:"",projectHours:0,receivedAmount:0,remark:"",invoiceNo:"",netBilledAmount:0},this.Project=[],this.FinancialYear=[],this.SalesID=0,this.result=[],this.Months=[],this.projectdropdownControl=!0,this.Disabled=!0,this.ProjectClient="",this.ProjectType="",this.ProjectTechnology="",this.ProjectSalesPerson="",this.ProjectSource="",this.ProjectConfirmationDate="",this.ActualProjectHours=0,this.isClassVisible=!1,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){"BDM"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation&&this.router.navigate(["/SmartDesk/AccessDenied"]);let t=this.router.parseUrl(this.router.url);this.SalesID=+t.queryParams.id,this.filterModel=t.queryParams.filterModel,this.SalesID>0?this.getSalesByID(this.SalesID):this.getProjectProjectType()}getProjectProjectType(){this.salesService.getProjectProjectType().subscribe(t=>{""!=t&&(this.Months=t.month,this.FinancialYear=t.financialYear,this.result=t)},t=>{console.log(t)})}getSalesByID(t){this.salesService.getSalesByID(t).subscribe(n=>{""!=n&&(this.Months=[],this.FinancialYear=[],this.Project=n.salesViewModel.project,this.FinancialYear=n.salesViewModel.financialYear,this.Months=n.salesViewModel.month,this.result=n,this.onProjectChange(n.salesViewModel.project),this.salesViewModel=n.salesViewModel)},n=>{console.log(n)})}onProjectChange(t){this.salesService.getProjectDetailsByID(t).subscribe(n=>{if(""!=n){this.ProjectClient=n.client,this.ProjectTechnology=n.technology,this.ProjectType=n.projectType,this.ProjectSalesPerson=n.salesPerson,this.ProjectSource=n.projectSource,this.ProjectConfirmationDate=n.dateOfConfirmation;let i=this.router.parseUrl(this.router.url);this.SalesID=+i.queryParams.id}},n=>{console.log(n),this.toastyService.warning("Something error.","Get Project Details")}),this.salesService.getProjectTotalHours(t,this.Months,this.FinancialYear).subscribe(n=>{""!=n&&(this.ActualProjectHours=n.totalHours)},n=>{this.toastyService.warning("Something error.","Get Project Details")}),this.CheckSalesExists()}EnableFinancialYear(){this.Disabled=!1}ConvertToFloat(t){return parseFloat(t)}ConvertToInt(t){return parseInt(t)}NetBilledAmount(){let t=0;return t=this.ConvertToFloat(this.salesViewModel.netBilledAmount)/this.ConvertToFloat(this.salesViewModel.projectHours),isNaN(t)&&(t=0),t}CheckHours(t){if(this.ActualProjectHours==this.ConvertToFloat(t)){this.isClassVisible=!1;let n=0;return n=this.ConvertToFloat(this.salesViewModel.effectiveRate)*this.ConvertToFloat(this.salesViewModel.projectHours)}this.isClassVisible=!0,this.toastyService.warning("Project Hours and Actual hours must be same.","Project Hours")}PendingAmount(){return this.ConvertToFloat(this.salesViewModel.netBilledAmount)-this.ConvertToFloat(this.salesViewModel.receivedAmount)}clearInputdata(){"#/SmartDesk/SalesList"==window.location.hash?this.router.navigate(["/SmartDesk/SalesList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0}):this.router.navigate(["/SmartDesk/MonthlySalesList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}saveSales(t=""){this.currentUser?(isNaN(this.SalesID)&&this.route.params.subscribe(i=>{this.SalesID=+i.id}),this.SalesID>0&&(this.salesViewModel.monthlySalesID=this.SalesID),this.SaveUpdateSales()):this.router.navigate(["/login"])}SaveUpdateSales(){this.salesViewModel.project=this.Project,this.salesViewModel.financialYear=this.FinancialYear,this.salesViewModel.month=this.Months,this.isClassVisible=this.ActualProjectHours!=this.ConvertToFloat(this.salesViewModel.projectHours),this.salesService.CheckSalesExists(this.Project,this.FinancialYear,this.Months,this.SalesID).subscribe(t=>{0==t?this.salesService.saveSales(this.salesViewModel,this.currentUser.employeeID).subscribe(n=>{n>0?(this.route.params.subscribe(o=>{"#/SmartDesk/MonthlySalesList"==window.location.hash?this.router.navigate(["/SmartDesk/MonthlySalesList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0}):this.router.navigate(["/SmartDesk/SalesList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}),this.salesViewModel.monthlySalesID>0?this.toastyService.success("Sales update successfully.","Update Sales"):this.toastyService.success("Sales save successfully.","Save Sales")):this.toastyService.warning("Something error.","Sales")},n=>{console.log(n),this.toastyService.warning("Something error.","Sales")}):this.toastyService.warning("Sales already exists for this project.","Check Sales Exists")},t=>{console.log(t),this.toastyService.error("Something error.","Check Sales Exists")})}CheckSalesExists(){this.Project>0&&(this.salesService.getProjectTotalHours(this.Project,this.Months,this.FinancialYear).subscribe(t=>{""!=t&&(this.ActualProjectHours=t.totalHours)},t=>{this.toastyService.warning("Something error.","Get Project Details")}),this.salesService.CheckSalesExists(this.Project,this.FinancialYear,this.Months,this.SalesID).subscribe(t=>{1==t&&this.toastyService.warning("Sales already exists for this project.","Check Sales Exists")},t=>{console.log(t),this.toastyService.error("Something error.","Check Sales Exists")}))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(se),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-sales"]],features:[e.Jv_([se])],decls:131,vars:38,consts:[["f","ngForm"],["netBilledAmount","ngModel"],["ProjectHours","ngModel"],["QAHours","ngModel"],["invoiceNo","ngModel"],["Remark","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],["name","form","novalidate","",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-3","col-form-label","required"],[1,"col-md-6"],["name","FinancialYear","id","FinancialYear","required","",1,"form-control",2,"width","70%","display","inline-block",3,"ngModelChange","ngModel","disabled"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fa","fa-pencil",2,"margin-left","3%",3,"click"],["class","error",4,"ngIf"],[1,"col-md-4"],["name","Months","id","Months","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12","table-responsive"],[1,"table","table-responsive-sm","table-striped","table-center"],[1,"required"],[1,"",3,"ngClass"],[4,"ngIf"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","netBilledAmount",1,"form-control",3,"ngModelChange","ngModel"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","ProjectHours",1,"form-control",3,"ngModelChange","focusout","ngModel","ngClass"],["OnlyNumber","true","DecimalPlaces","2","minValue","1.00","maxValue","999999999.00","name","ReceivedAmount","name","ReceivedAmount",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","maxlength","50","name","invoiceNo",1,"form-control",3,"ngModelChange","ngModel"],["rows","3","maxlength","500","name","Remark",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer"],["type","submit",1,"btn","btn-sm","btn-primary"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],["type","reset",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[3,"value"],[1,"error"],["name","Project","id","Project","required","","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["name","Project","id","Project","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"div"),e.nrm(7,"i",12),e.EFF(8," Sales "),e.k0s(),e.j41(9,"button",13),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",14),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",15)(13,"form",16,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(14);return e.Njj(a.form.valid&&i.saveSales(a))}),e.j41(15,"div",17)(16,"div",18)(17,"label",19),e.EFF(18,"Financial Year"),e.k0s(),e.j41(19,"div",20)(20,"select",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.CheckSalesExists())}),e.j41(21,"option",22),e.EFF(22,"-- Financial Year --"),e.k0s(),e.DNE(23,Ya,2,2,"option",23),e.k0s(),e.j41(24,"i",24),e.bIt("click",function(){return e.eBV(o),e.Njj(i.EnableFinancialYear())}),e.k0s(),e.DNE(25,Ha,2,0,"div",25),e.k0s()(),e.j41(26,"div",18)(27,"label",19),e.EFF(28,"Month"),e.k0s(),e.j41(29,"div",26)(30,"select",27),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Months,a)||(i.Months=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.CheckSalesExists())}),e.j41(31,"option",22),e.EFF(32,"-- Month --"),e.k0s(),e.DNE(33,Na,2,2,"option",23),e.k0s(),e.DNE(34,La,2,0,"div",25),e.k0s()()(),e.j41(35,"div",7)(36,"div",28)(37,"table",29)(38,"thead")(39,"tr")(40,"th",30),e.EFF(41,"Project"),e.k0s(),e.j41(42,"th"),e.EFF(43,"Project Type"),e.k0s(),e.j41(44,"th"),e.EFF(45,"Client"),e.k0s(),e.j41(46,"th"),e.EFF(47,"Technology"),e.k0s(),e.j41(48,"th"),e.EFF(49,"Sales Person"),e.k0s(),e.j41(50,"th"),e.EFF(51,"Source"),e.k0s(),e.j41(52,"th"),e.EFF(53,"Date of Confirmation"),e.k0s()()(),e.j41(54,"tbody")(55,"tr")(56,"td")(57,"div",31),e.DNE(58,Ua,5,2,"div",32)(59,xa,5,2,"div",32)(60,Qa,2,0,"div",25),e.k0s()(),e.j41(61,"td"),e.EFF(62),e.k0s(),e.j41(63,"td"),e.EFF(64),e.k0s(),e.j41(65,"td"),e.EFF(66),e.k0s(),e.j41(67,"td"),e.EFF(68),e.k0s(),e.j41(69,"td"),e.EFF(70),e.k0s(),e.j41(71,"td"),e.EFF(72),e.k0s()()()()()(),e.j41(73,"div",7)(74,"div",28)(75,"table",29)(76,"thead")(77,"tr")(78,"th"),e.EFF(79,"Net Billed Amount"),e.k0s(),e.j41(80,"th"),e.EFF(81,"Project Hours"),e.k0s(),e.j41(82,"th"),e.EFF(83,"Actual Hours"),e.k0s(),e.j41(84,"th"),e.EFF(85,"Effective Rate excluding commision"),e.k0s(),e.j41(86,"th"),e.EFF(87,"Received Amout"),e.k0s(),e.j41(88,"th"),e.EFF(89,"Pending Amount"),e.k0s()()(),e.j41(90,"tbody")(91,"tr")(92,"td")(93,"input",33,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.salesViewModel.netBilledAmount,a)||(i.salesViewModel.netBilledAmount=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.NetBilledAmount())}),e.k0s()(),e.j41(95,"td")(96,"input",34,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.salesViewModel.projectHours,a)||(i.salesViewModel.projectHours=a),e.Njj(a)}),e.bIt("focusout",function(a){return e.eBV(o),e.Njj(i.CheckHours(a.target.value))}),e.k0s()(),e.j41(98,"td"),e.EFF(99),e.k0s(),e.j41(100,"td")(101,"label"),e.EFF(102),e.nI1(103,"number"),e.k0s()(),e.j41(104,"td")(105,"input",35,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.salesViewModel.receivedAmount,a)||(i.salesViewModel.receivedAmount=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.PendingAmount())}),e.k0s()(),e.j41(107,"td")(108,"label"),e.EFF(109),e.k0s()()()()()()(),e.j41(110,"div",17)(111,"div",36)(112,"label",37),e.EFF(113,"Invoice No"),e.k0s(),e.j41(114,"div",38)(115,"input",39,4),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.salesViewModel.invoiceNo,a)||(i.salesViewModel.invoiceNo=a),e.Njj(a)}),e.k0s()()(),e.j41(117,"div",36)(118,"label",37),e.EFF(119,"Remark"),e.k0s(),e.j41(120,"div",38)(121,"textarea",40,5),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.salesViewModel.remark,a)||(i.salesViewModel.remark=a),e.Njj(a)}),e.k0s()()()(),e.j41(123,"div",41)(124,"button",42),e.nrm(125,"i",43),e.EFF(126," Submit"),e.k0s(),e.nrm(127,"img",44),e.j41(128,"button",45),e.nrm(129,"i",46),e.EFF(130," Reset"),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(14);e.R7$(16),e.Y8G("ngClass",e.eq3(30,xe,o.submitted&&!i.FinancialYear.valid&&""==i.FinancialYear)),e.R7$(4),e.R50("ngModel",i.FinancialYear),e.Y8G("disabled",i.Disabled),e.R7$(3),e.Y8G("ngForOf",i.result.financialYearDropdownModel),e.R7$(2),e.Y8G("ngIf",o.submitted&&""==i.FinancialYear),e.R7$(),e.Y8G("ngClass",e.eq3(32,xe,o.submitted&&!i.Months.valid&&""==i.Months)),e.R7$(4),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.result.months),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.Months.valid&&""==i.Months),e.R7$(23),e.Y8G("ngClass",e.eq3(34,xe,o.submitted&&!i.Project.valid&&""==i.Project)),e.R7$(),e.Y8G("ngIf",0!=i.salesViewModel.monthlySalesID),e.R7$(),e.Y8G("ngIf",0==i.salesViewModel.monthlySalesID),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.Project.valid&&""==i.Project),e.R7$(2),e.JRh(i.ProjectType),e.R7$(2),e.JRh(i.ProjectClient),e.R7$(2),e.SpI("",i.ProjectTechnology," "),e.R7$(2),e.JRh(i.ProjectSalesPerson),e.R7$(2),e.JRh(i.ProjectSource),e.R7$(2),e.JRh(i.ProjectConfirmationDate),e.R7$(21),e.R50("ngModel",i.salesViewModel.netBilledAmount),e.R7$(3),e.R50("ngModel",i.salesViewModel.projectHours),e.Y8G("ngClass",e.eq3(36,Ga,i.isClassVisible)),e.R7$(3),e.SpI(" ",i.ActualProjectHours," "),e.R7$(3),e.JRh(e.bMT(103,28,i.NetBilledAmount())),e.R7$(3),e.R50("ngModel",i.salesViewModel.receivedAmount),e.R7$(4),e.SpI(" ",i.PendingAmount(),""),e.R7$(6),e.R50("ngModel",i.salesViewModel.invoiceNo),e.R7$(6),e.R50("ngModel",i.salesViewModel.remark)}},dependencies:[u.YU,u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,pe,u.QX],encapsulation:2})}return s})();class ue extends C{}const Pt=()=>["active"],Ja=()=>["/SmartDesk/SalesList"],$a=()=>["/SmartDesk/MonthlySalesList"];function za(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Xa(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function qa(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Ka(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Wa(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function Za(s,l){if(1&s&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}let el=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.salesService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Monthly Time Sheet",this.columns=[],this.FinancialYearList=[],this.EmployeeList=[],this.currentPageNumber=1,this.ProjectList=[],this.Project=0,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new ue,this.datagrid=i,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="MonthlySalesID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){this.spinner.show(),"BDM"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation&&this.router.navigate(["/SmartDesk/AccessDenied"]),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.columns.push(new h("month","Month",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "15%" , "hyperLink": true,"disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("client","Client",'[{"width": "20%" ,"hyperLink":true, "disableSorting": false}]')),this.columns.push(new h("salesPerson","Sales",'[{"width": "15%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("source","Source",'[{"width": "10%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("dateOfConfirmation","Date Of Confirmation",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("effectiveRate","Effective Rate",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("projectHours","Project Hours",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("netBilledAmount","Net Billed Amount",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("receivedAmount","Received Amount",'[{"width": "12%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("pendingAmount","Pending Amount",'[{"width": "10%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("Action","Action",'[{"width": "10%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showSalesForm(){this.router.navigate(["/SmartDesk/Sales"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getSalesList()},t),this.spinner.hide()}DeleteSales(t){this.spinner.show(),this.salesService.deleteSales(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getSalesList(){this.spinner.show();let t=new ue;t.Search=this.Search,t.Project=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=this.FinancialYear||0,t.Month=this.Months||0,t.ProjectType=this.ProjectType,t.Technology=this.Technology.toString(),t.Client=this.Client.toString(),t.Department=this.Department.toString(),t.CompanyID=this.currentUser.companyID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let a=JSON.parse(n.queryParams.filterModel);""!=a.EmployeeID&&null!=a.EmployeeID&&(t.EmployeeID=a.EmployeeID)}else t.EmployeeID=this.selectedItems.map(a=>a.id).join(",");this.filterModel=t;let o={headers:new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()})};return this.http.post(p.apiUrl+"api/Sales/GetSalesList",t,o).subscribe(a=>{this.getRowOnSuccess(a),this.spinner.hide()},a=>{this.getRowOnError(a),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Sales deleted successfully.","Delete")):this.toastyService.error("Something errors.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.pageTotal=0,this.salesListViewModel=t.salesListModel,this.FinancialYearList=t.financialYearDropdownModel,this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.salesTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRowForEditDelete(t){let i=this.salesListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Sales?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteSales(i.monthlySalesID)}},cancel:function(){}}})}selectedRow(t){return this.router.navigate(["/SmartDesk/Sales"],{queryParams:{id:this.salesListViewModel[t].monthlySalesID,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.Project=0,this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedRowRedirect(t,n){let i=n,r=this.salesListViewModel[t];return"Client"==i?this.router.navigate(["/Master/ClientList"],{queryParams:{search:r.client.split(" ")[0]},skipLocationChange:!0}):"Sales"==i?this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:r.salesPerson.split(" ")[0]},skipLocationChange:!0}):"Project"==i?this.router.navigate(["/Master/ProjectList"],{queryParams:{search:r.project.split(" ")[0]},skipLocationChange:!0}):void 0}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.Search,this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(se),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-sales-list"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([se])],decls:109,vars:35,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"fa","fa-usd"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-tree"],[1,"col-6","col-lg-3"],[1,"card","card-box-shadow"],[1,"card-body","p-0","d-flex","align-items-center"],[1,"fa","fa-cogs","bg-primary","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"fa","fa-usd","bg-info","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-info"],[1,"nav-icon","icon-wallet","bg-warning","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-warning"],[1,"fa","fa-bell","bg-danger","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-danger"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems","id","emp-ddl",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right","pl-2"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then show all columns","placement","bottom"],[3,"datagridEvent","rows","columns","pageSize"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Sales "),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.showSalesForm()}),e.nrm(10,"i",9),e.k0s()()(),e.j41(11,"div",10)(12,"div",1)(13,"div",11)(14,"ul",12)(15,"li",13)(16,"a",14),e.nrm(17,"i",15),e.EFF(18," All Month Sales List "),e.k0s()(),e.j41(19,"li",13)(20,"a",16),e.nrm(21,"i",17),e.EFF(22," Month wise Sales List "),e.k0s()()()()(),e.j41(23,"div",1)(24,"div",18)(25,"div",19)(26,"div",20),e.nrm(27,"i",21),e.j41(28,"div")(29,"div",22),e.EFF(30),e.k0s(),e.j41(31,"div",23),e.EFF(32,"Project Hours"),e.k0s()()()()(),e.j41(33,"div",18)(34,"div",19)(35,"div",20),e.nrm(36,"i",24),e.j41(37,"div")(38,"div",25),e.EFF(39),e.k0s(),e.j41(40,"div",23),e.EFF(41,"Net Billed Amount"),e.k0s()()()()(),e.j41(42,"div",18)(43,"div",19)(44,"div",20),e.nrm(45,"i",26),e.j41(46,"div")(47,"div",27),e.EFF(48),e.k0s(),e.j41(49,"div",23),e.EFF(50,"Received Amount"),e.k0s()()()()(),e.j41(51,"div",18)(52,"div",19)(53,"div",20),e.nrm(54,"i",28),e.j41(55,"div")(56,"div",29),e.EFF(57),e.k0s(),e.j41(58,"div",23),e.EFF(59,"Pending Amount"),e.k0s()()()()()(),e.j41(60,"div",1)(61,"div",30)(62,"input",31),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(63,"div",30)(64,"select",32),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(65,za,2,2,"option",33),e.k0s()(),e.j41(66,"div",30)(67,"select",34),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(68,"option",35),e.EFF(69,"-- Month --"),e.k0s(),e.DNE(70,Xa,2,2,"option",33),e.k0s()(),e.j41(71,"div",30)(72,"select",36),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(73,"option",35),e.EFF(74,"-- Project Type --"),e.k0s(),e.DNE(75,qa,2,2,"option",33),e.k0s()(),e.j41(76,"div",30)(77,"select",37),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(78,"option",35),e.EFF(79,"-- Department --"),e.k0s(),e.DNE(80,Ka,2,2,"option",33),e.k0s()(),e.j41(81,"div",30)(82,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(83,"option",35),e.EFF(84,"-- Technology --"),e.k0s(),e.DNE(85,Wa,2,2,"option",33),e.k0s()(),e.j41(86,"div",30)(87,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(88,"option",35),e.EFF(89,"-- Client --"),e.k0s(),e.DNE(90,Za,2,2,"option",33),e.k0s()(),e.j41(91,"div",30)(92,"ng-multiselect-dropdown",40),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s(),e.j41(93,"button",41),e.bIt("click",function(){return i.search()}),e.nrm(94,"i",42),e.k0s(),e.j41(95,"button",43),e.bIt("click",function(){return i.reset()}),e.nrm(96,"i",44),e.k0s()(),e.nrm(97,"div",30),e.k0s(),e.j41(98,"div",1)(99,"div",45)(100,"div",46)(101,"label",47)(102,"input",48),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(103," Auto Filter "),e.k0s(),e.j41(104,"label",49)(105,"input",48),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(106," Show Column "),e.k0s()(),e.j41(107,"datagrid",50),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(108,"ngx-spinner",51)),2&n&&(e.R7$(16),e.Y8G("routerLinkActive",e.lJ4(31,Pt))("routerLink",e.lJ4(32,Ja)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(33,Pt))("routerLink",e.lJ4(34,$a)),e.R7$(10),e.JRh(i.result.projectHours),e.R7$(9),e.JRh(i.result.netBilledAmount),e.R7$(9),e.JRh(i.result.receivedAmount),e.R7$(9),e.JRh(i.result.pendingAmount),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(2),e.Y8G("rows",i.salesListViewModel)("columns",i.columns)("pageSize",i.pageSize),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_],encapsulation:2})}return s})();const Rt=()=>["active"],tl=()=>["/SmartDesk/SalesList"],il=()=>["/SmartDesk/MonthlySalesList"];function nl(s,l){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function ol(s,l){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function sl(s,l){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function rl(s,l){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function al(s,l){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function ll(s,l){if(1&s&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}let Gt=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=i,this.router=o,this.salesService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.timesheetlist=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.title="Monthly Time Sheet",this.columns=[],this.FinancialYearList=[],this.EmployeeList=[],this.currentPageNumber=1,this.ProjectList=[],this.Project=0,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.SaleslistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new ue,this.datagrid=n,this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="MonthlySalesID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show(),"BDM"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation&&this.router.navigate(["/SmartDesk/AccessDenied"]),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.columns.push(new h("month","Month",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "25%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("client","Client",'[{"width": "20%" ,"hyperLink":false, "disableSorting": false}]')),this.columns.push(new h("salesPerson","Sales Person",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("source","Source",'[{"width": "10%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("dateOfConfirmation","Date Of Confirmation",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("effectiveRate","Effective Rate",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("projectHours","Project Hours",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("netBilledAmount","Net Billed Amount",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("receivedAmount","Received Amount",'[{"width": "20%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("pendingAmount","Pending Amount",'[{"width": "20%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("Action","Action",'[{"width": "20%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showSalesForm(){this.router.navigate(["/SmartDesk/Sales"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getSalesList()},t),this.spinner.hide()}DeleteSales(t){this.spinner.show(),this.salesService.deleteSales(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getSalesList(){this.spinner.show();let t=new ue;t.Search=this.Search,t.Project=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=this.FinancialYear||0,t.Month=this.Months||0,t.ProjectType=this.ProjectType,t.Technology=this.Technology.toString(),t.Client=this.Client.toString(),t.Department=this.Department.toString(),t.CompanyID=this.currentUser.companyID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let a=new ue;a=JSON.parse(n.queryParams.filterModel),""!=a.EmployeeID&&null!=a.EmployeeID&&(t.EmployeeID=a.EmployeeID)}else t.EmployeeID=this.selectedItems.map(a=>a.id).join(",");this.filterModel=t;let o={headers:new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()})};return this.http.post(p.apiUrl+"api/Sales/GetSalesList",t,o).subscribe(a=>{this.getRowOnSuccess(a),this.spinner.hide()},a=>{this.getRowOnError(a),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Sales deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.pageTotal=0,this.salesListViewModel=t.salesListModel,this.FinancialYearList=t.financialYearDropdownModel,this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.salesTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.salesListViewModel),this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRowForEditDelete(t){var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Sales?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteSales(t)}},cancel:function(){}}})}selectedRow(t){return this.router.navigate(["/SmartDesk/Sales"],{queryParams:{id:t,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.Project=0,this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.SaleslistmonthWise=[],this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.SaleslistmonthWise=[],this.ngOnInit()}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}createJsonResultForTable(t,n){this.SaleslistmonthWise=[];var i,o=0;this.FinancialYearList.map(function(a){a.financialYearID>o&&(o=a.financialYearID)}),o===this.FinancialYear?(i=0!=this.Months?this.Months-2:(new Date).getMonth()-1)<=0&&(i+=12):i=12,t.forEach((a,d)=>{if(i==d||i<d)return!1;let g=n.filter(A=>A.month==a.name);this.SaleslistmonthWise.push({MonthID:a.monthID,MonthName:a.name,SalesCount:g.length,Data:g})}),setTimeout(()=>{var a;(a=0!=this.Months?this.Months-3:(new Date).getMonth()-2)<=0&&(a+=12);var g=document.querySelectorAll('[ng-reflect-index="'+(a-1)+'"].data-table-row-wrapper');[].forEach.call(g,function(A){"innerTable"!=A.parentNode.parentNode.parentNode.parentNode.id&&A.firstElementChild.firstElementChild.firstElementChild.click()});var y=document.querySelectorAll(".column-selector-button");[].forEach.call(y,function(A){A.title="column selector"})},1)}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.Search,this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(se),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-sales-list"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([se])],decls:108,vars:32,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-usd"],["data-toggle","tab","role","tab",1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"fa","fa-tree"],[1,"col-6","col-lg-3"],[1,"card","card-box-shadow"],[1,"card-body","p-0","d-flex","align-items-center"],[1,"fa","fa-cogs","bg-primary","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"fa","fa-usd","bg-info","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-info"],[1,"nav-icon","icon-wallet","bg-warning","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-warning"],[1,"fa","fa-bell","bg-danger","p-4","font-2xl","mr-3"],[1,"text-value-sm","text-danger"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems","id","emp-ddl",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right","pl-2"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then show all columns","placement","bottom"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Sales "),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.showSalesForm()}),e.nrm(10,"i",9),e.k0s()()(),e.j41(11,"div",10)(12,"div",1)(13,"div",11)(14,"ul",12)(15,"li",13)(16,"a",14),e.nrm(17,"i",15),e.EFF(18," All Month Sales List "),e.k0s()(),e.j41(19,"li",13)(20,"a",16),e.nrm(21,"i",17),e.EFF(22," Month wise Sales List "),e.k0s()()()()(),e.j41(23,"div",1)(24,"div",18)(25,"div",19)(26,"div",20),e.nrm(27,"i",21),e.j41(28,"div")(29,"div",22),e.EFF(30),e.k0s(),e.j41(31,"div",23),e.EFF(32,"Project Hours"),e.k0s()()()()(),e.j41(33,"div",18)(34,"div",19)(35,"div",20),e.nrm(36,"i",24),e.j41(37,"div")(38,"div",25),e.EFF(39),e.k0s(),e.j41(40,"div",23),e.EFF(41,"Net Billed Amount"),e.k0s()()()()(),e.j41(42,"div",18)(43,"div",19)(44,"div",20),e.nrm(45,"i",26),e.j41(46,"div")(47,"div",27),e.EFF(48),e.k0s(),e.j41(49,"div",23),e.EFF(50,"Received Amount"),e.k0s()()()()(),e.j41(51,"div",18)(52,"div",19)(53,"div",20),e.nrm(54,"i",28),e.j41(55,"div")(56,"div",29),e.EFF(57),e.k0s(),e.j41(58,"div",23),e.EFF(59,"Pending Amount"),e.k0s()()()()()(),e.j41(60,"div",1)(61,"div",30)(62,"input",31),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(63,"div",30)(64,"select",32),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(65,nl,2,2,"option",33),e.k0s()(),e.j41(66,"div",30)(67,"select",34),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(68,"option",35),e.EFF(69,"-- Month --"),e.k0s(),e.DNE(70,ol,2,2,"option",33),e.k0s()(),e.j41(71,"div",30)(72,"select",36),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(73,"option",35),e.EFF(74,"-- Project Type --"),e.k0s(),e.DNE(75,sl,2,2,"option",33),e.k0s()(),e.j41(76,"div",30)(77,"select",37),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(78,"option",35),e.EFF(79,"-- Department --"),e.k0s(),e.DNE(80,rl,2,2,"option",33),e.k0s()(),e.j41(81,"div",30)(82,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(83,"option",35),e.EFF(84,"-- Technology --"),e.k0s(),e.DNE(85,al,2,2,"option",33),e.k0s()(),e.j41(86,"div",30)(87,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(88,"option",35),e.EFF(89,"-- Client --"),e.k0s(),e.DNE(90,ll,2,2,"option",33),e.k0s()(),e.j41(91,"div",30)(92,"ng-multiselect-dropdown",40),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s(),e.j41(93,"button",41),e.bIt("click",function(){return i.search()}),e.nrm(94,"i",42),e.k0s(),e.j41(95,"button",43),e.bIt("click",function(){return i.reset()}),e.nrm(96,"i",44),e.k0s()(),e.nrm(97,"div",30),e.k0s(),e.j41(98,"div",1)(99,"div",45)(100,"div",46)(101,"label",47)(102,"input",48),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(103," Auto Filter "),e.k0s(),e.j41(104,"label",49)(105,"input",48),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(106," Show Column "),e.k0s()()()()()()()()(),e.nrm(107,"ngx-spinner",50)),2&n&&(e.R7$(16),e.Y8G("routerLinkActive",e.lJ4(28,Rt))("routerLink",e.lJ4(29,tl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(30,Rt))("routerLink",e.lJ4(31,il)),e.R7$(10),e.JRh(i.result.projectHours),e.R7$(9),e.JRh(i.result.netBilledAmount),e.R7$(9),e.JRh(i.result.receivedAmount),e.R7$(9),e.JRh(i.result.pendingAmount),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(2),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b],encapsulation:2})}return s})();const cl=s=>({"has-error":s});function hl(s,l){1&s&&(e.j41(0,"span",29),e.EFF(1,"Please Enter Old Password"),e.k0s())}function dl(s,l){1&s&&e.nrm(0,"img",30)}let pl=(()=>{class s{constructor(t,n,i,o,r,a){this.changePasswordService=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.toastyService=a,this.changePasswordModel={oldPassword:"",password:"",employeeID:0,confirmPassword:"",InitLogIn:0},this.loading=!1,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){}ChangePassword(t=""){if(this.loading=!0,this.currentUser){if(this.changePasswordModel.oldPassword==this.changePasswordModel.password)return this.toastyService.warning("Try another new password, this is already used.","Change Password"),this.loading=!1,!1;this.changePasswordService.changePassword(this.changePasswordModel,this.currentUser.employeeID).subscribe(n=>{this.loading=!1,n>0?(1==n?this.toastyService.success("Password Changed successfully","Change Password"):this.toastyService.error("Password Change Failed. Check your old password.","Change Password"),this.router.navigate(["/SmartDesk/ChangePassword"])):this.toastyService.error("Password Change Failed.","Change Password")},n=>{console.log(n)})}else this.loading=!0,this.router.navigate(["/login"])}clearInputdata(){this.router.navigate(["/SmartDesk/Dashboard"])}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(Ee),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-change-password"]],features:[e.Jv_([Ee])],decls:46,vars:11,consts:[["f","ngForm"],["oldPassword","ngModel"],["password","ngModel"],["confirmPassword","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"caption"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-link",3,"click"],[1,"card-body"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["type","password","id","oldPassword","name","oldPassword","placeholder","Old Password","required","","maxlength","14",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"col-md-6","row"],["type","password","id","password","name","password","placeholder","Password","required","","maxlength","14","validateEqual","confirmPassword","reverse","true",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-block","error",3,"hidden"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm Password","validateEqual","password","required","","maxlength","14",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[1,"error"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9),e.nrm(6,"i",10),e.EFF(7," Change Password "),e.j41(8,"button",11),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.EFF(9,"Back To Dashboard"),e.k0s()()(),e.j41(10,"div",12)(11,"form",13,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(12);return e.Njj(a.form.valid&&i.ChangePassword(a))}),e.j41(13,"div",14)(14,"div",15)(15,"label",16),e.EFF(16,"Old Password"),e.k0s(),e.j41(17,"div",17)(18,"input",18,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.changePasswordModel.oldPassword,a)||(i.changePasswordModel.oldPassword=a),e.Njj(a)}),e.k0s(),e.DNE(20,hl,2,0,"span",19),e.k0s()()(),e.j41(21,"div",14)(22,"div",20)(23,"label",16),e.EFF(24,"New Password"),e.k0s(),e.j41(25,"div",17)(26,"input",21,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.changePasswordModel.password,a)||(i.changePasswordModel.password=a),e.Njj(a)}),e.k0s(),e.j41(28,"span",22),e.EFF(29," Password is required "),e.k0s()()()(),e.j41(30,"div",14)(31,"div",20)(32,"label",16),e.EFF(33,"Retype password"),e.k0s(),e.j41(34,"div",17)(35,"input",23,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.changePasswordModel.confirmPassword,a)||(i.changePasswordModel.confirmPassword=a),e.Njj(a)}),e.k0s(),e.j41(37,"span",22),e.EFF(38," Password mismatch "),e.k0s()()()(),e.j41(39,"div",24)(40,"button",25),e.EFF(41," Change Password"),e.k0s(),e.DNE(42,dl,1,0,"img",26),e.j41(43,"button",27),e.nrm(44,"i",28),e.EFF(45," Reset"),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(12),r=e.sdS(19),a=e.sdS(27),d=e.sdS(36);e.R7$(14),e.Y8G("ngClass",e.eq3(9,cl,o.submitted&&!r.valid)),e.R7$(4),e.R50("ngModel",i.changePasswordModel.oldPassword),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid),e.R7$(6),e.R50("ngModel",i.changePasswordModel.password),e.R7$(2),e.Y8G("hidden",a.valid||a.pristine&&!o.submitted),e.R7$(7),e.R50("ngModel",i.changePasswordModel.confirmPassword),e.R7$(2),e.Y8G("hidden",d.valid||d.pristine&&!o.submitted),e.R7$(3),e.Y8G("disabled",i.loading),e.R7$(2),e.Y8G("ngIf",i.loading)}},dependencies:[u.YU,u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,Be],encapsulation:2})}return s})(),Yt=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getTargatedHours(t){return this.http.get(p.apiUrl+"api/TargatedHours/GetTargatedHours?FinancialYear="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}saveTargatedHours(t,n){return this.http.post(`${p.apiUrl}api/TargatedHours/SaveTargatedHours?FinancialYear=${t}&CompanyID=${this.currentUser.companyID}`,n,{headers:this.headers}).pipe((0,j.T)(r=>r))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();function ul(s,l){if(1&s&&(e.j41(0,"option",24),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function ml(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function gl(s,l){if(1&s&&(e.j41(0,"td"),e.nrm(1,"input",26),e.k0s()),2&s){const t=l.$implicit,n=e.XpG().$implicit;e.R7$(),e.FCK("id","",n.departmentID,"_",t.monthID,"")}}function fl(s,l){if(1&s&&(e.j41(0,"tr")(1,"td",25),e.EFF(2),e.k0s(),e.DNE(3,gl,2,3,"td",19),e.j41(4,"td"),e.nrm(5,"input",26),e.k0s()()),2&s){const t=l.$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngForOf",n.result.months),e.R7$(2),e.Mz_("id","",t.departmentID,"_0")}}function Al(s,l){1&s&&e.nrm(0,"img",27)}let _l=(()=>{class s{constructor(t,n,i,o,r){this.targatedHoursServiceService=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.FinancialYear=0,this.loading=!1,this.result=[],this.TargatedData=[],this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){"Sales"==this.currentUser.designation&&this.router.navigate(["/SmartDesk/AccessDenied"]),this.getTargatedHours(this.FinancialYear)}getTargatedHours(t){this.targatedHoursServiceService.getTargatedHours(t).subscribe(n=>{this.result=n,this.FinancialYear=n.financialYear,this.TargatedData=n.keyValuePairModel,n.financialYearDropdownModel.forEach(i=>{i.financialYearID==n.financialYear&&(this.CurrentYear=i.name),setTimeout(()=>{this.getAllTextvalues()},1)})})}GetHoursByMonthAndDepartment(t){return[].forEach.call(this.TargatedData,function(n){if(n.key==t)return n.value}),0}getAllTextvalues(){[].forEach.call(this.TargatedData,function(t){var n=t.value;document.getElementById(t.key).value=n})}ChangeYear(t){""!=t&&(this.FinancialYear=t,this.clearDynamicInputs(),this.getTargatedHours(this.FinancialYear))}clearDynamicInputs(){var t=document.querySelectorAll(".hoursdata");[].forEach.call(t,function(i){document.getElementById(i.id).value="0"})}saveTargatedHours(t=""){var n=document.querySelectorAll(".hoursdata"),i=[];[].forEach.call(n,function(o){i.push({key:o.id,value:o.value})}),this.targatedHoursServiceService.saveTargatedHours(this.FinancialYear,i).subscribe(o=>{})}clearInputdata(){this.router.navigate(["/SmartDesk/Dashboard"])}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(Yt),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-tagated-hours"]],features:[e.Jv_([Yt])],decls:34,vars:6,consts:[["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["type","reset",1,"btn","btn-primary","btn-small",3,"click"],[1,"card-body"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-3"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"form-group","table-responsive"],[1,"table","table-responsive-sm","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"card-footer"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],[3,"value"],[1,"technologytd"],["OnlyNumber","true",1,"form-control","hoursdata",3,"id"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.nrm(6,"i",7),e.EFF(7," Targated Hours "),e.k0s(),e.j41(8,"div",8)(9,"button",9),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.EFF(10,"Back To Dashboard"),e.k0s()()(),e.j41(11,"div",10)(12,"form",11,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(13);return e.Njj(i.saveTargatedHours(a))}),e.j41(14,"div",12)(15,"div",13)(16,"select",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.ChangeYear(a))}),e.DNE(17,ul,2,2,"option",15),e.k0s()()(),e.j41(18,"div",12)(19,"div",16)(20,"div",17)(21,"table",18)(22,"thead")(23,"tr"),e.nrm(24,"th"),e.DNE(25,ml,2,1,"th",19),e.j41(26,"th"),e.EFF(27,"Total (Hours)"),e.k0s()()(),e.DNE(28,fl,6,4,"tr",19),e.k0s()()()(),e.j41(29,"div",20)(30,"button",21),e.nrm(31,"i",22),e.EFF(32," Save Targated Hours"),e.k0s(),e.DNE(33,Al,1,0,"img",23),e.k0s()()()()()()()}2&n&&(e.R7$(16),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.result.financialYearDropdownModel),e.R7$(8),e.Y8G("ngForOf",i.result.months),e.R7$(3),e.Y8G("ngForOf",i.result.departments),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading))},dependencies:[u.Sq,u.bT,c.qT,c.xH,c.y7,c.wz,c.BC,c.cb,c.vS,c.cV,pe],encapsulation:2})}return s})(),we=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.refreshFromChild=new he.B,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getFinancialYearByID(t){return this.http.get(p.apiUrl+"api/FinancialYear/GetFinancialYearByID?FinancialYearID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}saveFinancialYear(t,n){const i=JSON.stringify(t);return this.http.post(`${p.apiUrl}api/FinancialYear/SaveFinancialYear?EmployeeID=${n}`,i,{headers:this.headers}).pipe((0,j.T)(r=>r))}deleteFinancialYear(t,n){return this.http.get(p.apiUrl+"/api/FinancialYear/DeleteFinancialYear?FinancialYearID="+t+"&EmployeeID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();const Ht=s=>({"has-error":s});function yl(s,l){1&s&&(e.j41(0,"span",20),e.EFF(1,"Start Date is required"),e.k0s())}function Sl(s,l){1&s&&(e.j41(0,"span",20),e.EFF(1,"End Date is required"),e.k0s())}function Dl(s,l){1&s&&e.nrm(0,"img",21)}let Nt=(()=>{class s{constructor(t,n,i,o,r,a,d){this.financialYearService=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.datePipe=a,this.toastyService=d,this.financialYearViewModel={FinancialYearID:0,StartDate:"",EndDate:""},this.FinancialYearID=0,this.loading=!1,this.result=[],this.dpConfig=new k.iP,this.StartDate="",this.EndDate="",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){let t=this.router.parseUrl(this.router.url);this.FinancialYearID=+t.queryParams.id}saveFinancialYear(t=""){this.loading=!0,""==this.StartDate||""==this.EndDate?this.loading=!1:this.currentUser?(this.FinancialYearID>0&&(this.financialYearViewModel.FinancialYearID=this.FinancialYearID),this.financialYearViewModel.StartDate=this.datePipe.transform(this.StartDate,"yyyy-MM-dd"),this.financialYearViewModel.EndDate=this.datePipe.transform(this.EndDate,"yyyy-MM-dd"),this.financialYearService.saveFinancialYear(this.financialYearViewModel,this.currentUser.employeeID).subscribe(n=>{this.loading=!1,n>0?(document.getElementById("YearPopup").click(),this.resetFormInputs(),document.getElementById("resetbtn").click(),this.financialYearService.refreshFromChild.next(n),this.toastyService.success("Profile Save Successfully.","Save"),this.route.params.subscribe(r=>{this.financialYearViewModel.FinancialYearID>0?this.toastyService.success("Financial Year updated successfully.","Update Financial Year"):this.toastyService.success("Financial Year saved successfully.","Save Financial Year"),this.router.navigate(["/Settings/FinancialYearList"])})):this.toastyService.error("Financial Year already exists.","Exists Financial Year")},n=>{console.log(n)})):(this.loading=!0,this.router.navigate(["/login"]))}clearInputdata(){this.router.navigate(["/Master/ClientList"])}resetFormInputs(){document.getElementById("FinancialYearForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(we),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(u.vh),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-financial-year"]],features:[e.Jv_([u.vh,we])],decls:28,vars:14,consts:[["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","FinancialYearForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row","mb-3"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-4","col-form-label","required"],[1,"col-md-8"],["type","text","placeholder","Start Date","bsDatepicker","","name","StartDate",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["class","error",4,"ngIf"],["type","text","placeholder","End Date","bsDatepicker","","name","EndDate",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"form",6,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.saveFinancialYear(a))}),e.j41(7,"div",7)(8,"div",8)(9,"label",9),e.EFF(10,"Start Date"),e.k0s(),e.j41(11,"div",10)(12,"input",11),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.StartDate,a)||(i.StartDate=a),e.Njj(a)}),e.k0s(),e.DNE(13,yl,2,0,"span",12),e.k0s()(),e.j41(14,"div",8)(15,"label",9),e.EFF(16,"End Date"),e.k0s(),e.j41(17,"div",10)(18,"input",13),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.EndDate,a)||(i.EndDate=a),e.Njj(a)}),e.k0s(),e.DNE(19,Sl,2,0,"span",12),e.k0s()()(),e.j41(20,"div",14)(21,"button",15),e.nrm(22,"i",16),e.EFF(23," Submit"),e.k0s(),e.DNE(24,Dl,1,0,"img",17),e.j41(25,"button",18),e.nrm(26,"i",19),e.EFF(27," Reset"),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6);e.R7$(8),e.Y8G("ngClass",e.eq3(10,Ht,o.submitted&&""!=i.StartDate)),e.R7$(4),e.R50("ngModel",i.StartDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.StartDate),e.R7$(),e.Y8G("ngClass",e.eq3(12,Ht,o.submitted&&""!=i.EndDate)),e.R7$(4),e.R50("ngModel",i.EndDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.EndDate),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.YU,u.bT,c.qT,c.me,c.BC,c.cb,c.vS,c.cV,k.pc,k.p0],encapsulation:2})}return s})();class jl extends C{}let bl=(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.spinner=n,this.router=o,this.financialYearService=r,this.cookieService=a,this.DataEmit=new e.bkB,this.title="Client List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.datagrid=i,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="FinancialYearID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.columns.push(new h("startDate","Start Date",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("endDate","End Date",'[{"width": "20%" , "hyperLink": false,"disableSorting": false}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getFinancialYearList()},t),this.spinner.hide()}getFinancialYearList(){this.spinner.show();let t=new jl;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/FinancialYear/GetFinancialYearList",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.financialYearListViewModel=t.financialYearListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType||"ButtonClicked"==n.EventType||"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(we),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-financial-year-list"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([we])],decls:43,vars:8,consts:[["largeYearModal","bs-modal"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["data-toggle","modal","id","FinancialYearModel",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true","tooltip","Add Financial Year","placement","bottom",1,"fa","fa-plus",2,"cursor","pointer"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["id","resetbtn","tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],["tooltip","If check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","","tooltip","If check-box checked then grid will filter on text type","placement","bottom",3,"ngModelChange","ngModel"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","YearPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["size","medium",3,"type"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.nrm(6,"i",7),e.EFF(7," Financial Year "),e.k0s(),e.j41(8,"div",8)(9,"button",9),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30);return e.Njj(a.show())}),e.nrm(10,"i",10),e.k0s()()(),e.j41(11,"div",11)(12,"div",2)(13,"div",12)(14,"input",13),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(15,"div",12)(16,"button",14),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(17,"i",15),e.k0s(),e.j41(18,"button",16),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(19,"i",17),e.k0s()()(),e.j41(20,"div",2)(21,"div",18)(22,"div",19)(23,"label")(24,"input",20),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.autoFilter,a)||(i.autoFilter=a),e.Njj(a)}),e.k0s(),e.EFF(25," Auto Filter "),e.k0s()()()(),e.j41(26,"div",2)(27,"div",18)(28,"datagrid",21),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.j41(29,"div",22,0)(31,"div",23)(32,"div",24)(33,"div",25)(34,"h4",26),e.EFF(35,"Financial Year"),e.k0s(),e.j41(36,"button",27),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30);return e.Njj(a.hide())}),e.j41(37,"span",28),e.EFF(38,"\xd7"),e.k0s()()(),e.j41(39,"div",29),e.qex(40),e.nrm(41,"app-financial-year"),e.bVm(),e.k0s()()()(),e.nrm(42,"ngx-spinner",30)}2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.financialYearListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(14),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,B.hZ,E.dg,D.et,_,Nt],encapsulation:2})}return s})(),Z=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getProjectResourcesReport(t,n){const i=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Report/GetProjectWiseResources?CompanyID="+this.currentUser.companyID+"&ProjectID="+n,i,{headers:this.headers}).pipe((0,j.T)(o=>o))}getResourceProjectsReport(t){const n=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Report/GetResourceProjectsReport",n,{headers:this.headers}).pipe((0,j.T)(i=>i))}ExportToExcel(t,n){const i=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Report/GetProductivityExportExcel",i,{headers:this.headers,responseType:"blob"}).pipe((0,j.T)(o=>{const r=o.type,a=[];a.push(o);const d=document.createElement("a");d.href=window.URL.createObjectURL(new Blob(a,{type:r})),n&&d.setAttribute("download",n),document.body.appendChild(d),d.click(),document.body.removeChild(d)}))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})(),Ml=(()=>{class s{constructor(t,n,i,o,r){this.reportService=t,this.spinner=n,this.router=i,this.cookieService=r,this.DataEmit=new e.bkB,this.ProjectID=0,this.projectName="",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.selectedItems=[],this.dropdownSettings={},this.dpConfig=new k.iP,this.datagrid=o,this.Search="",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.typeSelected="timer",this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="StartDate"}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);this.ProjectID=+t.queryParams.id,this.filterModel=t.queryParams.filterModel,this.projectName=t.queryParams.name,this.columns.push(new h("developer","Name",'[{"width": "24%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("designation","Designation",'[{"width": "20%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("startDate","Start Date",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("endDate","End Date",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getProjectResourcesByID(this.ProjectID)},t),this.spinner.hide()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.selectedItems=[],this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}getProjectResourcesByID(t){this.spinner.show();let n=new St;n.Search=this.Search,n.pageSize=this.pageSize,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,n.currentPageNumber=this.currentPageNumber,this.reportService.getProjectResourcesReport(n,t).subscribe(i=>{this.getRowOnSuccess(i),this.spinner.hide()},i=>{this.getRowOnError(i),this.spinner.hide()})}getRowOnSuccess(t){let n=new St;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.projectResourceTrackingModel=t.projectResourceTrackingListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}clearInputdata(){this.router.navigate(["/Master/ProjectList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}selectedRowRedirect(t,n){if("Name"==n)return this.router.navigate(["/Master/EmployeeList"],{queryParams:{search:this.projectResourceTrackingModel[t].developer.split(" ")[0]},skipLocationChange:!0})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(Z),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(_),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-reports"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},decls:32,vars:8,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-2","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["id","resetbtn","tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-6","paddingbottom"],[1,"col-md-6"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","",3,"ngModelChange","ngModel"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus"],["size","medium",3,"type"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div"),e.nrm(7,"i",6),e.EFF(8),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(10,"i",8),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",9)(13,"div",1)(14,"div",10)(15,"input",11),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(16,"div",12)(17,"button",13),e.bIt("click",function(){return i.search()}),e.nrm(18,"i",14),e.k0s(),e.j41(19,"button",15),e.bIt("click",function(){return i.reset()}),e.nrm(20,"i",16),e.k0s()()(),e.j41(21,"div",1),e.nrm(22,"div",17),e.j41(23,"div",18)(24,"div",19)(25,"label")(26,"input",20),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(27," Auto Filter "),e.k0s()()()(),e.j41(28,"div",1)(29,"div",21)(30,"datagrid",22),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(31,"ngx-spinner",23)),2&n&&(e.R7$(8),e.SpI(" ",i.projectName," Resources Report "),e.R7$(7),e.R50("ngModel",i.Search),e.R7$(11),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.projectResourceTrackingModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})(),Cl=(()=>{class s{constructor(t,n,i,o,r){this.spinner=t,this.reportService=n,this.router=i,this.cookieService=r,this.DataEmit=new e.bkB,this.EmployeeID=0,this.columns=[],this.alerts=[],this.currentPageNumber=1,this.EmployeeName="",this.selectedItems=[],this.dropdownSettings={},this.dpConfig=new k.iP,this.datagrid=o,this.Search="",this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="StartDate",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);this.EmployeeID=+t.queryParams?.id,this.EmployeeName=t.queryParams?.name,this.filterModel=t.queryParams?.filterModel,this.columns.push(new h("project","Project",'[{"width": "24%" ,"hyperLink": true, "disableSorting": false}]')),this.columns.push(new h("startDate","Start Date",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("endDate","End Date",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetResourceProjectsReport(this.EmployeeID)},t),this.spinner.hide()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.selectedItems=[],this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}GetResourceProjectsReport(t){this.spinner.show();let n=new Pr;n.Search=this.Search,n.pageSize=this.pageSize,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,n.currentPageNumber=this.currentPageNumber,n.CompanyID=this.currentUser.companyID,n.EmployeeID=this.EmployeeID,this.reportService.getResourceProjectsReport(n).subscribe(i=>{this.getRowOnSuccess(i),this.spinner.hide()},i=>{this.getRowOnError(i),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.resourceProjectReportModel=t.resourceProjectsListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}clearInputdata(){this.router.navigate(["/Master/EmployeeList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}selectedRowRedirect(t,n){let r=this.resourceProjectReportModel[t];if("Project"==n&&"project"in r)return this.router.navigate(["/Master/ProjectList"],{queryParams:{search:r.project},skipLocationChange:!0})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(D.ex),e.rXU(Z),e.rXU(f.Ix),e.rXU(_),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-resource-projects-report"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},decls:31,vars:9,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["id","resetbtn","tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],["tooltip","If check-box checked then grid will filter on text type","placement","bottom",1,"col-md-6","checkbox","text-right"],["type","checkbox","value","","tooltip","If check-box checked then grid will filter on text type","placement","bottom",3,"ngModelChange","ngModel"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div"),e.nrm(7,"i",6),e.EFF(8),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(10,"i",8),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",9)(13,"div",1)(14,"div",10)(15,"input",11),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(16,"div",10)(17,"button",12),e.bIt("click",function(){return i.search()}),e.nrm(18,"i",13),e.k0s(),e.j41(19,"button",14),e.bIt("click",function(){return i.reset()}),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",16)(22,"label")(23,"input",17),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(24," Auto Filter "),e.k0s()()(),e.j41(25,"div",1),e.nrm(26,"div",18),e.k0s(),e.j41(27,"div",1)(28,"div",18)(29,"datagrid",19),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(30,"ngx-spinner",20)),2&n&&(e.R7$(8),e.SpI(" ",i.EmployeeName," Project Report "),e.R7$(7),e.R50("ngModel",i.Search),e.R7$(8),e.R50("ngModel",i.autoFilter),e.R7$(6),e.Y8G("rows",i.resourceProjectReportModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})();const kl=s=>({"has-error":s});function Il(s,l){if(1&s&&(e.j41(0,"div",12)(1,"div",16)(2,"label",17),e.EFF(3,"Source"),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.k0s()(),e.j41(6,"div",16)(7,"label",17),e.EFF(8,"Sales"),e.k0s(),e.j41(9,"div",15),e.EFF(10),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.source," "),e.R7$(5),e.SpI(" ",t.result.salesEmployee," ")}}function vl(s,l){if(1&s&&(e.j41(0,"div",16)(1,"label",17),e.EFF(2,"PM/PL"),e.k0s(),e.j41(3,"div",15),e.EFF(4),e.k0s()()),2&s){const t=e.XpG();e.R7$(4),e.SpI(" ",t.result.pmEmployee," ")}}function El(s,l){if(1&s&&(e.j41(0,"div",12)(1,"div",16)(2,"label",17),e.EFF(3,"TL/Sr.Developer"),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.k0s()(),e.j41(6,"div",16)(7,"label",17),e.EFF(8,"Develpoer"),e.k0s(),e.j41(9,"div",15),e.EFF(10),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.tlEmployee," "),e.R7$(5),e.SpI(" ",t.result.developerEmployee," ")}}function Fl(s,l){if(1&s&&(e.j41(0,"div",16)(1,"label",17),e.EFF(2,"QA"),e.k0s(),e.j41(3,"div",15),e.EFF(4),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(4),e.SpI(" ",t.result.qaEmployee," ")}}function Tl(s,l){if(1&s&&(e.j41(0,"div",12)(1,"div",16)(2,"label",17),e.EFF(3,"Designer"),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.k0s()(),e.DNE(6,Fl,5,1,"div",19),e.k0s()),2&s){const t=e.XpG();e.R7$(5),e.SpI(" ",t.result.designerEmployee," "),e.R7$(),e.Y8G("ngIf",t.CheckExecutionAccess())}}let wl=(()=>{class s{constructor(t,n,i,o,r,a){this.projectService=t,this.elRef=n,this.route=i,this.router=o,this.datePipe=r,this.cookieService=a,this.ProjectHistoryID=0,this.ProjectID=0,this.loading=!1,this.ProjectType=0,this.Client=0,this.Source=0,this.Technology=0,this.PM=0,this.TL=0,this.Develpoer=[],this.DeveloperID=[],this.Designer=0,this.QA=0,this.Sales=0,this.result=[],this.Months=[],this.selectedItems=[],this.dropdownSettings={},this.ProjectStatus=0,this.dpConfig=new k.iP,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);this.ProjectHistoryID=+t.queryParams.id,this.ProjectHistoryID>0&&this.getProjectHistoryByID(this.ProjectHistoryID)}getProjectHistoryByID(t){this.projectService.getProjectHistoryByID(t).subscribe(n=>{""!=n&&(this.ProjectID=n.projectID,this.result=n)},n=>{console.log(n)})}clearInputdata(){this.router.navigate(["/Master/History"],{queryParams:{id:this.ProjectID},skipLocationChange:!0})}CheckBDEAccess(){return!("BDM"!=this.currentUser.designation&&"CEO"!=this.currentUser.designation)}CheckExecutionAccess(){return"BDM"!=this.currentUser.designation}onItemSelect(t){this.SelectedDeveloper=this.selectedItems.map(n=>n.name).join(", ")}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-view-project-history"]],features:[e.Jv_([u.vh,R])],decls:62,vars:14,consts:[["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-6","row",3,"ngClass"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6","form-txt"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label"],["class","form-group row",4,"ngIf"],["class","col-md-6 row",4,"ngIf"],[1,"card-footer"],["type","reset",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-ban"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div"),e.nrm(7,"i",7),e.EFF(8," Project "),e.k0s(),e.j41(9,"button",8),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",9),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",10)(13,"form",11,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(14);return e.Njj(a.form.valid)}),e.j41(15,"div",12)(16,"div",13)(17,"label",14),e.EFF(18,"Name"),e.k0s(),e.j41(19,"div",15),e.EFF(20),e.k0s()(),e.j41(21,"div",16)(22,"label",17),e.EFF(23,"Client"),e.k0s(),e.j41(24,"div",15),e.EFF(25),e.k0s()()(),e.j41(26,"div",12)(27,"div",16)(28,"label",17),e.EFF(29,"Technology"),e.k0s(),e.j41(30,"div",15),e.EFF(31),e.k0s()(),e.j41(32,"div",16)(33,"label",17),e.EFF(34,"Project Type"),e.k0s(),e.j41(35,"div",15),e.EFF(36),e.k0s()()(),e.DNE(37,Il,11,2,"div",18),e.j41(38,"div",12)(39,"div",16)(40,"label",17),e.EFF(41,"Date of Confirmation"),e.k0s(),e.j41(42,"div",15),e.EFF(43),e.k0s()(),e.DNE(44,vl,5,1,"div",19),e.k0s(),e.DNE(45,El,11,2,"div",18)(46,Tl,7,2,"div",18),e.j41(47,"div",12)(48,"div",16)(49,"label",17),e.EFF(50,"Project Status"),e.k0s(),e.j41(51,"div",15),e.EFF(52),e.k0s()(),e.j41(53,"div",16)(54,"label",17),e.EFF(55,"History Date"),e.k0s(),e.j41(56,"div",15),e.EFF(57),e.k0s()()(),e.j41(58,"div",20)(59,"button",21),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(60,"i",22),e.EFF(61," Back to List"),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(14);e.R7$(16),e.Y8G("ngClass",e.eq3(12,kl,o.submitted&&!i.result.name.valid)),e.R7$(4),e.SpI(" ",i.result.name," "),e.R7$(5),e.SpI(" ",i.result.client," "),e.R7$(6),e.SpI(" ",i.result.technology," "),e.R7$(5),e.SpI(" ",i.result.projectType," "),e.R7$(),e.Y8G("ngIf",i.CheckBDEAccess()),e.R7$(6),e.SpI(" ",i.result.dateOfConfirmation," "),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(),e.Y8G("ngIf",i.CheckExecutionAccess()),e.R7$(6),e.SpI(" ",i.result.projectStatus," "),e.R7$(5),e.SpI(" ",i.result.historyDate," ")}},dependencies:[u.YU,u.bT,c.qT,c.cb,c.cV],encapsulation:2})}return s})();class ee extends C{}class Lt extends C{}const me=()=>["active"],Pl=()=>["/Reports/YearlyResourceHours"],Rl=()=>["/Reports/YearlyClientHours"],Gl=()=>["/Reports/AnnualBillableHours"],Yl=()=>["/Reports/BillableProjectHours"],Hl=()=>["/Reports/MonthlyProjectHours"];function Nl(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Ll(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Bl(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Ul(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Vl(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function xl(s,l){if(1&s&&(e.j41(0,"option",54),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}let Ql=(()=>{class s{constructor(t,n,i,o,r){this.http=t,this.spinner=n,this.router=i,this.cookieService=o,this.datePipe=r,this.title="Annual Billable Hours",this.FinancialYear=0,this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.currentPageNumber=1,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.timeSheetlistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new ee,this.EmployeeDesignation=[],this.UserHourlist=[],this.ProjectWiseHourlist=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.daterange="",this.StartDate="",this.EndDate="",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.typeSelected="timer",this.totalRows=0,this.pageSize=1e3,this.sortDirection="DESC",this.sortExpression="MonthlyTimeSheetID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.monthCount=12}ngOnInit(){this.spinner.show(),"Sales"===this.currentUser.designation&&(this.AddAccess=!1),this.EmployeeDesignation={ProjectPM:"ProjectPM",ProjectTL:"ProjectTL",ProjectDeveloper:"ProjectDeveloper",ProjectDesigner:"ProjectDesigner",ProjectQA:"ProjectQA",ProjectSales:"ProjectSales",ReportsTo:"ReportsTo"},this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};const t=this.router.parseUrl(this.router.url);void 0!==t.queryParams.month&&(this.Months=+t.queryParams.month),void 0!==t.queryParams.department&&(this.Department=+t.queryParams.department),void 0!==t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),this.reset(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getResourceTimeSheetList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}CheckActionAccess(){return"Sales"!=this.currentUser.designation}getResourceTimeSheetList(){this.spinner.show();const t=new ee;t.Project=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=+this.FinancialYear,t.Month=+this.Months,t.ProjectType=+this.ProjectType,t.Technology=+this.Technology,t.Client=+this.Client,t.Department=+this.Department,t.CompanyID=this.currentUser.companyID,t.StartDate=this.StartDate,t.EndDate=this.EndDate;const n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){const r=JSON.parse(n.queryParams.filterModel);""!=r.EmployeeID&&null!=r.EmployeeID&&(t.EmployeeID=r.EmployeeID)}else t.EmployeeID=this.selectedItems.map(r=>r.id).join(",");this.filterModel=t;const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/GetUserWiseHoursReport",JSON.stringify(t),{headers:i}).subscribe({next:r=>(this.spinner.hide(),r),error:r=>{this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,""==this.daterange&&(this.FinancialYear=t.financialYear),this.pageTotal=0,this.UserHourlist=t.userHoursModel,this.ProjectWiseHourlist=t.projectWiseUserHoursModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID===t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.UserHourlist,this.ProjectWiseHourlist),this.totalRows=this.timeSheetlistmonthWise.length,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}ShowHideColumn(t){this.showColumn=t,this.timeSheetlistmonthWise=[],this.ngOnInit()}createJsonResultForTable(t,n,i){this.timeSheetlistmonthWise=[],n.forEach((o,r)=>{let a=i.filter(g=>g.employeeID==o.employeeID);this.timeSheetlistmonthWise.push({EmployeeID:o.employeeID,EmployeeName:o.employeeName,EmployeeActualHours:o.employeeActualHours,EmployeeEstimatedHours:o.employeeEstimatedHours,timeSheetCount:n.length,UserProjectData:a})})}search(){this.currentPageNumber=1,this.delaySearch=!1,this.timeSheetlistmonthWise=[],this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.daterange="",this.StartDate="",this.EndDate="",this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}reset(){this.cookieService.delete("filterData"),this.Project="",this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.StartDate="",this.EndDate="",this.daterange="",this.clearFilterUrl(),this.executeSearch()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}SearchByDate(t){0!=this.autoFilter&&""!=t&&(this.StartDate=this.datePipe.transform(t[0],"yyyy-MM-dd"),this.EndDate=this.datePipe.transform(t[1],"yyyy-MM-dd"),this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(S.O),e.rXU(u.vh))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-billable-hours-report"]],features:[e.Jv_([V,u.vh])],decls:128,vars:48,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],[1,"nav-icon","icon-user-following"],[1,"nav-link",3,"routerLinkActive","routerLink"],["data-toggle","tab","role","tab",1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],[1,"col-sm-6","col-lg-4"],[1,"card-body","p-0"],[1,"col-6","pr-0"],[1,"bg-primary","text-center","p-2"],[1,"icon-speedometer","bg-primary","font-2xl"],[1,"text-uppercase","font-weight-bold","small","bg-primary"],[1,"col-6","bg-light"],[1,"text-center","p-2"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"col-sm-6","col-lg-8"],[1,"brand-card"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search Project",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","text","placeholder","-- Date & Month --","bsDaterangepicker","",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right","pl-2",2,"margin-top","-35px"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," User Wise Hours "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," Resource Yearly Hours "),e.k0s()(),e.j41(16,"li",10)(17,"a",11),e.nrm(18,"i",13),e.EFF(19," Client Yearly Hours "),e.k0s()(),e.j41(20,"li",10)(21,"a",14),e.nrm(22,"i",12),e.EFF(23," Project Wise Hours "),e.k0s()(),e.j41(24,"li",10)(25,"a",15),e.nrm(26,"i",13),e.EFF(27," User wise Hours "),e.k0s()(),e.j41(28,"li",10)(29,"a",14),e.nrm(30,"i",16),e.EFF(31," Month Wise Hours "),e.k0s()()()()(),e.j41(32,"div",1)(33,"div",17)(34,"div",3)(35,"div",18)(36,"div",1)(37,"div",19)(38,"div",20),e.nrm(39,"i",21),e.j41(40,"div",22),e.EFF(41),e.k0s()()(),e.j41(42,"div",23)(43,"div",24)(44,"div",25),e.EFF(45),e.k0s(),e.j41(46,"div",26),e.EFF(47,"Total "),e.k0s()()()()()()(),e.j41(48,"div",27)(49,"div",28)(50,"div",29)(51,"div")(52,"div",30),e.EFF(53),e.k0s(),e.j41(54,"div",31),e.EFF(55,"PM/PL"),e.k0s()(),e.j41(56,"div")(57,"div",30),e.EFF(58),e.k0s(),e.j41(59,"div",31),e.EFF(60,"TL"),e.k0s()(),e.j41(61,"div")(62,"div",30),e.EFF(63),e.k0s(),e.j41(64,"div",31),e.EFF(65,"Developer"),e.k0s()(),e.j41(66,"div")(67,"div",30),e.EFF(68),e.k0s(),e.j41(69,"div",31),e.EFF(70,"Designer"),e.k0s()(),e.j41(71,"div")(72,"div",30),e.EFF(73),e.k0s(),e.j41(74,"div",31),e.EFF(75,"QA"),e.k0s()()()()()(),e.j41(76,"div",1)(77,"div",32)(78,"input",33),e.mxI("ngModelChange",function(r){return e.DH7(i.Project,r)||(i.Project=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(79,"div",32)(80,"select",34),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.j41(81,"option",35),e.EFF(82,"-- Financial Year --"),e.k0s(),e.DNE(83,Nl,2,2,"option",36),e.k0s()(),e.j41(84,"div",32)(85,"select",37),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(86,"option",35),e.EFF(87,"-- Month --"),e.k0s(),e.DNE(88,Ll,2,2,"option",36),e.k0s()(),e.j41(89,"div",32)(90,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(91,"option",35),e.EFF(92,"-- Project Type --"),e.k0s(),e.DNE(93,Bl,2,2,"option",36),e.k0s()(),e.j41(94,"div",32)(95,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(96,"option",35),e.EFF(97,"-- Department --"),e.k0s(),e.DNE(98,Ul,2,2,"option",36),e.k0s()(),e.j41(99,"div",32)(100,"select",40),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(101,"option",35),e.EFF(102,"-- Technology --"),e.k0s(),e.DNE(103,Vl,2,2,"option",36),e.k0s()(),e.j41(104,"div",32)(105,"select",41),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(106,"option",35),e.EFF(107,"-- Client --"),e.k0s(),e.DNE(108,xl,2,2,"option",36),e.k0s()(),e.j41(109,"div",32)(110,"ng-multiselect-dropdown",42),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(111,"div",32)(112,"input",43),e.mxI("ngModelChange",function(r){return e.DH7(i.daterange,r)||(i.daterange=r),r}),e.bIt("ngModelChange",function(r){return i.SearchByDate(r)}),e.k0s()(),e.j41(113,"div",32)(114,"button",44),e.bIt("click",function(){return i.search()}),e.nrm(115,"i",45),e.k0s(),e.j41(116,"button",46),e.bIt("click",function(){return i.reset()}),e.nrm(117,"i",47),e.k0s()()(),e.j41(118,"div",1)(119,"div",48)(120,"div",49)(121,"label",50)(122,"input",51),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(123," Auto Filter "),e.k0s(),e.j41(124,"label",52)(125,"input",51),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(126," Show Column "),e.k0s()()()()()()()()(),e.nrm(127,"ngx-spinner",53)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(38,me))("routerLink",e.lJ4(39,Pl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(40,me))("routerLink",e.lJ4(41,Rl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(42,me))("routerLink",e.lJ4(43,Gl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(44,me))("routerLink",e.lJ4(45,Yl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(46,me))("routerLink",e.lJ4(47,Hl)),e.R7$(12),e.SpI(" ",i.CurrentYear,""),e.R7$(4),e.JRh(i.result.totalHours),e.R7$(8),e.JRh(i.result.pmTotalHours),e.R7$(5),e.JRh(i.result.tlTotalHours),e.R7$(5),e.SpI(" ",i.result.developerTotalHours," "),e.R7$(5),e.SpI(" ",i.result.designerTotalHours," "),e.R7$(5),e.JRh(i.result.qaTotalHours),e.R7$(5),e.R50("ngModel",i.Project),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.R50("ngModel",i.daterange),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(2),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,k.Kn,k.mO,E.dg,D.et,w.b]})}return s})();const ge=()=>["active"],Ol=()=>["/Reports/YearlyResourceHours"],Jl=()=>["/Reports/YearlyClientHours"],$l=()=>["/Reports/AnnualBillableHours"],zl=()=>["/Reports/BillableProjectHours"],Xl=()=>["/Reports/MonthlyProjectHours"];function ql(s,l){if(1&s&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Kl(s,l){if(1&s&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Wl(s,l){if(1&s&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Zl(s,l){if(1&s&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function ec(s,l){if(1&s&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function tc(s,l){1&s&&(e.j41(0,"option",20),e.EFF(1,"-- Client --"),e.k0s())}function ic(s,l){if(1&s&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}function nc(s,l){1&s&&e.nrm(0,"i",47)}function oc(s,l){1&s&&e.nrm(0,"i",48)}function sc(s,l){1&s&&(e.j41(0,"div",51)(1,"h5"),e.EFF(2,"No Record Found!"),e.k0s()())}function rc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1,"PM Hours"),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.PMUserHours.length)}}function ac(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.PMUserHours.length),e.R7$(),e.JRh(t.pmHours)}}function lc(s,l){if(1&s&&(e.j41(0,"tr",57),e.DNE(1,rc,2,1,"th",46),e.j41(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.DNE(8,ac,2,2,"th",46),e.k0s()),2&s){const t=l.$implicit,n=l.index;e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.estimatedHours),e.R7$(2),e.JRh(t.actualHours),e.R7$(),e.Y8G("ngIf",0==n)}}function cc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1,"TL Hours"),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.TLUserHours.length)}}function hc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.TLUserHours.length),e.R7$(),e.JRh(t.tlHours)}}function dc(s,l){if(1&s&&(e.j41(0,"tr",57),e.DNE(1,cc,2,1,"th",46),e.j41(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.DNE(8,hc,2,2,"th",46),e.k0s()),2&s){const t=l.$implicit,n=l.index;e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.estimatedHours),e.R7$(2),e.JRh(t.actualHours),e.R7$(),e.Y8G("ngIf",0==n)}}function pc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1,"Developer Hours "),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.DVUserHours.length)}}function uc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.DVUserHours.length),e.R7$(),e.JRh(t.developerHours)}}function mc(s,l){if(1&s&&(e.j41(0,"tr",57),e.DNE(1,pc,2,1,"th",46),e.j41(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.DNE(8,uc,2,2,"th",46),e.k0s()),2&s){const t=l.$implicit,n=l.index;e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.estimatedHours),e.R7$(2),e.JRh(t.actualHours),e.R7$(),e.Y8G("ngIf",0==n)}}function gc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1,"Designer Hours "),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.DSUserHours.length)}}function fc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.DSUserHours.length),e.R7$(),e.JRh(t.designerHours)}}function Ac(s,l){if(1&s&&(e.j41(0,"tr",57),e.DNE(1,gc,2,1,"th",46),e.j41(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.DNE(8,fc,2,2,"th",46),e.k0s()),2&s){const t=l.$implicit,n=l.index;e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.estimatedHours),e.R7$(2),e.JRh(t.actualHours),e.R7$(),e.Y8G("ngIf",0==n)}}function _c(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1,"QA Hours"),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.QAUserHours.length)}}function yc(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=e.XpG(4).$implicit;e.BMQ("rowspan",t.UserTSData.QAUserHours.length),e.R7$(),e.JRh(t.qaHours)}}function Sc(s,l){if(1&s&&(e.j41(0,"tr",57),e.DNE(1,_c,2,1,"th",46),e.j41(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.DNE(8,yc,2,2,"th",46),e.k0s()),2&s){const t=l.$implicit,n=l.index;e.FCK("id","",t.employeeID,"_",t.designationID,""),e.R7$(),e.Y8G("ngIf",0==n),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.estimatedHours),e.R7$(2),e.JRh(t.actualHours),e.R7$(),e.Y8G("ngIf",0==n)}}function Dc(s,l){if(1&s&&(e.j41(0,"div",1)(1,"div",52)(2,"table",53)(3,"thead")(4,"tr")(5,"th"),e.EFF(6,"Resource Hours"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Name"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Estimated"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Actual"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Total"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,lc,9,8,"tr",54)(17,dc,9,8,"tr",54)(18,mc,9,8,"tr",54)(19,Ac,9,8,"tr",54)(20,Sc,9,8,"tr",54),e.k0s(),e.j41(21,"tfoot",55)(22,"tr")(23,"th"),e.EFF(24,"Total"),e.k0s(),e.nrm(25,"th",56),e.j41(26,"th")(27,"label"),e.EFF(28),e.k0s()()()()()()()),2&s){const t=e.XpG(2).$implicit;e.R7$(16),e.Y8G("ngForOf",t.UserTSData.PMUserHours),e.R7$(),e.Y8G("ngForOf",t.UserTSData.TLUserHours),e.R7$(),e.Y8G("ngForOf",t.UserTSData.DVUserHours),e.R7$(),e.Y8G("ngForOf",t.UserTSData.DSUserHours),e.R7$(),e.Y8G("ngForOf",t.UserTSData.QAUserHours),e.R7$(8),e.JRh(t.totalHours)}}function jc(s,l){if(1&s&&(e.j41(0,"tr")(1,"td"),e.DNE(2,sc,3,0,"div",49)(3,Dc,29,6,"div",50),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(),e.BMQ("colspan",9),e.R7$(),e.Y8G("ngIf",0===t.timeSheetCount),e.R7$(),e.Y8G("ngIf",t.timeSheetCount>0)}}function bc(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",42)(1,"tr")(2,"td",43),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.toggleExpand(i.ProjectID))}),e.DNE(3,nc,1,0,"i",44)(4,oc,1,0,"i",45),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s()(),e.DNE(21,jc,4,3,"tr",46),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.ProjectID),e.R7$(3),e.Y8G("ngIf",t.ProjectID!==i.expandedProject),e.R7$(),e.Y8G("ngIf",t.ProjectID===i.expandedProject),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.Project),e.R7$(2),e.JRh(t.pmHours),e.R7$(2),e.JRh(t.tlHours),e.R7$(2),e.JRh(t.developerHours),e.R7$(2),e.JRh(t.designerHours),e.R7$(2),e.JRh(t.qaHours),e.R7$(2),e.JRh(t.totalHours),e.R7$(),e.Y8G("ngIf",t.ProjectID===i.expandedProject)}}let Mc=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=i,this.router=o,this.monthlyTimeSheetService=r,this.cookieService=a,this.datePipe=d,this.title="User Wise Hours",this.FinancialYear=0,this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.currentPageNumber=1,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.timeSheetlistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.ProjectStatusList=[],this.ProjectStatus=0,this.selectedProjectStatus=[],this.ProjectStatusSetting={},this.filterModel=new ee,this.EmployeeDesignation=[],this.timesheetlist=[],this.Usertimesheetlist=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.translations={indexColumn:"Index column",expandColumn:"Expand column",selectColumn:"Select column",paginationLimit:"Max results",paginationRange:"Result range"},this.daterange="",this.StartDate="",this.EndDate="",this.expandedProject=null,this.currentPageNumber=1,this.datagrid=n,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.typeSelected="timer",this.sortExpression="MonthlyTimeSheetID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.monthCount=12}ngOnInit(){this.spinner.show(),"Sales"==this.currentUser.designation&&(this.AddAccess=!1),this.EmployeeDesignation={ProjectPM:"ProjectPM",ProjectTL:"ProjectTL",ProjectDeveloper:"ProjectDeveloper",ProjectDesigner:"ProjectDesigner",ProjectQA:"ProjectQA",ProjectSales:"ProjectSales",ReportsTo:"ReportsTo"},this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.ProjectStatusSetting={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};const t=this.router.parseUrl(this.router.url);void 0!==t.queryParams.month&&(this.Months=+t.queryParams.month),void 0!==t.queryParams.department&&(this.Department=+t.queryParams.department),void 0!==t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showTimeSheetForm(){this.router.navigate(["/SmartDesk/MonthlyTimeSheet"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{0==this.selectedProjectStatus.length&&this.GetProjectStatus(),this.getResourceTimeSheetList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}GetProjectStatus(){let t=new Ie,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectStatus",t,{headers:n}).subscribe(o=>{this.ProjectStatusList=o,this.selectedProjectStatus=this.ProjectStatusList.filter(r=>[1,2,4].includes(r.projectStatusID)),this.getResourceTimeSheetList()},o=>{this.getRowOnError(o)})}CheckActionAccess(){return"Sales"!=this.currentUser.designation}getResourceTimeSheetList(){this.spinner.show();let t=new ee;t.Project=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=+this.FinancialYear,t.Month=+this.Months,t.ProjectType=+this.ProjectType,t.Technology=+this.Technology,t.Client=+this.Client,t.Department=+this.Department,t.CompanyID=this.currentUser.companyID,t.StartDate=this.StartDate,t.EndDate=this.EndDate,null==this.Internal&&(this.Internal=!1),t.Internal=this.Internal;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let a=JSON.parse(n.queryParams.filterModel);""!=a.EmployeeID&&null!=a.EmployeeID&&(t.EmployeeID=a.EmployeeID)}else t.EmployeeID=this.selectedItems.map(a=>a.id).join(",");if(null!=n.queryParams.filterModel){let a=JSON.parse(n.queryParams.filterModel);t.ProjectStatus=""!=a.ProjectStatus&&null!=a.ProjectStatus?a.ProjectStatus:null!=this.selectedProjectStatus?this.selectedProjectStatus.map(d=>d.projectStatusID).join(","):""}else t.ProjectStatus=null!=this.selectedProjectStatus?this.selectedProjectStatus.map(a=>a.projectStatusID).join(","):"";this.filterModel=t;let o,r,i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return 0==this.Internal?(o=p.apiUrl+"api/MonthlyTimeSheet/GetBillableResourceHours",r=JSON.stringify(t)):(this.ClientList=null,o=p.apiUrl+"api/MonthlyTimeSheet/GetInternalProjectHours",r=JSON.stringify(t)),this.http.post(o,r,{headers:i}).subscribe({next:a=>{0==this.Internal?this.getRowOnSuccess(a):this.getInternalProjectSuccess(a),this.spinner.hide()},error:a=>{this.getRowOnError(a),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,""==this.daterange&&(this.FinancialYear=t.financialYear),this.pageTotal=0,t.projectTimeSheetListModel.forEach(i=>{i.totalHours=0,i.totalHours=i.pmHours+i.tlHours+i.developerHours+i.designerHours+i.qaHours,this.pageTotal=this.pageTotal+i.totalHours}),this.timesheetlist=t.projectTimeSheetListModel,this.Usertimesheetlist=t.userTimeSheetListModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID==t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.timesheetlist,this.Usertimesheetlist),this.datagrid.databind(n),this.totalRows=this.timeSheetlistmonthWise.length,this.fillFilterModel()}getInternalProjectSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,""==this.daterange&&(this.FinancialYear=t.financialYear),t.internalProjectModel.forEach(i=>{(6==i.employeeDesignation||7==i.employeeDesignation)&&(i.employeeDesignation="ProjectDeveloper"),(4==i.employeeDesignation||10==i.employeeDesignation)&&(i.employeeDesignation="ProjectTL"),8==i.employeeDesignation&&(i.employeeDesignation="ProjectDesigner"),9==i.employeeDesignation&&(i.employeeDesignation="ProjectQA")}),this.pageTotal=0,this.timesheetlist=t.interProjectHoursListModel,this.Usertimesheetlist=t.internalProjectModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID==t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel.filter(i=>48===i.clientID),this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.Usertimesheetlist.forEach(i=>{var o=i.estimatedHours.split(":");i.estimatedHours=o[0]+":"+o[1];var r=i.actualHours.split(":");i.actualHours=r[0]+":"+r[1]}),this.createJsonResultForTable(this.MonthList,this.timesheetlist,this.Usertimesheetlist),this.datagrid.databind(n),this.totalRows=this.timeSheetlistmonthWise.length,this.fillFilterModel()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}getRowOnError(t){this.runningSearch=!1}createJsonResultForTable(t,n,i){this.timeSheetlistmonthWise=[],n.forEach((o,r)=>{let a=o.projectID,d=i.filter(A=>A.projectID==a),g={PMUserHours:d.filter(A=>A.employeeDesignation==this.EmployeeDesignation.ProjectPM),TLUserHours:d.filter(A=>A.employeeDesignation==this.EmployeeDesignation.ProjectTL),DVUserHours:d.filter(A=>A.employeeDesignation==this.EmployeeDesignation.ProjectDeveloper),DSUserHours:d.filter(A=>A.employeeDesignation==this.EmployeeDesignation.ProjectDesigner),QAUserHours:d.filter(A=>A.employeeDesignation==this.EmployeeDesignation.ProjectQA)};this.timeSheetlistmonthWise.push({MonthID:o.monthID,Project:o.project,pmHours:o.pmHours,tlHours:o.tlHours,developerHours:o.developerHours,designerHours:o.designerHours,qaHours:o.qaHours,totalHours:o.totalHours,timeSheetCount:n.length,UserTSData:g})})}search(){this.currentPageNumber=1,this.delaySearch=!1,this.timeSheetlistmonthWise=[],this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.daterange="",this.StartDate="",this.EndDate="",this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectStatus(t){0!=this.autoFilter&&""!=t&&(this.ProjectStatus=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}reset(){this.cookieService.delete("filterData"),this.Project="",this.Internal=!1,this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.daterange="",this.StartDate="",this.EndDate="",this.ProjectStatus=0,this.selectedProjectStatus=this.ProjectStatusList.filter(t=>1==t.projectStatusID||2==t.projectStatusID||4==t.projectStatusID),this.clearFilterUrl(),this.executeSearch()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}getCookiesFilterData(t){if(""!=t&&null!=t){if(t=JSON.parse(t),this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.ProjectStatus&&null!=t.ProjectStatus){let n=[];t.ProjectStatus.split(",").forEach(o=>{n.push(this.ProjectStatusList.find(r=>r.projectStatusID===parseInt(o)))}),this.selectedProjectStatus=n}if(""!=t.EmployeeID&&null!=t.EmployeeID){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}}SearchByDate(t){0!=this.autoFilter&&""!=t&&(this.StartDate=this.datePipe.transform(t[0],"yyyy-MM-dd"),this.EndDate=this.datePipe.transform(t[1],"yyyy-MM-dd"),this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}toggleExpand(t){this.expandedProject=this.expandedProject===t?null:t}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(V),e.rXU(S.O),e.rXU(u.vh))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},features:[e.Jv_([V,u.vh])],decls:104,vars:49,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],[1,"nav-icon","icon-user-following"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search Project",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value","0","selected","","disabled","",4,"ngIf"],["type","text","placeholder","-- Date & Month --","bsDaterangepicker","",1,"form-control",3,"ngModelChange","ngModel"],[2,"margin-right","8px"],["type","checkbox",3,"ngModelChange","click","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"table","table-responsive-sm","outerTable"],[3,"id",4,"ngFor","ngForOf"],[3,"datagridEvent","rows","pageSize"],["size","medium",3,"type"],[3,"value"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],["class","search_no_results",4,"ngIf"],["class","row",4,"ngIf"],[1,"search_no_results"],[1,"col-md-12","table-responsive"],["id","tblMonthlyTS",1,"table","table-responsive-sm","MonthlyRSTM"],["class","projecthours",3,"id",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #c8ced3"],["colspan","3"],[1,"projecthours",3,"id"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Project Wise Hours "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," Resource Yearly Hours "),e.k0s()(),e.j41(16,"li",10)(17,"a",11),e.nrm(18,"i",13),e.EFF(19," Client Yearly Hours "),e.k0s()(),e.j41(20,"li",10)(21,"a",14),e.nrm(22,"i",12),e.EFF(23," Project Wise Hours "),e.k0s()(),e.j41(24,"li",10)(25,"a",11),e.nrm(26,"i",13),e.EFF(27," User wise Hours "),e.k0s()(),e.j41(28,"li",10)(29,"a",15),e.nrm(30,"i",16),e.EFF(31," Month Wise Hours "),e.k0s()()()()(),e.j41(32,"div",1)(33,"div",17)(34,"input",18),e.mxI("ngModelChange",function(r){return e.DH7(i.Project,r)||(i.Project=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(35,"div",17)(36,"select",19),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.j41(37,"option",20),e.EFF(38,"-- Financial Year --"),e.k0s(),e.DNE(39,ql,2,2,"option",21),e.k0s()(),e.j41(40,"div",17)(41,"select",22),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(42,"option",20),e.EFF(43,"-- Month --"),e.k0s(),e.DNE(44,Kl,2,2,"option",21),e.k0s()(),e.j41(45,"div",17)(46,"select",23),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(47,"option",20),e.EFF(48,"-- Project Type --"),e.k0s(),e.DNE(49,Wl,2,2,"option",21),e.k0s()(),e.j41(50,"div",17)(51,"ng-multiselect-dropdown",24),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedProjectStatus,r)||(i.selectedProjectStatus=r),r}),e.k0s()(),e.j41(52,"div",17)(53,"select",25),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(54,"option",20),e.EFF(55,"-- Department --"),e.k0s(),e.DNE(56,Zl,2,2,"option",21),e.k0s()(),e.j41(57,"div",17)(58,"select",26),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(59,"option",20),e.EFF(60,"-- Technology --"),e.k0s(),e.DNE(61,ec,2,2,"option",21),e.k0s()(),e.j41(62,"div",17)(63,"select",27),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.DNE(64,tc,2,0,"option",28)(65,ic,2,2,"option",21),e.k0s()(),e.j41(66,"div",17)(67,"ng-multiselect-dropdown",24),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(68,"div",17)(69,"input",29),e.mxI("ngModelChange",function(r){return e.DH7(i.daterange,r)||(i.daterange=r),r}),e.bIt("ngModelChange",function(r){return i.SearchByDate(r)}),e.k0s()(),e.j41(70,"div",17)(71,"label",30)(72,"input",31),e.mxI("ngModelChange",function(r){return e.DH7(i.Internal,r)||(i.Internal=r),r}),e.bIt("click",function(){return i.executeSearch()}),e.k0s(),e.EFF(73," Internal Projects "),e.k0s()(),e.j41(74,"div",17)(75,"button",32),e.bIt("click",function(){return i.search()}),e.nrm(76,"i",33),e.k0s(),e.j41(77,"button",34),e.bIt("click",function(){return i.reset()}),e.nrm(78,"i",35),e.k0s()()(),e.j41(79,"div",1)(80,"div",36)(81,"table",37)(82,"thead")(83,"tr"),e.nrm(84,"th"),e.j41(85,"th"),e.EFF(86,"#"),e.k0s(),e.j41(87,"th"),e.EFF(88,"Project"),e.k0s(),e.j41(89,"th"),e.EFF(90,"PM Hours"),e.k0s(),e.j41(91,"th"),e.EFF(92,"TL Hours"),e.k0s(),e.j41(93,"th"),e.EFF(94,"Developer Hours"),e.k0s(),e.j41(95,"th"),e.EFF(96,"Designer Hours"),e.k0s(),e.j41(97,"th"),e.EFF(98,"QA Hours"),e.k0s(),e.j41(99,"th"),e.EFF(100,"Total Hours"),e.k0s()()(),e.DNE(101,bc,22,12,"tbody",38),e.k0s(),e.j41(102,"datagrid",39),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(103,"ngx-spinner",40)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(39,ge))("routerLink",e.lJ4(40,Ol)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(41,ge))("routerLink",e.lJ4(42,Jl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(43,ge))("routerLink",e.lJ4(44,$l)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(45,ge))("routerLink",e.lJ4(46,zl)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(47,ge))("routerLink",e.lJ4(48,Xl)),e.R7$(5),e.R50("ngModel",i.Project),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.Y8G("placeholder","-- Project Status --")("data",i.ProjectStatusList),e.R50("ngModel",i.selectedProjectStatus),e.Y8G("settings",i.ProjectStatusSetting),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.Y8G("disabled",1==i.Internal),e.R7$(),e.Y8G("ngIf",0==i.Internal),e.R7$(),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.R50("ngModel",i.daterange),e.R7$(3),e.R50("ngModel",i.Internal),e.R7$(29),e.Y8G("ngForOf",i.timeSheetlistmonthWise),e.R7$(),e.Y8G("rows",i.timesheetlist)("pageSize",i.pageSize),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,k.Kn,k.mO,E.dg,D.et,w.b,_],encapsulation:2})}return s})();const fe=()=>["active"],Cc=()=>["/Reports/YearlyResourceHours"],kc=()=>["/Reports/YearlyClientHours"],Ic=()=>["/Reports/AnnualBillableHours"],vc=()=>["/Reports/BillableProjectHours"],Ec=()=>["/Reports/MonthlyProjectHours"];function Fc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Tc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function wc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Pc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Rc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function Gc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}let Yc=(()=>{class s{constructor(t,n,i,o,r){this.http=t,this.spinner=n,this.router=i,this.monthlyTimeSheetService=o,this.cookieService=r,this.title="User Wise Hours",this.FinancialYear=0,this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.currentPageNumber=1,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.timeSheetlistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new ee,this.EmployeeDesignation=[],this.monthlyHourslist=[],this.monthlyProjectHoursList=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=1e3,this.sortDirection="DESC",this.sortExpression="MonthlyTimeSheetID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.monthCount=12,this.typeSelected="timer"}ngOnInit(){this.spinner.show(),"Sales"===this.currentUser.designation&&(this.AddAccess=!1),this.EmployeeDesignation={ProjectPM:"ProjectPM",ProjectTL:"ProjectTL",ProjectDeveloper:"ProjectDeveloper",ProjectDesigner:"ProjectDesigner",ProjectQA:"ProjectQA",ProjectSales:"ProjectSales",ReportsTo:"ReportsTo"},this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};const t=this.router.parseUrl(this.router.url);void 0!==t.queryParams.month&&(this.Months=+t.queryParams.month),void 0!==t.queryParams.department&&(this.Department=+t.queryParams.department),void 0!==t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showTimeSheetForm(){this.router.navigate(["/SmartDesk/MonthlyTimeSheet"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getMonthlyHoursTimeSheetList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}CheckActionAccess(){return"BDM"!=this.currentUser.designation}getMonthlyHoursTimeSheetList(){this.spinner.show();let t=new ee;t.Project=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=+this.FinancialYear,t.Month=+this.Months,t.ProjectType=+this.ProjectType,t.Technology=+this.Technology,t.Client=+this.Client,t.Department=+this.Department,t.CompanyID=this.currentUser.companyID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let a=JSON.parse(n.queryParams.filterModel);""!=a.EmployeeID&&null!=a.EmployeeID&&(t.EmployeeID=a.EmployeeID)}else t.EmployeeID=this.selectedItems.map(a=>a.id).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()}),o=p.apiUrl+"api/MonthlyTimeSheet/GetMonthWiseProjectHoursReport",r=JSON.stringify(t);return this.http.post(o,r,{headers:i}).subscribe(a=>{this.getRowOnSuccess(a),this.spinner.hide()},a=>{this.getRowOnError(a),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.pageTotal=0,this.monthlyProjectHoursList=t.monthlyProjectHoursModel,this.monthlyHourslist=t.monthlyHoursModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID===t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.monthlyHourslist,this.monthlyProjectHoursList),this.totalRows=this.timeSheetlistmonthWise.length,this.fillFilterModel()}ShowHideColumn(t){this.showColumn=t,this.timeSheetlistmonthWise=[],this.ngOnInit()}getRowOnError(t){this.runningSearch=!1}createJsonResultForTable(t,n,i){this.timeSheetlistmonthWise=[],t.forEach((o,r)=>{let a=0,d=0,g=o.monthID,y=i.filter(b=>b.month==g),A=[];y.forEach((b,Y)=>{let T=n.filter(P=>P.month==g&&P.projectID==b.projectID);a+=b.monthlyActualHours,d+=b.monthlyEstimatedHours,A.push({ProjectID:b.projectID,Project:b.project,Month:b.month,MonthlyActualHours:b.monthlyActualHours,MonthlyEstimatedHours:b.monthlyEstimatedHours,EmpProjectData:T,EmpDataLength:T.length})}),this.timeSheetlistmonthWise.push({MonthID:o.monthID,Month:o.name,MActualHours:a,MEstimatedHours:d,timeSheetCount:A.length,ProjectData:A})})}search(){this.spinner.show(),this.currentPageNumber=1,this.delaySearch=!1,this.timeSheetlistmonthWise=[],this.clearFilterUrl(),this.executeSearch(),this.spinner.hide()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}reset(){this.cookieService.delete("filterData"),this.Project="",this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.clearFilterUrl(),this.executeSearch()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(V),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],features:[e.Jv_([V])],decls:124,vars:47,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],[1,"nav-icon","icon-user-following"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],[1,"col-sm-6","col-lg-4"],[1,"card-body","p-0"],[1,"col-6","pr-0"],[1,"bg-primary","text-center","p-2"],[1,"icon-speedometer","bg-primary","font-2xl"],[1,"text-uppercase","font-weight-bold","small","bg-primary"],[1,"col-6","bg-light"],[1,"text-center","p-2"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"col-sm-6","col-lg-8"],[1,"brand-card"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search Project",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems","id","emp-ddl",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right","pl-2"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Month Wise Hours "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," Resource Yearly Hours "),e.k0s()(),e.j41(16,"li",10)(17,"a",11),e.nrm(18,"i",13),e.EFF(19," Client Yearly Hours "),e.k0s()(),e.j41(20,"li",10)(21,"a",14),e.nrm(22,"i",12),e.EFF(23," Project Wise Hours "),e.k0s()(),e.j41(24,"li",10)(25,"a",11),e.nrm(26,"i",13),e.EFF(27," User wise Hours "),e.k0s()(),e.j41(28,"li",10)(29,"a",15),e.nrm(30,"i",16),e.EFF(31," Month Wise Hours "),e.k0s()()()()(),e.j41(32,"div",1)(33,"div",17)(34,"div",3)(35,"div",18)(36,"div",1)(37,"div",19)(38,"div",20),e.nrm(39,"i",21),e.j41(40,"div",22),e.EFF(41),e.k0s()()(),e.j41(42,"div",23)(43,"div",24)(44,"div",25),e.EFF(45),e.k0s(),e.j41(46,"div",26),e.EFF(47,"Total "),e.k0s()()()()()()(),e.j41(48,"div",27)(49,"div",28)(50,"div",29)(51,"div")(52,"div",30),e.EFF(53),e.k0s(),e.j41(54,"div",31),e.EFF(55,"PM/PL"),e.k0s()(),e.j41(56,"div")(57,"div",30),e.EFF(58),e.k0s(),e.j41(59,"div",31),e.EFF(60,"TL"),e.k0s()(),e.j41(61,"div")(62,"div",30),e.EFF(63),e.k0s(),e.j41(64,"div",31),e.EFF(65,"Developer"),e.k0s()(),e.j41(66,"div")(67,"div",30),e.EFF(68),e.k0s(),e.j41(69,"div",31),e.EFF(70,"Designer"),e.k0s()(),e.j41(71,"div")(72,"div",30),e.EFF(73),e.k0s(),e.j41(74,"div",31),e.EFF(75,"QA"),e.k0s()()()()()(),e.j41(76,"div",1)(77,"div",32)(78,"input",33),e.mxI("ngModelChange",function(r){return e.DH7(i.Project,r)||(i.Project=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(79,"div",32)(80,"select",34),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(81,Fc,2,2,"option",35),e.k0s()(),e.j41(82,"div",32)(83,"select",36),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(84,"option",37),e.EFF(85,"-- Month --"),e.k0s(),e.DNE(86,Tc,2,2,"option",35),e.k0s()(),e.j41(87,"div",32)(88,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(89,"option",37),e.EFF(90,"-- Project Type --"),e.k0s(),e.DNE(91,wc,2,2,"option",35),e.k0s()(),e.j41(92,"div",32)(93,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(94,"option",37),e.EFF(95,"-- Department --"),e.k0s(),e.DNE(96,Pc,2,2,"option",35),e.k0s()(),e.j41(97,"div",32)(98,"select",40),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(99,"option",37),e.EFF(100,"-- Technology --"),e.k0s(),e.DNE(101,Rc,2,2,"option",35),e.k0s()(),e.j41(102,"div",32)(103,"select",41),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(104,"option",37),e.EFF(105,"-- Client --"),e.k0s(),e.DNE(106,Gc,2,2,"option",35),e.k0s()(),e.j41(107,"div",32)(108,"ng-multiselect-dropdown",42),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s(),e.j41(109,"button",43),e.bIt("click",function(){return i.search()}),e.nrm(110,"i",44),e.k0s(),e.j41(111,"button",45),e.bIt("click",function(){return i.reset()}),e.nrm(112,"i",46),e.k0s()(),e.nrm(113,"div",32),e.k0s(),e.j41(114,"div",1)(115,"div",47)(116,"div",48)(117,"label",49)(118,"input",50),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(119," Auto Filter "),e.k0s(),e.j41(120,"label",51)(121,"input",50),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(122," Show Column "),e.k0s()()()()()()()()(),e.nrm(123,"ngx-spinner",52)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(37,fe))("routerLink",e.lJ4(38,Cc)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(39,fe))("routerLink",e.lJ4(40,kc)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(41,fe))("routerLink",e.lJ4(42,Ic)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(43,fe))("routerLink",e.lJ4(44,vc)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(45,fe))("routerLink",e.lJ4(46,Ec)),e.R7$(12),e.SpI(" ",i.CurrentYear,""),e.R7$(4),e.JRh(i.result.totalHours),e.R7$(8),e.JRh(i.result.pmTotalHours),e.R7$(5),e.JRh(i.result.tlTotalHours),e.R7$(5),e.SpI(" ",i.result.developerTotalHours," "),e.R7$(5),e.SpI(" ",i.result.designerTotalHours," "),e.R7$(5),e.JRh(i.result.qaTotalHours),e.R7$(5),e.R50("ngModel",i.Project),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(2),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b],encapsulation:2})}return s})();const Pe=()=>["active"],Hc=()=>["/Reports/AnnualBillableHours"],Nc=()=>["/Reports/BillableProjectHours"],Lc=()=>["/Reports/MonthlyProjectHours"],Bc=()=>["/Reports/MonthlyUserProject"];function Uc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Vc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function xc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Qc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Oc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function Jc(s,l){if(1&s&&(e.j41(0,"option",53),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.clientID),e.R7$(),e.SpI(" ",t.name," ")}}let $c=(()=>{class s{constructor(t,n,i,o,r){this.http=t,this.spinner=n,this.router=i,this.monthlyTimeSheetService=o,this.cookieService=r,this.title="User Wise Hours",this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.currentPageNumber=1,this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.Months=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.timeSheetlistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new ee,this.EmployeeDesignation=[],this.monthlyHourslist=[],this.monthlyProjectHoursList=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=1e3,this.typeSelected="timer",this.sortDirection="DESC",this.sortExpression="MonthlyTimeSheetID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.monthCount=12}ngOnInit(){this.spinner.show(),"Sales"===this.currentUser.designation&&(this.AddAccess=!1),this.EmployeeDesignation={ProjectPM:"ProjectPM",ProjectTL:"ProjectTL",ProjectDeveloper:"ProjectDeveloper",ProjectDesigner:"ProjectDesigner",ProjectQA:"ProjectQA",ProjectSales:"ProjectSales",ReportsTo:"ReportsTo"},this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};const t=this.router.parseUrl(this.router.url);void 0!==t.queryParams.month&&(this.Months=+t.queryParams.month),void 0!==t.queryParams.department&&(this.Department=+t.queryParams.department),void 0!==t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getMonthlyHoursTimeSheetList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}CheckActionAccess(){return"Sales"!=this.currentUser.designation}getMonthlyHoursTimeSheetList(){this.spinner.show();let t=new ee;t.Project=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=this.FinancialYear,t.Month=this.Months,t.ProjectType=this.ProjectType,t.Technology=this.Technology,t.Client=this.Client,t.Department=this.Department,t.CompanyID=this.currentUser.companyID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let a=JSON.parse(n.queryParams.filterModel);""!=a.EmployeeID&&null!=a.EmployeeID&&(t.EmployeeID=a.EmployeeID)}else t.EmployeeID=this.selectedItems.map(a=>a.id).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()}),o=p.apiUrl+"api/MonthlyTimeSheet/GetMonthlyUserProjectHoursReport",r=JSON.stringify(t);return this.http.post(o,r,{headers:i}).subscribe(a=>{this.getRowOnSuccess(a),this.spinner.hide()},a=>{this.getRowOnError(a),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.pageTotal=0,this.monthlyProjectHoursList=t.monthlyUserProjectHoursModel,this.monthlyHourslist=t.monthlyUserHoursModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID===t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.monthlyHourslist,this.monthlyProjectHoursList),this.totalRows=this.timeSheetlistmonthWise.length,this.fillFilterModel()}ShowHideColumn(t){this.showColumn=t,this.timeSheetlistmonthWise=[],this.ngOnInit()}getRowOnError(t){this.runningSearch=!1}createJsonResultForTable(t,n,i){this.timeSheetlistmonthWise=[],t.forEach((o,r)=>{let a=0,d=0,g=o.monthID,y=i.filter(b=>b.month==g),A=[];y.forEach((b,Y)=>{let T=n.filter(P=>P.month==g&&P.projectID==b.projectID);a+=b.monthlyActualHours,d+=b.monthlyEstimatedHours,A.push({ProjectID:b.projectID,Project:b.project,Month:b.month,MonthlyActualHours:b.monthlyActualHours,MonthlyEstimatedHours:b.monthlyEstimatedHours,EmpProjectData:T,EmpDataLength:T.length})}),this.timeSheetlistmonthWise.push({MonthID:o.monthID,Month:o.name,MActualHours:a,MEstimatedHours:d,timeSheetCount:A.length,ProjectData:A})})}search(){this.currentPageNumber=1,this.delaySearch=!1,this.timeSheetlistmonthWise=[],this.clearFilterUrl(),this.executeSearch()}ArGroupBy(t,n){var i={};return t.forEach(function(o){var r=JSON.stringify(n(o));i[r]=i[r]||[],i[r].push(o)}),Object.keys(i).map(function(o){return i[o]})}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}reset(){this.cookieService.delete("filterData"),this.Project="",this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Client=0,this.Department=0,this.clearFilterUrl(),this.executeSearch()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(V),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-monthly-user-project"]],features:[e.Jv_([V])],decls:120,vars:43,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-user-following"],[1,"fa","fa-hourglass-half"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"col-sm-6","col-lg-4"],[1,"card-body","p-0"],[1,"col-6","pr-0"],[1,"bg-primary","text-center","p-2"],[1,"icon-speedometer","bg-primary","font-2xl"],[1,"text-uppercase","font-weight-bold","small","bg-primary"],[1,"col-6","bg-light"],[1,"text-center","p-2"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"col-sm-6","col-lg-8"],[1,"brand-card"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search Project",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","Client","id","Client",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems","id","emp-ddl",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right","pl-2"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," User Wise Monthly Hours "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," Project Wise Hours "),e.k0s()(),e.j41(16,"li",10)(17,"a",13),e.nrm(18,"i",14),e.EFF(19," User wise Hours "),e.k0s()(),e.j41(20,"li",10)(21,"a",11),e.nrm(22,"i",15),e.EFF(23," Month Wise Hours "),e.k0s()(),e.j41(24,"li",10)(25,"a",16),e.nrm(26,"i",15),e.EFF(27," User Wise Monthly Hours "),e.k0s()()()()(),e.j41(28,"div",1)(29,"div",17)(30,"div",3)(31,"div",18)(32,"div",1)(33,"div",19)(34,"div",20),e.nrm(35,"i",21),e.j41(36,"div",22),e.EFF(37),e.k0s()()(),e.j41(38,"div",23)(39,"div",24)(40,"div",25),e.EFF(41),e.k0s(),e.j41(42,"div",26),e.EFF(43,"Total "),e.k0s()()()()()()(),e.j41(44,"div",27)(45,"div",28)(46,"div",29)(47,"div")(48,"div",30),e.EFF(49),e.k0s(),e.j41(50,"div",31),e.EFF(51,"PM/PL"),e.k0s()(),e.j41(52,"div")(53,"div",30),e.EFF(54),e.k0s(),e.j41(55,"div",31),e.EFF(56,"TL"),e.k0s()(),e.j41(57,"div")(58,"div",30),e.EFF(59),e.k0s(),e.j41(60,"div",31),e.EFF(61,"Developer"),e.k0s()(),e.j41(62,"div")(63,"div",30),e.EFF(64),e.k0s(),e.j41(65,"div",31),e.EFF(66,"Designer"),e.k0s()(),e.j41(67,"div")(68,"div",30),e.EFF(69),e.k0s(),e.j41(70,"div",31),e.EFF(71,"QA"),e.k0s()()()()()(),e.j41(72,"div",1)(73,"div",32)(74,"input",33),e.mxI("ngModelChange",function(r){return e.DH7(i.Project,r)||(i.Project=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(75,"div",32)(76,"select",34),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(77,Uc,2,2,"option",35),e.k0s()(),e.j41(78,"div",32)(79,"select",36),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(80,"option",37),e.EFF(81,"-- Month --"),e.k0s(),e.DNE(82,Vc,2,2,"option",35),e.k0s()(),e.j41(83,"div",32)(84,"select",38),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(85,"option",37),e.EFF(86,"-- Project Type --"),e.k0s(),e.DNE(87,xc,2,2,"option",35),e.k0s()(),e.j41(88,"div",32)(89,"select",39),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(90,"option",37),e.EFF(91,"-- Department --"),e.k0s(),e.DNE(92,Qc,2,2,"option",35),e.k0s()(),e.j41(93,"div",32)(94,"select",40),e.mxI("ngModelChange",function(r){return e.DH7(i.Technology,r)||(i.Technology=r),r}),e.bIt("ngModelChange",function(r){return i.SearchTechnology(r)}),e.j41(95,"option",37),e.EFF(96,"-- Technology --"),e.k0s(),e.DNE(97,Oc,2,2,"option",35),e.k0s()(),e.j41(98,"div",32)(99,"select",41),e.mxI("ngModelChange",function(r){return e.DH7(i.Client,r)||(i.Client=r),r}),e.bIt("ngModelChange",function(r){return i.SearchClient(r)}),e.j41(100,"option",37),e.EFF(101,"-- Client --"),e.k0s(),e.DNE(102,Jc,2,2,"option",35),e.k0s()(),e.j41(103,"div",32)(104,"ng-multiselect-dropdown",42),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s(),e.j41(105,"button",43),e.bIt("click",function(){return i.search()}),e.nrm(106,"i",44),e.k0s(),e.j41(107,"button",45),e.bIt("click",function(){return i.reset()}),e.nrm(108,"i",46),e.k0s()(),e.nrm(109,"div",32),e.k0s(),e.j41(110,"div",1)(111,"div",47)(112,"div",48)(113,"label",49)(114,"input",50),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(115," Auto Filter "),e.k0s(),e.j41(116,"label",51)(117,"input",50),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(118," Show Column "),e.k0s()()()()()()()()(),e.nrm(119,"ngx-spinner",52)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(35,Pe))("routerLink",e.lJ4(36,Hc)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(37,Pe))("routerLink",e.lJ4(38,Nc)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(39,Pe))("routerLink",e.lJ4(40,Lc)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(41,Pe))("routerLink",e.lJ4(42,Bc)),e.R7$(12),e.SpI(" ",i.CurrentYear,""),e.R7$(4),e.JRh(i.result.totalHours),e.R7$(8),e.JRh(i.result.pmTotalHours),e.R7$(5),e.JRh(i.result.tlTotalHours),e.R7$(5),e.SpI(" ",i.result.developerTotalHours," "),e.R7$(5),e.SpI(" ",i.result.designerTotalHours," "),e.R7$(5),e.JRh(i.result.qaTotalHours),e.R7$(5),e.R50("ngModel",i.Project),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.R50("ngModel",i.Client),e.R7$(3),e.Y8G("ngForOf",i.ClientList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(2),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b],encapsulation:2})}return s})();function zc(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Xc(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function qc(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Kc(s,l){1&s&&e.nrm(0,"i",39)}function Wc(s,l){1&s&&e.nrm(0,"i",40)}function Zc(s,l){1&s&&(e.j41(0,"td")(1,"div",41)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",8)}function eh(s,l){1&s&&e.nrm(0,"i",39)}function th(s,l){1&s&&e.nrm(0,"i",40)}function ih(s,l){1&s&&(e.j41(0,"td")(1,"div",41)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",6)}function nh(s,l){if(1&s&&(e.j41(0,"tbody")(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s()()()),2&s){const t=l.$implicit,n=l.index;e.R7$(3),e.JRh(n+1),e.R7$(2),e.JRh(t.Project),e.R7$(2),e.JRh(t.MonthlyEstimatedHours),e.R7$(2),e.JRh(t.MonthlyActualHours)}}function oh(s,l){if(1&s&&(e.j41(0,"table",30)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"#"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Project"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Estimated Hours"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Actual Hours"),e.k0s()()(),e.DNE(11,nh,10,4,"tbody",43),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(11),e.Y8G("ngForOf",t.EmpProjecData)}}function sh(s,l){if(1&s&&(e.j41(0,"td"),e.DNE(1,oh,12,1,"table",42),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(5);e.BMQ("colspan",6),e.R7$(),e.Y8G("ngIf",t.EmployeeID==n.expandedEmp)}}function rh(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",34)(1,"tr")(2,"td",35),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG(5);return e.Njj(o.CollapsEmp(i.EmployeeID))}),e.DNE(3,eh,1,0,"i",36)(4,th,1,0,"i",37),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s()(),e.j41(13,"tr"),e.DNE(14,ih,4,1,"td",38)(15,sh,2,2,"td",38),e.k0s()()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG(5);e.FS9("id",t.MonthID),e.R7$(3),e.Y8G("ngIf",t.EmployeeID!==i.expandedEmp),e.R7$(),e.Y8G("ngIf",t.EmployeeID===i.expandedEmp),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.EmployeeName),e.R7$(2),e.JRh(t.MEstimatedHours),e.R7$(2),e.JRh(t.MActualHours),e.R7$(2),e.Y8G("ngIf",t.EmployeeID==i.expandedEmp&&t.EmpProjecDataCount<1),e.R7$(),e.Y8G("ngIf",t.EmployeeID==i.expandedEmp&&t.EmpProjecDataCount>0)}}function ah(s,l){if(1&s&&(e.j41(0,"table",30)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5,"#"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Employee"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Estimated Hours"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Actual Hours"),e.k0s()()(),e.DNE(12,rh,16,9,"tbody",31),e.k0s()),2&s){const t=e.XpG(3).$implicit;e.R7$(12),e.Y8G("ngForOf",t.ProjectData)}}function lh(s,l){if(1&s&&(e.j41(0,"td"),e.DNE(1,ah,13,1,"table",42),e.k0s()),2&s){const t=e.XpG(2).$implicit,n=e.XpG();e.BMQ("colspan",8),e.R7$(),e.Y8G("ngIf",t.MonthID===n.expandedMonth)}}function ch(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,Zc,4,1,"td",38)(2,lh,2,2,"td",38),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("ngIf",t.MonthID===n.expandedMonth&&t.ProjectDataCount<1),e.R7$(),e.Y8G("ngIf",t.MonthID===n.expandedMonth&&t.ProjectDataCount>0)}}function hh(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",34)(1,"tr")(2,"td",35),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.Collaps(i.MonthID))}),e.DNE(3,Kc,1,0,"i",36)(4,Wc,1,0,"i",37),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s()(),e.DNE(19,ch,3,2,"tr",38),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.MonthID),e.R7$(3),e.Y8G("ngIf",t.MonthID!==i.expandedMonth),e.R7$(),e.Y8G("ngIf",t.MonthID===i.expandedMonth),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.Month),e.R7$(2),e.JRh(t.TotalResource),e.R7$(2),e.JRh(t.BillableResource),e.R7$(2),e.JRh(t.FreeResource),e.R7$(2),e.JRh(t.ActualBillableHrs),e.R7$(2),e.JRh(t.ActualFreeHrs),e.R7$(),e.Y8G("ngIf",t.MonthID===i.expandedMonth)}}let dh=(()=>{class s{constructor(t,n,i,o,r){this.http=t,this.router=n,this.spinner=i,this.monthlyTimeSheetService=o,this.cookieService=r,this.title="User Wise Hours",this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.currentPageNumber=1,this.FreeResourceHours=0,this.Billability="All",this.Project="",this.MonthList=[],this.Months=0,this.pageTotal=0,this.result=[],this.AddAccess=!0,this.timeSheetlistmonthWise=[],this.selectedItems=[],this.dropdownSettings={},this.filterModel=new Lt,this.EmployeeDesignation=[],this.monthlyHourslist=[],this.monthlyProjectHoursList=[],this.monthlyResourceTimesheetlist=[],this.monthlyResourceHourslist=[],this.monthlyResourceModel=[],this.timeSheet=[],this.months=[],this.monthCount=0,this.timeSheetCount=0,this.DepartmentList=[],this.Department=0,this.expandedMonth=0,this.expandedEmp=0,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.typeSelected="timer",this.totalRows=0,this.pageSize=1e3,this.sortDirection="DESC",this.sortExpression="MonthlyTimeSheetID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.monthCount=12}ngOnInit(){this.spinner.show(),this.expandedMonth=-1,this.expandedEmp=-1,"BDM"===this.currentUser.designation&&(this.AddAccess=!1),this.EmployeeDesignation={ProjectPM:"ProjectPM",ProjectTL:"ProjectTL",ProjectDeveloper:"ProjectDeveloper",ProjectDesigner:"ProjectDesigner",ProjectQA:"ProjectQA",ProjectSales:"ProjectSales",ReportsTo:"ReportsTo"},this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};const t=this.router.parseUrl(this.router.url);void 0!==t.queryParams.month&&(this.Months=+t.queryParams.month),void 0!==t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showTimeSheetForm(){this.router.navigate(["/SmartDesk/MonthlyTimeSheet"])}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getMonthlyHoursTimeSheetList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}CheckActionAccess(){return"BDM"!=this.currentUser.designation}getMonthlyHoursTimeSheetList(){this.spinner.show();let t=new Lt;t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,null!=this.FinancialYear&&(t.FinancialYear=parseInt(this.FinancialYear.toString())),t.Month=this.Months,t.Billability=this.Billability,t.SearchText=this.Project,t.FreeResourceHours=this.FreeResourceHours,t.CompanyID=this.currentUser.companyID,t.CollpseMonth=this.expandedMonth,t.CollpseEmployee=this.expandedEmp,t.DepartmentID=this.Department,t.IsUsertimesheet=this.IsUsertimesheet,1==this.IsUsertimesheet&&(t.sortExpression="UsertimesheetID");let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let r=JSON.parse(n.queryParams.filterModel);""!=r.EmployeeID&&null!=r.EmployeeID&&(t.EmployeeID=r.EmployeeID)}else t.EmployeeID=this.selectedItems.map(r=>r.id).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/GetMonthlyResourceHoursReport",t,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;if(n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.pageTotal=0,this.monthlyProjectHoursList=t.monthlyProjectResourceModel,this.DepartmentList=t.departmentDropdownModel,this.monthlyResourceTimesheetlist=t.monthlyResourceTimesheetModel,1==this.IsUsertimesheet){for(let d=0;d<t.monthlyProjectResourceModel.length;d++){if(0!=t.monthlyProjectResourceModel[d].actualBillableHrs){var i=t.monthlyProjectResourceModel[d].actualBillableHrs.split(":");t.monthlyProjectResourceModel[d].actualBillableHrs=i[0]+"."+i[1]}if(0!=t.monthlyProjectResourceModel[d].actualFreeHrs){var o=t.monthlyProjectResourceModel[d].actualFreeHrs.split(":");t.monthlyProjectResourceModel[d].actualFreeHrs=o[0]+"."+o[1]}}if(null!=t.monthlyResourceTimesheetModel)for(let d=0;d<t.monthlyResourceTimesheetModel.length;d++){if(0!=t.monthlyResourceTimesheetModel[d].empActualHours){var r=t.monthlyResourceTimesheetModel[d].empActualHours.split(":");t.monthlyResourceTimesheetModel[d].empActualHours=r[0]+":"+r[1]}if(0!=t.monthlyResourceTimesheetModel[d].empEstimatedHours){var a=t.monthlyResourceTimesheetModel[d].empEstimatedHours.split(":");t.monthlyResourceTimesheetModel[d].empEstimatedHours=a[0]+":"+a[1]}}}this.monthlyResourceHourslist=t.monthlyResourceHoursModel,this.monthlyResourceModel=t.monthlyResourceModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(d=>{d.financialYearID===t.financialYear&&(this.CurrentYear=d.name)}),this.EmployeeList=t.employeeDropdownModel,this.MonthList=t.months,this.runningSearch=!1,this.createJsonResultForTable(this.MonthList,this.monthlyProjectHoursList,this.monthlyResourceHourslist,this.monthlyResourceTimesheetlist,this.monthlyResourceModel),this.totalRows=this.timeSheetlistmonthWise.length,this.fillFilterModel()}ShowHideColumn(t){this.showColumn=t,this.timeSheetlistmonthWise=[],this.ngOnInit()}getRowOnError(t){this.runningSearch=!1}createJsonResultForTable(t,n,i,o,r){this.timeSheetlistmonthWise=[],this.Months>0&&(t=t.filter(a=>a.monthID==this.Months)),t.forEach((a,d)=>{let g=a.monthID,y=n.filter(b=>b.month==g),v=[];r.forEach((b,Y)=>{let T=[],x=0,P=0;1==this.IsUsertimesheet?o.filter(H=>H.employeeID==b.employeeID).forEach((H,u1)=>{x+=parseInt(H.empActualHours),P+=parseInt(H.empEstimatedHours),H.projectID>0&&T.push({EmployeeID:H.employeeID,ProjectID:H.projectID,Project:H.project,MonthlyActualHours:H.empActualHours,MonthlyEstimatedHours:H.empEstimatedHours,IsBillable:H.isBillable})}):i.filter(H=>H.employeeID==b.employeeID).forEach((H,u1)=>{x+=H.empActualHours,P+=H.empEstimatedHours,H.projectID>0&&T.push({EmployeeID:H.employeeID,ProjectID:H.projectID,Project:H.project,MonthlyActualHours:H.empActualHours,MonthlyEstimatedHours:H.empEstimatedHours,IsBillable:H.isBillable})});let q={EmployeeID:b.employeeID,EmployeeName:b.employeeName,MActualHours:x,MEstimatedHours:P,IsBillable:b.isBillable,EmpProjecData:T,EmpProjecDataCount:T.length};"All"==this.Billability?v.push(q):"Billable"==this.Billability?P>this.FreeResourceHours&&v.push(q):"Free"==this.Billability?P<=this.FreeResourceHours&&v.push(q):v.push(q)}),y.length>0&&this.timeSheetlistmonthWise.push({MonthID:a.monthID,Month:a.name,TotalResource:y[0].totalResource,FreeResource:y[0].freeResource,BillableResource:y[0].billableResource,ActualFreeHrs:y[0].actualFreeHrs,ActualBillableHrs:y[0].actualBillableHrs,ProjectDataCount:v.length,ProjectData:v})})}search(){this.spinner.show(),this.currentPageNumber=1,this.delaySearch=!1,this.timeSheetlistmonthWise=[],this.clearFilterUrl(),this.executeSearch(),this.spinner.hide()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchFreeResourceHours(t){0!=this.autoFilter&&(this.FreeResourceHours=""==t||null==t||null==t?0:t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){""!=t&&(this.expandedEmp=0,this.Department=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getMonthlyHoursTimeSheetList()},500))}SearchBillability(t){0!=this.autoFilter&&""!=t&&(this.Billability=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}reset(){this.cookieService.delete("filterData"),this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.Department=0,this.Billability="All",this.FreeResourceHours=0,this.IsUsertimesheet=!1,this.Project="",this.clearFilterUrl(),this.executeSearch()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}Collaps(t){this.expandedEmp=-1,this.expandedMonth=t===this.expandedMonth?-1:t,0!=this.autoFilter&&0!=t&&(this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}CollapsEmp(t){this.expandedEmp=t===this.expandedEmp?-1:t,0!=this.autoFilter&&0!=t&&(this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(V),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-monthly-resource-hours"]],features:[e.Jv_([V])],decls:70,vars:16,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected",""],["name","Billability","id","Billability",1,"form-control",3,"ngModelChange","ngModel"],["value","0","disabled",""],["value","All","selected",""],["value","Free"],["value","Billable"],["type","number","minValue","0","placeholder","Free Resource Hours (Less Then Equals To)",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Search Project",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[2,"margin-top","6px","margin-right","15px"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12","table-responsive"],[1,"table","table-responsive-sm","table-striped"],[3,"id",4,"ngFor","ngForOf"],["size","medium",3,"type"],[3,"value"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],[1,"search_no_results"],["class","table table-responsive-sm table-striped ",4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Monthly Resource Hours "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"select",9),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(12,zc,2,2,"option",10),e.k0s()(),e.j41(13,"div",8)(14,"select",11),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(15,"option",12),e.EFF(16,"-- All Months --"),e.k0s(),e.DNE(17,Xc,2,2,"option",10),e.k0s()(),e.j41(18,"div",8)(19,"select",13),e.mxI("ngModelChange",function(r){return e.DH7(i.Billability,r)||(i.Billability=r),r}),e.bIt("ngModelChange",function(r){return i.SearchBillability(r)}),e.j41(20,"option",14),e.EFF(21,"-- Billability --"),e.k0s(),e.j41(22,"option",15),e.EFF(23,"-- All Resources --"),e.k0s(),e.j41(24,"option",16),e.EFF(25," Free Resources"),e.k0s(),e.j41(26,"option",17),e.EFF(27," Billable Resources"),e.k0s()()(),e.j41(28,"div",8)(29,"input",18),e.mxI("ngModelChange",function(r){return e.DH7(i.FreeResourceHours,r)||(i.FreeResourceHours=r),r}),e.bIt("ngModelChange",function(r){return i.SearchFreeResourceHours(r)}),e.k0s()(),e.j41(30,"div",8)(31,"input",19),e.mxI("ngModelChange",function(r){return e.DH7(i.Project,r)||(i.Project=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(32,"div",8)(33,"ng-multiselect-dropdown",20),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(34,"div",8)(35,"select",21),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(36,"option",22),e.EFF(37,"-- Department --"),e.k0s(),e.DNE(38,qc,2,2,"option",10),e.k0s()(),e.j41(39,"div",8)(40,"label",23)(41,"input",24),e.mxI("ngModelChange",function(r){return e.DH7(i.IsUsertimesheet,r)||(i.IsUsertimesheet=r),r}),e.k0s(),e.EFF(42," Usertimesheet "),e.k0s(),e.j41(43,"button",25),e.bIt("click",function(){return i.search()}),e.nrm(44,"i",26),e.k0s(),e.j41(45,"button",27),e.bIt("click",function(){return i.reset()}),e.nrm(46,"i",28),e.k0s()(),e.nrm(47,"div",8),e.k0s(),e.j41(48,"div",1)(49,"div",29)(50,"table",30)(51,"thead")(52,"tr"),e.nrm(53,"th"),e.j41(54,"th"),e.EFF(55,"#"),e.k0s(),e.j41(56,"th"),e.EFF(57,"Month"),e.k0s(),e.j41(58,"th"),e.EFF(59,"Total Resources"),e.k0s(),e.j41(60,"th"),e.EFF(61,"Billable Resources"),e.k0s(),e.j41(62,"th"),e.EFF(63,"Free Resources"),e.k0s(),e.j41(64,"th"),e.EFF(65,"Billable Hours"),e.k0s(),e.j41(66,"th"),e.EFF(67,"Free Hours"),e.k0s()()(),e.DNE(68,hh,20,11,"tbody",31),e.k0s()()()()()()()(),e.nrm(69,"ngx-spinner",32)),2&n&&(e.R7$(11),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.Billability),e.R7$(10),e.R50("ngModel",i.FreeResourceHours),e.R7$(2),e.R50("ngModel",i.Project),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(3),e.R50("ngModel",i.IsUsertimesheet),e.R7$(27),e.Y8G("ngForOf",i.timeSheetlistmonthWise),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,c.xH,c.y7,c.me,c.Q0,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b]})}return s})();function ph(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function uh(s,l){1&s&&(e.j41(0,"div",47),e.EFF(1," Financial year is required "),e.k0s())}function mh(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"First Name is required"),e.k0s())}function gh(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Last Name is required"),e.k0s())}function fh(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Email is required"),e.k0s())}function Ah(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Email format is invalid"),e.k0s())}function _h(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Contact number is required"),e.k0s())}function yh(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.designationID),e.R7$(),e.SpI(" ",t.name," ")}}function Sh(s,l){1&s&&(e.j41(0,"div",47),e.EFF(1," Designation is required "),e.k0s())}function Dh(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function jh(s,l){1&s&&(e.j41(0,"div",47),e.EFF(1," Department is required "),e.k0s())}function bh(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Joining Date is required"),e.k0s())}function Mh(s,l){1&s&&e.nrm(0,"img",48)}let Ch=(()=>{class s{constructor(t,n,i,o,r){this.employeeService=t,this.router=n,this.datePipe=i,this.cookieService=o,this.toastyService=r,this.dpConfig=new k.iP,this.employeeAddViewModel=new sa,this.loading=!1,this.CoreSkillselectedID=[],this.AdditionalSkillselectedID=[],this.ReportsToselectedID=[],this.ProjectselectedID=[],this.CoreSkillID=[],this.AdditionalSkillID=[],this.ReportsToID=[],this.ProjectID=[],this.CoreSkilldropdownSettings={},this.AddtionalSkilldropdownSettings={},this.ReportsTodropdownSettings={},this.ProjectdropdownSettings={},this.IsEmployeeExists=!1,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){"BDM"==this.currentUser.designation&&this.router.navigate(["/SmartDesk/AccessDenied"]),this.CoreSkilldropdownSettings={singleSelection:!1,idField:"coreSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.AddtionalSkilldropdownSettings={singleSelection:!1,idField:"additionalSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.ReportsTodropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.ProjectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.employeeService.getEmploeeDetails().subscribe(t=>{this.EmployeeDetails=t,this.employeeAddViewModel.FinancialYear=t.financialYear})}onCoreSkillSelect(t){this.SelectedCoreSkill=this.CoreSkillselectedID.map(n=>n.name).join(", ")}onAdditionalSkillSelect(t){this.SelectedAdditionalSkill=this.AdditionalSkillselectedID.map(n=>n.name).join(", ")}onReportsToSelect(t){this.SelectedReportsTo=this.ReportsToselectedID.map(n=>n.name).join(", ")}onProjectSelect(t){this.SelectedProject=this.ProjectselectedID.map(n=>n.name).join(", ")}saveResourceAvailability(t=""){this.loading=!0,this.currentUser&&(this.employeeAddViewModel.CoreSkillID=this.CoreSkillselectedID.map(n=>n.coreSkillID).join(","),this.employeeAddViewModel.AdditionalSkillID=this.AdditionalSkillselectedID.map(n=>n.additionalSkillID).join(","),this.employeeAddViewModel.AvailableDate=this.employeeAddViewModel.AvailableDate?this.datePipe.transform(this.employeeAddViewModel.AvailableDate,"yyyy-MM-dd"):"",this.employeeAddViewModel.DOB=this.employeeAddViewModel.DOB?this.datePipe.transform(this.employeeAddViewModel.DOB,"yyyy-MM-dd"):"",this.employeeAddViewModel.JoiningDate=this.datePipe.transform(this.employeeAddViewModel.JoiningDate,"yyyy-MM-dd"),this.employeeAddViewModel.ReportsToID=this.ReportsToselectedID.map(n=>n.id).join(","),this.employeeService.CheckEmployeeExists(this.employeeAddViewModel.Email).subscribe(n=>{this.IsEmployeeExists=1==n,this.IsEmployeeExists?(this.toastyService.warning("Email is already exists.","Check Resource Exists"),this.employeeAddViewModel.Email=""):(this.employeeAddViewModel.DepartmentID=+this.employeeAddViewModel.DepartmentID,this.employeeAddViewModel.DesignationID=+this.employeeAddViewModel.DesignationID,this.employeeAddViewModel.ContactNumber=this.employeeAddViewModel.ContactNumber.toString(),this.employeeService.SaveEmployee(this.employeeAddViewModel).subscribe(i=>{this.loading=!1,i>0?(this.toastyService.success("Resource saved successfully.","Save Resource"),this.router.navigate(["/Master/EmployeeList"])):this.toastyService.error("Something error.","Save Resource")},i=>{console.log(i)}))}))}clearInputdata(){this.router.navigate(["/Master/EmployeeList"])}CheckEmployeeExists(t){this.employeeService.CheckEmployeeExists(t).subscribe(n=>{this.IsEmployeeExists=1==n,1==n&&(this.toastyService.warning("Email is already exists.","Check Resource Exists"),this.employeeAddViewModel.Email="")},n=>{console.log(n),this.toastyService.error("Something error","Check Resource Exists")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(J),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-add-employee"]],features:[e.Jv_([u.vh,J])],decls:129,vars:42,consts:[["f","ngForm"],["FirstName","ngModel"],["LastName","ngModel"],["Email","ngModel"],["ContactNumber","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["name","FinancialYear","id","FinancialYear","required","","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"col-md-4","col-form-label"],["id","Male","name","Gender","type","radio","value","Male",1,"form-chk",3,"ngModelChange","ngModel"],["for","Male"],["id","Female","name","Gender","type","radio","value","Female",1,"form-chk",3,"ngModelChange","ngModel"],["for","Female"],["type","text","id","FirstName","name","FirstName","placeholder","First Name","maxlength","30","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","LastName","name","LastName","placeholder","Last Name","maxlength","30","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","email","id","Email","name","Email","placeholder","Email","maxlength","100","required","","pattern","^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","ContactNumber","name","ContactNumber","placeholder","Contact Number","maxlength","10","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","Designation","id","Designation","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","AddtionalSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","ReportsToSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","text","placement","top","id","joiningDate","name","joiningDate","bsDatepicker","","placeholder","Joining Date","required","",1,"form-control",3,"ngModelChange","bsConfig","ngModel"],["type","text","placeholder","Date Of Birth","bsDatepicker","","name","DOB","placement","top",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],[1,"card-footer"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[3,"value"],[1,"error"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div"),e.nrm(7,"i",11),e.EFF(8," Add Resource "),e.k0s(),e.j41(9,"button",12),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",13),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",14)(13,"form",15,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(14);return e.Njj(a.form.valid&&i.saveResourceAvailability(a))}),e.j41(15,"div",16)(16,"div",17)(17,"label",18),e.EFF(18,"Financial Year"),e.k0s(),e.j41(19,"div",19)(20,"select",20),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.FinancialYear,a)||(i.employeeAddViewModel.FinancialYear=a),e.Njj(a)}),e.j41(21,"option",21),e.EFF(22," -- Financial Year -- "),e.k0s(),e.DNE(23,ph,2,2,"option",22),e.k0s(),e.DNE(24,uh,2,0,"div",23),e.k0s()(),e.j41(25,"div",17)(26,"label",24),e.EFF(27,"Gender"),e.k0s(),e.j41(28,"div",19)(29,"input",25),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.Gender,a)||(i.employeeAddViewModel.Gender=a),e.Njj(a)}),e.k0s(),e.j41(30,"label",26),e.EFF(31,"Male"),e.k0s(),e.EFF(32,"\xa0 "),e.j41(33,"input",27),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.Gender,a)||(i.employeeAddViewModel.Gender=a),e.Njj(a)}),e.k0s(),e.j41(34,"label",28),e.EFF(35,"Female"),e.k0s()()()(),e.j41(36,"div",16)(37,"div",17)(38,"label",18),e.EFF(39,"First Name"),e.k0s(),e.j41(40,"div",19)(41,"input",29,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.FirstName,a)||(i.employeeAddViewModel.FirstName=a),e.Njj(a)}),e.k0s(),e.DNE(43,mh,2,0,"span",23),e.k0s()(),e.j41(44,"div",17)(45,"label",18),e.EFF(46,"Last Name"),e.k0s(),e.j41(47,"div",19)(48,"input",30,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.LastName,a)||(i.employeeAddViewModel.LastName=a),e.Njj(a)}),e.k0s(),e.DNE(50,gh,2,0,"span",23),e.k0s()()(),e.j41(51,"div",16)(52,"div",17)(53,"label",18),e.EFF(54,"Email"),e.k0s(),e.j41(55,"div",19)(56,"input",31,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.Email,a)||(i.employeeAddViewModel.Email=a),e.Njj(a)}),e.k0s(),e.DNE(58,fh,2,0,"span",23)(59,Ah,2,0,"span",23),e.k0s()(),e.j41(60,"div",17)(61,"label",18),e.EFF(62,"Contact Number"),e.k0s(),e.j41(63,"div",19)(64,"input",32,4),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.ContactNumber,a)||(i.employeeAddViewModel.ContactNumber=a),e.Njj(a)}),e.k0s(),e.DNE(66,_h,2,0,"span",23),e.k0s()()(),e.j41(67,"div",16)(68,"div",17)(69,"label",18),e.EFF(70,"Designation"),e.k0s(),e.j41(71,"div",19)(72,"select",33),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.DesignationID,a)||(i.employeeAddViewModel.DesignationID=a),e.Njj(a)}),e.j41(73,"option",21),e.EFF(74," -- Designation -- "),e.k0s(),e.DNE(75,yh,2,2,"option",22),e.k0s(),e.DNE(76,Sh,2,0,"div",23),e.k0s()(),e.j41(77,"div",17)(78,"label",18),e.EFF(79,"Department"),e.k0s(),e.j41(80,"div",19)(81,"select",34),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.DepartmentID,a)||(i.employeeAddViewModel.DepartmentID=a),e.Njj(a)}),e.j41(82,"option",21),e.EFF(83," -- Department -- "),e.k0s(),e.DNE(84,Dh,2,2,"option",22),e.k0s(),e.DNE(85,jh,2,0,"div",23),e.k0s()()(),e.j41(86,"div",16)(87,"div",17)(88,"label",24),e.EFF(89,"Core Skill"),e.k0s(),e.j41(90,"div",19)(91,"ng-multiselect-dropdown",35),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.CoreSkillselectedID,a)||(i.CoreSkillselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onCoreSkillSelect(a))}),e.k0s(),e.j41(92,"div"),e.EFF(93),e.k0s()()(),e.j41(94,"div",17)(95,"label",24),e.EFF(96,"Additional Skill"),e.k0s(),e.j41(97,"div",19)(98,"ng-multiselect-dropdown",36),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AdditionalSkillselectedID,a)||(i.AdditionalSkillselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onAdditionalSkillSelect(a))}),e.k0s(),e.j41(99,"div"),e.EFF(100),e.k0s()()()(),e.j41(101,"div",16)(102,"div",17)(103,"label",24),e.EFF(104,"Reports to"),e.k0s(),e.j41(105,"div",19)(106,"ng-multiselect-dropdown",37),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.ReportsToselectedID,a)||(i.ReportsToselectedID=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onReportsToSelect(a))}),e.k0s(),e.j41(107,"div"),e.EFF(108),e.k0s()()(),e.j41(109,"div",17)(110,"label",18),e.EFF(111,"Joining Date"),e.k0s(),e.j41(112,"div",19)(113,"input",38),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.JoiningDate,a)||(i.employeeAddViewModel.JoiningDate=a),e.Njj(a)}),e.k0s(),e.DNE(114,bh,2,0,"span",23),e.k0s()()(),e.j41(115,"div",16)(116,"div",17)(117,"label",24),e.EFF(118,"Date Of Birth"),e.k0s(),e.j41(119,"div",19)(120,"input",39),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.employeeAddViewModel.DOB,a)||(i.employeeAddViewModel.DOB=a),e.Njj(a)}),e.k0s()()()(),e.j41(121,"div",40)(122,"button",41),e.nrm(123,"i",42),e.EFF(124," Submit "),e.k0s(),e.DNE(125,Mh,1,0,"img",43),e.j41(126,"button",44),e.nrm(127,"i",45),e.EFF(128," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(14),r=e.sdS(42),a=e.sdS(49),d=e.sdS(57),g=e.sdS(65);e.R7$(20),e.R50("ngModel",i.employeeAddViewModel.FinancialYear),e.R7$(3),e.Y8G("ngForOf",null==i.EmployeeDetails?null:i.EmployeeDetails.financialYearDropdownModel),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.employeeAddViewModel.FinancialYear||null==i.employeeAddViewModel.FinancialYear||0==i.employeeAddViewModel.FinancialYear||!(i.employeeAddViewModel.FinancialYear>0))),e.R7$(5),e.R50("ngModel",i.employeeAddViewModel.Gender),e.R7$(4),e.R50("ngModel",i.employeeAddViewModel.Gender),e.R7$(8),e.R50("ngModel",i.employeeAddViewModel.FirstName),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid),e.R7$(5),e.R50("ngModel",i.employeeAddViewModel.LastName),e.R7$(2),e.Y8G("ngIf",o.submitted&&!a.valid),e.R7$(6),e.R50("ngModel",i.employeeAddViewModel.Email),e.R7$(2),e.Y8G("ngIf",o.submitted&&!d.valid&&d.errors&&d.errors.required),e.R7$(),e.Y8G("ngIf",o.submitted&&d.errors&&d.errors.pattern),e.R7$(5),e.R50("ngModel",i.employeeAddViewModel.ContactNumber),e.R7$(2),e.Y8G("ngIf",o.submitted&&!g.valid),e.R7$(6),e.R50("ngModel",i.employeeAddViewModel.DesignationID),e.R7$(3),e.Y8G("ngForOf",null==i.EmployeeDetails?null:i.EmployeeDetails.designationDropdownModel),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.employeeAddViewModel.DesignationID||null==i.employeeAddViewModel.DesignationID||0==i.employeeAddViewModel.DesignationID||!(i.employeeAddViewModel.DesignationID>0))),e.R7$(5),e.R50("ngModel",i.employeeAddViewModel.DepartmentID),e.R7$(3),e.Y8G("ngForOf",i.EmployeeDetails.departmentDropdownModel),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.employeeAddViewModel.DepartmentID||null==i.employeeAddViewModel.DepartmentID||0==i.employeeAddViewModel.DepartmentID||!(i.employeeAddViewModel.DepartmentID>0))),e.R7$(6),e.Y8G("placeholder","-- Core Skill --")("data",i.EmployeeDetails.coreskillDropdownModel),e.R50("ngModel",i.CoreSkillselectedID),e.Y8G("settings",i.CoreSkilldropdownSettings),e.R7$(2),e.SpI(" ",i.SelectedCoreSkill," "),e.R7$(5),e.Y8G("placeholder","-- Additional Skill --")("data",i.EmployeeDetails.additionalskillDropdownModel),e.R50("ngModel",i.AdditionalSkillselectedID),e.Y8G("settings",i.AddtionalSkilldropdownSettings),e.R7$(2),e.SpI(" ",i.SelectedAdditionalSkill," "),e.R7$(6),e.Y8G("placeholder","-- Reports to --")("data",i.EmployeeDetails.reportsToDropdownModel),e.R50("ngModel",i.ReportsToselectedID),e.Y8G("settings",i.ReportsTodropdownSettings),e.R7$(2),e.SpI(" ",i.SelectedReportsTo," "),e.R7$(5),e.Y8G("bsConfig",i.dpConfig),e.R50("ngModel",i.employeeAddViewModel.JoiningDate),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.employeeAddViewModel.JoiningDate||null==i.employeeAddViewModel.JoiningDate||""==i.employeeAddViewModel.JoiningDate)),e.R7$(6),e.R50("ngModel",i.employeeAddViewModel.DOB),e.Y8G("bsConfig",i.dpConfig),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.Fm,c.BC,c.cb,c.YS,c.tU,c.R_,c.vS,c.cV,k.pc,k.p0,w.b]})}return s})();const Bt=()=>["active"],kh=()=>["/Reports/AvailableResource"],Ih=()=>["/Reports/MonthwiseAvailableResource"];function vh(s,l){if(1&s&&(e.j41(0,"option",36),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Eh(s,l){if(1&s&&(e.j41(0,"option",36),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Fh(s,l){if(1&s&&(e.j41(0,"option",36),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}let Th=(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.router=i,this.spinner=o,this.cookieService=r,this.toastyService=a,this.DataEmit=new e.bkB,this.title="Employee List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.DesignationList=[],this.CoreSkillList=[],this.AdditionalSkillList=[],this.Designation=0,this.DepartmentList=[],this.Department=0,this.Months=0,this.FinancialYear=0,this.MonthList=[],this.FinancialYearList=[],this.CounterDashboard=!1,this.selectedItems=[],this.dropdownSettings={},this.SelectedCoreSkill=[],this.coreSkillSettings={},this.SelectedAdditionalSkill=[],this.additionalSkillSettings={},this.TotalResourceProjectCount=[],this.ResourceProjectCount=[],this.filterModel=new Ve,this.datagrid=n,this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="EmployeeID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show(),this.dropdownSettings={singleSelection:!1,idField:"designationID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.coreSkillSettings={singleSelection:!1,idField:"coreSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.additionalSkillSettings={singleSelection:!1,idField:"additionalSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.month&&(this.Months=+t.queryParams.month),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),null!=t.queryParams.CounterDashboard&&(this.CounterDashboard=!!t.queryParams.CounterDashboard),null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designation","Designation",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalExperiance","Experience",'[{"width": "5%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("reportTo","Report To",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("coreSkill","Core Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("additionalSkill","Additional Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("availableDate","Available Date",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("planningToBook","Planning To Book",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getEmployeeList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}getEmployeeList(){this.spinner.show();let t=new Ve;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Department=this.Department,t.FinancialYear=this.FinancialYear,t.Month=this.Months,t.companyID=this.currentUser.companyID,t.CounterDashboard=this.CounterDashboard;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let r=new Ve;r=JSON.parse(n.queryParams.filterModel),""!=r.Designation&&null!=r.Designation&&(t.Designation=r.Designation),""!=r.CoreSkill&&null!=r.CoreSkill&&(t.CoreSkill=r.CoreSkill),""!=r.AdditionalSkill&&null!=r.AdditionalSkill&&(t.AdditionalSkill=r.AdditionalSkill)}else t.Designation=this.selectedItems.map(r=>r.designationID).join(","),t.CoreSkill=this.SelectedCoreSkill.map(r=>r.coreSkillID).join(","),t.AdditionalSkill=this.SelectedAdditionalSkill.map(r=>r.additionalSkillID).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetUpcomingAvailableResource",t,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Employee deleted successfully.","Delete")):2==t?this.toastyService.warning("Employee associated with TimeSheet.","Warning"):this.toastyService.error("Something errors.","Error")}deleteOnError(t){this.toastyService.error(`${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.Months=t.month,this.MonthList=t.monthList,this.FinancialYearList=t.financialYearDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.DesignationList=t.designationDropdownModel,this.CoreSkillList=t.coreskillDropdownModel,this.AdditionalSkillList=t.additionalskillDropdownModel,this.employeeListViewModel=t.employeeListModel;let i=[];1==this.CounterDashboard&&(this.DesignationList.forEach(o=>{1==o.counterDashboard&&i.push(o)}),this.selectedItems=i,this.CounterDashboard=!1),this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemSelectedProjectTrackReport"==n.EventType?this.selectedProjectReport(n.ItemSelected):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRowForEditDelete(t){}selectedRow(t){return this.router.navigate(["/Master/Employee"],{queryParams:{id:this.employeeListViewModel[t].employeeID,FinancialYear:this.FinancialYear,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.Department=0,this.Designation=0,this.Months=0,this.FinancialYear=0,this.selectedItems=[],this.SelectedCoreSkill=[],this.SelectedAdditionalSkill=[],this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.CounterDashboard=!1,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDesignation(t){0!=this.autoFilter&&""!=t&&(this.Designation=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedProjectReport(t){let i=this.employeeListViewModel[t];return this.router.navigate(["/Master/ResourceProjects"],{queryParams:{id:i.employeeID,name:i.name,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowRedirect(t,n){if("Projects"==n)return this.router.navigate(["/Master/ProjectList"])}getCookiesFilterData(t){if(""!=t&&null!=t){if(t=JSON.parse(t),this.Search=t.Search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.Department=t.Department,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.IsActive=t.IsActive,this.InActive=t.InActive,this.InProject=t.InProject,this.NotInProject=t.NotInProject,this.currentUser.companyID=t.companyID,this.CounterDashboard=t.CounterDashboard,""!=t.Designation&&null!=t.Designation){let n=[];t.Designation.split(",").forEach(o=>{n.push(this.DesignationList.find(r=>r.designationID===parseInt(o)))}),this.selectedItems=n}if(""!=t.CoreSkill&&null!=t.CoreSkill){let n=[];t.CoreSkill.split(",").forEach(o=>{n.push(this.CoreSkillList.find(r=>r.coreSkillID===parseInt(o)))}),this.SelectedCoreSkill=n}if(""!=t.AdditionalSkill&&null!=t.AdditionalSkill){let n=[];t.AdditionalSkill.split(",").forEach(o=>{n.push(this.AdditionalSkillList.find(r=>r.additionalSkillID===parseInt(o)))}),this.SelectedAdditionalSkill=n}}}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-upcoming-available-resource"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([Z])],decls:60,vars:35,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-tree"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","selectedCoreSkill",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","selectedAdditionalSkill",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resources Availability "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," All Resources "),e.k0s()(),e.j41(16,"li",10)(17,"a",13),e.nrm(18,"i",14),e.EFF(19," Monthwise Resources "),e.k0s()()()()(),e.j41(20,"div",1)(21,"div",15)(22,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(23,"div",15)(24,"select",17),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(25,vh,2,2,"option",18),e.k0s()(),e.j41(26,"div",15)(27,"select",19),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(28,"option",20),e.EFF(29,"-- Month --"),e.k0s(),e.DNE(30,Eh,2,2,"option",18),e.k0s()(),e.j41(31,"div",15)(32,"select",21),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(33,"option",20),e.EFF(34,"-- Department --"),e.k0s(),e.DNE(35,Fh,2,2,"option",18),e.k0s()(),e.j41(36,"div",15)(37,"ng-multiselect-dropdown",22),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(38,"div",15)(39,"ng-multiselect-dropdown",23),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectedCoreSkill,r)||(i.SelectedCoreSkill=r),r}),e.k0s()(),e.j41(40,"div",15)(41,"ng-multiselect-dropdown",24),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectedAdditionalSkill,r)||(i.SelectedAdditionalSkill=r),r}),e.k0s()(),e.j41(42,"div",15)(43,"button",25),e.bIt("click",function(){return i.search()}),e.nrm(44,"i",26),e.k0s(),e.j41(45,"button",27),e.bIt("click",function(){return i.reset()}),e.nrm(46,"i",28),e.k0s()()(),e.j41(47,"div",1)(48,"div",29)(49,"div",30)(50,"label",31)(51,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(52," Auto Filter "),e.k0s(),e.j41(53,"label",33)(54,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(55," Show Column "),e.k0s()()()(),e.j41(56,"div",1)(57,"div",29)(58,"datagrid",34),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(59,"ngx-spinner",35)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(31,Bt))("routerLink",e.lJ4(32,kh)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(33,Bt))("routerLink",e.lJ4(34,Ih)),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.Y8G("placeholder","-- Designation --")("data",i.DesignationList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Core Skill --")("data",i.CoreSkillList),e.R50("ngModel",i.SelectedCoreSkill),e.Y8G("settings",i.coreSkillSettings),e.R7$(2),e.Y8G("placeholder","-- Addtional Skill --")("data",i.AdditionalSkillList),e.R50("ngModel",i.SelectedAdditionalSkill),e.Y8G("settings",i.additionalSkillSettings),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(4),e.Y8G("rows",i.employeeListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_]})}return s})();const wh=s=>({"background-color":s});function Ph(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14)(2,"div",44),e.nrm(3,"i",45),e.j41(4,"div",46),e.EFF(5),e.k0s()(),e.j41(6,"div",18)(7,"div")(8,"div",19),e.EFF(9),e.k0s(),e.j41(10,"div",20),e.EFF(11,"In"),e.k0s()(),e.j41(12,"div")(13,"div",19),e.EFF(14),e.k0s(),e.j41(15,"div",20),e.EFF(16,"Not In"),e.k0s()()()()()),2&s){const t=l.$implicit;e.R7$(2),e.Y8G("ngStyle",e.eq3(5,wh,t.color)),e.R7$(2),e.FS9("tooltip",t.heading),e.R7$(),e.SpI(" ",t.heading," "),e.R7$(4),e.JRh(t.inProject),e.R7$(5),e.JRh(t.notInProject)}}function Rh(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Gh(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Yh(s,l){if(1&s&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}let Hh=(()=>{class s{constructor(t,n,i,o,r){this.http=t,this.spinner=i,this.router=o,this.cookieService=r,this.DataEmit=new e.bkB,this.title="Employee List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.DesignationList=[],this.CoreSkillList=[],this.AdditionalSkillList=[],this.Designation=0,this.DepartmentList=[],this.Department=0,this.Months=0,this.FinancialYear=0,this.MonthList=[],this.FinancialYearList=[],this.CounterDashboard=!1,this.selectedItems=[],this.dropdownSettings={},this.SelectedCoreSkill=[],this.coreSkillSettings={},this.SelectedAdditionalSkill=[],this.additionalSkillSettings={},this.TotalResourceProjectCount=[],this.ResourceProjectCount=[],this.filterModel=new Te,this.loading=!1,this.datagrid=n,this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="EmployeeID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show(),this.dropdownSettings={singleSelection:!1,idField:"designationID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.coreSkillSettings={singleSelection:!1,idField:"coreSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.additionalSkillSettings={singleSelection:!1,idField:"additionalSkillID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.month&&(this.Months=+t.queryParams.month),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),null!=t.queryParams.CounterDashboard&&(this.CounterDashboard=!!t.queryParams.CounterDashboard),null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designation","Designation",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalExperiance","Experience",'[{"width": "5%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("reportTo","Report To",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("coreSkill","Core Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("additionalSkill","Additional Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("projects","Projects",'[{"width": "20%" , "hyperLink": true,"disableSorting": false}]')),this.columns.push(new h("isActive","Active",'[{"width": "3%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Active","isPermissionIcon":true}]')),this.columns.push(new h("status","Status",'[{"width": "3%" ,"hyperLink": false, "disableSorting": true,"multiButton":false,"buttonText":"Active","isPermissionIcon":true}]')),this.fillFilterModel(),this.executeSearch()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getEmployeeList()},t),this.spinner.hide()}DeleteEmployee(t){}gettoken(){return this.currentUser.authtoken}getEmployeeList(){this.spinner.show();let t=new Te;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Department=this.Department,t.FinancialYear=this.FinancialYear,t.Month=this.Months,t.IsActive=this.IsActive,t.InActive=this.InActive,t.InProject=this.InProject,t.NotInProject=this.NotInProject,t.companyID=this.currentUser.companyID,t.CounterDashboard=this.CounterDashboard;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let r=JSON.parse(n.queryParams.filterModel);null!=r.Designation&&""!=r.Designation&&(t.Designation=r.Designation),null!=r.CoreSkill&&""!=r.CoreSkill&&(t.CoreSkill=r.CoreSkill),null!=r.AdditionalSkill&&""!=r.AdditionalSkill&&(t.AdditionalSkill=r.AdditionalSkill)}else t.Designation=this.selectedItems.map(r=>r.designationID).join(","),t.CoreSkill=this.SelectedCoreSkill.map(r=>r.coreSkillID).join(","),t.AdditionalSkill=this.SelectedAdditionalSkill.map(r=>r.additionalSkillID).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetResourceReport",t,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}getRowOnSuccess(t){this.loading=!1;let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.Months=t.month,this.MonthList=t.monthList,this.FinancialYearList=t.financialYearDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.DesignationList=t.designationDropdownModel,this.CoreSkillList=t.coreskillDropdownModel,this.AdditionalSkillList=t.additionalskillDropdownModel,this.employeeListViewModel=t.employeeListModel,this.TotalResourceProjectCount=t.resourceProjectCountModel.employeeProjectModel,this.ResourceProjectCount=t.resourceProjectCountModel.totalInOutProjectResource;let i=[];1==this.CounterDashboard&&(this.DesignationList.forEach(o=>{1==o.counterDashboard&&i.push(o)}),this.selectedItems=i,this.CounterDashboard=!1),this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1,this.loading=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemSelectedProjectTrackReport"==n.EventType?this.selectedProjectReport(n.ItemSelected):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRow(t){return this.router.navigate(["/Master/Employee"],{queryParams:{id:this.employeeListViewModel[t].employeeID,FinancialYear:this.FinancialYear,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.loading=!0,this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.Department=0,this.Designation=0,this.Months=0,this.FinancialYear=0,this.selectedItems=[],this.SelectedCoreSkill=[],this.SelectedAdditionalSkill=[],this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.CounterDashboard=!1,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.loading=!0,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDesignation(t){0!=this.autoFilter&&""!=t&&(this.Designation=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedProjectReport(t){let i=this.employeeListViewModel[t];return this.router.navigate(["/Master/ResourceProjects"],{queryParams:{id:i.employeeID,name:i.name,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowRedirect(t,n){if("Projects"==n)return this.router.navigate(["/Master/ProjectList"])}getCookiesFilterData(t){if(""!=t&&null!=t){if(t=JSON.parse(t),this.Search=t.Search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.Department=t.Department,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.IsActive=t.IsActive,this.InActive=t.InActive,this.InProject=t.InProject,this.NotInProject=t.NotInProject,this.currentUser.companyID=t.companyID,this.CounterDashboard=t.CounterDashboard,""!=t.Designation&&null!=t.Designation){let n=[];t.Designation.split(",").forEach(o=>{n.push(this.DesignationList.find(r=>r.designationID===parseInt(o)))}),this.selectedItems=n}if(""!=t.CoreSkill&&null!=t.CoreSkill){let n=[];t.CoreSkill.split(",").forEach(o=>{n.push(this.CoreSkillList.find(r=>r.coreSkillID===parseInt(o)))}),this.SelectedCoreSkill=n}if(""!=t.AdditionalSkill&&null!=t.AdditionalSkill){let n=[];t.AdditionalSkill.split(",").forEach(o=>{n.push(this.AdditionalSkillList.find(r=>r.additionalSkillID===parseInt(o)))}),this.SelectedAdditionalSkill=n}}}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-resource-report"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},decls:88,vars:35,consts:[["id","loader",3,"hidden"],[1,"blockUI","blockOverlay","loader-main"],[1,"blockUI","blockMsg","blockElement","loader-body"],[1,"loading-message","loading-message-boxed"],["src","assets/loading-spinner-grey.gif"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-sm-6","col-lg-2"],[1,"brand-card"],[1,"brand-card-header","bg-facebook"],[1,"fa","fa-check-circle"],["tooltip","Total","placement","top",1,"text-value-sm","p-2","text-white"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],["class","col-sm-6 col-lg-2",4,"ngFor","ngForOf"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","selectedCoreSkill",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","selectedAdditionalSkill",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","checkbox","value","",3,"ngModelChange","ngModel"],[1,"col-md-6","paddingbottom"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right",2,"margin-top","-35px"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["tooltip","if check-box checked then display all columns","placement","bottom"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[1,"brand-card-header",3,"ngStyle"],[1,"fa","fa-group"],["placement","top",1,"text-value-sm","p-2","text-white",3,"tooltip"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"div",3),e.nrm(4,"img",4),e.j41(5,"span"),e.EFF(6,"\xa0\xa0LOADING..."),e.k0s()()()(),e.j41(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),e.nrm(13,"i",11),e.EFF(14," Resources History "),e.k0s()(),e.j41(15,"div",12)(16,"div",6)(17,"div",13)(18,"div",14)(19,"div",15),e.nrm(20,"i",16),e.j41(21,"div",17),e.EFF(22," Total "),e.k0s()(),e.j41(23,"div",18)(24,"div")(25,"div",19),e.EFF(26),e.k0s(),e.j41(27,"div",20),e.EFF(28,"In"),e.k0s()(),e.j41(29,"div")(30,"div",19),e.EFF(31),e.k0s(),e.j41(32,"div",20),e.EFF(33,"Not In"),e.k0s()()()()(),e.DNE(34,Ph,17,7,"div",21),e.k0s(),e.j41(35,"div",6)(36,"div",22)(37,"input",23),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(38,"div",22)(39,"select",24),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(40,Rh,2,2,"option",25),e.k0s()(),e.j41(41,"div",22)(42,"select",26),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(43,"option",27),e.EFF(44,"-- Month --"),e.k0s(),e.DNE(45,Gh,2,2,"option",25),e.k0s()(),e.j41(46,"div",22)(47,"select",28),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(48,"option",27),e.EFF(49,"-- Department --"),e.k0s(),e.DNE(50,Yh,2,2,"option",25),e.k0s()(),e.j41(51,"div",22)(52,"ng-multiselect-dropdown",29),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(53,"div",22)(54,"ng-multiselect-dropdown",30),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectedCoreSkill,r)||(i.SelectedCoreSkill=r),r}),e.k0s()(),e.j41(55,"div",22)(56,"ng-multiselect-dropdown",31),e.mxI("ngModelChange",function(r){return e.DH7(i.SelectedAdditionalSkill,r)||(i.SelectedAdditionalSkill=r),r}),e.k0s()(),e.j41(57,"div",22)(58,"label")(59,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.InProject,r)||(i.InProject=r),r}),e.k0s(),e.EFF(60," In Project "),e.k0s(),e.j41(61,"label")(62,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.NotInProject,r)||(i.NotInProject=r),r}),e.k0s(),e.EFF(63," Not In Project "),e.k0s()(),e.j41(64,"div",33)(65,"label")(66,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.IsActive,r)||(i.IsActive=r),r}),e.k0s(),e.EFF(67," Active "),e.k0s(),e.j41(68,"label")(69,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.InActive,r)||(i.InActive=r),r}),e.k0s(),e.EFF(70," In Active "),e.k0s(),e.j41(71,"button",34),e.bIt("click",function(){return i.search()}),e.nrm(72,"i",35),e.k0s(),e.j41(73,"button",36),e.bIt("click",function(){return i.reset()}),e.nrm(74,"i",37),e.k0s()()(),e.j41(75,"div",6)(76,"div",38)(77,"div",39)(78,"label",40)(79,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(80," Auto Filter "),e.k0s(),e.j41(81,"label",41)(82,"input",32),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(83," Show Column "),e.k0s()()()(),e.j41(84,"div",6)(85,"div",38)(86,"datagrid",42),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(87,"ngx-spinner",43)),2&n&&(e.Y8G("hidden",!i.loading),e.R7$(26),e.SpI(" ",i.TotalResourceProjectCount.inProject," "),e.R7$(5),e.SpI(" ",i.TotalResourceProjectCount.notInProject," "),e.R7$(3),e.Y8G("ngForOf",i.ResourceProjectCount),e.R7$(3),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.Y8G("placeholder","-- Designation --")("data",i.DesignationList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Core Skill --")("data",i.CoreSkillList),e.R50("ngModel",i.SelectedCoreSkill),e.Y8G("settings",i.coreSkillSettings),e.R7$(2),e.Y8G("placeholder","-- Addtional Skill --")("data",i.AdditionalSkillList),e.R50("ngModel",i.SelectedAdditionalSkill),e.Y8G("settings",i.additionalSkillSettings),e.R7$(3),e.R50("ngModel",i.InProject),e.R7$(3),e.R50("ngModel",i.NotInProject),e.R7$(4),e.R50("ngModel",i.IsActive),e.R7$(3),e.R50("ngModel",i.InActive),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(4),e.Y8G("rows",i.employeeListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.B3,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_],styles:[".loader-body[_ngcontent-%COMP%]{z-index:9999;position:fixed;padding:0;margin:0 auto;width:30%;top:40%;left:0;text-align:center;color:#000;border:0px none;cursor:wait;right:0}.loader-main[_ngcontent-%COMP%]{z-index:9997;border:medium none;margin:0;padding:0;width:100%;height:100%;top:0;left:0;background-color:#555;opacity:.2;cursor:wait;position:fixed}"]})}return s})(),Ae=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.refreshFromChild=new he.B,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}saveCoreSkill(t,n){const i=JSON.stringify(t);return this.http.post(`${p.apiUrl}api/Coreskill/SaveUpdateCoreSkill?EmployeeID=${n}&CompanyID=${this.currentUser.companyID}`,i,{headers:this.headers}).pipe((0,j.T)(r=>r))}deleteCoreSkill(t,n){return this.http.get(p.apiUrl+"api/Coreskill/DeleteCoreSkill?CoreSkillID="+t+"&EmployeeID="+n,{headers:this.headers}).map(i=>i)}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();class Qe{}class Ut extends C{}function Nh(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Name is required "),e.k0s())}function Lh(s,l){if(1&s&&(e.j41(0,"div",21),e.DNE(1,Nh,2,0,"div",22),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function Bh(s,l){1&s&&e.nrm(0,"span",21)}function Uh(s,l){1&s&&e.nrm(0,"img",23)}let Vt=(()=>{class s{constructor(t,n,i,o,r,a){this.coreSkillService=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.toastyService=a,this.SaveSuccess=new e.bkB,this.coreSkillViewModel={coreskillID:0,name:""},this.coreskillID=0,this.loading=!1,this.result=[],this.name="",this.formData=new Qe,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){null!=this.models&&(this.formData.coreskillID=this.models.coreskillID,this.formData.name=this.models.name,this.coreskillID=this.models.coreskillID)}saveCoreSkill(t=""){this.loading=!0,""==this.formData.name?this.loading=!1:this.currentUser?(this.coreskillID>0&&(this.coreSkillViewModel.coreskillID=this.coreskillID),this.coreSkillViewModel.name=this.formData.name,this.coreSkillService.saveCoreSkill(this.coreSkillViewModel,this.currentUser.employeeID).subscribe(n=>{this.loading=!1,n>0?(this.clearInputdata(),document.getElementById("CoreSkillPopup").click(),document.getElementById("reset").click(),this.SaveSuccess.emit("success"),this.coreSkillService.refreshFromChild.next(n),this.route.params.subscribe(r=>{this.coreSkillViewModel.coreskillID>0?this.toastyService.success("Core Skill updated successfully.","Update Core Skill"):this.toastyService.success("Core Skill saved successfully.","Save Core Skill")})):this.toastyService.warning("Core Skill already exists.","Exists Core Skill")},n=>{console.log(n)})):(this.loading=!0,this.router.navigate(["/login"]))}clearInputdata(){}resetFormInputs(){document.getElementById("CoreSkillForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(Ae),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-core-skill"]],inputs:{models:[e.Mj6.None,"parentData","models"]},outputs:{SaveSuccess:"SaveSuccess"},features:[e.Jv_([Ae])],decls:25,vars:6,consts:[["f","ngForm"],["name","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","CoreSkillForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-12","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-9","coreskill-fields"],["type","hidden","name","coreskillID",3,"ngModelChange","ngModel"],["type","text","placeholder","Name","name","name","required","","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","reset","tabindex","7",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"form",7,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.saveCoreSkill(a))}),e.j41(7,"div",8)(8,"div",9)(9,"label",10),e.EFF(10,"Name"),e.k0s(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.coreskillID,a)||(i.formData.coreskillID=a),e.Njj(a)}),e.k0s(),e.j41(13,"input",13,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.name,a)||(i.formData.name=a),e.Njj(a)}),e.k0s(),e.DNE(15,Lh,2,1,"div",14)(16,Bh,1,0,"span",14),e.k0s()()(),e.j41(17,"div",15)(18,"button",16),e.nrm(19,"i",17),e.EFF(20," Submit "),e.k0s(),e.DNE(21,Uh,1,0,"img",18),e.j41(22,"button",19),e.nrm(23,"i",20),e.EFF(24," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14);e.R7$(12),e.R50("ngModel",i.formData.coreskillID),e.R7$(),e.R50("ngModel",i.formData.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.formData.name),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV]})}return s})();const Vh=["coreSkillModals"];function xh(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"h4",25),e.EFF(3,"Core Skills"),e.k0s(),e.j41(4,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.modalRef.hide())}),e.j41(5,"span",27),e.EFF(6,"\xd7"),e.k0s()()(),e.j41(7,"div",28),e.qex(8),e.j41(9,"app-core-skill",29),e.bIt("SaveSuccess",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.Successmessage=i.reset())}),e.k0s(),e.bVm(),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(9),e.Y8G("parentData",t.model)}}let Qh=(()=>{class s{constructor(t,n,i,o,r,a,d,g,y){this.modalService=t,this.coreSkillService=n,this.spinner=i,this.http=o,this.router=a,this.coreskillService=d,this.cookieService=g,this.toastyService=y,this.title="Core Skills List",this.coreSkillViewModel={coreskillID:0,name:""},this.columns=[],this.alerts=[],this.currentPageNumber=1,this.result=[],this.filterModel=new Ut,this.popupOpened=!1,this.Successmessage="",this.formData=new Qe,this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=r,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="CoreSkillID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.getCookiesFilterData(t.queryParams.filterModel),this.executeSearch(),this.reset(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getCoreSkillList()},t),this.spinner.hide()}getCoreSkillList(){this.spinner.show();let t=new Ut;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.companyID=this.currentUser.companyID,this.filterModel=t;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Coreskill/GetCoreskillList",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.coreskillListViewModel=t.coreskillListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRowForEditDelete(t){let i=this.coreskillListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Core skill?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteCoreSkill(i.coreskillID)}},cancel:function(){}}})}DeleteCoreSkill(t){this.spinner.show(),this.coreskillService.deleteCoreSkill(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Core Skill deleted successfully.","Delete")):2==t?this.toastyService.error("This skill is associated with another resource so you cannot delete.","Can not delete this records"):this.toastyService.error("Something error.","Errors")}deleteOnError(t){}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}openModal(t){this.model=null,this.coreSkillViewModel=new Qe,this.modalRef=this.modalService.show(t,Object.assign({},{class:"addcoreskillpopup"},this.config))}selectedRow(t){let i=this.coreskillListViewModel[t];this.formData.coreskillID=i.coreskillID,this.formData.name=i.name,this.model=this.formData,this.modalRef=this.modalService.show(this.template,Object.assign({},{class:"addcoreskillpopup"},this.config))}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}SearchCoreSkillName(t){0!=this.autoFilter&&""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchSource(t){0!=this.autoFilter&&""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(B.I8),e.rXU(Ae),e.rXU(D.ex),e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(Ae),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-core-skill-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Vh,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.template=o.first)}},features:[e.Jv_([Ae,B.hZ])],decls:32,vars:8,consts:[["coreSkillModals",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["data-toggle","modal","id","CoreSkillModel","tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["id","resetbtn","tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],["placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","","tooltip","If check-box checked then grid will filter on text type","placement","bottom",3,"ngModelChange","ngModel"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","CoreSkillPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.nrm(6,"i",7),e.EFF(7," Core Skills "),e.k0s(),e.j41(8,"div",8)(9,"button",9),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30);return e.Njj(i.openModal(a))}),e.nrm(10,"i",10),e.k0s()()(),e.j41(11,"div",11)(12,"div",2)(13,"div",12)(14,"input",13),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(15,"div",12)(16,"button",14),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(17,"i",15),e.k0s(),e.j41(18,"button",16),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(19,"i",17),e.k0s()()(),e.j41(20,"div",2)(21,"div",18)(22,"div",19)(23,"label")(24,"input",20),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.autoFilter,a)||(i.autoFilter=a),e.Njj(a)}),e.k0s(),e.EFF(25," Auto Filter "),e.k0s()()()(),e.j41(26,"div",2)(27,"div",18)(28,"datagrid",21),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.DNE(29,xh,10,1,"ng-template",null,0,e.C5r),e.nrm(31,"ngx-spinner",22)}2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.coreskillListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(3),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,E.dg,D.et,_,Vt]})}return s})();var _e=F(1366);function Oh(s,l){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectGitID),e.R7$(),e.SpI(" ",t.name," ")}}function Jh(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",18)(1,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.AddNew())}),e.EFF(2," Add New "),e.k0s()()}}let $h=(()=>{class s{constructor(t,n,i){this.projectService=t,this.cookieService=n,this.toastyService=i,this.GitFieldList=[],this.onGitAddEvent=new e.bkB,this.projectGitModel=new ot,this.ProjectGit=new e.bkB,this.ProjectGitID=new e.bkB,this.addNew=new e.bkB,this.designationEnum=N,this.IsItSupport=!1,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser&&(this.IsItSupport=this.designationEnum.ITSupport==this.currentUser.designationID)}ngOnInit(){this.onProjectGitNameChanges(this.projectGitModel.projectGitID)}ngOnChanges(){null!=this.editGitList&&this.editGitList.length>0&&(this.GitFieldList=this.editGitList),this.ProjectID>0&&(this.projectGitModel.projectID=this.ProjectID),this.submitted&&(0==this.projectGitModel.projectGitID?this.AddNew():this.onProjectGitNameChanges(this.projectGitModel.projectGitID))}onProjectGitChanges(){null!=this.projectGitModel.name&&this.projectGitModel.projectID>0&&this.projectService.CheckProjectGitExists(this.projectGitModel.name,this.projectGitModel.projectID,this.projectGitModel.projectGitID).subscribe(t=>{1==t?(this.toastyService.warning("Name is already exists.","Check Name Exists"),this.projectGitModel.name=""):this.ProjectGit.emit(this.projectGitModel)})}onProjectGitNameChanges(t){t>0&&(this.Hide=!1,this.ProjectGitList=this.GitList.filter(n=>n.projectGitID==t)[0],this.projectGitModel.projectID=this.ProjectGitList.projectID,this.projectGitModel.projectGitID=+t,this.projectGitModel.name=this.ProjectGitList.name,this.projectGitModel.gitURL=this.ProjectGitList.gitURL,this.projectGitModel.description=this.ProjectGitList.description,this.projectGitModel.isDone=this.ProjectGitList.isDone,this.ProjectGit.emit(this.projectGitModel)),this.ProjectGitID.emit(t)}AddNew(){this.projectGitModel.projectGitID=0,this.projectGitModel.name="",this.projectGitModel.gitURL="",this.projectGitModel.description="",this.addNew.emit(!0)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-add-project-git"]],inputs:{editGitList:"editGitList",submitted:"submitted",Hide:"Hide",GitList:"GitList",ProjectID:"ProjectID"},outputs:{onGitAddEvent:"onGitAddEvent",ProjectGit:"ProjectGit",ProjectGitID:"ProjectGitID",addNew:"addNew"},features:[e.Jv_([R]),e.OA$],decls:23,vars:7,consts:[["Name",""],["GitName",""],["url",""],[1,"form-group","row","mb-3"],[1,"col-md-6","row"],[1,"col-lg-3","col-md-4"],[1,"col-lg-9","col-md-8","d-flex","gap-3"],["id","Name","name","Name",1,"form-control","w-100",3,"ngModelChange","change","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-4 d-flex",4,"ngIf"],[1,"row",3,"hidden"],[1,"col-md-4"],[1,"form-group","mb-3"],["type","Name","name","Name","placeholder","Name",1,"form-control",3,"ngModelChange","focusout","ngModel"],["type","url","name","url","placeholder","Git URL",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","Description","placeholder","Git Description",1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],[1,"col-md-4","d-flex"],["type","button",1,"btn","btn-primary","btn-small",3,"click"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"label",5),e.EFF(3,"Name "),e.k0s(),e.j41(4,"div",6)(5,"select",7,0),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectGitModel.projectGitID,a)||(i.projectGitModel.projectGitID=a),e.Njj(a)}),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.onProjectGitNameChanges(a.target.value))}),e.j41(7,"option",8),e.EFF(8,"-- Name --"),e.k0s(),e.DNE(9,Oh,2,2,"option",9),e.k0s(),e.DNE(10,Jh,3,0,"div",10),e.k0s()()(),e.j41(11,"div",11)(12,"div",12)(13,"div",13)(14,"input",14,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectGitModel.name,a)||(i.projectGitModel.name=a),e.Njj(a)}),e.bIt("focusout",function(){return e.eBV(o),e.Njj(i.onProjectGitChanges())}),e.k0s()()(),e.j41(16,"div",12)(17,"div",13)(18,"input",15,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectGitModel.gitURL,a)||(i.projectGitModel.gitURL=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.onProjectGitChanges())}),e.k0s()()(),e.j41(20,"div",12)(21,"div",13)(22,"input",16),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectGitModel.description,a)||(i.projectGitModel.description=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.onProjectGitChanges())}),e.k0s()()()()}2&n&&(e.R7$(5),e.R50("ngModel",i.projectGitModel.projectGitID),e.R7$(4),e.Y8G("ngForOf",i.GitList),e.R7$(),e.Y8G("ngIf",!i.IsItSupport),e.R7$(),e.Y8G("hidden",1==i.Hide),e.R7$(3),e.R50("ngModel",i.projectGitModel.name),e.R7$(4),e.R50("ngModel",i.projectGitModel.gitURL),e.R7$(4),e.R50("ngModel",i.projectGitModel.description))},dependencies:[u.Sq,u.bT,c.xH,c.y7,c.me,c.wz,c.BC,c.vS]})}return s})();function zh(s,l){if(1&s&&(e.j41(0,"div",11)(1,"div",8)(2,"label",9),e.EFF(3," Approved By "),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s(),e.j41(6,"span"),e.EFF(7),e.nI1(8,"date"),e.k0s()()()),2&s){const t=e.XpG(2);e.R7$(5),e.SpI("",t.ProjectGitPermissionDetails[0].approvedBy," "),e.R7$(2),e.SpI("(",e.bMT(8,2,t.ProjectGitPermissionDetails[0].approvedDatetime),")")}}function Xh(s,l){if(1&s&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"label",9),e.EFF(4,"Requested By"),e.k0s(),e.j41(5,"span"),e.EFF(6),e.k0s(),e.j41(7,"span"),e.EFF(8),e.nI1(9,"date"),e.k0s()()(),e.DNE(10,zh,9,4,"div",10),e.k0s()),2&s){const t=e.XpG();e.R7$(6),e.JRh(t.ProjectGitPermissionDetails[0].historyBy),e.R7$(2),e.SpI("(",e.bMT(9,3,t.ProjectGitPermissionDetails[0].historyDatetime),") "),e.R7$(2),e.Y8G("ngIf",1==t.ProjectGitPermissionDetails[0].isDone)}}function qh(s,l){if(1&s&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function Kh(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"input",12),e.bIt("change",function(i){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.PermissionChange(i,o.id,r.PMEmployee.employeeID))}),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG(2);e.R7$(),e.Mz_("name","chkbox",t.id,""),e.Y8G("disabled",n.IsHistory||n.IsItSupport)("checked",t.id==n.PMEmployee.gitPermissionID),e.BMQ("id",t.id)}}function Wh(s,l){if(1&s&&(e.j41(0,"tr")(1,"th")(2,"div"),e.EFF(3),e.k0s()(),e.DNE(4,Kh,2,5,"td",4),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.SpI(" ",t.PMEmployee.employeeName," "),e.R7$(),e.Y8G("ngForOf",t.GitPermissionList)}}function Zh(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"input",13),e.bIt("change",function(i){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.PermissionChange(i,o.id,r.TLEmployee.employeeID))}),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG(2);e.R7$(),e.FCK("id","",t.id,"_",n.TLEmployee.employeeID,""),e.Mz_("name","chkbox",t.id,""),e.Y8G("disabled",n.IsHistory||n.IsItSupport)("checked",t.id==n.TLEmployee.gitPermissionID)}}function ed(s,l){if(1&s&&(e.j41(0,"tr")(1,"th")(2,"div"),e.EFF(3),e.k0s()(),e.DNE(4,Zh,2,7,"td",4),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.JRh(t.TLEmployee.employeeName),e.R7$(),e.Y8G("ngForOf",t.GitPermissionList)}}function td(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"input",13),e.bIt("change",function(i){const o=e.eBV(t).$implicit,r=e.XpG().index,a=e.XpG();return e.Njj(a.PermissionChange(i,o.id,a.DeveloperEmployee[r].employeeID,r))}),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG().$implicit,i=e.XpG();e.R7$(),e.FCK("id","",t.id,"_",n.employeeID,""),e.Mz_("name","chkbox",t.id,""),e.Y8G("disabled",i.IsHistory||i.IsItSupport)("checked",t.id==n.gitPermissionID)}}function id(s,l){if(1&s&&(e.j41(0,"tr")(1,"th")(2,"div"),e.EFF(3),e.k0s()(),e.DNE(4,td,2,7,"td",4),e.k0s()),2&s){const t=l.$implicit,n=e.XpG();e.R7$(3),e.JRh(t.employeeName),e.R7$(),e.Y8G("ngForOf",n.GitPermissionList)}}function nd(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"input",13),e.bIt("change",function(i){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.PermissionChange(i,o.id,r.DesignerEmployee.employeeID))}),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG(2);e.R7$(),e.FCK("id","",t.id,"_",n.DesignerEmployee.employeeID,""),e.Mz_("name","chkbox",t.id,""),e.Y8G("disabled",n.IsHistory||n.IsItSupport)("checked",t.id==n.DesignerEmployee.gitPermissionID)}}function od(s,l){if(1&s&&(e.j41(0,"tr")(1,"th")(2,"div"),e.EFF(3),e.k0s()(),e.DNE(4,nd,2,7,"td",4),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.JRh(t.DesignerEmployee.employeeName),e.R7$(),e.Y8G("ngForOf",t.GitPermissionList)}}function sd(s,l){if(1&s){const t=e.RV6();e.j41(0,"td")(1,"input",13),e.bIt("change",function(i){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.PermissionChange(i,o.id,r.QAEmployee.employeeID))}),e.k0s()()}if(2&s){const t=l.$implicit,n=e.XpG(2);e.R7$(),e.FCK("id","",t.id,"_",n.QAEmployee.employeeID,""),e.Mz_("name","chkbox",t.id,""),e.Y8G("disabled",n.IsHistory||n.IsItSupport)("checked",t.id==n.QAEmployee.gitPermissionID)}}function rd(s,l){if(1&s&&(e.j41(0,"tr")(1,"th")(2,"div"),e.EFF(3),e.k0s()(),e.DNE(4,sd,2,7,"td",4),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.JRh(t.QAEmployee.employeeName),e.R7$(),e.Y8G("ngForOf",t.GitPermissionList)}}let xt=(()=>{class s{constructor(t){this.cookieService=t,this.developers={},this.designationEnum=N,this.IsItSupport=!1,this.DeveloperEmployee=[],this.ProjectGitPermissionModel=new e.bkB,this.gitPermissionEnum=qe,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser&&(this.IsItSupport=this.designationEnum.ITSupport==this.currentUser.designationID)}ngOnInit(){}ngOnChanges(t){null!=t.ProjectGitPermissionDetails&&null!=t.ProjectGitPermissionDetails.currentValue&&(this.ProjectGitPermissionDetail=t.ProjectGitPermissionDetails.currentValue,this.PMEmployee=this.ProjectGitPermissionDetail.filter(n=>n.designationID===N.PM||n.designationID===N.PL||n.designationID===N.CEO)[0],this.TLEmployee=this.ProjectGitPermissionDetail.filter(n=>n.designationID===N.TL)[0],this.DesignerEmployee=this.ProjectGitPermissionDetail.filter(n=>n.designationID===N.Designer)[0],this.QAEmployee=this.ProjectGitPermissionDetail.filter(n=>n.designationID===N.QA)[0],this.DeveloperEmployee=this.ProjectGitPermissionDetail.filter(n=>n.designationID===N.Developer||n.designationID===N.SrDeveloper),this.ProjectGitPermissionModel.emit(this.ProjectGitPermissionDetail))}PermissionChange(t,n,i){this.Index=this.ProjectGitPermissionDetail.findIndex(o=>o.employeeID==i),this.ProjectGitPermissionDetail[this.Index].gitPermissionID=t.target.checked?n:0,this.ProjectGitPermissionModel.emit(this.ProjectGitPermissionDetail)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-git-details"]],inputs:{GitPermissionList:"GitPermissionList",Hide:"Hide",ProjectGitPermissionDetails:"ProjectGitPermissionDetails",IsHistory:"IsHistory"},outputs:{ProjectGitPermissionModel:"ProjectGitPermissionModel"},features:[e.OA$],decls:15,vars:8,consts:[["class","row details-title",4,"ngIf"],[1,"row",3,"hidden"],[1,"col-md-12","table-responsive"],["id","tblProjectSetup",1,"table","table-responsive-sm"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row","details-title"],[1,"col-md-6"],[1,"project-leader-box"],[1,"font-weight-bold","mb-0"],["class","col-md-6 text-right",4,"ngIf"],[1,"col-md-6","text-right"],["type","checkbox",3,"change","disabled","checked","name"],["type","checkbox",3,"change","disabled","checked","id","name"]],template:function(n,i){1&n&&(e.DNE(0,Xh,11,5,"div",0),e.j41(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th"),e.EFF(7,"Resource"),e.k0s(),e.DNE(8,qh,2,1,"th",4),e.k0s()(),e.j41(9,"tbody"),e.DNE(10,Wh,5,2,"tr",5)(11,ed,5,2,"tr",5)(12,id,5,2,"tr",4)(13,od,5,2,"tr",5)(14,rd,5,2,"tr",5),e.k0s()()()()),2&n&&(e.Y8G("ngIf",void 0!==i.ProjectGitPermissionDetails&&i.IsHistory),e.R7$(),e.Y8G("hidden",1==i.Hide),e.R7$(7),e.Y8G("ngForOf",i.GitPermissionList),e.R7$(2),e.Y8G("ngIf",i.PMEmployee),e.R7$(),e.Y8G("ngIf",i.TLEmployee),e.R7$(),e.Y8G("ngForOf",i.DeveloperEmployee),e.R7$(),e.Y8G("ngIf",i.DesignerEmployee),e.R7$(),e.Y8G("ngIf",i.QAEmployee))},dependencies:[u.Sq,u.bT,u.vh],styles:[".table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #c8ced3}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right:1px solid #c8ced3}.table[_ngcontent-%COMP%]{border:1px solid #c8ced3}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:400}"]})}return s})();function ad(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.sendGitPermissionEmail())}),e.nrm(1,"i",22),e.EFF(2," Send Email "),e.k0s()}}function ld(s,l){1&s&&e.nrm(0,"img",23)}function cd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",12)(1,"form",13,0),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.sdS(2),o=e.XpG();return e.Njj(i.form.valid&&o.saveProjectGitPermissionDetails(i))}),e.j41(3,"app-add-project-git",14),e.bIt("ProjectGit",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.GetProjectGitDetails(i))})("ProjectGitID",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.getProjectGitID(i))})("addNew",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.AddNew(i))}),e.k0s(),e.j41(4,"div")(5,"app-git-details",15),e.bIt("ProjectGitPermissionModel",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.GetChangeProjectGitPermissions(i))}),e.k0s()(),e.j41(6,"div",16),e.DNE(7,ad,3,0,"button",17),e.j41(8,"button",18),e.nrm(9,"i",19),e.EFF(10," Submit "),e.k0s(),e.DNE(11,ld,1,0,"img",20),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("GitList",t.GitList)("ProjectID",t.ProjectID)("submitted",t.Issubmitted)("Hide",t.hide),e.R7$(2),e.Y8G("GitPermissionList",t.GetPermissionList)("ProjectGitPermissionDetails",t.ProjectGitPermissionDetails)("Hide",t.hide)("IsHistory",!1),e.R7$(2),e.Y8G("ngIf",!t.IsItSupport),e.R7$(),e.Y8G("disabled",t.loading),e.R7$(3),e.Y8G("ngIf",t.loading)}}function hd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",5)(2,"div",24),e.EFF(3,"Current Access"),e.k0s()(),e.j41(4,"div",12),e.nrm(5,"app-git-details",25),e.k0s(),e.j41(6,"div",16)(7,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.GetProjectGitHistory())}),e.nrm(8,"i",27),e.EFF(9," View all history "),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(5),e.Y8G("GitPermissionList",t.GetPermissionList)("ProjectGitPermissionDetails",t.GitLastHistory)("IsHistory",!0)}}let Qt=(()=>{class s{constructor(t,n,i,o,r){this.projectService=t,this.cookieService=n,this.router=i,this.commonFunctionsService=o,this.toastyService=r,this.ProjectGit=new ot,this.IsDone=0,this.GitPermissionSendEmailModel=new Bn,this.ProjectId=0,this.GetPermissionList=[],this.ProjectGitPermissionDetails=[],this.GitLastHistory=[],this.DevelopersList=[],this.projectGitPermissionDetailsModel=[],this.projectGitID=0,this.GitList=[],this.loading=!1,this.hide=!1,this.OldPermissionDetails=[],this.NewResult=[],this.OldGitResult=[],this.NewGitResult=[],this.IsGitChange=!1,this.IsPermissionChange=!1,this.SaveProjectGitPermissionDetailsModel=new Ln,this.designationEnum=N,this.IsItSupport=!1,this.Issubmitted=!1,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.IsItSupport=this.commonFunctionsService.IsITSupport(),this.ProjectID>0&&(this.ProjectId=this.ProjectID,this.getProjectSetUpDetails(this.ProjectId),this.getProjectGitPermissionByID(this.ProjectId),this.getProjectGitList(this.ProjectId))}GetProjectGitDetails(t){this.ProjectGit=t,this.IsDone=t.isDone,t.projectID=this.ProjectID}getProjectGitID(t){this.projectGitID=t,this.hide=!1,this.ProjectID>0&&this.getProjectGitPermissionByID(this.ProjectID)}AddNew(t){1==t&&(this.projectGitID=0,this.hide=!1,this.ProjectID>0&&this.getProjectGitPermissionByID(this.ProjectID))}getProjectSetUpDetails(t){this.projectService.GetProjectSetUpDetails(t).subscribe(n=>{""!=n&&(this.ProjectDetails=n.projectDetails,this.GetPermissionList=n.gitPermission)},n=>{console.log(n)})}getProjectGitPermissionByID(t){this.projectService.GetProjectGitPermissionByID(t,this.projectGitID).subscribe(n=>{""!=n&&(this.ProjectGitPermissionDetails=Object.assign([],n.projectGitPermissionListModel),this.GitLastHistory=n.gitPermissionHistoryListModel)},n=>{console.log(n)})}getProjectGitList(t){this.projectService.GetProjectGitList(t).subscribe(n=>{""!=n&&(this.GitList=n,this.OldGitResult=n,this.hide=!0)},n=>{console.log(n)})}GetChangeProjectGitPermissions(t){this.projectGitPermissionDetailsModel=Object.assign([],t)}saveProjectGitPermissionDetails(){this.loading=!0,this.projectService.GetProjectGitPermissionByID(this.ProjectID,this.projectGitID).subscribe(t=>{""!=t&&(this.PermissionDetails=Object.assign({},t)),this.currentUser&&this.projectGitPermissionDetailsModel.length>0&&this.ProjectGit.name.length>0?(this.ProjectGit.isDone=this.IsDone=1,this.SaveProjectGitPermissionDetailsModel.ProjectGitModel=this.ProjectGit,this.SaveProjectGitPermissionDetailsModel.ProjectGitPermissionViewModel=this.projectGitPermissionDetailsModel,this.NewResult=this.SaveProjectGitPermissionDetailsModel.ProjectGitPermissionViewModel,this.NewGitResult=this.SaveProjectGitPermissionDetailsModel.ProjectGitModel,0==this.projectGitID?(this.IsGitChange=!0,this.IsPermissionChange=!0):(this.OldGitResult=this.GitList.find(n=>n.projectGitID==this.projectGitID),this.IsGitChange=JSON.stringify(this.NewGitResult,Object.keys(this.NewGitResult).sort())!==JSON.stringify(this.OldGitResult,Object.keys(this.OldGitResult).sort()),this.OldPermissionDetails=this.PermissionDetails.projectGitPermissionListModel,JSON.stringify(this.NewResult)===JSON.stringify(this.OldPermissionDetails)?this.IsPermissionChange=!1:(this.IsPermissionChange=!0,this.IsGitChange=!0,this.SaveProjectGitPermissionDetailsModel.ProjectGitModel.isDone=0),console.log(this.IsGitChange,this.IsPermissionChange)),this.IsGitChange||this.IsPermissionChange&&this.SaveProjectGitPermissionDetailsModel?this.projectService.saveProjectGitPermissionDetails(this.SaveProjectGitPermissionDetailsModel,this.IsGitChange,this.IsPermissionChange,this.currentUser.employeeID).subscribe(n=>{this.loading=!1,n>0?this.toastyService.success("Project git permissions updated successfully.","Update project git permissions"):this.toastyService.success("Project git permissions saved successfully.","Save project git permissions"),this.getProjectGitList(this.ProjectId),this.Issubmitted=!0,console.log(this.hide)},n=>{console.log(n)}):(this.loading=!1,this.toastyService.info("No changes.","Project git permissions"))):this.loading=!1})}GetProjectGitHistory(){console.log(this.ProjectID,this.projectGitID),this.cookieService.set("ProjectGitHistory",JSON.stringify({ProjectID:this.ProjectID,ProjectGitID:this.projectGitID})),this.router.navigate([]).then(n=>{window.open("https://smartdesk.tretainfotech.com/Master/GitHistory","_blank")})}sendGitPermissionEmail(){this.GitPermissionSendEmailModel.projectID=this.ProjectID,this.GitPermissionSendEmailModel.gitName=this.ProjectGit.name,this.GitPermissionSendEmailModel.PermissionList=this.GetPermissionList,this.GitPermissionSendEmailModel.ProjectGitPermissionDetails=this.ProjectGitPermissionDetails;var t=this.commonFunctionsService.encryptUsingAES256(this.ProjectID);this.GitPermissionSendEmailModel.projectID>0&&this.GitPermissionSendEmailModel.gitName.length>0&&this.projectService.SendGitPermissionEmail(this.GitPermissionSendEmailModel,t).subscribe(n=>{"Success"==n&&this.toastyService.success("Email Send successfully.","Send Git Permission Email")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(S.O),e.rXU(f.Ix),e.rXU(ne),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-git"]],inputs:{ProjectID:"ProjectID"},features:[e.Jv_([R])],decls:13,vars:3,consts:[["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,""],[1,"card-header"],[1,"caption","d-flex","justify-content-between","align-items-center"],[1,"mb-0","container-check"],["type","checkbox","value","","name","isDone","data-md-icheck","",3,"ngModelChange","ngModel"],[1,"checkmark"],["class","card-body",4,"ngIf"],[4,"ngIf"],[1,"card-body"],["name","form","novalidate","",3,"ngSubmit"],[3,"ProjectGit","ProjectGitID","addNew","GitList","ProjectID","submitted","Hide"],[3,"ProjectGitPermissionModel","GitPermissionList","ProjectGitPermissionDetails","Hide","IsHistory"],[1,"card-footer"],["class","btn btn-success","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-paper-plane"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],[1,"caption"],[3,"GitPermissionList","ProjectGitPermissionDetails","IsHistory"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-dot-circle-o"]],template:function(n,i){1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.EFF(6," Git Permission SetUp "),e.j41(7,"label",7)(8,"input",8),e.mxI("ngModelChange",function(r){return e.DH7(i.IsDone,r)||(i.IsDone=r),r}),e.k0s(),e.EFF(9," Done "),e.nrm(10,"span",9),e.k0s()()(),e.DNE(11,cd,12,11,"div",10),e.k0s(),e.DNE(12,hd,10,3,"div",11),e.k0s()()()),2&n&&(e.R7$(8),e.R50("ngModel",i.IsDone),e.R7$(3),e.Y8G("ngIf",i.ProjectDetails),e.R7$(),e.Y8G("ngIf",i.GitLastHistory.length>0))},dependencies:[u.bT,c.qT,c.Zm,c.BC,c.cb,c.vS,c.cV,$h,xt],styles:[".paddingtop[_ngcontent-%COMP%]{padding-top:6px}.col-label[_ngcontent-%COMP%]{font-weight:bolder!important}"]})}return s})();var ye=F(4412);let $=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.PublicHolidayData=new ye.t({publicHolidayID:0,holidayName:"",fromDate:"",toDate:"",day:0}),this.frontEndData=new ye.t({id:0,name:""}),this.backEndData=new ye.t({id:0,name:""}),this.thirdPartyAPIData=new ye.t({id:0,name:"",description:""}),this.StatusMailData=new ye.t({date:""}),this.refreshFromChid=new he.B,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}SaveUpdatePublicHoliday(t){return this.http.post(p.apiUrl+"api/PublicHoliday/SaveUpdatePublicHoliday?EmployeeID="+this.currentUser.employeeID+"&CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}deletePublicHoliday(t){return this.http.get(`${p.apiUrl}api/PublicHoliday/DeletePublicHoliday?PublicHolidayID=${t}`,{headers:this.headers}).pipe((0,j.T)(n=>n))}CheckHolidayExists(t){return this.http.get(p.apiUrl+"api/PublicHoliday/CheckHolidayExists?HolidayName="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).pipe((0,j.T)(n=>n))}SaveFrontEnd(t){return this.http.post(p.apiUrl+"api/Master/SaveUpdateFrontend?EmployeeID="+this.currentUser.employeeID+"&CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}deleteFrontEnd(t,n){return this.http.get(p.apiUrl+"api/Master/DeleteFrontEnd?ID="+t+"&EmployeeID="+n,{headers:this.headers}).map(i=>i)}SaveBackEnd(t){return this.http.post(p.apiUrl+"api/Master/SaveUpdateBackend?EmployeeID="+this.currentUser.employeeID+"&CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}deleteBackEnd(t,n){return this.http.get(p.apiUrl+"api/Master/DeleteBackEnd?ID="+t+"&EmployeeID="+n,{headers:this.headers}).map(i=>i)}SaveThiredPartyAPI(t){return this.http.post(p.apiUrl+"api/Master/SaveUpdateThiredPartAPI?EmployeeID="+this.currentUser.employeeID+"&CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}deleteThirdPartyAPI(t,n){return this.http.get(p.apiUrl+"api/Master/DeleteThiredPartAPI?ID="+t+"&EmployeeID="+n,{headers:this.headers}).map(i=>i)}CheckFrontendExists(t){return this.http.get(p.apiUrl+"api/Master/CheckFrontendExists?Name="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}CheckServerExists(t){return this.http.get(p.apiUrl+"api/Master/CheckServerExists?Name="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}CheckBackendExists(t){return this.http.get(p.apiUrl+"api/Master/CheckBackendExists?Name="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}CheckThiredPartAPIExists(t){return this.http.get(p.apiUrl+"api/Master/CheckThiredPartAPIExists?Name="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}SaveRequiredServer(t){return this.http.post(p.apiUrl+"api/Master/SaveUpdateRequiredServer?EmployeeID="+this.currentUser.employeeID+"&CompanyID="+this.currentUser.companyID,JSON.stringify(t),{headers:this.headers})}SearchThirdpartyapi(t){return this.http.get(p.apiUrl+"api/Master/SearchThirdpartyapi?Name="+t+"&CompanyID="+this.currentUser.companyID,{headers:this.headers}).map(n=>n)}SendStatusMail(t){return this.http.get(p.apiUrl+"api/Usertimesheet/SendTaskStatusMail?EmployeeId="+this.currentUser.employeeID+"&MailDate="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();function dd(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Name is required "),e.k0s())}function pd(s,l){if(1&s&&(e.j41(0,"div",21),e.DNE(1,dd,2,0,"div",22),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function ud(s,l){1&s&&e.nrm(0,"span",21)}function md(s,l){1&s&&e.nrm(0,"img",23)}let Ot=(()=>{class s{constructor(t,n){this.masterService=t,this.toastyService=n,this.SaveSuccess=new e.bkB,this.frontendViewModel={id:0,name:""},this.loading=!1,this.masterService.frontEndData.subscribe(i=>{this.frontendViewModel.id=i.id,this.frontendViewModel.name=i.name})}ngOnInit(){}resetFormInputs(){this.masterService.frontEndData.next({id:0,name:""}),document.getElementById("Frontendreset").click()}saveFrontend(t){this.frontendViewModel.name.length>0&&(null===this.frontendViewModel.id&&(this.frontendViewModel.id=0),console.log(this.frontendViewModel),this.masterService.CheckFrontendExists(this.frontendViewModel.name).subscribe(n=>{1==n?(this.toastyService.warning("Name is already exists.","Check Name Exists"),this.frontendViewModel.name=""):this.masterService.SaveFrontEnd(this.frontendViewModel).subscribe(i=>{i>0&&(this.SaveSuccess.emit("SuccessFul"),this.frontendViewModel.id>0?this.toastyService.success("Front end updated successfully.","Update front end"):this.toastyService.success("Front end saved successfully.","Save front end"),this.resetFormInputs(),document.getElementById("FrontendPopup").click(),this.masterService.refreshFromChid.next({PublicHolidayID:0,FrontendID:i,BackendID:0,ThiredpartyID:0,RequiredServerID:0}))})}))}CheckFrontendExists(t){this.masterService.CheckFrontendExists(t).subscribe(n=>{1==n&&(this.toastyService.warning("Name is already exists.","Check Name Exists"),this.frontendViewModel.name="")},n=>{console.log(n),this.toastyService.error("Something error.","Check Name Exists")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU($),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-front-end"]],inputs:{models:[e.Mj6.None,"parentData","models"]},outputs:{SaveSuccess:"SaveSuccess"},decls:25,vars:6,consts:[["f","ngForm"],["name","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","frontendForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row","mb-3"],[1,"col-md-11","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-7","coreskill-fields"],["type","hidden","name","id",3,"ngModelChange","ngModel"],["type","text","placeholder","Name","name","name","required","","maxlength","50",1,"form-control",3,"ngModelChange","focusout","ngModel"],["class","error",4,"ngIf"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","Frontendreset","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"form",7,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.saveFrontend(a))}),e.j41(7,"div",8)(8,"div",9)(9,"label",10),e.EFF(10,"Name"),e.k0s(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.frontendViewModel.id,a)||(i.frontendViewModel.id=a),e.Njj(a)}),e.k0s(),e.j41(13,"input",13,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.frontendViewModel.name,a)||(i.frontendViewModel.name=a),e.Njj(a)}),e.bIt("focusout",function(a){return e.eBV(o),e.Njj(i.CheckFrontendExists(a.target.value))}),e.k0s(),e.DNE(15,pd,2,1,"div",14)(16,ud,1,0,"span",14),e.k0s()()(),e.j41(17,"div",15)(18,"button",16),e.nrm(19,"i",17),e.EFF(20," Submit "),e.k0s(),e.DNE(21,md,1,0,"img",18),e.j41(22,"button",19),e.nrm(23,"i",20),e.EFF(24," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14);e.R7$(12),e.R50("ngModel",i.frontendViewModel.id),e.R7$(),e.R50("ngModel",i.frontendViewModel.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.frontendViewModel.name),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV]})}return s})();function gd(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Name is required "),e.k0s())}function fd(s,l){if(1&s&&(e.j41(0,"div",21),e.DNE(1,gd,2,0,"div",22),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function Ad(s,l){1&s&&e.nrm(0,"span",21)}function _d(s,l){1&s&&e.nrm(0,"img",23)}let Jt=(()=>{class s{constructor(t,n){this.masterService=t,this.toastyService=n,this.SaveSuccess=new e.bkB,this.backendViewModel={id:0,name:""},this.loading=!1,this.masterService.backEndData.subscribe(i=>{this.backendViewModel.id=i.id,this.backendViewModel.name=i.name})}ngOnInit(){}resetFormInputs(){this.masterService.backEndData.next({id:0,name:""}),document.getElementById("Backendreset").click()}saveBackend(t){this.backendViewModel.name.length>0&&(null===this.backendViewModel.id&&(this.backendViewModel.id=0),this.masterService.CheckBackendExists(this.backendViewModel.name).subscribe(n=>{1==n?(this.toastyService.warning("Name is already exists.","Check Name Exists"),this.backendViewModel.name=""):this.masterService.SaveBackEnd(this.backendViewModel).subscribe(i=>{i>0&&(this.SaveSuccess.emit("SuccessFul"),this.backendViewModel.id>0?this.toastyService.success("Back end updated successfully.","Update back end"):this.toastyService.success("Back end saved successfully.","Save back end"),this.resetFormInputs(),document.getElementById("BackendPopup").click(),this.masterService.refreshFromChid.next({PublicHolidayID:0,FrontendID:0,BackendID:i,ThiredpartyID:0,RequiredServerID:0}))})}))}CheckBackendExists(t){this.masterService.CheckBackendExists(t).subscribe(n=>{1==n&&(this.toastyService.warning("Name is already exists.","Check Name Exists"),this.backendViewModel.name="")},n=>{console.log(n),this.toastyService.error("Something error.","Check Name Exists")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU($),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-back-end"]],inputs:{models:[e.Mj6.None,"parentData","models"]},outputs:{SaveSuccess:"SaveSuccess"},decls:25,vars:6,consts:[["f","ngForm"],["name","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","BackendForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row","mb-3"],[1,"col-md-11","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-7"],["type","hidden","name","id",3,"ngModelChange","ngModel"],["type","text","placeholder","Name","name","name","required","","maxlength","50",1,"form-control",3,"ngModelChange","focusout","ngModel"],["class","error",4,"ngIf"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","Backendreset","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"form",7,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.saveBackend(a))}),e.j41(7,"div",8)(8,"div",9)(9,"label",10),e.EFF(10,"Name"),e.k0s(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.backendViewModel.id,a)||(i.backendViewModel.id=a),e.Njj(a)}),e.k0s(),e.j41(13,"input",13,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.backendViewModel.name,a)||(i.backendViewModel.name=a),e.Njj(a)}),e.bIt("focusout",function(a){return e.eBV(o),e.Njj(i.CheckBackendExists(a.target.value))}),e.k0s(),e.DNE(15,fd,2,1,"div",14)(16,Ad,1,0,"span",14),e.k0s()()(),e.j41(17,"div",15)(18,"button",16),e.nrm(19,"i",17),e.EFF(20," Submit "),e.k0s(),e.DNE(21,_d,1,0,"img",18),e.j41(22,"button",19),e.nrm(23,"i",20),e.EFF(24," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14);e.R7$(12),e.R50("ngModel",i.backendViewModel.id),e.R7$(),e.R50("ngModel",i.backendViewModel.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.backendViewModel.name),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV]})}return s})();function yd(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Name is required "),e.k0s())}function Sd(s,l){if(1&s&&(e.j41(0,"div",25),e.DNE(1,yd,2,0,"div",26),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function Dd(s,l){1&s&&e.nrm(0,"span",25)}function jd(s,l){if(1&s&&(e.j41(0,"div")(1,"span",31),e.EFF(2,"Description:"),e.k0s(),e.EFF(3),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.description," ")}}function bd(s,l){if(1&s&&(e.j41(0,"li")(1,"div")(2,"span",31),e.EFF(3,"Name:"),e.k0s(),e.EFF(4),e.k0s(),e.DNE(5,jd,4,1,"div",26),e.k0s()),2&s){const t=l.$implicit;e.R7$(4),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.description)}}function Md(s,l){if(1&s&&(e.j41(0,"div",9)(1,"div",27)(2,"label",28),e.EFF(3,"Related API"),e.k0s(),e.j41(4,"ul",29),e.DNE(5,bd,6,2,"li",30),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.RelatedAPIs)}}function Cd(s,l){1&s&&e.nrm(0,"img",32)}let $t=(()=>{class s{constructor(t,n){this.masterService=t,this.toastyService=n,this.SaveSuccess=new e.bkB,this.thiredPartyAPIViewModel={id:0,name:"",description:""},this.editModeName="",this.loading=!1,this.RelatedAPIs=[],this.masterService.thirdPartyAPIData.subscribe(i=>{this.thiredPartyAPIViewModel.id=i.id,this.thiredPartyAPIViewModel.name=i.name,this.editModeName=i.name,this.thiredPartyAPIViewModel.description=i.description})}ngOnInit(){}resetFormInputs(){this.masterService.thirdPartyAPIData.next({id:0,name:"",description:""}),document.getElementById("Thiredpartyreset").click()}saveThiredPartyAPI(t){this.thiredPartyAPIViewModel.name.length>0&&(null===this.thiredPartyAPIViewModel.id&&(this.thiredPartyAPIViewModel.id=0),this.editModeName===this.thiredPartyAPIViewModel.name&&0!==this.thiredPartyAPIViewModel.id?this.SaveThirdPartyAPICall():this.masterService.CheckThiredPartAPIExists(this.thiredPartyAPIViewModel.name).subscribe(n=>{1==n?(this.toastyService.warning("Name is already exists.","Check Name Exists"),this.thiredPartyAPIViewModel.name=""):this.SaveThirdPartyAPICall()}))}SaveThirdPartyAPICall(){this.masterService.SaveThiredPartyAPI(this.thiredPartyAPIViewModel).subscribe(t=>{t>0&&(this.SaveSuccess.emit("SuccessFul"),this.thiredPartyAPIViewModel.id>0?this.toastyService.success("Thired party api updated successfully.","Update Thired party api"):this.toastyService.success("Third party api saved successfully.","Save Third party api"),this.resetFormInputs(),document.getElementById("ThiredpartyPopup").click(),this.masterService.refreshFromChid.next({PublicHolidayID:0,FrontendID:0,BackendID:0,ThiredpartyID:t,RequiredServerID:0}))})}GetRelatedThirdParty(){this.masterService.SearchThirdpartyapi(this.thiredPartyAPIViewModel.name).subscribe(t=>{this.RelatedAPIs=t})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU($),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-third-party-api"]],inputs:{models:[e.Mj6.None,"parentData","models"]},outputs:{SaveSuccess:"SaveSuccess"},decls:33,vars:9,consts:[["f","ngForm"],["name","ngModel"],["description","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","thiredpartyapiForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row","mb-3"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label","required"],[1,"col-md-8","coreskill-fields"],["type","hidden","name","id",3,"ngModelChange","ngModel"],["type","text","placeholder","Name","name","name","required","","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"col-md-4","col-form-label"],["type","text","placeholder","Description","name","description","maxlength","250",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group row mb-3",4,"ngIf"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","Thiredpartyreset","tabindex"," 7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],[1,"col-md-12","row"],[1,"col-md-2","col-form-label"],[1,"related-api","col-md-10"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"form",8,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.saveThiredPartyAPI(a))}),e.j41(7,"div",9)(8,"div",10)(9,"label",11),e.EFF(10,"API Name"),e.k0s(),e.j41(11,"div",12)(12,"input",13),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.thiredPartyAPIViewModel.id,a)||(i.thiredPartyAPIViewModel.id=a),e.Njj(a)}),e.k0s(),e.j41(13,"input",14,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.thiredPartyAPIViewModel.name,a)||(i.thiredPartyAPIViewModel.name=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.GetRelatedThirdParty())}),e.k0s(),e.DNE(15,Sd,2,1,"div",15)(16,Dd,1,0,"span",15),e.k0s()(),e.j41(17,"div",10)(18,"label",16),e.EFF(19,"Description"),e.k0s(),e.j41(20,"div",12)(21,"input",13),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.thiredPartyAPIViewModel.id,a)||(i.thiredPartyAPIViewModel.id=a),e.Njj(a)}),e.k0s(),e.j41(22,"input",17,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.thiredPartyAPIViewModel.description,a)||(i.thiredPartyAPIViewModel.description=a),e.Njj(a)}),e.k0s()()()(),e.DNE(24,Md,6,1,"div",18),e.j41(25,"div",19)(26,"button",20),e.nrm(27,"i",21),e.EFF(28," Submit "),e.k0s(),e.DNE(29,Cd,1,0,"img",22),e.j41(30,"button",23),e.nrm(31,"i",24),e.EFF(32," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14);e.R7$(12),e.R50("ngModel",i.thiredPartyAPIViewModel.id),e.R7$(),e.R50("ngModel",i.thiredPartyAPIViewModel.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.thiredPartyAPIViewModel.name),e.R7$(5),e.R50("ngModel",i.thiredPartyAPIViewModel.id),e.R7$(),e.R50("ngModel",i.thiredPartyAPIViewModel.description),e.R7$(2),e.Y8G("ngIf",i.RelatedAPIs.length>0),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.Sq,u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV]})}return s})();class kd{constructor(){this.id=0}}function Id(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Server Name is required "),e.k0s())}function vd(s,l){if(1&s&&(e.j41(0,"div",21),e.DNE(1,Id,2,0,"div",22),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function Ed(s,l){1&s&&e.nrm(0,"span",21)}function Fd(s,l){1&s&&e.nrm(0,"img",23)}let Td=(()=>{class s{constructor(t,n){this.masterService=t,this.toastyService=n,this.requiredServerViewModel=new kd,this.loading=!1}ngOnInit(){}resetFormInputs(){document.getElementById("RequiredServerreset").click()}saveRequiredServer(t){console.log(this.requiredServerViewModel),this.requiredServerViewModel.server.length>0&&this.masterService.CheckServerExists(this.requiredServerViewModel.server).subscribe(n=>{1==n?(this.toastyService.warning("Server is already exists.","Check Server Exists"),this.requiredServerViewModel.server=""):this.masterService.SaveRequiredServer(this.requiredServerViewModel).subscribe(i=>{i>0&&(this.requiredServerViewModel.id>0?this.toastyService.success("Required Server updated successfully.","Update Required Server"):this.toastyService.success("Required Server saved successfully.","Save Required Server"),this.resetFormInputs(),document.getElementById("RequiredServerPopup").click(),this.masterService.refreshFromChid.next({PublicHolidayID:0,FrontendID:i,BackendID:0,ThiredpartyID:0,RequiredServerID:0}))})})}CheckServerExists(t){this.masterService.CheckServerExists(t).subscribe(n=>{1==n&&(this.toastyService.warning("Server is already exists.","Check Server Exists"),this.requiredServerViewModel.server="")},n=>{console.log(n),this.toastyService.error("Something error.","Check Server Exists")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU($),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-required-server"]],decls:25,vars:6,consts:[["f","ngForm"],["serverName","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","requiredServerForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-11","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-7","coreskill-fields"],["type","hidden","name","id",3,"ngModelChange","ngModel"],["type","text","placeholder","Name","name","serverName","required","","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","RequiredServerreset","tabindex","7",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"form",7,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.saveRequiredServer(a))}),e.j41(7,"div",8)(8,"div",9)(9,"label",10),e.EFF(10,"Server Name"),e.k0s(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.requiredServerViewModel.id,a)||(i.requiredServerViewModel.id=a),e.Njj(a)}),e.k0s(),e.j41(13,"input",13,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.requiredServerViewModel.server,a)||(i.requiredServerViewModel.server=a),e.Njj(a)}),e.k0s(),e.DNE(15,vd,2,1,"div",14)(16,Ed,1,0,"span",14),e.k0s()()(),e.j41(17,"div",15)(18,"button",16),e.nrm(19,"i",17),e.EFF(20," Submit "),e.k0s(),e.DNE(21,Fd,1,0,"img",18),e.j41(22,"button",19),e.nrm(23,"i",20),e.EFF(24," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14);e.R7$(12),e.R50("ngModel",i.requiredServerViewModel.id),e.R7$(),e.R50("ngModel",i.requiredServerViewModel.server),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.requiredServerViewModel.server),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV]})}return s})();const wd=["form"],Pd=(s,l)=>({"fa-eye-slash":s,"fa-eye":l});function Rd(s,l){if(1&s){const t=e.RV6();e.j41(0,"span",72),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(50);return e.Njj(i.show())}),e.nrm(1,"i",73),e.k0s()}}function Gd(s,l){if(1&s){const t=e.RV6();e.j41(0,"span",74),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(76);return e.Njj(i.show())}),e.nrm(1,"i",73),e.k0s()}}function Yd(s,l){if(1&s&&(e.j41(0,"option",95),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Hd(s,l){if(1&s){const t=e.RV6();e.j41(0,"span",96),e.bIt("click",function(){e.eBV(t),e.XpG(2);const i=e.sdS(63);return e.Njj(i.show())}),e.nrm(1,"i",73),e.k0s()}}function Nd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",75)(1,"div",76)(2,"div",13)(3,"div",77)(4,"label",78),e.EFF(5,"Back End"),e.k0s(),e.j41(6,"div",34)(7,"select",79),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].backEndID,i)||(r.DataBaseList[o].backEndID=i),e.Njj(i)}),e.j41(8,"option",80),e.EFF(9," -- Back End -- "),e.k0s(),e.DNE(10,Yd,2,2,"option",81),e.k0s(),e.DNE(11,Hd,2,0,"span",82),e.k0s()(),e.j41(12,"div",77)(13,"label",78),e.EFF(14,"Database Name"),e.k0s(),e.j41(15,"div",34)(16,"input",83),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].databaseName,i)||(r.DataBaseList[o].databaseName=i),e.Njj(i)}),e.k0s()()()(),e.j41(17,"div",13)(18,"div",77)(19,"label",78),e.EFF(20,"Host Name"),e.k0s(),e.j41(21,"input",84),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].hostName,i)||(r.DataBaseList[o].hostName=i),e.Njj(i)}),e.k0s()(),e.j41(22,"div",77)(23,"label",78),e.EFF(24,"User Name"),e.k0s(),e.j41(25,"input",85),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].userName,i)||(r.DataBaseList[o].userName=i),e.Njj(i)}),e.k0s()(),e.j41(26,"div",77)(27,"label",78),e.EFF(28,"Password "),e.k0s(),e.j41(29,"div",86)(30,"input",87),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].password,i)||(r.DataBaseList[o].password=i),e.Njj(i)}),e.k0s(),e.j41(31,"div",88)(32,"span",89),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.fieldTextType=!i.fieldTextType)}),e.nrm(33,"i",90),e.k0s()()()()()(),e.j41(34,"div",91)(35,"div",92),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.AddDatabase())}),e.nrm(36,"i",73),e.k0s(),e.j41(37,"div",93),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG();return e.Njj(o.RemovedDatabase(i))}),e.nrm(38,"i",94),e.k0s()()()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.R7$(7),e.Mz_("name","Backend",n,""),e.Mz_("id","Backend",n,""),e.Y8G("disabled",i.IsItSupport),e.R50("ngModel",i.DataBaseList[n].backEndID),e.R7$(3),e.Y8G("ngForOf",i.BackendList),e.R7$(),e.Y8G("ngIf",!i.IsItSupport),e.R7$(5),e.Mz_("id","DatabaseName",n,""),e.Mz_("name","DatabaseName",n,""),e.R50("ngModel",i.DataBaseList[n].databaseName),e.Y8G("disabled",i.IsItSupport),e.R7$(5),e.Mz_("id","HostName + ",n,""),e.Mz_("name","HostName + ",n,""),e.R50("ngModel",i.DataBaseList[n].hostName),e.R7$(4),e.Mz_("id","uname",n,""),e.Mz_("name","uname",n,""),e.FS9("autocomplete",n),e.R50("ngModel",i.DataBaseList[n].userName),e.R7$(5),e.Mz_("id","psw",n,""),e.Mz_("name","psw",n,""),e.Y8G("type",t.fieldTextType?"text":"password"),e.R50("ngModel",i.DataBaseList[n].password),e.R7$(3),e.Y8G("ngClass",e.l_i(34,Pd,!t.fieldTextType,t.fieldTextType)),e.R7$(2),e.Y8G("hidden",n>=1),e.R7$(2),e.Y8G("hidden",0==n)}}function Ld(s,l){if(1&s&&(e.j41(0,"option",95),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.server," ")}}function Bd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",97)(1,"div",76)(2,"div",13)(3,"div",98)(4,"label",25),e.EFF(5,"Required Server"),e.k0s(),e.j41(6,"div",99)(7,"select",100,11),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.ServerList[o].requiredServerID,i)||(r.ServerList[o].requiredServerID=i),e.Njj(i)}),e.j41(9,"option",80),e.EFF(10," -- Required Server -- "),e.k0s(),e.DNE(11,Ld,2,2,"option",81),e.k0s(),e.j41(12,"span",101),e.bIt("click",function(){e.eBV(t),e.XpG();const i=e.sdS(89);return e.Njj(i.show())}),e.nrm(13,"i",73),e.k0s()()(),e.j41(14,"div",98)(15,"label",25),e.EFF(16,"Description"),e.k0s(),e.j41(17,"div",102)(18,"textarea",103),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.ServerList[o].description,i)||(r.ServerList[o].description=i),e.Njj(i)}),e.EFF(19,"                          "),e.k0s()()()()(),e.j41(20,"div",91)(21,"div",104),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.AddRequiredServer())}),e.nrm(22,"i",73),e.k0s(),e.j41(23,"div",105),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG();return e.Njj(o.RemoveRequiredServer(i))}),e.nrm(24,"i",94),e.k0s()()()}if(2&s){const t=l.index,n=e.XpG();e.R7$(7),e.Mz_("name","RequiredServer + ",t,""),e.R50("ngModel",n.ServerList[t].requiredServerID),e.R7$(4),e.Y8G("ngForOf",n.RequiredServerList),e.R7$(7),e.Mz_("name","Description + ",t,""),e.R50("ngModel",n.ServerList[t].description),e.R7$(3),e.Y8G("hidden",t>=1),e.R7$(2),e.Y8G("hidden",0==t)}}function Ud(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",106),e.bIt("click",function(){e.eBV(t);const i=e.XpG(),o=e.sdS(5);return e.Njj(i.sendEmail(o))}),e.nrm(1,"i",36),e.EFF(2," Send Email "),e.k0s()}}function Vd(s,l){1&s&&(e.j41(0,"button",107),e.nrm(1,"i",108),e.EFF(2," Reset "),e.k0s())}function xd(s,l){1&s&&e.nrm(0,"img",109)}let Qd=(()=>{class s{constructor(t,n,i,o,r,a){this.projectService=t,this.masterService=n,this.router=i,this.cookieService=o,this.commonFunctionsService=r,this.toastyService=a,this.FrontendList=[],this.BackendList=[],this.ThiredPartyAPIList=[],this.RequiredServerList=[],this.selectedThiredPartyAPI=[],this.selectedFrontend=[],this.selectedToUser=[],this.dropdownSettings={},this.projectEnvironmentModel=new st,this.saveProjectEnvironmentModel=new Hn,this.isEdited=!1,this.MainprojectEnvironmentModel=new st,this.sendEmailModel=new Nn,this.SendEmail=!1,this.ServerList=[],this.DataBaseList=[],this.designationEnum=N,this.IsItSupport=!1,this.IsHistoryChanged=!1,this.ToEmployeeList=[],this.loading=!1,this.AdditionalEmail="",this.emailDatabaseCredentialsModel=new Un,this.ServerList.push({requiredServerID:0,description:"",requiredServerDetailsID:0}),this.DataBaseList.push({backEndID:0,databaseName:"",hostName:"",userName:"",password:"",fieldTextType:!1}),this.currentUser=JSON.parse(this.cookieService.get("currentUser")),this.IsItSupport=this.commonFunctionsService.IsITSupport()}ngOnInit(){this.GetEnvironmentList(),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.router.parseUrl(this.router.url),this.masterService.refreshFromChid.subscribe(n=>{this.GetEnvironmentList(),setTimeout(()=>{n.ThiredpartyID>0?(this.selectedThiredPartyAPI.push(this.ThiredPartyAPIList.find(i=>i.id===n.ThiredpartyID)),console.log(this.selectedThiredPartyAPI)):n.FrontendID>0&&this.selectedFrontend.push(this.FrontendList.find(i=>i.id===n.FrontendID))},1e3)}),this.ProjectID>0&&this.GetProjectEnvironmentData()}GetProjectEnvironmentData(){this.projectService.GetProjectEnvironment(this.ProjectID).subscribe(t=>{null!=t&&(0!=t.requiredServerList&&(this.ServerList=t.requiredServerList),t.databaseList.length>0&&(this.DataBaseList=t.databaseList),null!=t.projectEnvironmentModel&&(this.projectEnvironmentModel=t.projectEnvironmentModel,this.MainprojectEnvironmentModel=Object.assign({},t.projectEnvironmentModel),this.projectEnvironmentModel.isDone=null!=t.projectEnvironmentModel?t.projectEnvironmentModel.isDone=1:0,this.projectEnvironmentModel.id=t.projectEnvironmentModel.id,setTimeout(()=>{if(null!=t.projectEnvironmentModel.frontendID){var n=t.projectEnvironmentModel.frontendID.split(",");let o=[];n.forEach(r=>{o.push(this.FrontendList.find(a=>a.id===parseInt(r)))}),this.selectedFrontend=o}if(null!=t.projectEnvironmentModel.thirdPartyAPIID){var i=t.projectEnvironmentModel.thirdPartyAPIID.split(",");let o=[];i.forEach(r=>{o.push(this.ThiredPartyAPIList.find(a=>a.id===parseInt(r)))}),this.selectedThiredPartyAPI=o}},50)),t.employeeDropdownModel.length>0&&(this.ToEmployeeList=t.employeeDropdownModel))})}GetEnvironmentList(){this.projectService.GetEnvironmentList().subscribe(t=>{this.BackendList=t.backendViewModel,this.FrontendList=t.frontendViewModel,this.ThiredPartyAPIList=t.thiredPartyAPIViewModel,this.RequiredServerList=t.requiredServerViewModel})}onItemSelect(t){}saveprojectEnvironment(t){this.projectEnvironmentModel.frontendID=this.selectedFrontend.map(n=>n.id).join(","),this.projectEnvironmentModel.thirdPartyAPIID=this.selectedThiredPartyAPI.map(n=>n.id).join(","),this.ServerList=this.ServerList.filter(n=>0!==n.requiredServerID),this.DataBaseList=this.DataBaseList.filter(n=>0!==n.backEndID),this.projectEnvironmentModel.projectID=this.ProjectID,this.saveProjectEnvironmentModel.ProjectEnvironmentModel=this.projectEnvironmentModel,this.saveProjectEnvironmentModel.RequiredServerList=this.ServerList,this.saveProjectEnvironmentModel.DatabaseList=this.DataBaseList,this.projectEnvironmentModel.isDone=this.projectEnvironmentModel.isDone=1,this.IsHistoryChanged=JSON.stringify(this.MainprojectEnvironmentModel)!=JSON.stringify(this.projectEnvironmentModel),this.projectService.SaveProjectEnvironment(this.saveProjectEnvironmentModel,this.IsHistoryChanged).subscribe(n=>{console.log(n),n>0&&(this.projectEnvironmentModel.id>0?this.toastyService.success("Project environment updated successfully.","Update project environment"):this.toastyService.success("Project environment saved successfully.","Save project environment"),this.GetProjectEnvironmentData())})}sendEmail(t){this.sendEmailModel.frontend=this.selectedFrontend.map(o=>o.name).join(",");var n=[];if(this.DataBaseList.filter(o=>0!==o.backEndID).forEach(o=>n.push({BackendName:this.BackendList.find(r=>r.id==o.backEndID).name,DatabaseName:o.databaseName})),this.sendEmailModel.backend=n,this.sendEmailModel.thirdPartyAPI=this.selectedThiredPartyAPI.map(o=>o.name).join(","),this.sendEmailModel.projectID=this.ProjectID,""!=this.sendEmailModel.frontend&&""!=this.sendEmailModel.backend){var i=this.commonFunctionsService.encryptUsingAES256(this.ProjectID);this.projectService.SendEmail(this.sendEmailModel,i).subscribe(o=>{"Success"==o?this.toastyService.success("Email Send successfully.","Send Email"):this.toastyService.error("Something went wrong!","Send Email")})}}AddRequiredServer(){this.ServerList.push({requiredServerID:0,description:"",requiredServerDetailsID:0})}RemoveRequiredServer(t){this.ServerList.splice(t,1)}AddDatabase(){this.DataBaseList.push({backEndID:0,databaseName:"",hostName:"",userName:"",password:"",fieldTextType:!1})}RemovedDatabase(t){this.DataBaseList.splice(t,1)}SetFormEmail(){this.selectedToUser=[],this.AdditionalEmail=""}SendDatabaseCredentials(){var t=this.DataBaseList.filter(o=>0!==o.backEndID);if(0==this.selectedToUser.length)return this.toastyService.info("Please select users.","Send Email"),!1;if(0==t.length)return this.toastyService.info("Please select back end database details.","Send Email"),!1;if(!(this.selectedToUser.length>0&&t.length>0))return this.toastyService.info("Please select users and back end database details.","Send Email"),!1;var n=[],i=[];t.forEach(o=>{o.hostName&&n.push({BackendName:this.BackendList.find(r=>r.id==o.backEndID).name,DatabaseName:o.databaseName,HostName:o.hostName,Password:o.password,UserName:o.userName})}),this.selectedToUser.forEach(o=>{i.push(this.ToEmployeeList.find(r=>r.id==o.id).emailID)}),i.join(","),this.emailDatabaseCredentialsModel.ToUsers=this.AdditionalEmail?i.join(",")+","+this.AdditionalEmail:i.join(","),this.emailDatabaseCredentialsModel.ProjectID=this.ProjectID,this.emailDatabaseCredentialsModel.EncProjectID=this.commonFunctionsService.encryptUsingAES256(this.ProjectID),this.emailDatabaseCredentialsModel.Backendlist=n,console.log(this.emailDatabaseCredentialsModel),this.projectService.SendDatabaseCredentials(this.emailDatabaseCredentialsModel).subscribe(o=>{"Success"==o?(this.toastyService.success("Email Send successfully.","Send Email"),document.getElementById("SendEmailPopup").click()):this.toastyService.error("Something went wrong!","Send Email")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU($),e.rXU(f.Ix),e.rXU(S.O),e.rXU(ne),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-project-environment-setup"]],viewQuery:function(n,i){if(1&n&&e.GBs(wd,7),2&n){let o;e.mGM(o=e.lsd())&&(i.ngForm=o.first)}},inputs:{ProjectID:"ProjectID"},decls:142,vars:24,consts:[["f","ngForm"],["frontendModal","bs-modal"],["appFrontend",""],["BackendModal","bs-modal"],["appbackend",""],["ThiredPartyAPIModal","bs-modal"],["appThiredPartyAPI",""],["requiredServerModal","bs-modal"],["apprequiredServer",""],["sendEmailModal","bs-modal"],["additionalEmail","ngModel"],["RequiredServer",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,""],["action","","method","post","novalidate","","autocomplete","off",1,"form-horizontal",3,"ngSubmit"],[1,"card-header"],[1,"caption","d-flex","justify-content-between","align-items-center","font-weight-bold"],[1,"mb-0","container-check"],["type","checkbox","value","","name","isDone","data-md-icheck","",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"card-body","card-body-mobile"],[1,"form-group","row","mb-3"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label"],[1,"col-md-6","d-flex"],["name","FrontEnd",1,"w-100",3,"ngModelChange","placeholder","data","ngModel","settings","disabled"],["tooltip","Add FrontEnd","placement","bottom","style","padding: 5px 5px",3,"click",4,"ngIf"],["name","ThiredPartyAPI",1,"w-100",3,"ngModelChange","placeholder","data","ngModel","settings","disabled"],["tooltip","Add Third Party Api","placement","bottom","style","padding: 5px 5px",3,"click",4,"ngIf"],[1,"add-new-main-form","m-1"],[1,"card-header","sub-card-header"],[1,"caption","smart-d-flex","justify-content-between","align-items-center","font-weight-bold"],[1,"d-flex"],["type","button",1,"btn","btn-success","btn-small","text-white",3,"click"],[1,"fa","fa-paper-plane"],[1,"card-body","shadow-md","mb-3"],["class","form-group row align-items-center mx-2 mb-0 mb-3",4,"ngFor","ngForOf"],[1,"caption","font-weight-bold"],["class","form-group row align-items-center mx-3 mb-3",4,"ngFor","ngForOf"],[1,"card-footer","mobile-footer","py-3"],["class","btn btn-success text-white","type","button",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-primary"],["aria-hidden","true",1,"fa","fa-floppy-o"],["type","reset","class","btn btn-danger text-white",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","FrontendPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog",1,"modal","fade"],["type","button","id","BackendPopup","aria-label","Close",1,"close",3,"click"],["type","button","id","ThiredpartyPopup","aria-label","Close",1,"close",3,"click"],["type","button","id","RequiredServerPopup","aria-label","Close",1,"close",3,"click"],["type","button","id","SendEmailPopup","aria-label","Close",1,"close",3,"click"],[1,"card"],[1,"card-body"],[1,"col-md-11","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-7","coreskill-fields"],["name","touser","required","",1,"w-100",3,"ngModelChange","placeholder","data","ngModel","settings"],[1,"col-md-3","col-form-label"],["type","text","placeholder","Additional Email","name","additionalEmail","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],[1,"note-text"],[1,"text-danger","font-weight-bold"],[1,"card-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["tooltip","Add FrontEnd","placement","bottom",2,"padding","5px 5px",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["tooltip","Add Third Party Api","placement","bottom",2,"padding","5px 5px",3,"click"],[1,"form-group","row","align-items-center","mx-2","mb-0","mb-3"],[1,"col-sm-11","add-new-form"],[1,"col-md-4"],[1,"col-form-label"],[1,"form-control",3,"ngModelChange","name","id","disabled","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["tooltip","Add Back End","placement","bottom","style","padding: 5px 5px",3,"click",4,"ngIf"],["type","text","placeholder","Database Name","required","","maxlength","45",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name","disabled"],["type","text","placeholder","Host Name","maxlength","50",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name"],["type","text","placeholder","User Name","maxlength","45",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name","autocomplete"],[1,"input-group"],["placeholder","Password","maxlength","45","autocomplete","new-password",1,"form-control","projectname",3,"ngModelChange","type","ngModel","id","name"],[1,"input-group-prepend"],[1,"input-group-text","cursor-pointer",3,"click"],[1,"fa",3,"ngClass"],[1,"col-sm-1"],["tooltip","Add backend database","placement","bottom",1,"add-new-btn",3,"click","hidden"],["tooltip","Remove database","placement","bottom",1,"remove-new-btn",3,"click","hidden"],["aria-hidden","true",1,"fa","fa-times"],[3,"value"],["tooltip","Add Back End","placement","bottom",2,"padding","5px 5px",3,"click"],[1,"form-group","row","align-items-center","mx-3","mb-3"],[1,"col-md-6","row","mt-2"],[1,"col-md-8","d-flex"],["id","RequiredServer",1,"form-control","w-100",3,"ngModelChange","name","ngModel"],["tooltip","Add Required Servers","placement","bottom",2,"padding","5px 5px","display","inline-table",3,"click"],[1,"col-md-8"],["name","Description","id","Description","rows","3","placeholder","Kindly provide server credentials to be used to access this serve and additional comments if any.",1,"form-control",3,"ngModelChange","ngModel","name"],["tooltip","Add another Required Server","placement","bottom",1,"add-new-btn",3,"click","hidden"],["tooltip","Remove Required Server","placement","bottom",1,"remove-new-btn",3,"click","hidden"],["type","button",1,"btn","btn-success","text-white",3,"click"],["type","reset",1,"btn","btn-danger","text-white"],["aria-hidden","true",1,"fa","fa-refresh"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"form",16,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(5);return e.Njj(a.form.valid&&i.saveprojectEnvironment(a))}),e.j41(6,"div",17)(7,"div",18),e.EFF(8," Project Environment Setup "),e.j41(9,"label",19)(10,"input",20),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.projectEnvironmentModel.isDone,a)||(i.projectEnvironmentModel.isDone=a),e.Njj(a)}),e.k0s(),e.EFF(11," Done "),e.nrm(12,"span",21),e.k0s()()(),e.j41(13,"div",22)(14,"div",23)(15,"div",24)(16,"label",25),e.EFF(17,"Front End"),e.k0s(),e.j41(18,"div",26)(19,"ng-multiselect-dropdown",27),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedFrontend,a)||(i.selectedFrontend=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onItemSelect(a))}),e.k0s(),e.DNE(20,Rd,2,0,"span",28),e.k0s()(),e.j41(21,"div",24)(22,"label",25),e.EFF(23,"Third Party Api"),e.k0s(),e.j41(24,"div",26)(25,"ng-multiselect-dropdown",29),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedThiredPartyAPI,a)||(i.selectedThiredPartyAPI=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.onItemSelect(a))}),e.k0s(),e.DNE(26,Gd,2,0,"span",30),e.k0s()()(),e.j41(27,"div",31)(28,"div",32)(29,"div",33),e.EFF(30," Database Details "),e.j41(31,"span",34)(32,"button",35),e.bIt("click",function(){return e.eBV(o),e.sdS(102).show(),e.Njj(i.SetFormEmail())}),e.nrm(33,"i",36),e.EFF(34," Send Database Credentials "),e.k0s()()()(),e.j41(35,"div",37),e.DNE(36,Nd,39,37,"div",38),e.k0s()(),e.j41(37,"div",31)(38,"div",32)(39,"div",39),e.EFF(40," Additional server details "),e.k0s()(),e.j41(41,"div",37),e.DNE(42,Bd,25,9,"div",40),e.k0s()(),e.j41(43,"div",41),e.DNE(44,Ud,3,0,"button",42),e.j41(45,"button",43),e.nrm(46,"i",44),e.EFF(47," Submit "),e.k0s(),e.DNE(48,Vd,3,0,"button",45),e.k0s()()()()()()(),e.j41(49,"div",46,1)(51,"div",47)(52,"div",48)(53,"div",49)(54,"h4",50),e.EFF(55,"Front end"),e.k0s(),e.j41(56,"button",51),e.bIt("click",function(){e.eBV(o);const a=e.sdS(50),d=e.sdS(61);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(57,"span",52),e.EFF(58,"\xd7"),e.k0s()()(),e.j41(59,"div",53),e.nrm(60,"app-front-end",null,2),e.k0s()()()(),e.j41(62,"div",54,3)(64,"div",47)(65,"div",48)(66,"div",49)(67,"h4",50),e.EFF(68,"Back end"),e.k0s(),e.j41(69,"button",55),e.bIt("click",function(){e.eBV(o);const a=e.sdS(63),d=e.sdS(74);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(70,"span",52),e.EFF(71,"\xd7"),e.k0s()()(),e.j41(72,"div",53),e.nrm(73,"app-back-end",null,4),e.k0s()()()(),e.j41(75,"div",54,5)(77,"div",47)(78,"div",48)(79,"div",49)(80,"h4",50),e.EFF(81,"Thired Party API"),e.k0s(),e.j41(82,"button",56),e.bIt("click",function(){e.eBV(o);const a=e.sdS(76),d=e.sdS(87);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(83,"span",52),e.EFF(84,"\xd7"),e.k0s()()(),e.j41(85,"div",53),e.nrm(86,"app-third-party-api",null,6),e.k0s()()()(),e.j41(88,"div",46,7)(90,"div",47)(91,"div",48)(92,"div",49)(93,"h4",50),e.EFF(94,"Required Server"),e.k0s(),e.j41(95,"button",57),e.bIt("click",function(){e.eBV(o);const a=e.sdS(89),d=e.sdS(100);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(96,"span",52),e.EFF(97,"\xd7"),e.k0s()()(),e.j41(98,"div",53),e.nrm(99,"app-required-server",null,8),e.k0s()()()(),e.j41(101,"div",46,9)(103,"div",47)(104,"div",48)(105,"div",49)(106,"h4",50),e.EFF(107,"Email to user"),e.k0s(),e.j41(108,"button",58),e.bIt("click",function(){e.eBV(o);const a=e.sdS(102);return e.Njj(a.hide())}),e.j41(109,"span",52),e.EFF(110,"\xd7"),e.k0s()()(),e.j41(111,"div",53)(112,"div",12)(113,"div",13)(114,"div",14)(115,"div",59)(116,"div",60)(117,"div",23)(118,"div",61)(119,"label",62),e.EFF(120,"To"),e.k0s(),e.j41(121,"div",63)(122,"ng-multiselect-dropdown",64),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedToUser,a)||(i.selectedToUser=a),e.Njj(a)}),e.k0s()()()(),e.j41(123,"div",23)(124,"div",61)(125,"label",65),e.EFF(126,"Additional"),e.k0s(),e.j41(127,"div",63)(128,"input",66,10),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AdditionalEmail,a)||(i.AdditionalEmail=a),e.Njj(a)}),e.k0s()()()(),e.j41(130,"div",23)(131,"div",14)(132,"span",67),e.EFF(133,"Note: Use "),e.j41(134,"span",68),e.EFF(135,'","'),e.k0s(),e.EFF(136," for separation of Additional email"),e.k0s()()(),e.j41(137,"div",69)(138,"button",70),e.bIt("click",function(){return e.eBV(o),e.Njj(i.SendDatabaseCredentials())}),e.nrm(139,"i",44),e.EFF(140," Submit "),e.k0s(),e.DNE(141,xd,1,0,"img",71),e.k0s()()()()()()()()()()}2&n&&(e.R7$(10),e.R50("ngModel",i.projectEnvironmentModel.isDone),e.R7$(9),e.Y8G("placeholder","-- Front End --")("data",i.FrontendList),e.R50("ngModel",i.selectedFrontend),e.Y8G("settings",i.dropdownSettings)("disabled",i.IsItSupport),e.R7$(),e.Y8G("ngIf",!i.IsItSupport),e.R7$(5),e.Y8G("placeholder","-- Third Party Api --")("data",i.ThiredPartyAPIList),e.R50("ngModel",i.selectedThiredPartyAPI),e.Y8G("settings",i.dropdownSettings)("disabled",i.IsItSupport),e.R7$(),e.Y8G("ngIf",!i.IsItSupport),e.R7$(10),e.Y8G("ngForOf",i.DataBaseList),e.R7$(6),e.Y8G("ngForOf",i.ServerList),e.R7$(2),e.Y8G("ngIf",!i.IsItSupport),e.R7$(4),e.Y8G("ngIf",!i.IsItSupport),e.R7$(74),e.Y8G("placeholder","-- Developer --")("data",i.ToEmployeeList),e.R50("ngModel",i.selectedToUser),e.Y8G("settings",i.dropdownSettings),e.R7$(6),e.R50("ngModel",i.AdditionalEmail),e.R7$(10),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading))},dependencies:[u.YU,u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,B.hZ,E.dg,w.b,Ot,Jt,$t,Td],styles:["#Technology[_ngcontent-%COMP%]{width:92%!important;display:inline-block!important}"]})}return s})();var zt=F(5478);const Od=["closeBtn"],re=(s,l)=>({"fa-eye-slash":s,"fa-eye":l});function Jd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",75)(1,"button",76),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.sdS(128).show(),e.Njj(i.SetFormEmail())}),e.nrm(2,"i",77),e.EFF(3," Firewall Bypass URL "),e.k0s(),e.j41(4,"span",22)(5,"div",78)(6,"input",79),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.saveFirewallModel.isDone,i)||(o.saveFirewallModel.isDone=i),e.Njj(i)}),e.k0s()(),e.j41(7,"label",80),e.EFF(8," Firewall Bypass URL Done"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading),e.R7$(5),e.R50("ngModel",t.saveFirewallModel.isDone)}}function $d(s,l){if(1&s){const t=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.IsVPN=!1)}),e.nrm(1,"i",86),e.EFF(2," close"),e.k0s()}}function zd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",81)(3,"span"),e.EFF(4," VPN Details "),e.k0s(),e.DNE(5,$d,3,0,"span",82),e.k0s(),e.j41(6,"div",10)(7,"div",5)(8,"div",26)(9,"div",12)(10,"label",13),e.EFF(11," Server Name"),e.k0s(),e.j41(12,"input",83),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.VPNServerModel.serverName,i)||(o.VPNServerModel.serverName=i),e.Njj(i)}),e.k0s()()(),e.j41(13,"div",26)(14,"div",12)(15,"label",13),e.EFF(16," User Name"),e.k0s(),e.j41(17,"input",84),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.VPNServerModel.userName,i)||(o.VPNServerModel.userName=i),e.Njj(i)}),e.k0s()()(),e.j41(18,"div",26)(19,"div",12)(20,"label",13),e.EFF(21,"Password"),e.k0s(),e.j41(22,"div",16)(23,"input",85),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.VPNServerModel.password,i)||(o.VPNServerModel.password=i),e.Njj(i)}),e.k0s(),e.j41(24,"div",18)(25,"span",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.VPNTextType=!i.VPNTextType)}),e.nrm(26,"i",20),e.k0s()()()()(),e.j41(27,"div",26)(28,"div",12)(29,"label",13),e.EFF(30," Comment"),e.k0s(),e.j41(31,"textarea",21),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.VPNServerModel.comment,i)||(o.VPNServerModel.comment=i),e.Njj(i)}),e.k0s()()()()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",0==t.VPNServerModel.serverName.length),e.R7$(7),e.R50("ngModel",t.VPNServerModel.serverName),e.R7$(5),e.R50("ngModel",t.VPNServerModel.userName),e.R7$(6),e.Y8G("type",t.VPNTextType?"text":"password"),e.R50("ngModel",t.VPNServerModel.password),e.R7$(3),e.Y8G("ngClass",e.l_i(9,re,!t.VPNTextType,t.VPNTextType)),e.R7$(5),e.Mz_("id","vcomment",t.DeploymentMasterID,""),e.R50("ngModel",t.VPNServerModel.comment)}}function Xd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",99)(1,"div",36),e.EFF(2,"FTP Details"),e.k0s(),e.j41(3,"div",62)(4,"div",63)(5,"div",100)(6,"label",101),e.EFF(7,"Host"),e.k0s(),e.j41(8,"div",102)(9,"input",103),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG().index,r=e.XpG();return e.DH7(r.HostingList[o].fTPDetailModel.host,i)||(r.HostingList[o].fTPDetailModel.host=i),e.Njj(i)}),e.k0s()()(),e.j41(10,"div",100)(11,"label",101),e.EFF(12,"Port"),e.k0s(),e.j41(13,"div",102)(14,"input",104),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG().index,r=e.XpG();return e.DH7(r.HostingList[o].fTPDetailModel.port,i)||(r.HostingList[o].fTPDetailModel.port=i),e.Njj(i)}),e.k0s()()()(),e.j41(15,"div",63)(16,"div",100)(17,"label",101),e.EFF(18,"User Name"),e.k0s(),e.j41(19,"div",102)(20,"input",105),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG().index,r=e.XpG();return e.DH7(r.HostingList[o].fTPDetailModel.userName,i)||(r.HostingList[o].fTPDetailModel.userName=i),e.Njj(i)}),e.k0s()()(),e.j41(21,"div",100)(22,"label",101),e.EFF(23,"Password"),e.k0s(),e.j41(24,"div",102)(25,"div",16)(26,"input",106),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG().index,r=e.XpG();return e.DH7(r.HostingList[o].fTPDetailModel.password,i)||(r.HostingList[o].fTPDetailModel.password=i),e.Njj(i)}),e.k0s(),e.j41(27,"div",18)(28,"span",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.FTPTextType=!i.FTPTextType)}),e.nrm(29,"i",20),e.k0s()()()()()()()()}if(2&s){const t=e.XpG().index,n=e.XpG();e.R7$(9),e.FCK("id","HostName",n.DeploymentMasterID,"",t,""),e.FCK("name","HostName",n.DeploymentMasterID,"",t,""),e.R50("ngModel",n.HostingList[t].fTPDetailModel.host),e.R7$(5),e.FCK("id","port",n.DeploymentMasterID,"",t,""),e.FCK("name","port",n.DeploymentMasterID,"",t,""),e.R50("ngModel",n.HostingList[t].fTPDetailModel.port),e.R7$(6),e.FCK("id","husername",n.DeploymentMasterID,"",t,""),e.FCK("name","husername",n.DeploymentMasterID,"",t,""),e.R50("ngModel",n.HostingList[t].fTPDetailModel.userName),e.R7$(6),e.FCK("id","hpassword",n.DeploymentMasterID,"",t,""),e.FCK("name","hpassword",n.DeploymentMasterID,"",t,""),e.Y8G("type",n.FTPTextType?"text":"password"),e.R50("ngModel",n.HostingList[t].fTPDetailModel.password),e.R7$(3),e.Y8G("ngClass",e.l_i(30,re,!n.FTPTextType,n.FTPTextType))}}function qd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",87)(1,"div",88)(2,"div",89)(3,"div",5)(4,"div",40)(5,"label",41),e.EFF(6,"Name"),e.k0s(),e.j41(7,"div",42)(8,"input",90),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.HostingList[o].name,i)||(r.HostingList[o].name=i),e.Njj(i)}),e.k0s()()(),e.j41(9,"div",40)(10,"label",41),e.EFF(11,"URL"),e.k0s(),e.j41(12,"div",42)(13,"input",91),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.HostingList[o].url,i)||(r.HostingList[o].url=i),e.Njj(i)}),e.k0s()()(),e.j41(14,"div",40)(15,"label",41),e.EFF(16,"Description"),e.k0s(),e.j41(17,"div",42)(18,"input",92),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.HostingList[o].description,i)||(r.HostingList[o].description=i),e.Njj(i)}),e.k0s()()()(),e.DNE(19,Xd,30,33,"div",93),e.k0s(),e.j41(20,"div",94)(21,"div",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.AddHostingDetails())}),e.nrm(22,"i",96),e.k0s(),e.j41(23,"div",97),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG();return e.Njj(o.RemoveHostingDetails(i))}),e.nrm(24,"i",98),e.k0s()()()()}if(2&s){const t=l.index,n=e.XpG();e.R7$(8),e.R50("ngModel",n.HostingList[t].name),e.R7$(5),e.FCK("id","HostURL",n.DeploymentMasterID,"",t,""),e.FCK("name","HostURL",n.DeploymentMasterID,"",t,""),e.R50("ngModel",n.HostingList[t].url),e.R7$(5),e.FCK("id","HostDescription",n.DeploymentMasterID,"",t,""),e.FCK("name","HostDescription",n.DeploymentMasterID,"",t,""),e.R50("ngModel",n.HostingList[t].description),e.R7$(),e.Y8G("ngIf",n.IsFTP),e.R7$(2),e.Y8G("hidden",t>=1),e.R7$(2),e.Y8G("hidden",0==t)}}function Kd(s,l){if(1&s&&(e.j41(0,"option",117),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Wd(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",38)(1,"div",39)(2,"div",5)(3,"div",40)(4,"label",41),e.EFF(5,"Back End"),e.k0s(),e.j41(6,"div",42)(7,"select",107),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].backEndID,i)||(r.DataBaseList[o].backEndID=i),e.Njj(i)}),e.j41(8,"option",108),e.EFF(9," -- Back End -- "),e.k0s(),e.DNE(10,Kd,2,2,"option",109),e.k0s()()(),e.j41(11,"div",40)(12,"label",41),e.EFF(13,"Database Name"),e.k0s(),e.j41(14,"div",42)(15,"input",110),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].databaseName,i)||(r.DataBaseList[o].databaseName=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"div",5)(17,"div",40)(18,"label",41),e.EFF(19,"Host Name"),e.k0s(),e.j41(20,"input",111),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].hostName,i)||(r.DataBaseList[o].hostName=i),e.Njj(i)}),e.k0s()(),e.j41(21,"div",40)(22,"label",41),e.EFF(23,"User Name"),e.k0s(),e.j41(24,"input",112),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].userName,i)||(r.DataBaseList[o].userName=i),e.Njj(i)}),e.k0s()(),e.j41(25,"div",40)(26,"label",41),e.EFF(27,"Password"),e.k0s(),e.j41(28,"div",16)(29,"input",113),e.mxI("ngModelChange",function(i){const o=e.eBV(t).index,r=e.XpG();return e.DH7(r.DataBaseList[o].password,i)||(r.DataBaseList[o].password=i),e.Njj(i)}),e.k0s(),e.j41(30,"div",18)(31,"span",19),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.fieldTextType=!i.fieldTextType)}),e.nrm(32,"i",20),e.k0s()()()()()(),e.j41(33,"div",114)(34,"div",115),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.AddDatabase())}),e.nrm(35,"i",96),e.k0s(),e.j41(36,"div",116),e.bIt("click",function(){const i=e.eBV(t).index,o=e.XpG();return e.Njj(o.RemovedDatabase(i))}),e.nrm(37,"i",98),e.k0s()()()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.R7$(7),e.FCK("name","Backend",i.DeploymentMasterID,"",n,""),e.FCK("id","Backend",i.DeploymentMasterID,"",n,""),e.Y8G("disabled",i.IsItSupport),e.R50("ngModel",i.DataBaseList[n].backEndID),e.R7$(3),e.Y8G("ngForOf",i.BackendList),e.R7$(5),e.FCK("id","DatabaseName",i.DeploymentMasterID,"",n,""),e.FCK("name","DatabaseName",i.DeploymentMasterID,"",n,""),e.R50("ngModel",i.DataBaseList[n].databaseName),e.Y8G("disabled",i.IsItSupport),e.R7$(5),e.FCK("id","HostName",i.DeploymentMasterID,"",n,""),e.FCK("name","HostName",i.DeploymentMasterID,"",n,""),e.R50("ngModel",i.DataBaseList[n].hostName),e.R7$(4),e.FCK("id","uname",i.DeploymentMasterID,"",n,""),e.FCK("name","uname",i.DeploymentMasterID,"",n,""),e.FCK("autocomplete","",i.DeploymentMasterID,"",n,""),e.R50("ngModel",i.DataBaseList[n].userName),e.R7$(5),e.FCK("id","psw",i.DeploymentMasterID,"",n,""),e.FCK("name","psw",i.DeploymentMasterID,"",n,""),e.Y8G("type",t.fieldTextType?"text":"password"),e.R50("ngModel",i.DataBaseList[n].password),e.R7$(3),e.Y8G("ngClass",e.l_i(45,re,!t.fieldTextType,t.fieldTextType)),e.R7$(2),e.Y8G("hidden",n>=1),e.R7$(2),e.Y8G("hidden",0==n)}}function Zd(s,l){1&s&&e.nrm(0,"img",118)}let ep=(()=>{class s{constructor(t,n,i,o){this.commonFunctionsService=t,this.cookieService=n,this.projectService=i,this.toastyService=o,this.SMTPTextType=!1,this.FrontendTextType=!1,this.BackendTextType=!1,this.VPNTextType=!1,this.FTPTextType=!1,this.HostingList=[],this.DataBaseList=[],this.IsFTP=!1,this.IsVPN=!1,this.IsItSupport=!1,this.IsSameASFrontend=!1,this.loading=!1,this.fTPDetailModel=new Ge,this.FrontendServerModel=new Ye,this.BackendServerModel=new Ye,this.VPNServerModel=new Ye,this.saveDeploymentDetailsModel=new xn,this.DeploymentSMTPModel=new Vn,this.projectDeploymentModel=new He,this.OldProjectDeploymentModel=new He,this.deploymentMasterEnum=We,this.firewallBypassURLModel=new Qn,this.IsFireWall=!1,this.dropdownSettings={},this.AdditionalEmail="",this.selectedToUser=[],this.saveFirewallModel=new On,this.ReloadData=new e.bkB,this.HostingList.push({name:"",url:"",description:"",fTPDetailModel:new Ge}),this.DataBaseList.push({backEndID:0,databaseName:"",hostName:"",userName:"",password:"",fieldTextType:!1}),this.currentUser=JSON.parse(this.cookieService.get("currentUser")),this.IsItSupport=this.commonFunctionsService.IsITSupport()}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.saveDeploymentDetailsModel.ProjectDeploymentModel=new He,this.GetDeploymentDetails()}GetDeploymentDetails(){this.projectService.GetDeploymentServerDetails(this.ProjectID,this.DeploymentMasterID).subscribe(t=>{if(null!=t.projectDeploymentModel&&(t.projectDeploymentModel.isDone=0!=t.projectDeploymentModel.isDone,this.saveDeploymentDetailsModel.ProjectDeploymentModel=t.projectDeploymentModel,this.OldProjectDeploymentModel=Object.assign({},t.projectDeploymentModel),this.projectDeploymentModel=Object.assign({},t.projectDeploymentModel)),t.hostingList.length>0){var n=[];t.hostingList.forEach(i=>{i.fTPDetailModel.host.length>0&&n.push(i)}),this.HostingList=t.hostingList,this.IsFTP=null!=n&&n.length>0}t.dataBaseList.length>0&&(this.DataBaseList=t.dataBaseList),null!=t.vpnServerModel&&(this.VPNServerModel=t.vpnServerModel,this.IsVPN=!0),null!=t.frontendServerModel&&(this.FrontendServerModel=t.frontendServerModel),t.backendServerModel&&(this.BackendServerModel=t.backendServerModel),null!=t.saveFirewallModel&&(this.saveFirewallModel=t.saveFirewallModel),null!=t.deploymentSMTPModel&&(this.DeploymentSMTPModel=t.deploymentSMTPModel)})}AddHostingDetails(){this.HostingList.push({name:"",url:"",description:"",fTPDetailModel:new Ge}),console.log(this.HostingList)}RemoveHostingDetails(t){this.HostingList.splice(t,1)}AddDatabase(){this.DataBaseList.push({backEndID:0,databaseName:"",hostName:"",userName:"",password:"",fieldTextType:!1})}RemovedDatabase(t){this.DataBaseList.splice(t,1)}CopyFrontEndServer(t){t&&(this.BackendServerModel=Object.assign({},this.FrontendServerModel))}SaveDeploymentDetails(){this.projectDeploymentModel.projectID=this.ProjectID,this.projectDeploymentModel.deploymentMasterID=this.DeploymentMasterID,this.projectDeploymentModel.isDone=this.IsDone,this.saveFirewallModel.userID=this.currentUser.employeeID;var t=JSON.stringify(this.projectDeploymentModel)!=JSON.stringify(this.OldProjectDeploymentModel);console.log(t,this.projectDeploymentModel,this.OldProjectDeploymentModel),this.saveDeploymentDetailsModel.ProjectDeploymentModel.projectID=this.ProjectID,this.saveDeploymentDetailsModel.ProjectDeploymentModel.deploymentMasterID=this.DeploymentMasterID,this.saveDeploymentDetailsModel.ProjectDeploymentModel.isDone="true"==this.IsDone.toString()?1:0,this.saveDeploymentDetailsModel.ProjectDeploymentModel.userID=this.currentUser.employeeID,this.saveDeploymentDetailsModel.FrontendServerModel=this.FrontendServerModel,this.saveDeploymentDetailsModel.BackendServerModel=this.BackendServerModel,this.saveDeploymentDetailsModel.SaveFirewallModel=this.saveFirewallModel,this.saveDeploymentDetailsModel.SaveFirewallModel.isDone=null!=this.saveFirewallModel.isDone&&"true"==this.saveFirewallModel.isDone.toString()?1:0,this.saveDeploymentDetailsModel.VPNServerModel=this.VPNServerModel,this.saveDeploymentDetailsModel.DeploymentSMTPModel=this.DeploymentSMTPModel;var n=null!=this.DeploymentSMTPModel.enableSSL&&"true"==this.DeploymentSMTPModel.enableSSL.toString()?1:0;this.saveDeploymentDetailsModel.DeploymentSMTPModel.enableSSL=n,this.saveDeploymentDetailsModel.DeploymentSMTPModel.port=null!=this.DeploymentSMTPModel.port?parseInt(""!=this.DeploymentSMTPModel.port.toString()?this.DeploymentSMTPModel.port.toString():"0"):0,this.saveDeploymentDetailsModel.HostingList=this.HostingList.filter(i=>""!=i.name),this.saveDeploymentDetailsModel.DataBaseList=this.DataBaseList.filter(i=>i.backEndID>0),console.log(this.saveDeploymentDetailsModel),this.projectService.SaveProjectDeploymentDetails(this.saveDeploymentDetailsModel,t).subscribe(i=>{this.ReloadData.emit(!0),this.toastyService.success("Deployment environment save successfully.","Save Deployment")})}SetFormEmail(){this.selectedToUser=[],this.AdditionalEmail=""}SendFirwallBypassURLEmail(){this.firewallBypassURLModel.ProjectID=this.ProjectID,this.firewallBypassURLModel.DeploymentMasterID=this.DeploymentMasterID,this.firewallBypassURLModel.EncProjectID=this.commonFunctionsService.encryptUsingAES256(this.ProjectID);var t=[];this.selectedToUser.forEach(i=>{t.push(this.ToEmployeeList.find(o=>o.id==i.id).name)}),t.join(","),this.firewallBypassURLModel.DeveloperName=this.AdditionalEmail?t.join(",")+","+this.AdditionalEmail:t.join(","),document.getElementById("SendEmailPopup").click(),this.projectService.SendFirwallBypassURLEmail(this.firewallBypassURLModel).subscribe(i=>{this.closeBtn.nativeElement.click(),"Success"==i?(this.toastyService.success("Email Send successfully.","Send Email"),document.getElementById("SendEmailPopup").click()):this.toastyService.success("Something went wrong!","Send Email")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(ne),e.rXU(S.O),e.rXU(R),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deployment-details"]],viewQuery:function(n,i){if(1&n&&e.GBs(Od,7),2&n){let o;e.mGM(o=e.lsd())&&(i.closeBtn=o.first)}},inputs:{ProjectID:"ProjectID",DeploymentMasterID:"DeploymentMasterID",BackendList:"BackendList",IsDone:"IsDone",ToEmployeeList:"ToEmployeeList"},outputs:{ReloadData:"ReloadData"},decls:174,vars:78,consts:[["sendEmailModal","bs-modal"],["closeBtn",""],["additionalEmail","ngModel"],[1,"animated","fadeIn"],["class","row justify-content-between",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[1,"card","border-0"],[1,"card-header","sub-card-header","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-primary","btn-small",3,"click"],[1,"card-body","shadow-md"],[1,"col-md-3","col-sm-6"],[1,"form-group"],["for","name"],["placeholder","Server Name","type","text",1,"form-control",3,"ngModelChange","id","ngModel"],["placeholder","User Name","type","text","autocomplete","off",1,"form-control",3,"ngModelChange","id","ngModel"],[1,"input-group"],["placeholder","Password","autocomplete","new-password",1,"form-control",3,"ngModelChange","id","type","ngModel"],[1,"input-group-prepend"],[1,"input-group-text","cursor-pointer",3,"click"],[1,"fa",3,"ngClass"],["placeholder","Comment","type","text","autocomplete","off","rows","1",1,"form-control",3,"ngModelChange","id","ngModel"],[1,"float-right","pull-right","d-flex"],[1,"ml-2",2,"margin-top","2px"],["type","checkbox","value","","name","",1,"",3,"ngModelChange","ngModel"],[1,"mb-0","ml-1"],[1,"col-sm-6","col-md-3"],["class","col-sm-12",4,"ngIf"],[1,"col-sm-6","col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"container-check"],["type","checkbox","value","","name","isDone","data-md-icheck","",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"card-body","card-body-mobile"],["class","card-body py-0",4,"ngFor","ngForOf"],[1,"card-header","sub-card-header"],["class","form-group row align-items-center mx-2",4,"ngFor","ngForOf"],[1,"form-group","row","align-items-center","mx-2"],[1,"col-md-11","add-new-form"],[1,"col-md-4"],[1,"col-form-label"],[1,""],["type","text","placeholder","Host Name","required","","maxlength","45",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name"],["type","text","placeholder","User Name","maxlength","45",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name"],[1,"d-flex","mt-5"],["type","checkbox","value","","name","",1,"",3,"ngModelChange","ngModel","id","name"],[1,"mb-0","ml-1",3,"for"],["type","text","placeholder","Port","OnlyNumber","true","maxlength","50",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name"],[1,"card-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","SendEmailPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"card-body"],[1,"form-group","row"],[1,"col-md-11","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-7","coreskill-fields"],["name","touser","required","",1,"w-100",3,"ngModelChange","placeholder","data","ngModel","settings"],[1,"col-md-3","col-form-label"],["type","text","placeholder","Additional developer","name","additionalEmail","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-9","coreskill-fields"],["row","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"note-text"],[1,"text-danger","font-weight-bold"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","justify-content-between"],["type","button",1,"btn","btn-primary","mb-2","ml-3",3,"click","disabled"],["aria-hidden","true",1,"fa","fa-shield"],[1,"mr-2",2,"margin-top","2px"],["type","checkbox","name","isDone",1,"",3,"ngModelChange","ngModel"],[1,"mb-0","mr-2"],[1,"card-header","sub-card-header","d-flex","justify-content-between"],["class","btn btn-primary btn-small",3,"click",4,"ngIf"],["placeholder","Server Name","type","text",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","User Name","type","text","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Password","autocomplete","new-password",1,"form-control",3,"ngModelChange","type","ngModel"],["aria-hidden","true",1,"fa","fa-times-circle"],[1,"card-body","py-0"],[1,"form-group","row","align-items-center","mb-0"],[1,"col-sm-11","add-new-form"],["placeholder","Enter Name","type","text","maxlength","100",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Enter URL","type","text","maxlength","100",1,"form-control",3,"ngModelChange","ngModel","id","name"],["placeholder","URL Description","type","text","maxlength","200",1,"form-control",3,"ngModelChange","ngModel","id","name"],["class","mt-2","style","background: #e4e5e6;",4,"ngIf"],[1,"col-sm-1"],["tooltip","Add hosting url","placement","bottom",1,"add-new-btn",3,"click","hidden"],["aria-hidden","true",1,"fa","fa-plus"],["tooltip","Remove hosting url","placement","bottom",1,"remove-new-btn",3,"click","hidden"],["aria-hidden","true",1,"fa","fa-times"],[1,"mt-2",2,"background","#e4e5e6"],[1,"col-md-6","row"],[1,"col-md-4","col-form-label"],[1,"col-md-8"],["placeholder","Host","type","text","maxlength","100",1,"form-control",3,"ngModelChange","ngModel","id","name"],["placeholder","Port","type","text","maxlength","100",1,"form-control",3,"ngModelChange","ngModel","id","name"],["placeholder","User Name","type","text","maxlength","100",1,"form-control",3,"ngModelChange","ngModel","id","name"],["placeholder","Password","maxlength","100",1,"form-control",3,"ngModelChange","type","id","name","ngModel"],[1,"form-control",3,"ngModelChange","name","id","disabled","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Database Name","required","","maxlength","45",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name","disabled"],["type","text","placeholder","Host Name","maxlength","50",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name"],["type","text","placeholder","User Name","maxlength","45",1,"form-control","projectname",3,"ngModelChange","ngModel","id","name","autocomplete"],["placeholder","Password","maxlength","45","autocomplete","new-password",1,"form-control","projectname",3,"ngModelChange","type","ngModel","id","name"],[1,"col-md-1"],["tooltip","Add backend database","placement","bottom",1,"add-new-btn",3,"click","hidden"],["tooltip","Remove database","placement","bottom",1,"remove-new-btn",3,"click","hidden"],[3,"value"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",3),e.DNE(1,Jd,9,2,"div",4),e.j41(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"span"),e.EFF(7," Front End Server "),e.k0s(),e.j41(8,"button",9),e.bIt("click",function(){return e.eBV(o),e.Njj(i.IsVPN=!0)}),e.EFF(9," Add VPN Details "),e.k0s()(),e.j41(10,"div",10)(11,"div",5)(12,"div",11)(13,"div",12)(14,"label",13),e.EFF(15," Server Name"),e.k0s(),e.j41(16,"input",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FrontendServerModel.serverName,a)||(i.FrontendServerModel.serverName=a),e.Njj(a)}),e.k0s()()(),e.j41(17,"div",11)(18,"div",12)(19,"label",13),e.EFF(20," User Name"),e.k0s(),e.j41(21,"input",15),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FrontendServerModel.userName,a)||(i.FrontendServerModel.userName=a),e.Njj(a)}),e.k0s()()(),e.j41(22,"div",11)(23,"div",12)(24,"label",13),e.EFF(25,"Password"),e.k0s(),e.j41(26,"div",16)(27,"input",17),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FrontendServerModel.password,a)||(i.FrontendServerModel.password=a),e.Njj(a)}),e.k0s(),e.j41(28,"div",18)(29,"span",19),e.bIt("click",function(){return e.eBV(o),e.Njj(i.FrontendTextType=!i.FrontendTextType)}),e.nrm(30,"i",20),e.k0s()()()()(),e.j41(31,"div",11)(32,"div",12)(33,"label",13),e.EFF(34," Comment"),e.k0s(),e.j41(35,"textarea",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FrontendServerModel.comment,a)||(i.FrontendServerModel.comment=a),e.Njj(a)}),e.k0s()()()()()()(),e.j41(36,"div",6)(37,"div",7)(38,"div",8)(39,"span"),e.EFF(40," Back End Server "),e.k0s(),e.j41(41,"span",22)(42,"div",23)(43,"input",24),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.IsSameASFrontend,a)||(i.IsSameASFrontend=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.CopyFrontEndServer(a))}),e.k0s()(),e.j41(44,"label",25),e.EFF(45,"Same as front end"),e.k0s()()(),e.j41(46,"div",10)(47,"div",5)(48,"div",26)(49,"div",12)(50,"label",13),e.EFF(51," Server Name"),e.k0s(),e.j41(52,"input",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.BackendServerModel.serverName,a)||(i.BackendServerModel.serverName=a),e.Njj(a)}),e.k0s()()(),e.j41(53,"div",26)(54,"div",12)(55,"label",13),e.EFF(56," User Name"),e.k0s(),e.j41(57,"input",15),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.BackendServerModel.userName,a)||(i.BackendServerModel.userName=a),e.Njj(a)}),e.k0s()()(),e.j41(58,"div",26)(59,"div",12)(60,"label",13),e.EFF(61,"Password"),e.k0s(),e.j41(62,"div",16)(63,"input",17),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.BackendServerModel.password,a)||(i.BackendServerModel.password=a),e.Njj(a)}),e.k0s(),e.j41(64,"div",18)(65,"span",19),e.bIt("click",function(){return e.eBV(o),e.Njj(i.BackendTextType=!i.BackendTextType)}),e.nrm(66,"i",20),e.k0s()()()()(),e.j41(67,"div",26)(68,"div",12)(69,"label",13),e.EFF(70," Comment"),e.k0s(),e.j41(71,"textarea",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.BackendServerModel.comment,a)||(i.BackendServerModel.comment=a),e.Njj(a)}),e.k0s()()()()()()(),e.DNE(72,zd,32,12,"div",27),e.k0s(),e.j41(73,"div",5)(74,"div",28)(75,"div",29)(76,"div",30),e.EFF(77," Hosting Details "),e.j41(78,"label",31)(79,"input",32),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.IsFTP,a)||(i.IsFTP=a),e.Njj(a)}),e.k0s(),e.EFF(80," FTP "),e.nrm(81,"span",33),e.k0s()(),e.j41(82,"div",34),e.DNE(83,qd,25,18,"div",35),e.j41(84,"div",36),e.EFF(85,"Database Details"),e.k0s(),e.j41(86,"div",10),e.DNE(87,Wd,38,48,"div",37),e.k0s(),e.j41(88,"div",36),e.EFF(89,"SMTP Details"),e.k0s(),e.j41(90,"div",10)(91,"div",38)(92,"div",39)(93,"div",5)(94,"div",40)(95,"label",41),e.EFF(96,"Host Name"),e.k0s(),e.j41(97,"div",42)(98,"input",43),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DeploymentSMTPModel.hostName,a)||(i.DeploymentSMTPModel.hostName=a),e.Njj(a)}),e.k0s()()(),e.j41(99,"div",40)(100,"label",41),e.EFF(101,"User Name"),e.k0s(),e.j41(102,"input",44),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DeploymentSMTPModel.userName,a)||(i.DeploymentSMTPModel.userName=a),e.Njj(a)}),e.k0s()(),e.j41(103,"div",40)(104,"label",41),e.EFF(105,"Password"),e.k0s(),e.j41(106,"div",16)(107,"input",17),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DeploymentSMTPModel.password,a)||(i.DeploymentSMTPModel.password=a),e.Njj(a)}),e.k0s(),e.j41(108,"div",18)(109,"span",19),e.bIt("click",function(){return e.eBV(o),e.Njj(i.SMTPTextType=!i.SMTPTextType)}),e.nrm(110,"i",20),e.k0s()()()()(),e.j41(111,"div",5)(112,"div",40)(113,"span",45)(114,"div",23)(115,"input",46),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DeploymentSMTPModel.enableSSL,a)||(i.DeploymentSMTPModel.enableSSL=a),e.Njj(a)}),e.k0s()(),e.j41(116,"label",47),e.EFF(117,"Enable SSL"),e.k0s()()(),e.j41(118,"div",40)(119,"label",41),e.EFF(120,"Port"),e.k0s(),e.j41(121,"input",48),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.DeploymentSMTPModel.port,a)||(i.DeploymentSMTPModel.port=a),e.Njj(a)}),e.k0s()()()()()()()()()(),e.j41(122,"div",49)(123,"button",50),e.bIt("click",function(){return e.eBV(o),e.Njj(i.SaveDeploymentDetails())}),e.nrm(124,"i",51),e.EFF(125," Submit "),e.k0s(),e.DNE(126,Zd,1,0,"img",52),e.k0s()(),e.j41(127,"div",53,0)(129,"div",54)(130,"div",55)(131,"div",56)(132,"h4",57),e.EFF(133,"Firewall Bypass URL"),e.k0s(),e.j41(134,"button",58,1),e.bIt("click",function(){e.eBV(o);const a=e.sdS(128);return e.Njj(a.hide())}),e.j41(136,"span",59),e.EFF(137,"\xd7"),e.k0s()()(),e.j41(138,"div",60)(139,"div",3)(140,"div",5)(141,"div",61)(142,"div",29)(143,"div",62)(144,"div",63)(145,"div",64)(146,"label",65),e.EFF(147,"Developer"),e.k0s(),e.j41(148,"div",66)(149,"ng-multiselect-dropdown",67),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedToUser,a)||(i.selectedToUser=a),e.Njj(a)}),e.k0s()()()(),e.j41(150,"div",63)(151,"div",64)(152,"label",68),e.EFF(153,"Additional developer"),e.k0s(),e.j41(154,"div",66)(155,"input",69,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AdditionalEmail,a)||(i.AdditionalEmail=a),e.Njj(a)}),e.k0s()()()(),e.j41(157,"div",63)(158,"div",64)(159,"label",68),e.EFF(160,"Comment"),e.k0s(),e.j41(161,"div",70)(162,"textarea",71),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.firewallBypassURLModel.Comment,a)||(i.firewallBypassURLModel.Comment=a),e.Njj(a)}),e.k0s()()()(),e.j41(163,"div",63)(164,"div",61)(165,"span",72),e.EFF(166,"Note: Use "),e.j41(167,"span",73),e.EFF(168,'","'),e.k0s(),e.EFF(169," for separation of additional developer"),e.k0s()()(),e.j41(170,"div",49)(171,"button",74),e.bIt("click",function(){return e.eBV(o),e.Njj(i.SendFirwallBypassURLEmail())}),e.nrm(172,"i",51),e.EFF(173," Submit "),e.k0s()()()()()()()()()()()}2&n&&(e.R7$(),e.Y8G("ngIf",i.DeploymentMasterID!=i.deploymentMasterEnum.Local),e.R7$(15),e.Mz_("id","fservername",i.DeploymentMasterID,""),e.R50("ngModel",i.FrontendServerModel.serverName),e.R7$(5),e.Mz_("id","fusername",i.DeploymentMasterID,""),e.R50("ngModel",i.FrontendServerModel.userName),e.R7$(6),e.Mz_("id","fpassword",i.DeploymentMasterID,""),e.Y8G("type",i.FrontendTextType?"text":"password"),e.R50("ngModel",i.FrontendServerModel.password),e.R7$(3),e.Y8G("ngClass",e.l_i(69,re,!i.FrontendTextType,i.FrontendTextType)),e.R7$(5),e.Mz_("id","fcomment",i.DeploymentMasterID,""),e.R50("ngModel",i.FrontendServerModel.comment),e.R7$(8),e.R50("ngModel",i.IsSameASFrontend),e.R7$(9),e.Mz_("id","bservername",i.DeploymentMasterID,""),e.R50("ngModel",i.BackendServerModel.serverName),e.R7$(5),e.Mz_("id","busername",i.DeploymentMasterID,""),e.R50("ngModel",i.BackendServerModel.userName),e.R7$(6),e.Mz_("id","bpassword",i.DeploymentMasterID,""),e.Y8G("type",i.BackendTextType?"text":"password"),e.R50("ngModel",i.BackendServerModel.password),e.R7$(3),e.Y8G("ngClass",e.l_i(72,re,!i.BackendTextType,i.BackendTextType)),e.R7$(5),e.Mz_("id","bcomment",i.DeploymentMasterID,""),e.R50("ngModel",i.BackendServerModel.comment),e.R7$(),e.Y8G("ngIf",i.IsVPN),e.R7$(7),e.R50("ngModel",i.IsFTP),e.R7$(4),e.Y8G("ngForOf",i.HostingList),e.R7$(4),e.Y8G("ngForOf",i.DataBaseList),e.R7$(11),e.Mz_("id","SMTPHostName",i.DeploymentMasterID,""),e.Mz_("name","SMTPHostName",i.DeploymentMasterID,""),e.R50("ngModel",i.DeploymentSMTPModel.hostName),e.R7$(4),e.Mz_("id","SMTPUserName",i.DeploymentMasterID,""),e.Mz_("name","SMTPUserName",i.DeploymentMasterID,""),e.R50("ngModel",i.DeploymentSMTPModel.userName),e.R7$(5),e.Mz_("id","SMTPPassword",i.DeploymentMasterID,""),e.Y8G("type",i.SMTPTextType?"text":"password"),e.R50("ngModel",i.DeploymentSMTPModel.password),e.R7$(3),e.Y8G("ngClass",e.l_i(75,re,!i.SMTPTextType,i.SMTPTextType)),e.R7$(5),e.Mz_("id","SMTPenableSSL",i.DeploymentMasterID,""),e.Mz_("name","SMTPenableSSL",i.DeploymentMasterID,""),e.R50("ngModel",i.DeploymentSMTPModel.enableSSL),e.R7$(),e.Mz_("for","SMTPenableSSL",i.DeploymentMasterID,""),e.R7$(5),e.Mz_("id","SMTPPort",i.DeploymentMasterID,""),e.Mz_("name","SMTPPort",i.DeploymentMasterID,""),e.R50("ngModel",i.DeploymentSMTPModel.port),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading),e.R7$(23),e.Y8G("placeholder","-- Developer --")("data",i.ToEmployeeList),e.R50("ngModel",i.selectedToUser),e.Y8G("settings",i.dropdownSettings),e.R7$(6),e.R50("ngModel",i.AdditionalEmail),e.R7$(7),e.R50("ngModel",i.firewallBypassURLModel.Comment))},dependencies:[u.YU,u.Sq,u.bT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.YS,c.tU,c.vS,B.hZ,E.dg,w.b,pe]})}return s})();const tp=["closeBtn"];function ip(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.sdS(7).show(),e.Njj(i.SetFormEmail())}),e.nrm(1,"i",26),e.EFF(2),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",t.IsItSupport?"Email Credentials":"IT Support Email"," ")}}function np(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.sdS(7).show(),e.Njj(i.SetFormEmail())}),e.nrm(1,"i",26),e.EFF(2," Email Credentials "),e.k0s()}}function op(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",27)(2,"span",28),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.OpenCollapsed(i.id))}),e.EFF(3),e.k0s(),e.j41(4,"div",29)(5,"label",30)(6,"input",31),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit;return e.DH7(o.isDone,i)||(o.isDone=i),e.Njj(i)}),e.k0s(),e.EFF(7," Done "),e.nrm(8,"span",32),e.k0s()()(),e.j41(9,"div",33,2)(11,"app-deployment-details",34),e.bIt("ReloadData",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.ReloadData(i))}),e.k0s()()()}if(2&s){const t=l.$implicit,n=e.XpG();e.R7$(2),e.BMQ("aria-expanded",!n.isCollapsed),e.R7$(),e.SpI(" ",t.name," Environment"),e.R7$(3),e.R50("ngModel",t.isDone),e.R7$(3),e.Mz_("id","collapseManual",t.id,""),e.Y8G("collapse",!(n.isCollapsed&&n.IsOpenID==t.id)),e.R7$(2),e.Y8G("ProjectID",n.ProjectID)("DeploymentMasterID",t.id)("BackendList",n.BackendList)("IsDone",t.isDone)("ToEmployeeList",n.ToEmployeeList)}}function sp(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",39)(5,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.LocalEnvironmentFrontEnd,i)||(o.DeploymentCredentialEmailModel.LocalEnvironmentFrontEnd=i),e.Njj(i)}),e.k0s()(),e.j41(6,"label",41),e.EFF(7,"Local Environment Front End"),e.k0s()()(),e.j41(8,"div",37)(9,"div",38)(10,"div",39)(11,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.LocalEnvironmentBackEnd,i)||(o.DeploymentCredentialEmailModel.LocalEnvironmentBackEnd=i),e.Njj(i)}),e.k0s()(),e.j41(12,"label",41),e.EFF(13,"Local Environment Back End"),e.k0s()()(),e.j41(14,"div",37)(15,"div",38)(16,"div",39)(17,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.LocalEnvironmentHosting,i)||(o.DeploymentCredentialEmailModel.LocalEnvironmentHosting=i),e.Njj(i)}),e.k0s()(),e.j41(18,"label",41),e.EFF(19,"Local Environment Hosting"),e.k0s()()()(),e.j41(20,"div",36)(21,"div",37)(22,"div",38)(23,"div",39)(24,"input",42),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.StageEnvironmentFrontEnd,i)||(o.DeploymentCredentialEmailModel.StageEnvironmentFrontEnd=i),e.Njj(i)}),e.k0s()(),e.j41(25,"label",41),e.EFF(26,"Stage Environment Front End"),e.k0s()()(),e.j41(27,"div",37)(28,"div",38)(29,"div",39)(30,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.StageEnvironmentBackEnd,i)||(o.DeploymentCredentialEmailModel.StageEnvironmentBackEnd=i),e.Njj(i)}),e.k0s()(),e.j41(31,"label",41),e.EFF(32,"Stage Environment Back End"),e.k0s()()(),e.j41(33,"div",37)(34,"div",38)(35,"div",39)(36,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.StageEnvironmentHosting,i)||(o.DeploymentCredentialEmailModel.StageEnvironmentHosting=i),e.Njj(i)}),e.k0s()(),e.j41(37,"label",41),e.EFF(38,"Stage Environment Hosting"),e.k0s()()()(),e.j41(39,"div",36)(40,"div",37)(41,"div",38)(42,"div",39)(43,"input",42),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.ProductionEnvironmentFrontEnd,i)||(o.DeploymentCredentialEmailModel.ProductionEnvironmentFrontEnd=i),e.Njj(i)}),e.k0s()(),e.j41(44,"label",41),e.EFF(45,"Production Environment Front End"),e.k0s()()(),e.j41(46,"div",37)(47,"div",38)(48,"div",39)(49,"input",42),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.ProductionEnvironmentBackend,i)||(o.DeploymentCredentialEmailModel.ProductionEnvironmentBackend=i),e.Njj(i)}),e.k0s()(),e.j41(50,"label",41),e.EFF(51,"Production Environment Back End"),e.k0s()()(),e.j41(52,"div",37)(53,"div",38)(54,"div",39)(55,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.DeploymentCredentialEmailModel.ProductionEnvironmentHosting,i)||(o.DeploymentCredentialEmailModel.ProductionEnvironmentHosting=i),e.Njj(i)}),e.k0s()(),e.j41(56,"label",41),e.EFF(57,"Production Environment Hosting"),e.k0s()()()(),e.j41(58,"div",36)(59,"div",43)(60,"label",44),e.EFF(61,"To"),e.k0s(),e.j41(62,"div",45)(63,"ng-multiselect-dropdown",46),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedToUser,i)||(o.selectedToUser=i),e.Njj(i)}),e.k0s()()(),e.j41(64,"div",43)(65,"label",47),e.EFF(66,"Additional"),e.k0s(),e.j41(67,"div",45)(68,"input",48,3),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.AdditionalEmail,i)||(o.AdditionalEmail=i),e.Njj(i)}),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.R50("ngModel",t.DeploymentCredentialEmailModel.LocalEnvironmentFrontEnd),e.R7$(6),e.R50("ngModel",t.DeploymentCredentialEmailModel.LocalEnvironmentBackEnd),e.R7$(6),e.R50("ngModel",t.DeploymentCredentialEmailModel.LocalEnvironmentHosting),e.R7$(7),e.R50("ngModel",t.DeploymentCredentialEmailModel.StageEnvironmentFrontEnd),e.R7$(6),e.R50("ngModel",t.DeploymentCredentialEmailModel.StageEnvironmentBackEnd),e.R7$(6),e.R50("ngModel",t.DeploymentCredentialEmailModel.StageEnvironmentHosting),e.R7$(7),e.R50("ngModel",t.DeploymentCredentialEmailModel.ProductionEnvironmentFrontEnd),e.R7$(6),e.R50("ngModel",t.DeploymentCredentialEmailModel.ProductionEnvironmentBackend),e.R7$(6),e.R50("ngModel",t.DeploymentCredentialEmailModel.ProductionEnvironmentHosting),e.R7$(8),e.Y8G("placeholder","-- Developer --")("data",t.ToEmployeeList),e.R50("ngModel",t.selectedToUser),e.Y8G("settings",t.dropdownSettings),e.R7$(5),e.R50("ngModel",t.AdditionalEmail)}}function rp(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",49)(5,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.ItSupportDevelopmentEmailModel.LocalEnvironment,i)||(o.ItSupportDevelopmentEmailModel.LocalEnvironment=i),e.Njj(i)}),e.k0s()(),e.j41(6,"label",50),e.EFF(7,"Local Environment"),e.k0s()()(),e.j41(8,"div",37)(9,"div",38)(10,"div",49)(11,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.ItSupportDevelopmentEmailModel.StageEnvironment,i)||(o.ItSupportDevelopmentEmailModel.StageEnvironment=i),e.Njj(i)}),e.k0s()(),e.j41(12,"label",50),e.EFF(13,"Stage Environment"),e.k0s()()(),e.j41(14,"div",37)(15,"div",38)(16,"div",49)(17,"input",40),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.ItSupportDevelopmentEmailModel.ProductionEnvironment,i)||(o.ItSupportDevelopmentEmailModel.ProductionEnvironment=i),e.Njj(i)}),e.k0s()(),e.j41(18,"label",50),e.EFF(19,"Production Environment"),e.k0s()()()(),e.j41(20,"div",36)(21,"label",51),e.EFF(22,"Comment"),e.k0s(),e.j41(23,"div",52)(24,"textarea",53),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.ItSupportDevelopmentEmailModel.Comment,i)||(o.ItSupportDevelopmentEmailModel.Comment=i),e.Njj(i)}),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.R50("ngModel",t.ItSupportDevelopmentEmailModel.LocalEnvironment),e.R7$(6),e.R50("ngModel",t.ItSupportDevelopmentEmailModel.StageEnvironment),e.R7$(6),e.R50("ngModel",t.ItSupportDevelopmentEmailModel.ProductionEnvironment),e.R7$(7),e.R50("ngModel",t.ItSupportDevelopmentEmailModel.Comment)}}function ap(s,l){1&s&&(e.j41(0,"div",54)(1,"div",6)(2,"span",55),e.EFF(3,"Note: Use "),e.j41(4,"span",56),e.EFF(5,'","'),e.k0s(),e.EFF(6," for separation of Additional email"),e.k0s()()())}function lp(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SendItSupportDevelopmentEmail())}),e.nrm(1,"i",26),e.EFF(2," Send Email "),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("disabled",t.loading)}}function cp(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SendDeploymentCredentialEmail())}),e.nrm(1,"i",26),e.EFF(2," Send Email "),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("disabled",t.loading)}}function hp(s,l){1&s&&e.nrm(0,"img",58)}let dp=(()=>{class s{constructor(t,n,i){this.projectService=t,this.commonFunctionsService=n,this.toastyService=i,this.DeploymentMasterList=[],this.BackendList=[],this.IsItSupport=!1,this.dropdownSettings={},this.ToEmployeeList=[],this.selectedToUser=[],this.ItSupportDevelopmentEmailModel=new rt,this.DeploymentCredentialEmailModel=new at,this.isCollapsed=!1,this.IsOpenID=0,this.loading=!1,this.AdditionalEmail="",this.IsItSupport=this.commonFunctionsService.IsITSupport()}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.GetEnvironmentList(),this.GetDeploymentMasterList()}ReloadData(t){this.GetDeploymentMasterList()}GetDeploymentMasterList(){this.projectService.GetDeploymentMasterList(this.ProjectID).subscribe(t=>{this.DeploymentMasterList=t.deploymentMasterList,this.DeploymentMasterList.forEach(n=>{n.isDone=0!=n.isDone}),this.ToEmployeeList=t.employeeList})}GetEnvironmentList(){this.projectService.GetEnvironmentList().subscribe(t=>{this.BackendList=t.backendViewModel})}SendItSupportDevelopmentEmail(){this.ItSupportDevelopmentEmailModel.ProjectID=this.ProjectID,this.ItSupportDevelopmentEmailModel.EncProjectID=this.commonFunctionsService.encryptUsingAES256(this.ProjectID),this.projectService.SendItSupportDevelopmentEmail(this.ItSupportDevelopmentEmailModel).subscribe(t=>{this.closeBtn.nativeElement.click(),"Success"==t?(this.toastyService.success("Email Send successfully.","Send Email"),document.getElementById("SendEmailPopup").click()):this.toastyService.error("Somethis went wrong.","Send Email")})}SetFormEmail(){this.DeploymentCredentialEmailModel=new at,this.ItSupportDevelopmentEmailModel=new rt}SendDeploymentCredentialEmail(){this.DeploymentCredentialEmailModel.ProjectID=this.ProjectID,this.DeploymentCredentialEmailModel.EncProjectID=this.commonFunctionsService.encryptUsingAES256(this.ProjectID);var t=[];this.selectedToUser.forEach(n=>{t.push(this.ToEmployeeList.find(i=>i.id==n.id).emailID)}),t.join(","),this.DeploymentCredentialEmailModel.ToUsers=this.DeploymentCredentialEmailModel.AdditionalUser?t.join(",")+","+this.DeploymentCredentialEmailModel.AdditionalUser:t.join(","),console.log(this.DeploymentCredentialEmailModel),this.projectService.SendDeploymentCredentials(this.DeploymentCredentialEmailModel).subscribe(n=>{this.closeBtn.nativeElement.click(),"Success"==n?(this.toastyService.success("Email Send successfully.","Send Email"),document.getElementById("SendEmailPopup").click()):this.toastyService.error("Something went wrong!","Send Email")})}OpenCollapsed(t){this.isCollapsed=t!=this.IsOpenID||!this.isCollapsed,this.IsOpenID=t}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(ne),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deployment-setup"]],viewQuery:function(n,i){if(1&n&&e.GBs(tp,7),2&n){let o;e.mGM(o=e.lsd())&&(i.closeBtn=o.first)}},inputs:{ProjectID:"ProjectID"},decls:30,vars:9,consts:[["sendEmailModal","bs-modal"],["closeBtn",""],["collapse{{item.id}}","bs-collapse"],["additionalEmail","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],["class","btn btn-success mb-2","type","button",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","SendEmailPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"card"],[1,"card-body","px-0"],["style","font-size: 14px",4,"ngIf"],[4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"card-footer"],["class","btn btn-primary mb-2","type","button",3,"disabled","click",4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","button",1,"btn","btn-success","mb-2",3,"click"],[1,"fa","fa-paper-plane"],[1,"row","toggle-collapse-setup","env-setup-padding"],["aria-controls","collapseManual",1,"col-10",3,"click"],[1,"col-2"],[1,"container-check"],["type","checkbox","data-md-icheck","",3,"ngModelChange","ngModel"],[1,"checkmark"],[3,"id","collapse"],[3,"ReloadData","ProjectID","DeploymentMasterID","BackendList","IsDone","ToEmployeeList"],[2,"font-size","14px"],[1,"form-group","row","mx-0"],[1,"col-md-4"],[1,"d-flex"],[1,"ml-2"],["type","checkbox","name","isDone",1,"",3,"ngModelChange","ngModel"],[1,"mb-0","pl-2"],["type","checkbox",1,"",3,"ngModelChange","ngModel"],[1,"col-md-6"],[1,"col-form-label","required"],[1,"coreskill-fields"],["name","touser","required","",1,"w-100",3,"ngModelChange","placeholder","data","ngModel","settings"],[1,"col-form-label"],["type","text","placeholder","Additional Email","name","additionalEmail","maxlength","50",1,"form-control",3,"ngModelChange","ngModel"],[1,"mr-2"],[1,"mb-0"],[1,"col-md-2","p-o"],[1,"col-md-8"],["row","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","row"],[1,"note-text"],[1,"text-danger","font-weight-bold"],["type","button",1,"btn","btn-primary","mb-2",3,"click","disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6),e.DNE(3,ip,3,1,"button",7)(4,np,3,0,"button",7),e.k0s()()(),e.DNE(5,op,12,11,"div",8),e.j41(6,"div",9,0)(8,"div",10)(9,"div",11)(10,"div",12)(11,"h4",13),e.EFF(12,"Include details in email"),e.k0s(),e.j41(13,"button",14,1),e.bIt("click",function(){e.eBV(o);const a=e.sdS(7);return e.Njj(a.hide())}),e.j41(15,"span",15),e.EFF(16,"\xd7"),e.k0s()()(),e.j41(17,"div",16)(18,"div",4)(19,"div",5)(20,"div",6)(21,"div",17)(22,"div",18),e.DNE(23,sp,70,14,"div",19)(24,rp,25,4,"div",20)(25,ap,7,0,"div",21),e.j41(26,"div",22),e.DNE(27,lp,3,1,"button",23)(28,cp,3,1,"button",23)(29,hp,1,0,"img",24),e.k0s()()()()()()()()()()}2&n&&(e.R7$(3),e.Y8G("ngIf",!i.IsItSupport),e.R7$(),e.Y8G("ngIf",i.IsItSupport),e.R7$(),e.Y8G("ngForOf",i.DeploymentMasterList),e.R7$(18),e.Y8G("ngIf",i.IsItSupport),e.R7$(),e.Y8G("ngIf",!i.IsItSupport),e.R7$(),e.Y8G("ngIf",i.IsItSupport),e.R7$(2),e.Y8G("ngIf",!i.IsItSupport),e.R7$(),e.Y8G("ngIf",i.IsItSupport),e.R7$(),e.Y8G("ngIf",i.loading))},dependencies:[u.Sq,u.bT,c.me,c.Zm,c.BC,c.YS,c.tU,c.vS,B.hZ,zt.D,w.b,ep]})}return s})();const pp=["AdditionalWorkModals"];function up(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",11)(1,"h4",12),e.EFF(2,"Additional Work"),e.k0s(),e.j41(3,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.modalRef.hide())}),e.j41(4,"span",14),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",15),e.qex(7),e.j41(8,"app-additional-work",16),e.bIt("SaveSuccess",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.Successmessage=i.GetAdditionalWorkList())}),e.k0s(),e.bVm(),e.k0s()}if(2&s){const t=e.XpG();e.R7$(8),e.Y8G("parentData",t.model)}}let mp=(()=>{class s{constructor(t,n,i,o,r,a,d,g){this.http=t,this.modalService=n,this.router=o,this.projectService=r,this.spinner=a,this.cookieService=d,this.toastyService=g,this.DataEmit=new e.bkB,this.filterModel=new lt,this.columns=[],this.currentPageNumber=1,this.formData=new de,this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=i,this.currentPageNumber=1,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=30,this.sortDirection="DESC",this.sortExpression="Title",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){this.spinner.show(),this.columns.push(new h("project","Project",'[{"width": "6%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("title","Title",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("startDate","Start Date",'[{"width": "6%","hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("endDate","End Date",'[{"width": "6%" ,"hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("pm","PM/PL",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("tl","TL/Sr.Dev",'[{"width": "5%" ,"hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("developer","Developer",'[{"width": "15%" ,"hyperLink": false,"disableSorting": false }]')),this.columns.push(new h("designer","Designer",'[{"width": "5%" ,"hyperLink": false,"disableSorting": false }]')),this.columns.push(new h("qa","QA",'[{"width": "5%" ,"hyperLink": false,"disableSorting": false }]')),this.columns.push(new h("estimatedHours","Estimated Hours",'[{"width": "5%" ,"hyperLink": false,"disableSorting": false }]')),this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.executeSearch(),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetAdditionalWorkList()},t),this.spinner.hide()}GetAdditionalWorkList(){this.spinner.show();const t=new lt;t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.projectID=this.ProjectID,this.filterModel=t;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Project/GetAdditionalWorkList",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.additionalWorkListModal=t.additionalWorks,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType&&this.selectedRowForEditDelete(n.ItemSelected)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}selectedRow(t){if(null!=t){let i=this.additionalWorkListModal[t];this.formData.AdditionalWorkID=i.additionalWorkID,this.formData.Title=i.title,this.formData.ProjectID=i.projectID,this.formData.StartDate=i.startDate,this.formData.EndDate=i.endDate,this.formData.PM=i.pmEmployeeID,this.formData.TL=i.tlEmployeeID,this.formData.DeveloperEmployeeID=i.developerEmployeeID,this.formData.Designer=i.designerEmployeeID,this.formData.QA=i.qaEmployeeID,this.formData.EstimatedHours=i.estimatedHours}else this.formData.ProjectID=this.ProjectID;this.model=this.formData,this.modalRef=this.modalService.show(this.template,Object.assign({},{class:"AdditionalWorkPopup modal-xl"},this.config))}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}selectedRowForEditDelete(t){let i=this.additionalWorkListModal[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this CR?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteAdditionalWork(i.additionalWorkID)}},cancel:function(){}}})}DeleteAdditionalWork(t){this.spinner.show(),this.projectService.DeleteAddtionalWork(t,this.ProjectID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("CR deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error("Something error.","Error")}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(B.I8),e.rXU(_),e.rXU(f.Ix),e.rXU(R),e.rXU(D.ex),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-additional-work-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(pp,7),e.GBs(_,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.template=o.first),e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},inputs:{ProjectID:"ProjectID"},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([R])],decls:13,vars:6,consts:[["AdditionalWorkModals",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[1,"modal-header"],[1,"modal-title"],["type","button","id","AdditionalWorkPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"button",6),e.bIt("click",function(){return e.eBV(o),e.Njj(i.GetAdditionalWorkList())}),e.nrm(6,"i",7),e.k0s(),e.j41(7,"div",2)(8,"div",8)(9,"datagrid",9),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.nrm(10,"ngx-spinner",10),e.DNE(11,up,9,1,"ng-template",null,0,e.C5r)}2&n&&(e.R7$(9),e.Y8G("rows",i.additionalWorkListModal)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[E.dg,D.et,_,ut],encapsulation:2})}return s})();const gp=["staticTabs"];function fp(s,l){1&s&&(e.nrm(0,"i",17),e.EFF(1," Project Details"))}function Ap(s,l){1&s&&(e.nrm(0,"i",18),e.EFF(1," Additional Work "))}function _p(s,l){if(1&s&&e.nrm(0,"app-additional-work-list",19),2&s){const t=e.XpG();e.Y8G("ProjectID",t.ProjectID)}}function yp(s,l){1&s&&e.nrm(0,"i",22)}function Sp(s,l){1&s&&e.nrm(0,"i",23)}function Dp(s,l){if(1&s&&(e.DNE(0,yp,1,0,"i",20)(1,Sp,1,0,"i",21),e.EFF(2," Environment Setup ")),2&s){const t=e.XpG();e.Y8G("ngIf",1==t.EnvironmentSetupIsDone),e.R7$(),e.Y8G("ngIf",0==t.EnvironmentSetupIsDone||null==t.EnvironmentSetupIsDone)}}function jp(s,l){if(1&s&&e.nrm(0,"app-project-environment-setup",19),2&s){const t=e.XpG();e.Y8G("ProjectID",t.ProjectID)}}function bp(s,l){1&s&&(e.nrm(0,"i",24),e.EFF(1," Git "))}function Mp(s,l){if(1&s&&e.nrm(0,"app-git",19),2&s){const t=e.XpG();e.Y8G("ProjectID",t.ProjectID)}}function Cp(s,l){1&s&&(e.nrm(0,"i",17),e.EFF(1," Deployment Environment"))}function kp(s,l){if(1&s&&e.nrm(0,"app-deployment-setup",19),2&s){const t=e.XpG();e.Y8G("ProjectID",t.ProjectID)}}let Ip=(()=>{class s{constructor(t,n,i,o){this.projectService=t,this.commonFunctionsService=n,this.router=i,this.cookieService=o,this.ProjectID=0,this.result=[],this.IsProject=!0,this.IsEnvironment=!1,this.IsGit=!1,this.IsDeployment=!1,this.EncProjectID="",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Project&&(this.ProjectID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.Project),console.log(+t.queryParams.Tab),this.staticTabs.tabs[null!=t.queryParams.Tab?+t.queryParams.Tab:0].active=!0),null!=t.queryParams.id&&(this.ProjectID=+t.queryParams.id,this.filterModel=t.queryParams.filterModel),this.ProjectID>0&&this.getProjectIsDoneStatus(this.ProjectID)}clearInputdata(){this.router.navigate(["/Master/ProjectList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}changeTab(t,n){t instanceof _e.V6&&("p"==n?(this.IsProject=!0,this.IsEnvironment=!1,this.IsGit=!1,this.IsDeployment=!1):"e"==n?(this.IsProject=!1,this.IsEnvironment=!0,this.IsGit=!1,this.IsDeployment=!1):"g"==n?(this.IsProject=!1,this.IsEnvironment=!1,this.IsGit=!0,this.IsDeployment=!1):"d"==n&&(this.IsDeployment=!0,this.IsProject=!1,this.IsEnvironment=!1,this.IsGit=!1))}getProjectIsDoneStatus(t){this.projectService.GetProjectIsDoneStatus(t).subscribe(n=>{""!=n&&(this.EnvironmentSetupIsDone=null!=n&&n.isDone)},n=>{console.log(n)})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(ne),e.rXU(f.Ix),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-project-setup"]],viewQuery:function(n,i){if(1&n&&e.GBs(gp,7),2&n){let o;e.mGM(o=e.lsd())&&(i.staticTabs=o.first)}},features:[e.Jv_([R])],decls:32,vars:8,consts:[["staticTabs",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-12"],[3,"select"],["tabHeading",""],[3,"disabled"],[3,"ProjectID",4,"ngIf"],[3,"select","disabled"],[1,""],[1,"fa","fa-address-card"],[3,"ProjectID"],["class","fa fa-check check-label",4,"ngIf"],["class","fa fa-check uncheck-label",4,"ngIf"],[1,"fa","fa-check","check-label"],[1,"fa","fa-check","uncheck-label"],[1,"icon-social-github"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div"),e.nrm(7,"i",7),e.EFF(8," Project Setup "),e.k0s(),e.j41(9,"button",8),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",9),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",10)(13,"div",2)(14,"div",11)(15,"tabset",null,0)(17,"tab",12),e.bIt("select",function(a){return e.eBV(o),e.Njj(i.changeTab(a,"p"))}),e.DNE(18,fp,2,0,"ng-template",13),e.nrm(19,"app-project"),e.k0s(),e.j41(20,"tab",14),e.DNE(21,Ap,2,0,"ng-template",13)(22,_p,1,1,"app-additional-work-list",15),e.k0s(),e.j41(23,"tab",16),e.bIt("select",function(a){return e.eBV(o),e.Njj(i.changeTab(a,"e"))}),e.DNE(24,Dp,3,2,"ng-template",13)(25,jp,1,1,"app-project-environment-setup",15),e.k0s(),e.j41(26,"tab",16),e.bIt("select",function(a){return e.eBV(o),e.Njj(i.changeTab(a,"g"))}),e.DNE(27,bp,2,0,"ng-template",13)(28,Mp,1,1,"app-git",15),e.k0s(),e.j41(29,"tab",16),e.bIt("select",function(a){return e.eBV(o),e.Njj(i.changeTab(a,"d"))}),e.DNE(30,Cp,2,0,"ng-template",13)(31,kp,1,1,"app-deployment-setup",15),e.k0s()()()()()()()()()}2&n&&(e.R7$(20),e.Y8G("disabled",0==i.ProjectID),e.R7$(2),e.Y8G("ngIf",i.ProjectID>0),e.R7$(),e.Y8G("disabled",0==i.ProjectID),e.R7$(2),e.Y8G("ngIf",i.ProjectID>0),e.R7$(),e.Y8G("disabled",0==i.ProjectID),e.R7$(2),e.Y8G("ngIf",i.ProjectID>0),e.R7$(),e.Y8G("disabled",0==i.ProjectID),e.R7$(2),e.Y8G("ngIf",i.ProjectID>0))},dependencies:[u.bT,_e.V6,_e.fw,_e.Bh,Le,Qt,Qd,dp,mp],encapsulation:2})}return s})();function vp(s,l){if(1&s&&(e.j41(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",2)(4,"span",12),e.EFF(5,"Project Name:"),e.k0s(),e.j41(6,"span"),e.EFF(7),e.k0s()()(),e.j41(8,"div",11)(9,"div",2)(10,"span",12),e.EFF(11,"Git Name: "),e.k0s(),e.j41(12,"span"),e.EFF(13),e.k0s()()(),e.j41(14,"div",11)(15,"div",2)(16,"span",12),e.EFF(17,"Git URL: "),e.k0s(),e.j41(18,"span")(19,"a",13),e.EFF(20),e.k0s()()()()()()),2&s){const t=e.XpG();e.R7$(7),e.JRh(t.ProjectDetails.projectName),e.R7$(6),e.JRh(t.ProjectDetails.name),e.R7$(6),e.Y8G("href",t.ProjectDetails.gitURL,e.B4B),e.R7$(),e.JRh(t.ProjectDetails.gitURL)}}function Ep(s,l){if(1&s&&(e.j41(0,"div"),e.nrm(1,"app-git-details",14),e.k0s()),2&s){const t=l.$implicit,n=e.XpG();e.R7$(),e.Y8G("GitPermissionList",n.GetPermissionList)("ProjectGitPermissionDetails",t.value)("IsHistory",!0)}}let Fp=(()=>{class s{constructor(t,n){this.projectService=t,this.cookieService=n,this.ProjectID=0,this.ProjectGitID=0,this.GetPermissionList=[],this.HistoryList=[];var i=JSON.parse(this.cookieService.get("ProjectGitHistory")||"{}");this.ProjectID=i.ProjectID,this.ProjectGitID=i.ProjectGitID}ngOnInit(){this.ProjectID>0&&(this.getProjectSetUpDetails(),this.GetGitHistory())}getProjectSetUpDetails(){this.projectService.GetProjectSetUpDetails(this.ProjectID).subscribe(t=>{""!=t&&(this.GetPermissionList=t.gitPermission)},t=>{console.log(t)})}GetGitHistory(){this.projectService.GetProjectGitHistory(this.ProjectID,this.ProjectGitID).subscribe(t=>{this.ProjectDetails=t.projectGitDetailModel;let n=t.projectGitPermissionHistoryListModels.reduce((i,o)=>(i[o.historyDatetime]?i[o.historyDatetime].push(o):i[o.historyDatetime]=[o],i),{});this.HistoryList=Object.keys(n).map(i=>({key:i,value:n[i]}))})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(R),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-git-history"]],decls:18,vars:2,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],["class","card-body",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-md-4","row"],[1,"font-weight-bold"],["target","_blank",3,"href"],[3,"GitPermissionList","ProjectGitPermissionDetails","IsHistory"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Project Git permission history "),e.k0s()(),e.j41(8,"div",7)(9,"div",4)(10,"div",5),e.EFF(11," Git Details "),e.k0s()(),e.DNE(12,vp,21,4,"div",8),e.j41(13,"div",4)(14,"div",5),e.EFF(15,"Permission Details"),e.k0s()(),e.j41(16,"div",7),e.DNE(17,Ep,2,3,"div",9),e.k0s()()()()()()),2&n&&(e.R7$(12),e.Y8G("ngIf",i.ProjectDetails),e.R7$(5),e.Y8G("ngForOf",i.HistoryList))},dependencies:[u.Sq,u.bT,xt]})}return s})();class Xt extends C{}const Tp=["frontendModal"];let wp=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=i,this.router=o,this.masterService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Front-End List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.filterModel=new Xt,this.frontEndData={id:0,name:""},this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=n,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="ID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.getCookiesFilterData(t.queryParams.filterModel),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getFrontEndList()},t),this.spinner.hide()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}getFrontEndList(){const t=new Xt;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.companyID=this.currentUser.companyID,this.filterModel=t;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Master/GetFrontEndList",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.frontEndListViewModel=t.frontEndListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRow(t){let i=this.frontEndListViewModel[t];this.frontEndData.id=i.id,this.frontEndData.name=i.name,this.masterService.frontEndData.next(this.frontEndData),this.frontendModal.show()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}selectedRowForEditDelete(t){let i=this.frontEndListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Front End?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteFrontEnd(i.id)}},cancel:function(){}}})}DeleteFrontEnd(t){this.spinner.show(),this.masterService.deleteFrontEnd(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Front End deleted successfully.","Delete")):2==t?this.toastyService.error("This frontend is associated with another resource so you cannot delete.","Can not delete this record"):this.toastyService.error("Something error.","Error")}deleteOnError(t){}SaveSuccessed(t){this.reset()}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(D.ex),e.rXU(f.Ix),e.rXU($),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-front-end-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Tp,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.frontendModal=o.first)}},outputs:{DataEmit:"DataEmit"},decls:43,vars:9,consts:[["frontendModal","bs-modal"],["appFrontend",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],["tooltip","If check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","","placement","bottom",3,"ngModelChange","ngModel"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","FrontendPopup","aria-label","Close",1,"close","btn","fs-4",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"],["size","medium",3,"type"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),e.nrm(6,"i",8),e.EFF(7," Front Ends "),e.k0s(),e.j41(8,"div",9)(9,"button",10),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30);return e.Njj(a.show())}),e.nrm(10,"i",11),e.k0s()()(),e.j41(11,"div",12)(12,"div",3)(13,"div",13)(14,"input",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(15,"div",13)(16,"button",15),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(17,"i",16),e.k0s(),e.j41(18,"button",17),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(19,"i",18),e.k0s()()(),e.j41(20,"div",3)(21,"div",19)(22,"div",20)(23,"label")(24,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.autoFilter,a)||(i.autoFilter=a),e.Njj(a)}),e.k0s(),e.EFF(25," Auto Filter "),e.k0s()()()(),e.j41(26,"div",3)(27,"div",19)(28,"datagrid",22),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.j41(29,"div",23,0)(31,"div",24)(32,"div",25)(33,"div",26)(34,"h4",27),e.EFF(35,"Front end"),e.k0s(),e.j41(36,"button",28),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30),d=e.sdS(41);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(37,"span",29),e.EFF(38,"\xd7"),e.k0s()()(),e.j41(39,"div",30)(40,"app-front-end",31,1),e.bIt("SaveSuccess",function(a){return e.eBV(o),e.Njj(i.SaveSuccessed(a))}),e.k0s()()()()(),e.nrm(42,"ngx-spinner",32)}2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.frontEndListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(12),e.Y8G("parentData",i.frontEndData),e.R7$(2),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,B.hZ,E.dg,D.et,_,Ot]})}return s})();class qt extends C{}const Pp=["backendModal"];let Rp=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.masterService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Back-End List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.filterModel=new qt,this.BackEndData={id:0,name:""},this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=i,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="ID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.getCookiesFilterData(t.queryParams.filterModel),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getBackEndList()},t),this.spinner.hide()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}getBackEndList(){const t=new qt;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.companyID=this.currentUser.companyID,this.filterModel=t;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Master/GetBackEndList",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.backEndListViewModel=t.backEndListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRow(t){let i=this.backEndListViewModel[t];this.BackEndData.id=i.id,this.BackEndData.name=i.name,this.masterService.backEndData.next(this.BackEndData),this.backendModal.show()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}selectedRowForEditDelete(t){let i=this.backEndListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Back End?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteBackEnd(i.id)}},cancel:function(){}}})}DeleteBackEnd(t){this.spinner.show(),this.masterService.deleteBackEnd(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Back End deleted successfully.","Delete")):2==t?this.toastyService.error("This backend is associated with another resource so you cannot delete.","Can not delete this record"):this.toastyService.error("Something error.","Error")}deleteOnError(t){}SaveSuccessed(t){this.reset()}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU($),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-back-end-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Pp,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.backendModal=o.first)}},outputs:{DataEmit:"DataEmit"},decls:43,vars:9,consts:[["backendModal","bs-modal"],["appBackend",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],["tooltip","If check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","","placement","bottom",3,"ngModelChange","ngModel"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","BackendPopup","aria-label","Close",1,"close","btn","fs-4",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"],["size","medium",3,"type"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),e.nrm(6,"i",8),e.EFF(7," Back Ends "),e.k0s(),e.j41(8,"div",9)(9,"button",10),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30);return e.Njj(a.show())}),e.nrm(10,"i",11),e.k0s()()(),e.j41(11,"div",12)(12,"div",3)(13,"div",13)(14,"input",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(15,"div",13)(16,"button",15),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(17,"i",16),e.k0s(),e.j41(18,"button",17),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(19,"i",18),e.k0s()()(),e.j41(20,"div",3)(21,"div",19)(22,"div",20)(23,"label")(24,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.autoFilter,a)||(i.autoFilter=a),e.Njj(a)}),e.k0s(),e.EFF(25," Auto Filter "),e.k0s()()()(),e.j41(26,"div",3)(27,"div",19)(28,"datagrid",22),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.j41(29,"div",23,0)(31,"div",24)(32,"div",25)(33,"div",26)(34,"h4",27),e.EFF(35,"Back end"),e.k0s(),e.j41(36,"button",28),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30),d=e.sdS(41);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(37,"span",29),e.EFF(38,"\xd7"),e.k0s()()(),e.j41(39,"div",30)(40,"app-back-end",31,1),e.bIt("SaveSuccess",function(a){return e.eBV(o),e.Njj(i.SaveSuccessed(a))}),e.k0s()()()()(),e.nrm(42,"ngx-spinner",32)}2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.backEndListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(12),e.Y8G("parentData",i.BackEndData),e.R7$(2),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,B.hZ,E.dg,D.et,_,Jt]})}return s})();class Kt extends C{}const Gp=["thirdPartyAPIModal"];let Yp=(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.router=i,this.masterService=o,this.cookieService=r,this.toastyService=a,this.DataEmit=new e.bkB,this.title="Third Party API List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.filterModel=new Kt,this.thirdPartyAPIData={id:0,name:"",description:""},this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=n,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="ID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}gettoken(){return this.currentUser.authtoken}ngOnInit(){let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("description","Description",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.getCookiesFilterData(t.queryParams.filterModel),this.executeSearch()}executeSearch(){if(1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getThirdPartyAPIList()},t)}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}getThirdPartyAPIList(){const t=new Kt;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.companyID=this.currentUser.companyID,this.filterModel=t;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Master/GetThiredPartAPIList",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o)},error:o=>{this.getRowOnError(o)}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.thirdPartyAPIListViewModel=t.thiredPartyApiListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRow(t){let i=this.thirdPartyAPIListViewModel[t];this.thirdPartyAPIData.id=i.id,this.thirdPartyAPIData.name=i.name,this.thirdPartyAPIData.description=i.description,this.masterService.thirdPartyAPIData.next(this.thirdPartyAPIData),this.thirdPartyAPIModal.show()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}selectedRowForEditDelete(t){let i=this.thirdPartyAPIListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Third Party API?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteThirdPartyAPI(i.id)}},cancel:function(){}}})}DeleteThirdPartyAPI(t){this.masterService.deleteThirdPartyAPI(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n)},n=>{this.deleteOnError(n)})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Third Party API deleted successfully.","Delete")):2==t?this.toastyService.error("This third party api is associated with another resource so you cannot delete.","Can not delete this record"):this.toastyService.error("Something error.","Error")}deleteOnError(t){}SaveSuccessed(t){this.reset()}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU($),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-third-party-api-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Gp,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.thirdPartyAPIModal=o.first)}},outputs:{DataEmit:"DataEmit"},decls:42,vars:8,consts:[["thirdPartyAPIModal","bs-modal"],["appThirdPartyAPI",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],["tooltip","If check-box checked then grid will filter on text type","placement","bottom",1,"checkbox","pull-right"],["type","checkbox","value","","placement","bottom",3,"ngModelChange","ngModel"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","ThiredpartyPopup","aria-label","Close",1,"close","btn","fs-4",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),e.nrm(6,"i",8),e.EFF(7," Third Party APIs "),e.k0s(),e.j41(8,"div",9)(9,"button",10),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30);return e.Njj(a.show())}),e.nrm(10,"i",11),e.k0s()()(),e.j41(11,"div",12)(12,"div",3)(13,"div",13)(14,"input",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(15,"div",13)(16,"button",15),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(17,"i",16),e.k0s(),e.j41(18,"button",17),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(19,"i",18),e.k0s()()(),e.j41(20,"div",3)(21,"div",19)(22,"div",20)(23,"label")(24,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.autoFilter,a)||(i.autoFilter=a),e.Njj(a)}),e.k0s(),e.EFF(25," Auto Filter "),e.k0s()()()(),e.j41(26,"div",3)(27,"div",19)(28,"datagrid",22),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.j41(29,"div",23,0)(31,"div",24)(32,"div",25)(33,"div",26)(34,"h4",27),e.EFF(35,"Third Party API"),e.k0s(),e.j41(36,"button",28),e.bIt("click",function(){e.eBV(o);const a=e.sdS(30),d=e.sdS(41);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(37,"span",29),e.EFF(38,"\xd7"),e.k0s()()(),e.j41(39,"div",30)(40,"app-third-party-api",31,1),e.bIt("SaveSuccess",function(a){return e.eBV(o),e.Njj(i.SaveSuccessed(a))}),e.k0s()()()()()}2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(4),e.Y8G("rows",i.thirdPartyAPIListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(12),e.Y8G("parentData",i.thirdPartyAPIData))},dependencies:[c.me,c.Zm,c.BC,c.vS,B.hZ,E.dg,_,$t]})}return s})();const Wt=()=>["active"],Hp=()=>["/Reports/AvailableResource"],Np=()=>["/Reports/MonthwiseAvailableResource"];function Lp(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Bp(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Up(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}let Vp=(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.spinner=n,this.router=o,this.cookieService=r,this.toastyService=a,this.DataEmit=new e.bkB,this.title="Employee List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.DepartmentList=[],this.Department=0,this.Months=0,this.FinancialYear=0,this.MonthList=[],this.FinancialYearList=[],this.CounterDashboard=!1,this.selectedItems=[],this.dropdownSettings={},this.TotalResourceProjectCount=[],this.ResourceProjectCount=[],this.filterModel=new Dt,this.datagrid=i,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.typeSelected="timer",this.sortExpression="EmployeeID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.month&&(this.Months=+t.queryParams.month),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),null!=t.queryParams.CounterDashboard&&(this.CounterDashboard=!!t.queryParams.CounterDashboard),null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("name","Name",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designation","Designation",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalExperiance","Experience",'[{"width": "5%" , "hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("reportTo","Report To",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("coreSkill","Core Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("additionalSkill","Additional Skill",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]'))),this.columns.push(new h("availableDate","Available Date",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("planningToBook","Planning To Book",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getEmployeeList()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}getEmployeeList(){this.spinner.show();let t=new Dt;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Department=this.Department,t.FinancialYear=this.FinancialYear,t.Month=this.Months,t.companyID=this.currentUser.companyID,t.CounterDashboard=this.CounterDashboard,this.router.parseUrl(this.router.url),this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetMonthwiseAvailableResource",t,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Employee deleted successfully.","Delete")):2==t?this.toastyService.warning("Employee associated with TimeSheet.","Warning"):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.Months=t.month,this.MonthList=t.monthList,this.FinancialYearList=t.financialYearDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.employeeListViewModel=t.employeeListModel,this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemSelectedProjectTrackReport"==n.EventType?this.selectedProjectReport(n.ItemSelected):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRowForEditDelete(t){}selectedRow(t){return this.router.navigate(["/Master/Employee"],{queryParams:{id:this.employeeListViewModel[t].employeeID,FinancialYear:this.FinancialYear,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.Department=0,this.Months=0,this.FinancialYear=0,this.selectedItems=[],this.IsActive=!1,this.InActive=!1,this.InProject=!1,this.NotInProject=!1,this.CounterDashboard=!1,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedProjectReport(t){let i=this.employeeListViewModel[t];return this.router.navigate(["/Master/ResourceProjects"],{queryParams:{id:i.employeeID,name:i.name,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowRedirect(t,n){if("Projects"==n)return this.router.navigate(["/Master/ProjectList"])}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.Search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.Department=t.Department,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.IsActive=t.IsActive,this.InActive=t.InActive,this.InProject=t.InProject,this.NotInProject=t.NotInProject,this.currentUser.companyID=t.companyID,this.CounterDashboard=t.CounterDashboard)}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["s-MonthwiseAvailableResources"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([Z])],decls:54,vars:23,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],["data-toggle","tab","role","tab",1,"nav-link","active",3,"routerLinkActive","routerLink"],[1,"fa","fa-tree"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right",2,"margin-top","-35px"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resources Availability "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," All Resources "),e.k0s()(),e.j41(16,"li",10)(17,"a",13),e.nrm(18,"i",14),e.EFF(19," Monthwise Resources "),e.k0s()()()()(),e.j41(20,"div",1)(21,"div",15)(22,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(23,"div",15)(24,"select",17),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(25,Lp,2,2,"option",18),e.k0s()(),e.j41(26,"div",15)(27,"select",19),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(28,"option",20),e.EFF(29,"-- Month --"),e.k0s(),e.DNE(30,Bp,2,2,"option",18),e.k0s()(),e.j41(31,"div",15)(32,"select",21),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(33,"option",20),e.EFF(34,"-- Department --"),e.k0s(),e.DNE(35,Up,2,2,"option",18),e.k0s()(),e.j41(36,"div",15)(37,"button",22),e.bIt("click",function(){return i.search()}),e.nrm(38,"i",23),e.k0s(),e.j41(39,"button",24),e.bIt("click",function(){return i.reset()}),e.nrm(40,"i",25),e.k0s()()(),e.j41(41,"div",1)(42,"div",26)(43,"div",27)(44,"label",28)(45,"input",29),e.mxI("ngModelChange",function(r){return e.DH7(i.autoFilter,r)||(i.autoFilter=r),r}),e.k0s(),e.EFF(46," Auto Filter "),e.k0s(),e.j41(47,"label",30)(48,"input",29),e.mxI("ngModelChange",function(r){return e.DH7(i.showColumn,r)||(i.showColumn=r),r}),e.bIt("ngModelChange",function(r){return i.ShowHideColumn(r)}),e.k0s(),e.EFF(49," Show Column "),e.k0s()()()(),e.j41(50,"div",1)(51,"div",26)(52,"datagrid",31),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(53,"ngx-spinner",32)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(19,Wt))("routerLink",e.lJ4(20,Hp)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(21,Wt))("routerLink",e.lJ4(22,Np)),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(10),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(4),e.Y8G("rows",i.employeeListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!0),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,_]})}return s})();class xp{constructor(){this.usertimesheetID=0,this.Employee=0,this.project=0,this.taskID=0}}class U extends C{}class K{}let O=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.refreshFromChild=new he.B,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getUsertimesheetDetails(){return this.http.get(p.apiUrl+"api/Usertimesheet/GetUsertimesheetList",{headers:this.headers}).pipe((0,j.T)(t=>t))}GetProjectByEmployee(t){return this.http.get(p.apiUrl+"api/Usertimesheet/GetProjectByEmployee?EmployeeID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}GetTaskByProject(t,n,i,o){return this.http.get(p.apiUrl+"api/Usertimesheet/GetTaskByProject?ProjectID="+t+"&TaskDate="+n+"&TaskID="+i+"&EmployeeID="+o,{headers:this.headers}).pipe((0,j.T)(r=>r))}getUserTimesheetByID(t){return this.http.get(p.apiUrl+"api/Usertimesheet/GetUsertimesheetByID?UsertimesheetID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}GetUsertimesheetStatusByID(t,n,i,o){return this.http.get(p.apiUrl+"api/Usertimesheet/GetUsertimesheetStatusByID?ProjectID="+t+"&EmployeeID="+n+"&TaskMonth="+i+"&FinancialYear="+o,{headers:this.headers}).pipe((0,j.T)(r=>r))}saveUsertimesheet(t,n){const i=(new m.Nl).set("EmployeeID",n.toString()).set("CompanyID",this.currentUser.companyID),o=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Usertimesheet/SaveUpdateUsertimesheet",o,{headers:this.headers,params:i}).pipe((0,j.T)(r=>r))}CheckUserTimesheetExists(t,n,i,o){return this.http.get(p.apiUrl+"api/Usertimesheet/CheckUserTimesheetExists?UsertimesheetID="+t+"&EmployeeID="+n+"&ProjectID="+i+"&TaskDate="+o,{headers:this.headers}).pipe((0,j.T)(r=>r))}UsertimesheetStatus(t,n,i,o){const r=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Usertimesheet/UsertimesheetStatus",r,{headers:this.headers,params:{EmployeeID:n.toString(),Month:i.toString(),ProjectID:o}}).pipe((0,j.T)(d=>d))}deleteUsertimesheet(t){return this.http.get(p.apiUrl+"api/Usertimesheet/DeleteUsertimesheet?UsertimesheetID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}ExportToExcel(t,n,i,o,r,a,d,g,y,A){return this.http.get(p.apiUrl+"api/Usertimesheet/ExportToExcel?DesignationID="+t+"&EmployeeID="+n+"&project="+i+"&Month="+o+"&FinancialYear="+r+"&ReportingID="+a+"&IsBillable="+d+"&NonBillable="+g+"&InProgress="+y,{headers:this.headers,responseType:"blob"}).pipe((0,j.T)(v=>{let b=v.type,Y=[];Y.push(v);let T=document.createElement("a");T.href=window.URL.createObjectURL(new Blob(Y,{type:b})),T.download=A,A&&T.setAttribute("download",A),document.body.appendChild(T),T.click()}))}ExportReportToExcel(t,n,i,o,r,a,d,g){return this.http.get(p.apiUrl+"api/Report/ExportReportToExcel?project="+t+"&Month="+n+"&FinancialYear="+i+"&ReportingID="+o+"&IsBillable="+r+"&NonBillable="+a+"&InProgress="+d,{headers:this.headers,responseType:"blob"}).pipe((0,j.T)(y=>{let A=y.type,v=[];v.push(y);let b=document.createElement("a");b.href=window.URL.createObjectURL(new Blob(v,{type:A})),b.download=g,g&&b.setAttribute("download",g),document.body.appendChild(b),b.click()}))}TaskwisehourExcel(t,n,i,o,r,a,d,g,y,A,v,b,Y){return this.http.get(p.apiUrl+"api/Report/TaskwisehourExcel?DesignationID="+t+"&EmployeeID="+n+"&Month="+i+"&project="+o+"&FinancialYear="+r+"&ReportingID="+a+"&ProjectStatus="+d+"&IsBillable="+g+"&NonBillable="+y+"&InProgress="+A+"&FromDate="+v+"&ToDate="+b,{headers:this.headers,responseType:"blob"}).pipe((0,j.T)(T=>{let x=T.type,P=[];P.push(T);let q=document.createElement("a");q.href=window.URL.createObjectURL(new Blob(P,{type:x})),q.download=Y,Y&&q.setAttribute("download",Y),document.body.appendChild(q),q.click()}))}SampleTimesheetExcel(){let t="TimeSheet_Excel_Sample_File";return this.http.get(p.apiUrl+"api/Usertimesheet/SampleTimesheetExcel",{headers:this.headers,responseType:"blob"}).pipe((0,j.T)(n=>{let i=n.type,o=[];o.push(n);let r=document.createElement("a");r.href=window.URL.createObjectURL(new Blob(o,{type:i})),r.download=t,t&&r.setAttribute("download",t),document.body.appendChild(r),r.click()}))}SendSubmitNotificationEmail(t,n,i,o,r){return this.http.get(p.apiUrl+"api/Usertimesheet/SendSubmitNotificationEmail?Employee="+t+"&Month_year="+n+"&Projects="+i+"&ProjectID="+o+"&FromMail="+r,{headers:this.headers}).pipe((0,j.T)(a=>a))}ApproveRejectMail(t,n,i,o,r,a,d){return this.http.get(p.apiUrl+"api/Usertimesheet/ApproveRejectMail?EmployeeName="+t+"&status="+n+"&EmployeeID="+i+"&projectlist="+o+"&projectIDlist="+r+"&Month_year="+a+"&FromMail="+d,{headers:this.headers}).pipe((0,j.T)(g=>g))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})(),te=(()=>{class s{constructor(t,n){this.http=t,this.cookieService=n,this.headers=new m.Lr({Accept:"application/json",Authorization:"Bearer "+this.gettoken(),"Content-Type":"application/json; charset=utf-8"})}gettoken(){return this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.currentUser.authtoken}getTaskByID(t,n){return this.http.get(p.apiUrl+"api/Task/GetTaskByID?TaskID="+t+"&ProjectID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}saveTask(t){const n=JSON.stringify(t);return this.http.post(p.apiUrl+"api/Task/SaveUpdateTask",n,{headers:this.headers}).pipe((0,j.T)(i=>i))}GetProjectWiseEmployee(t,n){return this.http.get(p.apiUrl+"api/Task/GetProjectWiseEmployee?ProjectID="+t+"&CompanyID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}GetBDEEmployee(t,n){return this.http.get(p.apiUrl+"api/Task/GetBDEEmployee?ProjectID="+t+"&CompanyID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}deleteTask(t){return this.http.get(p.apiUrl+"api/Task/DeleteTask?TaskID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}getProject(t){return this.http.get(p.apiUrl+"api/Task/GetTaskProjectlist?EmployeeID="+t,{headers:this.headers}).pipe((0,j.T)(n=>n))}getBDEProject(t,n){return this.http.get(p.apiUrl+"api/Task/GetBDEProjectlist?EmployeeID="+t+"&DesignationID="+n,{headers:this.headers}).pipe((0,j.T)(i=>i))}GetTaskPriorityDropDown(){return this.http.get(p.apiUrl+"api/Task/GetTaskPriority",{headers:this.headers}).pipe((0,j.T)(t=>t))}SampleTaskExcel(){let t="Task_Excel_Sample_File";return this.http.get(p.apiUrl+"api/Task/SampleTaskExcel",{headers:this.headers,responseType:"blob"}).pipe((0,j.T)(n=>{let i=n.type,o=[];o.push(n);let r=document.createElement("a");return r.href=window.URL.createObjectURL(new Blob(o,{type:i})),r.download=t,t&&r.setAttribute("download",t),document.body.appendChild(r),r.click(),n}))}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(m.Qq),e.KVO(S.O))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();function Qp(s,l){1&s&&(e.j41(0,"div"),e.EFF(1," Comment is required "),e.k0s())}function Op(s,l){if(1&s&&(e.j41(0,"div",21),e.DNE(1,Qp,2,0,"div",22),e.k0s()),2&s){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function Jp(s,l){1&s&&e.nrm(0,"span",21)}function $p(s,l){1&s&&e.nrm(0,"img",23)}let Zt=(()=>{class s{constructor(t,n,i,o,r,a){this.usertimesheetservice=t,this.elRef=n,this.route=i,this.router=o,this.cookieService=r,this.toastyService=a,this.SaveSuccess=new e.bkB,this.usertimesheetStatusModel=new K,this.usertimesheetstatusID=0,this.loading=!1,this.EmployeeID=0,this.TaskMonth=0,this.IsSubmited=!1,this.IsApproval=!1,this.IsReject=!0,this.projectlist=[],this.projectIDlist=[],this.formData=new K,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){null!=this.models&&(this.EmployeeID=this.models.EmployeeID,this.TaskMonth=this.models.Month,this.FinancialYear=this.models.FinancialYearID,this.ProjectID=this.models.ProjectID,this.EmployeeName=this.models.EmployeeName,this.MonthName=this.models.MonthName,this.projectlist=this.models.projectlist,this.projectIDlist=this.models.projectIDlist,this.Year=this.models.Year)}RejectTimesheet(t=""){this.loading=!0,""==this.formData.Comment||null==this.formData.Comment?this.loading=!1:(this.usertimesheetStatusModel.IsSubmited=this.IsSubmited,this.usertimesheetStatusModel.IsApproval=this.IsApproval,this.usertimesheetStatusModel.IsReject=this.IsReject,this.usertimesheetStatusModel.EmployeeID=this.EmployeeID,this.usertimesheetStatusModel.Comment=this.formData.Comment,this.usertimesheetStatusModel.Month=this.TaskMonth,this.usertimesheetStatusModel.FinancialYearID=this.FinancialYear,this.usertimesheetservice.UsertimesheetStatus(this.usertimesheetStatusModel,this.EmployeeID,this.TaskMonth,this.ProjectID).subscribe(n=>{this.loading=!1,0==n?(this.ApproveRejectMail(),document.getElementById("RejectTimesheetPopup").click(),document.getElementById("reset").click(),this.SaveSuccess.emit("success"),this.usertimesheetservice.refreshFromChild.next(n),this.route.params.subscribe(r=>{this.toastyService.success("All timesheet rejected.","Rejected")})):this.toastyService.warning("Something error.","Error")},n=>{console.log(n)}))}ApproveRejectMail(){this.projectlist=this.projectlist.filter(function(i,o,r){return o===r.indexOf(i)}),this.projectIDlist=this.projectIDlist.filter(function(i,o,r){return o===r.indexOf(i)});let n=this.MonthName.toString()+" "+this.Year.toString();this.usertimesheetservice.ApproveRejectMail(this.EmployeeName,"Rejected",this.EmployeeID,this.projectlist,this.projectIDlist,n,this.currentUser.emailID).subscribe()}resetFormInputs(){document.getElementById("RejectTimesheetForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(O),e.rXU(e.aKT),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-reject-timesheet"]],inputs:{models:[e.Mj6.None,"parentData","models"]},outputs:{SaveSuccess:"SaveSuccess"},decls:25,vars:6,consts:[["f","ngForm"],["comment","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["action","","method","post","id","RejectTimesheetForm","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],[1,"col-md-12","row"],[1,"col-md-3","col-form-label","required"],[1,"col-md-9","coreskill-fields"],["type","hidden","name","usertimesheetstatusID",3,"ngModelChange","ngModel"],["placeholder","Comment...","name","comment","maxlength","1000","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-danger",3,"disabled"],["aria-hidden","true",1,"fa","fa-times"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","reset","tabindex","7",1,"btn","btn-sm","btn-primary"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"form",7,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(6);return e.Njj(a.form.valid&&i.RejectTimesheet(a))}),e.j41(7,"div",8)(8,"div",9)(9,"label",10),e.EFF(10,"Comment"),e.k0s(),e.j41(11,"div",11)(12,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.usertimesheetstatusID,a)||(i.formData.usertimesheetstatusID=a),e.Njj(a)}),e.k0s(),e.j41(13,"textarea",13,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.formData.Comment,a)||(i.formData.Comment=a),e.Njj(a)}),e.k0s(),e.DNE(15,Op,2,1,"div",14)(16,Jp,1,0,"span",14),e.k0s()()(),e.j41(17,"div",15)(18,"button",16),e.nrm(19,"i",17),e.EFF(20," REJECT "),e.k0s(),e.DNE(21,$p,1,0,"img",18),e.j41(22,"button",19),e.nrm(23,"i",20),e.EFF(24," CANCEL "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(6),r=e.sdS(14);e.R7$(12),e.R50("ngModel",i.formData.usertimesheetstatusID),e.R7$(),e.R50("ngModel",i.formData.Comment),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.formData.Comment),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV],encapsulation:2})}return s})();const zp=["RejectTimesheetModals"];function Xp(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",30),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.ExportReportToExcel())}),e.nrm(1,"i",31),e.k0s()}}function qp(s,l){if(1&s&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Kp(s,l){if(1&s&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Wp(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",11)(1,"ng-multiselect-dropdown",33),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedEmployee,i)||(o.selectedEmployee=i),e.Njj(i)}),e.bIt("onSelect",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.GetUserTimeSheetReport())}),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("placeholder","-- Employees --")("data",t.employeelist),e.R50("ngModel",t.selectedEmployee),e.Y8G("settings",t.employeedropdownSettings)}}function Zp(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",34)(1,"div",35)(2,"h4",36),e.EFF(3,"Reject Timesheet"),e.k0s(),e.j41(4,"button",37),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.modalRef.hide())}),e.j41(5,"span",38),e.EFF(6,"\xd7"),e.k0s()()(),e.j41(7,"div",39),e.qex(8),e.j41(9,"app-reject-timesheet",40),e.bIt("SaveSuccess",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.Successmessage=i.reset())}),e.k0s(),e.bVm(),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(9),e.Y8G("parentData",t.model)}}let eu=(()=>{class s{constructor(t,n,i,o,r,a,d,g,y){this.modalService=t,this.spinner=n,this.http=i,this.router=r,this.usertimesheetService=a,this.TaskService=d,this.cookieService=g,this.toastyService=y,this.DataEmit=new e.bkB,this.title="UserTimesheet Report",this.usertimesheetStatusModel=new K,this.columns=[],this.currentPageNumber=1,this.MonthList=[],this.Months=0,this.Employee=0,this.Employeedropdown=[],this.employeeID=0,this.FinancialYear=0,this.FinancialYearList=[],this.ProjectDrp=[],this.Project=[],this.project=0,this.ProjectlistDropdownModel=[],this.ProjectStatus=2,this.ProjectStatusList=[],this.totalProductiveHours="",this.totalEstimatedHours="",this.filterModel=new U,this.InProgress=!0,this.projectdropdownSettings={},this.selectedprojects=[],this.selectedEmployee=[],this.selectedItems=[],this.employeedropdownSettings={},this.employee=0,this.employeelist=[],this.dropdownSettings={},this.user=!1,this.formData=new K,this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=o,this.currentPageNumber=1,this.totalPages=0,this.totalRows=0,this.pageSize=30,this.sortDirection="ASC",this.sortExpression="employeeName",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Month?(this.Months=+t.queryParams.Month,this.FinancialYear=+t.queryParams.FinancialYear,this.ProjectStatus=+t.queryParams.ProjectStatus,this.project=+t.queryParams.Project,this.InProgress=JSON.parse(t.queryParams.InProgress)):(this.Months=0,this.FinancialYear=0),this.projectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.employeedropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.currentUser.designationID>5&&(this.user=!0),this.columns.push(new h("employeeName","User",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("estimatedHours","Estimated Hours",'[{"width": "1%" ,"hyperLink": false,"textAlign": "right", "disableSorting": false}]')),this.columns.push(new h("productiveHours","Actual Hours",'[{"width": "1%" ,"hyperLink": false,"textAlign": "right", "disableSorting": false}]')),this.columns.push(new h("isSubmited","IsSubmited",'[{"width": "3%" ,"hyperLink": false,"disableSorting": false ,"isHidden":true}]')),this.columns.push(new h("isApproval","IsApproval",'[{"width": "3%" ,"hyperLink": false,"disableSorting": false, "isHidden":true}]')),this.columns.push(new h("isReject","IsReject",'[{"width": "3%" ,"hyperLink": false,"disableSorting": false, "isHidden":true}]')),this.columns.push(new h("Action","Action",'[{"width": "1%" ,"hyperLink": false, "disableSorting": true,"buttonText":"View","view":true}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetProjectStatus(),this.GetProjectByStatus(),this.GetMonths(),this.Getreportingemployee()},t),this.spinner.hide()}GetProjectStatus(){const t=new U,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectStatus",JSON.stringify(t),{headers:n}).subscribe(o=>{this.ProjectStatusList=o;const r=this.ProjectStatusList.find(a=>2==a.projectStatusID);return this.selectedItems=r?[r]:[],this.search(),this.spinner.hide(),o})}GetProjectByStatus(){let t=new U;t.employeeID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID||5==this.currentUser.designationID?0:this.currentUser.employeeID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let r=new U;r=JSON.parse(n.queryParams.filterModel),t.projectstatus=""!=r.projectstatus&&null!=r.projectstatus?r.projectstatus:null!=this.selectedItems?this.selectedItems.map(a=>a.projectStatusID).join(","):""}else t.projectstatus=null!=this.selectedItems?this.selectedItems.map(r=>r.projectStatusID).join(","):"";const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectByStatus?DesignationID="+this.currentUser.designationID,JSON.stringify(t),{headers:i}).subscribe({next:r=>{this.ProjectlistDropdownModel=r.projectlistDropdownModel},error:r=>{this.getRowOnError(r)}})}GetMonths(){const t=new U,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetMonths",JSON.stringify(t),{headers:n}).subscribe(o=>{this.MonthList=o.monthsdropdown,this.Months=o.month})}Getreportingemployee(){let t=0;if(5===this.currentUser.designationID)return this.TaskService.GetBDEEmployee(0,this.currentUser.companyID);{t=1===this.currentUser.designationID||2===this.currentUser.designationID||3===this.currentUser.designationID?0:this.currentUser.employeeID;const n=new U,i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/Getreportingemployee?ReportingID="+t,JSON.stringify(n),{headers:i}).subscribe(r=>{this.employeelist=r})}}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}GetUserTimeSheetReport(){this.spinner.show();const t=new U;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.ReportingID=this.currentUser.employeeID,t.FinancialYear=+this.FinancialYear,t.Month=this.Months,t.IsBillable=this.IsBillable,t.NonBillable=this.NonBillable,t.InProgress=this.InProgress,(1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID)&&(t.ReportingID=0);let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let a=JSON.parse(n.queryParams.filterModel);""!=a.projectstatus&&null!=a.projectstatus&&(t.projectstatus=a.projectstatus)}else t.projectstatus=null!=this.selectedItems?this.selectedItems.map(a=>a.projectStatusID).join(","):"";t.projects=null!=this.selectedprojects?this.selectedprojects.map(a=>a.projectID).join(","):"",this.currentUser.designationID<=5?t.ReportingID=this.currentUser.employeeID:t.searchEmployee=null!=this.selectedEmployee?this.selectedEmployee.map(a=>a.id).join(","):"",this.filterModel=t;const i=this.currentUser.designationID<=5?this.currentUser.designationID:14==this.currentUser.designationID?5:4,o=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetUserTimeSheetReport?DesignationID="+i,JSON.stringify(t),{headers:o}).subscribe(a=>{this.getRowOnSuccess(a),this.spinner.hide()},a=>{this.getRowOnError(a),this.spinner.hide()})}SearchMonth(t){""!=t&&(this.Months=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetUserTimeSheetReport()},500))}SearchEmployee(t){""!=t&&(this.employeeID=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetUserTimeSheetReport()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}getRowOnSuccess(t){let n=new C;if(n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,""!=t.totalProductiveHour){let i=t.totalProductiveHour.split(":");this.totalProductiveHours=i[0]+":"+i[1]}else this.totalProductiveHours="";if(""!=t.totalEstimatedHours){let i=t.totalEstimatedHours.split(":");this.totalEstimatedHours=i[0]+":"+i[1]}else this.totalEstimatedHours="";this.Months=t.month,this.FinancialYear=t.financialYear,this.FinancialYearList=t.financialYearDropdownModel,this.userTimesheetListViewModel=t.usertimesheetReportList,this.datagrid.databind(n),this.runningSearch=!1;for(let i=0;i<t.usertimesheetReportList.length;i++){let o=t.usertimesheetReportList[i].productiveHours.split(":");this.userTimesheetListViewModel[i].productiveHours=o[0]+":"+o[1];let r=t.usertimesheetReportList[i].estimatedHours.split(":");this.userTimesheetListViewModel[i].estimatedHours=r[0]+":"+r[1],this.taskmonths=t.usertimesheetReportList[i].months;let a=t.usertimesheetReportList[i].taskDate.split("-");this.Year=a[2]}}getRowOnError(t){this.runningSearch=!1}ApproveTimesheet(t){let i=this.usertimesheetStatusModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to approve all timesheet?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.ApproveUserTimesheet(i.employeeID,i.month)}},cancel:function(){}}})}ExportToExcel(t){let i=this.userTimesheetListViewModel[t];this.employeeID=i.employeeID,this.Name=i.employeeName,null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1),null==this.InProgress&&(this.InProgress=!1);let o=this.Name+"_Timesheet_"+this.taskmonths+"-"+this.Year;this.ReportingID=this.currentUser.employeeID,this.usertimesheetService.ExportToExcel(this.currentUser.designationID,this.employeeID,"",this.Months,this.FinancialYear,this.ReportingID,this.IsBillable,this.NonBillable,this.InProgress,o).subscribe(a=>{this.toastyService.success("Completed.","Export to excel")})}ApproveUserTimesheet(t,n){this.IsSubmited=!0,this.IsApproval=!0,this.IsReject=!1,this.usertimesheetStatusModel.Month=n,this.usertimesheetStatusModel.FinancialYearID=this.FinancialYear,this.usertimesheetStatusModel.IsSubmited=this.IsSubmited,this.usertimesheetStatusModel.IsApproval=this.IsApproval,this.usertimesheetStatusModel.IsReject=this.IsReject,this.usertimesheetService.UsertimesheetStatus(this.usertimesheetStatusModel,t,n,void 0).subscribe(o=>{this.ApproveOnSuccess(o)},o=>{this.ApproveOnError(o)})}ApproveOnSuccess(t){0==t&&(this.executeSearch(),this.toastyService.success("All Timesheet Approved.","Approve"))}ApproveOnError(t){this.toastyService.error(`${t}`,"Error")}RejectTimesheet(t){let i=this.usertimesheetStatusModel[t];this.formData.EmployeeID=i.employeeID,this.formData.FinancialYearID=this.FinancialYear,this.formData.Month=i.taskMonth,this.model=this.formData,this.modalRef=this.modalService.show(this.template,Object.assign({},{class:"RejectTimesheetpopup"},this.config))}ExportReportToExcel(){let t="_UserTimesheet_Report_"+this.taskmonths+"-"+this.Year;null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1),null==this.InProgress&&(this.InProgress=!1),this.ReportingID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID;let n=this.selectedprojects.map(i=>i.projectID).join(",");this.usertimesheetService.ExportReportToExcel(n,this.Months,this.Year,this.ReportingID,this.IsBillable,this.NonBillable,this.InProgress,t).subscribe(i=>{this.toastyService.success("Completed.","Export to excel")})}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ItemSelectedforView"==n.EventType?this.selectedRowforView(n.ItemSelected):"ItemSelectedApproval"==n.EventType?this.ApproveTimesheet(n.ItemSelected):"ItemSelectedReject"==n.EventType?this.RejectTimesheet(n.ItemSelected):"ExportToExcel"==n.EventType&&this.ExportToExcel(n.ItemSelected)}selectedRow(t){null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1),null==this.InProgress&&(this.InProgress=!1);let i=this.userTimesheetListViewModel[t];return this.router.navigate(["Reports/ViewUsertimesheetReport"],{queryParams:{id:i.employeeID,id1:this.FinancialYear,ProjectStatus:this.ProjectStatus,IsBillable:this.IsBillable,NonBillable:this.NonBillable,InProgress:this.InProgress,id2:this.project,id3:i.taskMonth,id4:i.employeeName,id5:i.project,id6:i.months,id7:i.productiveHours,id8:i.isSubmited,id9:i.isApproval,id10:i.isReject,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowforView(t){null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1),null==this.InProgress&&(this.InProgress=!1);let i=this.userTimesheetListViewModel[t];return this.router.navigate(["Reports/ViewTaskwiseHoursReport"],{queryParams:{id:i.employeeID,id1:this.FinancialYear,ProjectStatus:this.ProjectStatus,IsBillable:this.IsBillable,NonBillable:this.NonBillable,InProgress:this.InProgress,name:i.employeeName,id2:this.project,id3:i.taskMonth,id4:i.employeeName,id5:i.project,id6:i.months,id7:i.productiveHours,id8:i.isSubmited,id9:i.isApproval,id10:i.isReject,Year:this.Year,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}SearchProject(t){""!=t&&(this.project=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetUserTimeSheetReport()},500))}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.GetUserTimeSheetReport()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.clearFilterUrl(),this.GetUserTimeSheetReport()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.GetUserTimeSheetReport()}reset(){this.Search="",this.Months=0,this.FinancialYear=0,this.project=0;let t=[];t.push(this.ProjectStatusList.find(n=>2==n.projectStatusID)),this.selectedItems=t,this.selectedprojects=null,this.employeeID=0,this.currentPageNumber=1,this.selectedEmployee=null,this.IsBillable=!1,this.NonBillable=!1,this.InProgress=!1,this.delaySearch=!1,this.clearFilterUrl(),this.GetUserTimeSheetReport()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.GetUserTimeSheetReport()}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetUserTimeSheetReport()},500))}SearchChanged(t){this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.GetUserTimeSheetReport()},500)}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.employeeID=t.Employee,this.currentUser.employeeID=t.employeeID,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(B.I8),e.rXU(D.ex),e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(O),e.rXU(te),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-usertimesheet-report"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(zp,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.template=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([O,te])],decls:47,vars:27,consts:[["RejectTimesheetModals",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["class","btn btn-primary btn-small","tooltip","Excel","placement","bottom",3,"click",4,"ngIf"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2","paddingbottom"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["class","col-md-3 paddingbottom",4,"ngIf"],[1,"col-md-9","paddingbottom"],[2,"margin-right","8px"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","Taskwisehour","TotalEstimated","Total","ShowProjStatus"],["size","medium",3,"type"],["tooltip","Excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o"],[3,"value"],["name","multiSelectEmployee",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],[1,"modal-content",2,"width","600px"],[1,"modal-header"],[1,"modal-title"],["type","button","id","RejectTimesheetPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.nrm(6,"i",7),e.EFF(7," User Timesheet "),e.k0s(),e.j41(8,"div",8),e.DNE(9,Xp,2,0,"button",9),e.k0s()(),e.j41(10,"div",10)(11,"div",2)(12,"div",11)(13,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(14,"div",13)(15,"ng-multiselect-dropdown",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedItems,a)||(i.selectedItems=a),e.Njj(a)}),e.bIt("onSelect",function(){return e.eBV(o),e.Njj(i.GetProjectByStatus())}),e.k0s()(),e.j41(16,"div",11)(17,"ng-multiselect-dropdown",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedprojects,a)||(i.selectedprojects=a),e.Njj(a)}),e.bIt("onSelect",function(){return e.eBV(o),e.Njj(i.GetUserTimeSheetReport())}),e.k0s()(),e.j41(18,"div",13)(19,"select",15),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchYear(a))}),e.DNE(20,qp,2,2,"option",16),e.k0s()(),e.j41(21,"div",13)(22,"select",17),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Months,a)||(i.Months=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchMonth(a))}),e.j41(23,"option",18),e.EFF(24,"-- Month --"),e.k0s(),e.DNE(25,Kp,2,2,"option",16),e.k0s()(),e.DNE(26,Wp,2,4,"div",19),e.j41(27,"div",20)(28,"label",21)(29,"input",22),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.IsBillable,a)||(i.IsBillable=a),e.Njj(a)}),e.k0s(),e.EFF(30," Billable "),e.k0s(),e.j41(31,"label",21)(32,"input",22),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.NonBillable,a)||(i.NonBillable=a),e.Njj(a)}),e.k0s(),e.EFF(33," Non Billable "),e.k0s(),e.j41(34,"label",21)(35,"input",22),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.InProgress,a)||(i.InProgress=a),e.Njj(a)}),e.k0s(),e.EFF(36," In Progress "),e.k0s(),e.j41(37,"button",23),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(38,"i",24),e.k0s(),e.j41(39,"button",25),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(40,"i",26),e.k0s()()(),e.j41(41,"div",2)(42,"div",27)(43,"datagrid",28),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.DNE(44,Zp,10,1,"ng-template",null,0,e.C5r),e.nrm(46,"ngx-spinner",29)}2&n&&(e.R7$(9),e.Y8G("ngIf",i.project>0),e.R7$(4),e.R50("ngModel",i.Search),e.R7$(2),e.Y8G("placeholder","-- Project Status --")("data",i.ProjectStatusList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Projects --")("data",i.ProjectlistDropdownModel),e.R50("ngModel",i.selectedprojects),e.Y8G("settings",i.projectdropdownSettings),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(),e.Y8G("ngIf",0==i.user),e.R7$(3),e.R50("ngModel",i.IsBillable),e.R7$(3),e.R50("ngModel",i.NonBillable),e.R7$(3),e.R50("ngModel",i.InProgress),e.R7$(8),e.Y8G("rows",i.userTimesheetListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!0)("Taskwisehour",!0)("TotalEstimated",i.totalEstimatedHours)("Total",i.totalProductiveHours)("ShowProjStatus",!1),e.R7$(3),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_,Zt],encapsulation:2})}return s})();const tu=["RejectTimesheetModals"];function iu(s,l){if(1&s){const t=e.RV6();e.j41(0,"span")(1,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG(),o=e.sdS(66);return e.Njj(i.openModal(o))}),e.nrm(2,"i",40),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.ApproveTimesheet())}),e.nrm(4,"i",42),e.k0s()()}}function nu(s,l){if(1&s&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.SpI(" ",t," ")}}function ou(s,l){if(1&s&&(e.j41(0,"div")(1,"span",43),e.EFF(2," Rejected timesheet comment : "),e.DNE(3,nu,2,1,"li",44),e.k0s()()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngForOf",t.Comment)}}function su(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",45)(1,"div",46)(2,"h4",47),e.EFF(3,"Reject Timesheet"),e.k0s(),e.j41(4,"button",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.modalRef.hide())}),e.j41(5,"span",49),e.EFF(6,"\xd7"),e.k0s()()(),e.j41(7,"div",50),e.qex(8),e.j41(9,"app-reject-timesheet",51),e.bIt("SaveSuccess",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.Successmessage=i.reset())}),e.k0s(),e.bVm(),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(9),e.Y8G("parentData",t.model)}}let ru=(()=>{class s{constructor(t,n,i,o,r,a,d,g){this.modalService=t,this.spinner=n,this.usertimesheetService=i,this.http=o,this.router=a,this.cookieService=d,this.toastyService=g,this.DataEmit=new e.bkB,this.title="View UserTimesheet Report",this.usertimesheetStatusModel=new K,this.columns=[],this.currentPageNumber=1,this.ProjectlistDropdownModel=[],this.project=0,this.ProjectStatus=2,this.ProjectStatusList=[],this.EmployeeID=0,this.Month=0,this.filterModel=new U,this.FinancialYear=0,this.FinancialYearList=[],this.CurrMonth=(new Date).getMonth()+1,this.sub=0,this.apv=0,this.rej=0,this.projectdropdownSettings={},this.selectedprojects=[],this.selectedItems=[],this.dropdownSettings={},this.user=!1,this.projectlist=[],this.projectIDlist=[],this.formData=new K,this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=r,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=30,this.sortDirection="DESC",this.sortExpression="taskDate",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.projectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);if(null!=t.queryParams.EmployeeID&&null!=t.queryParams.project&&null!=t.queryParams.taskMonth&&(this.EmployeeID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.EmployeeID)),null!=t.queryParams.FinancialYear)this.FinancialYear=+t.queryParams.FinancialYear;else{this.EmployeeID=+t.queryParams.id,this.Fyear=+t.queryParams.id1,this.Month=+t.queryParams.id3,this.EmployeeName=t.queryParams.id4,this.Months=t.queryParams.id6,this.ProjectStatus=+t.queryParams.ProjectStatus,this.project=+t.queryParams.id2;let i=t.queryParams.NonBillable,o=t.queryParams.InProgress;this.IsBillable=JSON.parse(t.queryParams.IsBillable),this.NonBillable=JSON.parse(i),this.InProgress=JSON.parse(o)}this.EmployeeID>0&&this.getUsertimesheetList(this.EmployeeID,this.Month),this.currentUser.designationID>5&&(this.user=!0),this.columns.push(new h("taskDate","Date",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "6%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("title","Task",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("description","Description",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false,"isEditor":true}]')),this.columns.push(new h("taskStatus","Task Status",'[{"width": "4%" ,"hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("isBillable","Billable",'[{"width": "1%" ,"hyperLink": false, "textAlign": "center","isBillable":true}]')),this.columns.push(new h("productiveHours","Actual Hours",'[{"width": "4%" ,"hyperLink": false,"textAlign": "right","disableSorting": false}]')),this.columns.push(new h("isSubmited","IsSubmited",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false,"isHidden":true}]')),this.columns.push(new h("isApproval","IsApproval",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false,"isHidden":true}]')),this.columns.push(new h("isReject","IsReject",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false,"isHidden":true}]')),this.columns.push(new h("Status","Status",'[{"width": "1.5%" ,"hyperLink": false, "disableSorting": true,"buttonText":"View","status":true}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetProjectStatus(),this.GetProjectByStatus()},t),this.spinner.hide()}GetProjectStatus(){const t=new U,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectStatus",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.ProjectStatusList=o;let r=[];r.push(this.ProjectStatusList.find(a=>2==a.projectStatusID)),this.selectedItems=r,this.search()},error:o=>{this.getRowOnError(o)}})}GetProjectByStatus(){const t=new U;t.employeeID=this.EmployeeID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){const r=JSON.parse(n.queryParams.filterModel);t.projectstatus=""!=r.projectstatus&&null!=r.projectstatus?r.projectstatus:null!=this.selectedItems?this.selectedItems.map(a=>a.projectStatusID).join(","):""}else t.projectstatus=null!=this.selectedItems?this.selectedItems.map(r=>r.projectStatusID).join(","):"";const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectByStatus?DesignationID="+this.currentUser.designationID,JSON.stringify(t),{headers:i}).subscribe({next:r=>{this.ProjectlistDropdownModel=r.projectlistDropdownModel,this.getUsertimesheetList(this.EmployeeID,this.Month)},error:r=>{this.getRowOnError(r)}})}getUsertimesheetList(t,n){this.spinner.show();const i=new U;i.search=this.Search,i.pageSize=this.pageSize,i.sortDirection=this.sortDirection,i.sortExpression=this.sortExpression,i.currentPageNumber=this.currentPageNumber,i.IsBillable=this.IsBillable,i.NonBillable=this.NonBillable,i.InProgress=this.InProgress,i.ReportingID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID;let o=this.router.parseUrl(this.router.url);if(null!=o.queryParams.filterModel){const g=JSON.parse(o.queryParams.filterModel);i.projectstatus=""!=g.projectstatus&&null!=g.projectstatus?g.projectstatus:null!=this.selectedItems?this.selectedItems.map(y=>y.projectStatusID).join(","):""}else i.projectstatus=null!=this.selectedItems?this.selectedItems.map(g=>g.projectStatusID).join(","):"";i.projects=null!=this.selectedprojects?this.selectedprojects.map(g=>g.projectID).join(","):"";let r=0;r=this.currentUser.designationID<=5?this.currentUser.designationID:14==this.currentUser.designationID?5:4,i.FinancialYear=+this.Fyear,this.filterModel=i;const a=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/ViewUserTimeSheetReport?EmployeeID="+t+"&Month="+n+"&DesignationID="+r,JSON.stringify(i),{headers:a}).subscribe({next:g=>{this.getRowOnSuccess(g),this.spinner.hide()},error:g=>{this.getRowOnError(g),this.spinner.hide()}})}GetUsertimesheetStatusByID(){let t=this.userTimesheetListViewModel.filter((i,o,r)=>r.findIndex(a=>a.projectID===i.projectID&&1==a.isReject)===o),n=[];t.forEach(i=>n.push(i.projectID)),this.usertimesheetService.GetUsertimesheetStatusByID(n.toString(),this.EmployeeID,this.Month,this.Fyear).subscribe(i=>{if(null!=i){let o=[];i.forEach(r=>o.push(r.project+": "+r.comment)),this.Comment=o,this.taskMonth=this.Month,this.FinancYear=this.Fyear}})}getRowOnSuccess(t){let n=new C;if(n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,""!=t.totalProductiveHour){let i=t.totalProductiveHour.split(":");this.totalProductiveHours=i[0]+":"+i[1]}else this.totalProductiveHours="";this.userTimesheetListViewModel=t.usertimesheetListModel,this.datagrid.databind(n),this.runningSearch=!1;for(let i=0;i<t.usertimesheetListModel.length;i++){this.projectlist.push(t.usertimesheetListModel[i].project),this.projectIDlist.push(t.usertimesheetListModel[i].projectID),this.sub=t.usertimesheetListModel[0].isSubmited,this.apv=t.usertimesheetListModel[0].isApproval,this.rej=t.usertimesheetListModel[0].isReject;let o=t.usertimesheetListModel[i].taskDate.split("-");this.Year=o[2]}this.projectlist=this.projectlist.filter(function(i,o,r){return o===r.indexOf(i)}),this.projectIDlist=this.projectIDlist.filter(function(i,o,r){return o===r.indexOf(i)}),this.GetUsertimesheetStatusByID()}ExportToExcel(){null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1),null==this.InProgress&&(this.InProgress=!1),this.ReportingID=this.currentUser.employeeID;let t=this.EmployeeName+"_Timesheet_"+this.Months+"-"+this.Year,n=this.selectedprojects.map(i=>i.projectID).join(",");this.usertimesheetService.ExportToExcel(this.currentUser.designationID,this.EmployeeID,n,this.Month,this.Fyear,this.ReportingID,this.IsBillable,this.NonBillable,this.InProgress,t).subscribe(i=>{this.toastyService.success("Completed.","Export to excel")})}getRowOnError(t){this.runningSearch=!1}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID,this.Month)},500))}SearchProjectStatus(t){""!=t&&(this.ProjectStatus=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID,this.Month)},500))}SearchProject(t){""!=t&&(this.project=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID,this.Month)},500))}reset(){this.Search="",this.currentPageNumber=1;let t=[];t.push(this.ProjectStatusList.find(n=>2==n.projectStatusID)),this.selectedItems=t,this.selectedprojects=null,this.project=0,this.IsBillable=!1,this.NonBillable=!1,this.InProgress=!1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}ApproveTimesheet(){var t=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to approve submitted timesheet?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){t.ApproveUserTimesheet()}},cancel:function(){}}})}ApproveUserTimesheet(){this.IsSubmited=!0,this.IsApproval=!0,this.IsReject=!1,this.usertimesheetStatusModel.IsSubmited=this.IsSubmited,this.usertimesheetStatusModel.IsApproval=this.IsApproval,this.usertimesheetStatusModel.IsReject=this.IsReject,this.usertimesheetStatusModel.Month=this.Month,this.usertimesheetStatusModel.FinancialYearID=this.Fyear;let t=this.userTimesheetListViewModel.filter((i,o,r)=>r.findIndex(a=>a.projectID===i.projectID&&1==a.isSubmited&&0==a.isApproval)===o),n=[];t.forEach(i=>n.push(i.projectID)),this.usertimesheetService.UsertimesheetStatus(this.usertimesheetStatusModel,this.EmployeeID,this.Month,n.toString()).subscribe(i=>{this.ApproveOnSuccess(i)},i=>{this.ApproveOnError(i)})}ApproveOnSuccess(t){0==t&&(this.toastyService.success("All Timesheet Approved.","Approve"),this.ApproveRejectMail(),this.reset())}ApproveRejectMail(){let n=this.Months.toString()+" "+this.Year.toString();this.usertimesheetService.ApproveRejectMail(this.EmployeeName,"Approved",this.EmployeeID,this.projectlist,this.projectIDlist,n,this.currentUser.emailID).subscribe()}ApproveOnError(t){this.toastyService.error(`${t}`,"Error")}openModal(t){let n=this.userTimesheetListViewModel.filter((o,r,a)=>a.findIndex(d=>d.projectID===o.projectID&&1==d.isSubmited&&0==d.isApproval&&0==d.isReject)===r),i=[];n.forEach(o=>i.push(o.projectID)),this.model=null,this.formData.EmployeeID=this.EmployeeID,this.formData.Month=this.Month,this.formData.FinancialYearID=this.Fyear,this.formData.EmployeeName=this.EmployeeName,this.formData.projectIDlist=this.projectIDlist,this.formData.projectlist=this.projectlist,this.formData.MonthName=this.Months,this.formData.Year=this.Year,this.formData.ProjectID=i.toString(),this.model=this.formData,this.modalRef=this.modalService.show(t,Object.assign({},{class:"RejectTimesheetpopup"},this.config)),this.reset()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}clearInputdata(){this.router.navigate(["/Reports/UserTimeSheetReport"],{queryParams:{Month:this.Month,FinancialYear:this.Fyear,ProjectStatus:this.ProjectStatus,Project:this.project,InProgress:this.InProgress},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.employeeID=t.employeeID,this.project=t.project,t.Month>0&&(this.Months=t.Month))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(B.I8),e.rXU(D.ex),e.rXU(O),e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-view-usertimesheet-report"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(tu,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.template=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([O])],decls:68,vars:26,consts:[["RejectTimesheetModals",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header",2,"display","inline-flex"],[1,"caption","title-headline-wrap","col-lg-4"],[1,"fa","fa-align-justify"],[1,"col-lg-8","d-flex","justify-content-end","gap-2"],["tooltip","Excel","placement","bottom",1,"btn","btn-primary","text-white","btn-small","ml-2",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o"],["type","reset",1,"btn","btn-primary","text-white","btn-small","ml-2",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[4,"ngIf"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2","paddingbottom"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],[1,"col-md-4","paddingbottom"],[2,"margin-right","8px"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-6","paddingbottom"],["placement","bottom","tooltip","Submitted timesheet",1,"div-small"],[1,"Submitted"],[1,"div-smalltext"],["placement","bottom","tooltip","Approved timesheet",1,"div-small"],[1,"Approved"],["placement","bottom","tooltip","Rejected timesheet",1,"div-small"],[1,"Rejected"],["placement","bottom","tooltip","Pending timesheet",1,"div-small"],[1,"NotSubmitted"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","Hours","list","Total","ShowProjStatus"],["size","medium",3,"type"],["tooltip","Reject","placement","bottom",1,"btn","btn-primary","btn-small","float-right","ml-2",3,"click"],[1,"fa","fa-times"],["tooltip","Approve","placement","bottom",1,"btn","btn-primary","btn-small","float-right","ml-2",3,"click"],[1,"fa","fa-check"],[2,"font-size","15px","color","#e73636","margin-bottom","10px"],[4,"ngFor","ngForOf"],[1,"modal-content",2,"width","600px"],[1,"modal-header"],[1,"modal-title"],["type","button","id","RejectTimesheetPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div"),e.nrm(7,"i",7),e.EFF(8),e.k0s()(),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return e.eBV(o),e.Njj(i.ExportToExcel())}),e.nrm(11,"i",10),e.k0s(),e.j41(12,"button",11),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(13,"i",12),e.EFF(14," Back To Report "),e.k0s(),e.DNE(15,iu,5,0,"span",13),e.k0s()(),e.j41(16,"div",14)(17,"div",2)(18,"div",15)(19,"input",16),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(20,"div",17)(21,"ng-multiselect-dropdown",18),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedItems,a)||(i.selectedItems=a),e.Njj(a)}),e.bIt("onSelect",function(){return e.eBV(o),e.Njj(i.GetProjectByStatus())}),e.k0s()(),e.j41(22,"div",15)(23,"ng-multiselect-dropdown",18),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedprojects,a)||(i.selectedprojects=a),e.Njj(a)}),e.bIt("onSelect",function(){return e.eBV(o),e.Njj(i.getUsertimesheetList(i.EmployeeID,i.Month))}),e.k0s()(),e.j41(24,"div",19)(25,"label",20)(26,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.IsBillable,a)||(i.IsBillable=a),e.Njj(a)}),e.k0s(),e.EFF(27," Billable "),e.k0s(),e.j41(28,"label",20)(29,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.NonBillable,a)||(i.NonBillable=a),e.Njj(a)}),e.k0s(),e.EFF(30," Non Billable "),e.k0s(),e.j41(31,"label",20)(32,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.InProgress,a)||(i.InProgress=a),e.Njj(a)}),e.k0s(),e.EFF(33," In Progress "),e.k0s()(),e.j41(34,"div",15)(35,"button",22),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(36,"i",23),e.k0s(),e.j41(37,"button",24),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(38,"i",25),e.k0s()()(),e.j41(39,"div",2)(40,"div",26)(41,"div")(42,"div",27),e.nrm(43,"div",28),e.j41(44,"div",29),e.EFF(45,"Submitted"),e.k0s()()(),e.j41(46,"div")(47,"div",30),e.nrm(48,"div",31),e.j41(49,"div",29),e.EFF(50,"Approved"),e.k0s()()(),e.j41(51,"div")(52,"div",32),e.nrm(53,"div",33),e.j41(54,"div",29),e.EFF(55,"Rejected"),e.k0s()()(),e.j41(56,"div")(57,"div",34),e.nrm(58,"div",35),e.j41(59,"div",29),e.EFF(60,"Pending"),e.k0s()()()()(),e.DNE(61,ou,4,1,"div",13),e.j41(62,"div",2)(63,"div",36)(64,"datagrid",37),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.DNE(65,su,10,1,"ng-template",null,0,e.C5r),e.nrm(67,"ngx-spinner",38)}2&n&&(e.R7$(8),e.E5c(" ",i.EmployeeName," - ",i.Months," ",i.Year," "),e.R7$(7),e.Y8G("ngIf",1==i.sub&&0==i.apv&&0==i.rej&&0==i.user),e.R7$(4),e.R50("ngModel",i.Search),e.R7$(2),e.Y8G("placeholder","-- Project Status --")("data",i.ProjectStatusList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Projects --")("data",i.ProjectlistDropdownModel),e.R50("ngModel",i.selectedprojects),e.Y8G("settings",i.projectdropdownSettings),e.R7$(3),e.R50("ngModel",i.IsBillable),e.R7$(3),e.R50("ngModel",i.NonBillable),e.R7$(3),e.R50("ngModel",i.InProgress),e.R7$(29),e.Y8G("ngIf",i.taskMonth==i.Month&&""!=i.Comment&&0==i.sub&&i.FinancYear==i.Fyear),e.R7$(3),e.Y8G("rows",i.userTimesheetListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("Hours",!0)("list",!0)("Total",i.totalProductiveHours)("ShowProjStatus",!1),e.R7$(3),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,c.me,c.Zm,c.BC,c.vS,E.dg,D.et,w.b,_,Zt],encapsulation:2})}return s})();var ae=F(2288);const au=()=>[6,0];function lu(s,l){1&s&&(e.j41(0,"span",18),e.EFF(1," Date is required"),e.k0s())}function cu(s,l){1&s&&e.nrm(0,"img",19)}let hu=(()=>{class s{constructor(t,n,i){this.masterService=t,this.datePipe=n,this.toastyService=i,this.loading=!1,this.dpConfig=new k.iP,this.minDate=new Date,this.maxDate=new Date,this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]})}ngOnInit(){const t=new Date;this.minDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()-7),this.maxDate=new Date}resetFormInputs(){this.masterService.StatusMailData.next({date:""}),document.getElementById("Datereset").click()}SendStatusMail(t=""){this.formattedDate=this.datePipe.transform(this.Date,"yyyy-MM-dd"),this.masterService.SendStatusMail(this.formattedDate).subscribe(n=>{"Success"==n?this.toastyService.success("Daily status e-mail sent successfully.","Status E-Mail Sent"):0==n?this.toastyService.error("Timesheet not filled for selected date.","Timesheet Not Filled"):this.toastyService.error("Something went wrong.","Mail not sent"),document.getElementById("StatusMailPopup").click()})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU($),e.rXU(u.vh),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-status-mail"]],inputs:{models:[e.Mj6.None,"parentData","models"]},features:[e.Jv_([u.vh,k.iP])],decls:23,vars:9,consts:[["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],["action","","method","post","id","statusMailForm","novalidate","","autocomplete","off",1,"form-horizontal",3,"ngSubmit"],[1,"card-body","mb-3"],[1,"form-group","row"],[1,"col-md-8"],[1,"col-md-4","col-form-label","required"],["type","text","placeholder","Select date","bsDatepicker","","name","Date","required","",1,"form-control",3,"ngModelChange","ngModel","bsConfig","maxDate","minDate","daysDisabled"],["class","error",4,"ngIf"],[1,"card-footer"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-paper-plane"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","Datereset","tabindex","7",1,"btn","btn-sm","btn-danger"],[1,"fa","fa-ban"],[1,"error"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"form",5,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(5);return e.Njj(a.form.valid&&i.SendStatusMail(a))}),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",2)(10,"label",9),e.EFF(11,"Select Date"),e.k0s(),e.j41(12,"div",8)(13,"input",10),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Date,a)||(i.Date=a),e.Njj(a)}),e.k0s(),e.DNE(14,lu,2,0,"span",11),e.k0s()()()(),e.j41(15,"div",12)(16,"button",13),e.nrm(17,"i",14),e.EFF(18," Send "),e.k0s(),e.DNE(19,cu,1,0,"img",15),e.j41(20,"button",16),e.nrm(21,"i",17),e.EFF(22," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(5);e.R7$(13),e.R50("ngModel",i.Date),e.Y8G("bsConfig",i.dpConfig)("maxDate",i.maxDate)("minDate",i.minDate)("daysDisabled",e.lJ4(8,au)),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.Date),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,k.pc,k.p0],encapsulation:2})}return s})();const du=["myInput"];function pu(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.ExportToExcel())}),e.nrm(1,"i",61),e.k0s()}}function uu(s,l){if(1&s){const t=e.RV6();e.j41(0,"span")(1,"button",62),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SubmitTimesheet())}),e.nrm(2,"i",63),e.k0s()()}}function mu(s,l){if(1&s){const t=e.RV6();e.j41(0,"span")(1,"button",64),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showUsertimesheetForm())}),e.nrm(2,"i",65),e.k0s()()}}function gu(s,l){if(1&s&&(e.j41(0,"option",66),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function fu(s,l){if(1&s&&(e.j41(0,"option",66),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Au(s,l){if(1&s&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.SpI(" ",t," ")}}function _u(s,l){if(1&s&&(e.j41(0,"div",67)(1,"span",68),e.EFF(2," Rejected timesheet comment : "),e.DNE(3,Au,2,1,"li",69),e.k0s()()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngForOf",t.Comment)}}function yu(s,l){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.record," => ")}}function Su(s,l){if(1&s&&(e.j41(0,"li"),e.DNE(1,yu,2,1,"span",19),e.j41(2,"span",72),e.EFF(3),e.k0s()()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf",""!=t.record&&null!=t.record),e.R7$(2),e.SpI(" ",t.errorMessage,"")}}function Du(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),e.nrm(6,"i",9),e.EFF(7," Import Excel Error list "),e.k0s(),e.j41(8,"div",70)(9,"button",71),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.CloseErrorList())}),e.j41(10,"span",56),e.EFF(11,"\xd7"),e.k0s()()()(),e.j41(12,"div",20)(13,"div",4)(14,"div",47),e.DNE(15,Su,4,2,"li",69),e.k0s()()()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.Y8G("ngForOf",t.errorMessage)}}let ju=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=i,this.router=o,this.usertimesheetService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.usertimesheetStatusModel=new K,this.EmployeeID=0,this.title="UserTimesheet List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.project=0,this.ProjectlistDropdownModel=[],this.Months=0,this.MonthList=[],this.FinancialYear=0,this.FinancialYearList=[],this.filterModel=new U,this.ProjectStatusList=[],this.ProjectStatus=2,this.sub=0,this.apv=null,this.rej=0,this.Year=0,this.CurrMonth=(new Date).getMonth()+1,this.CurrYear=(new Date).getFullYear(),this.projectdropdownSettings={},this.selectedprojects=[],this.selectedItems=[],this.dropdownSettings={},this.errorMessage="",this.ProjectName=[],this.projectIDlist=[],this.datagrid=n,this.currentPageNumber=1,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=30,this.sortDirection="DESC",this.sortExpression="taskDate",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.projectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.EmployeeID=this.currentUser.employeeID;let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),null==t.queryParams.id?this.Months=0:(this.Months=+t.queryParams.id,this.FinancialYear=+t.queryParams.FinancialYear),this.columns.push(new h("taskDate","Date",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "6%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("title","Task",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("description","Description",'[{"width": "20%","hyperLink": false, "disableSorting": false, "isEditor":true}]')),this.columns.push(new h("taskStatus","Task Status",'[{"width": "5%" ,"hyperLink": false,"disableSorting": false}]')),this.columns.push(new h("isBillable","Billable",'[{"width": "1%" ,"hyperLink": false, "textAlign": "center","isBillable":true}]')),this.columns.push(new h("productiveHours","Actual Hours",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": false}]')),this.columns.push(new h("isSubmited","IsSubmited",'[{"width": "3%" ,"hyperLink": false,"disableSorting": false ,"isHidden":true}]')),this.columns.push(new h("isApproval","IsApproval",'[{"width": "3%" ,"hyperLink": false,"disableSorting": false, "isHidden":true}]')),this.columns.push(new h("isReject","IsReject",'[{"width": "3%" ,"hyperLink": false,"disableSorting": false, "isHidden":true}]')),this.columns.push(new h("Action","Action",'[{"width": "4%" ,"hyperLink": false, "textAlign": "center" ,"disableSorting": true,"multiButton":false,"buttonText":"Edit|Delete","isSubbmited":true}]')),this.executeSearch(),this.spinner.hide()}showUsertimesheetForm(){return this.router.navigate(["/TimeSheet/AddUsertimesheet"],{queryParams:{id2:this.Months,id3:this.FinancialYear,Year:this.Year},skipLocationChange:!0})}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetProjectByStatus(),this.GetMonths(),this.GetFinancialYear(),this.getUsertimesheetList(this.EmployeeID)},t),this.spinner.hide()}GetProjectByStatus(){let t=new U;t.employeeID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID,t.projectstatus=this.AllProjects?"1,2,3,4,5,6":"";let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectByStatus?DesignationID="+this.currentUser.designationID,t,{headers:n}).subscribe(o=>{this.spinner.hide(),this.ProjectlistDropdownModel=o.projectlistDropdownModel})}GetMonths(){let t=new U,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetMonths",t,{headers:n}).subscribe(o=>{this.spinner.hide(),this.MonthList=o.monthsdropdown,0==this.Months&&(this.Months=o.month)})}GetFinancialYear(){let t=new U,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",t,{headers:n}).subscribe(o=>{this.spinner.hide(),this.FinancialYearList=o.financialYearDropdownModels,0==this.FinancialYear&&(this.FinancialYear=o.financialYear),this.search()})}DeleteUsertimesheet(t){this.usertimesheetService.deleteUsertimesheet(t).subscribe(n=>{this.deleteOnSuccess(n)},n=>{this.deleteOnError(n)})}SubmitUsertimesheet(){this.spinner.show(),this.IsSubmited=!0,this.IsApproval=!1,this.IsReject=!1,this.usertimesheetStatusModel.Month=this.Months,this.usertimesheetStatusModel.FinancialYearID=this.FinancialYear,this.usertimesheetStatusModel.IsSubmited=this.IsSubmited,this.usertimesheetStatusModel.IsApproval=this.IsApproval,this.usertimesheetStatusModel.IsReject=this.IsReject;let t=this.userTimesheetListViewModel.filter((i,o,r)=>r.findIndex(a=>a.projectID===i.projectID&&0==a.isSubmited)===o),n=[];t.forEach(i=>n.push(i.projectID)),this.usertimesheetService.UsertimesheetStatus(this.usertimesheetStatusModel,this.EmployeeID,this.Months,n.toString()).subscribe(i=>{this.spinner.hide(),this.SubmitOnSuccess(i)},i=>{this.spinner.hide(),this.SubmitOnError(i)})}GetUsertimesheetStatusByID(){let t=this.userTimesheetListViewModel.filter((i,o,r)=>r.findIndex(a=>a.projectID===i.projectID&&1==a.isReject)===o),n=[];t.forEach(i=>n.push(i.projectID)),this.usertimesheetService.GetUsertimesheetStatusByID(n.toString(),this.EmployeeID,this.Months,this.FinancialYear).subscribe(i=>{if(null!=i){let o=[];i.forEach(r=>o.push(r.project+": "+r.comment)),this.Comment=o,this.taskMonth=this.Months,this.FYear=this.FinancialYear}})}SubmitOnSuccess(t){0==t&&(this.executeSearch(),this.toastyService.success("Timesheet submited successfully.","Submit"),this.SubmitMail())}SubmitMail(){let t=this.currentUser.firstName+" "+this.currentUser.lastName,n=this.MonthName.toString()+" "+this.Year.toString();this.usertimesheetService.SendSubmitNotificationEmail(t,n,this.ProjectName.toString(),this.projectIDlist.toString(),this.currentUser.emailID).subscribe()}SubmitOnError(t){this.toastyService.error(`${t}`,"Error")}getUsertimesheetList(t){this.spinner.show();let n=new U;n.search=this.Search,n.pageSize=this.pageSize,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,n.currentPageNumber=this.currentPageNumber,n.projectstatus=this.AllProjects?"1,2,3,4,5,6":"",n.projects=this.selectedprojects?this.selectedprojects.map(r=>r.projectID).join(","):"",n.Month=this.Months,n.FinancialYear=+this.FinancialYear,n.IsBillable=this.IsBillable,n.NonBillable=this.NonBillable,this.filterModel=n;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetUsertimesheetList?EmployeeID="+t,n,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()})}deleteOnSuccess(t){this.spinner.show(),0==t?(this.executeSearch(),this.toastyService.success("User Timesheet deleted successfully","Delete")):1==t?this.toastyService.error("This timesheet is associated with another resource so you cannot delete","Can not delete this record"):this.toastyService.error("Something error","Error"),this.spinner.hide()}deleteOnError(t){this.toastyService.error(`${t}`,"Error")}Addfile(t){this.spinner.show(),this.file=t.target.files[0],this.extantion=t.target.files[0].name.split("."),"xlsx"!=this.extantion[1]&&"xls"!=this.extantion[1]&&this.toastyService.error("Please upload excel file","Upload"),this.spinner.hide()}ImportfromExcel(){if(this.spinner.show(),!this.file)return this.spinner.hide(),void this.toastyService.error("Please upload excel file","Upload");if("xlsx"!==this.extantion[1]&&"xls"!==this.extantion[1])return this.toastyService.error("Please upload excel file","Upload"),void this.spinner.hide();let t=new FileReader;t.onload=n=>{this.arrayBuffer=t.result;for(var i=new Uint8Array(this.arrayBuffer),o=new Array,r=0;r!=i.length;++r)o[r]=String.fromCharCode(i[r]);var a=o.join(""),d=ae.LF(a,{type:"binary"}),y=d.Sheets[d.SheetNames[0]];this.ImportExcel=ae.Wp.sheet_to_json(y,{raw:!1});let v=ae.Wp.sheet_to_json(y,{header:1})[0];if(!["Date","Project","Task","Actual_Hours","Status","Billable","Description"].every((Y,T)=>Y===v[T]))return this.toastyService.error("Please upload a valid Excel file with the correct headers","Invalid"),void this.spinner.hide();{let Y=this.ImportExcel,T=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});this.http.post(p.apiUrl+"api/Usertimesheet/ImportTimesheetfromExcel?EmployeeID="+this.currentUser.employeeID,Y,{headers:T}).subscribe(P=>{1==P.importStatus?this.toastyService.success("All timesheet imported successfully","Save Timesheet"):0==P.importStatus&&null!=P.errorLogList?this.errorMessage=P.errorLogList:this.toastyService.error("Something went wrong, please try again later","Error"),this.getUsertimesheetList(this.currentUser.employeeID),this.spinner.hide()},P=>{this.toastyService.error("Something went wrong, please try again later","Error"),this.spinner.hide()})}},t.readAsArrayBuffer(this.file),this.myInputVariable.nativeElement.value=""}CloseErrorList(){this.errorMessage=""}SearchProject(t){""!=t&&(this.project=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectStatus(t){""!=t&&(this.ProjectStatus=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchMonth(t){""!=t&&(this.Months=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID)},500))}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}getRowOnSuccess(t){this.ProjectName=[],this.projectIDlist=[];let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.productiveHour=t.totalProductiveHour,this.userTimesheetListViewModel=t.usertimesheetListModel,this.datagrid.databind(n),this.runningSearch=!1;for(let i=0;i<t.usertimesheetListModel.length;i++){this.ProjectName.push(t.usertimesheetListModel[i].project),this.projectIDlist.push(t.usertimesheetListModel[i].projectID),this.sub=t.usertimesheetListModel[0].isSubmited,this.apv=t.usertimesheetListModel[0].isApproval,this.rej=t.usertimesheetListModel[0].isReject;let o=t.usertimesheetListModel[i].taskDate.split("-");this.Year=o[2],this.MonthName=t.usertimesheetListModel[i].months}this.ProjectName=this.ProjectName.filter(function(i,o,r){return o===r.indexOf(i)}),this.projectIDlist=this.projectIDlist.filter(function(i,o,r){return o===r.indexOf(i)}),0==t.usertimesheetListModel.length&&(this.sub=2,this.rej=2),this.GetUsertimesheetStatusByID()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRowForEditDelete(t){let i=this.userTimesheetListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this user timesheet?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteUsertimesheet(i.usertimesheetID)}},cancel:function(){}}})}onMonthChange(){let n=this.FinancialYearList.filter(i=>i.financialYearID==this.FinancialYear)[0].year.split("-");this.Year=this.Months>3?n[0]:n[1]}onChange(t){let i=t.target.options[t.target.options.selectedIndex].text.split("-");this.Year=this.Months>3?i[0]:i[1]}selectedRow(t){return this.router.navigate(["/TimeSheet/AddUsertimesheet"],{queryParams:{id:this.userTimesheetListViewModel[t].usertimesheetID,id2:this.Months,id3:this.FinancialYear},skipLocationChange:!0})}SubmitTimesheet(){var t=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to submit pending month timesheet?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){t.SubmitUsertimesheet()}},cancel:function(){}}})}ExportToExcel(){null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1);let i=this.currentUser.firstName+" "+this.currentUser.lastName+"_Timesheet_"+this.MonthName+"-"+this.Year,o=this.selectedprojects.map(r=>r.projectID).join(",");this.usertimesheetService.ExportToExcel(this.currentUser.designationID,this.EmployeeID,o,this.Months,this.FinancialYear,0,this.IsBillable,this.NonBillable,null,i).subscribe(r=>{this.toastyService.success("Completed","Export to excel")})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID)}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID)}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID)}reset(){this.Search="",this.currentPageNumber=1,this.Months=0,this.FinancialYear=0,this.myInputVariable.nativeElement.value="";let t=[];t.push(this.ProjectStatusList.find(n=>2==n.projectStatusID)),this.selectedItems=t,this.selectedprojects=null,this.IsBillable=!1,this.AllProjects=!1,this.NonBillable=!1,this.delaySearch=!1,this.GetProjectByStatus(),this.GetMonths(),this.GetFinancialYear()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID)}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}SearchChanged(t){this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID)},500)}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.employeeID=t.employeeID,this.project=t.project,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear))}SampleTimesheetExcel(){this.usertimesheetService.SampleTimesheetExcel().subscribe(t=>{this.toastyService.success("Sample excel downloaded","Sample timesheet excel")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(D.ex),e.rXU(f.Ix),e.rXU(O),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-user-timesheet-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(du,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.myInputVariable=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([O])],decls:90,vars:26,consts:[["myInput",""],["StatusMailModal","bs-modal"],["appStatusMailPopup",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right",2,"display","flex"],[1,"position-relative"],["type","file","placeholder","Upload file","accept",".xlsx,.xls",1,"custom-file",3,"change"],[1,"upload-note"],["type","button","tooltip","Import from excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],[1,"fa","fa-upload"],["type","button","tooltip","Sample excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],[1,"fa","fa-download"],["class","btn btn-primary btn-small","tooltip","Export excel","placement","bottom",3,"click",4,"ngIf"],[4,"ngIf"],[1,"card-body"],[1,"col-md-4","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","change","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","change","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],[1,"col-md-6","paddingbottom"],[2,"margin-right","8px"],["type","checkbox",3,"ngModelChange","ngModel"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"row","mt-1"],["placement","bottom","tooltip","Submitted timesheet",1,"div-small"],[1,"Submitted"],[1,"div-smalltext"],["placement","bottom","tooltip","Approved timesheet",1,"div-small"],[1,"Approved"],["placement","bottom","tooltip","Rejected timesheet",1,"div-small"],[1,"Rejected"],["placement","bottom","tooltip","Pending timesheet",1,"div-small"],[1,"NotSubmitted"],["class","mb-2",4,"ngIf"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","list","Hours","Total","ShowProjStatus"],["class","animated fadeIn",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","StatusMailPopup","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"parentData"],["size","medium",3,"type"],["tooltip","Export excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o"],["tooltip","Submit","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],[1,"fa","fa-check"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"value"],[1,"mb-2"],[2,"font-size","15px","color","#e73636","margin-bottom","10px"],[4,"ngFor","ngForOf"],[1,"pull-right"],["type","button","tooltip","Close","placement","bottom","aria-label","Close",1,"close",3,"click"],[2,"color","red"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),e.nrm(6,"i",9),e.EFF(7," Timesheet "),e.k0s(),e.j41(8,"div",10)(9,"div",11)(10,"input",12,0),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.Addfile(a))}),e.k0s(),e.j41(12,"span",13),e.EFF(13,"*Use sample file to import timesheet"),e.k0s()(),e.j41(14,"button",14),e.bIt("click",function(){return e.eBV(o),e.Njj(i.ImportfromExcel())}),e.nrm(15,"i",15),e.k0s(),e.j41(16,"button",16),e.bIt("click",function(){return e.eBV(o),e.Njj(i.SampleTimesheetExcel())}),e.nrm(17,"i",17),e.k0s(),e.DNE(18,pu,2,0,"button",18)(19,uu,3,0,"span",19)(20,mu,3,0,"span",19),e.k0s()(),e.j41(21,"div",20)(22,"div",4)(23,"div",21)(24,"input",22),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(25,"div",21)(26,"select",23),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Months,a)||(i.Months=a),e.Njj(a)}),e.bIt("change",function(){return e.eBV(o),e.Njj(i.onMonthChange())})("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchMonth(a))}),e.j41(27,"option",24),e.EFF(28,"-- Month --"),e.k0s(),e.DNE(29,gu,2,2,"option",25),e.k0s()(),e.j41(30,"div",21)(31,"select",26),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.onChange(a))})("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchYear(a))}),e.DNE(32,fu,2,2,"option",25),e.k0s()(),e.j41(33,"div",21)(34,"ng-multiselect-dropdown",27),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedprojects,a)||(i.selectedprojects=a),e.Njj(a)}),e.bIt("onSelect",function(){return e.eBV(o),e.Njj(i.getUsertimesheetList(i.EmployeeID))}),e.k0s()(),e.j41(35,"div",28)(36,"label",29)(37,"input",30),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AllProjects,a)||(i.AllProjects=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.GetProjectByStatus())}),e.k0s(),e.EFF(38," All Projects "),e.k0s(),e.j41(39,"label",29)(40,"input",31),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.IsBillable,a)||(i.IsBillable=a),e.Njj(a)}),e.k0s(),e.EFF(41," Billable "),e.k0s(),e.j41(42,"label",29)(43,"input",31),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.NonBillable,a)||(i.NonBillable=a),e.Njj(a)}),e.k0s(),e.EFF(44," Non Billable "),e.k0s(),e.j41(45,"button",32),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(46,"i",33),e.k0s(),e.j41(47,"button",34),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(48,"i",35),e.k0s()()(),e.j41(49,"div",36)(50,"div",28)(51,"div")(52,"div",37),e.nrm(53,"div",38),e.j41(54,"div",39),e.EFF(55,"Submitted"),e.k0s()()(),e.j41(56,"div")(57,"div",40),e.nrm(58,"div",41),e.j41(59,"div",39),e.EFF(60,"Approved"),e.k0s()()(),e.j41(61,"div")(62,"div",42),e.nrm(63,"div",43),e.j41(64,"div",39),e.EFF(65,"Rejected"),e.k0s()()(),e.j41(66,"div")(67,"div",44),e.nrm(68,"div",45),e.j41(69,"div",39),e.EFF(70,"Pending"),e.k0s()()()()(),e.DNE(71,_u,4,1,"div",46),e.j41(72,"div",4)(73,"div",47)(74,"datagrid",48),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.DNE(75,Du,16,1,"div",49),e.j41(76,"div",50,1)(78,"div",51)(79,"div",52)(80,"div",53)(81,"h4",54),e.EFF(82,"Daily Status E-Mail"),e.k0s(),e.j41(83,"button",55),e.bIt("click",function(){e.eBV(o);const a=e.sdS(77),d=e.sdS(88);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(84,"span",56),e.EFF(85,"\xd7"),e.k0s()()(),e.j41(86,"div",57),e.nrm(87,"app-status-mail",58,2),e.k0s()()()(),e.nrm(89,"ngx-spinner",59)}2&n&&(e.R7$(18),e.Y8G("ngIf",2!=i.sub&&2!=i.rej),e.R7$(),e.Y8G("ngIf",i.Months!=i.CurrMonth&&(0==i.sub&&0==i.rej||0==i.sub&&1==i.rej)),e.R7$(),e.Y8G("ngIf",(i.Year<i.CurrYear||i.Months<=i.CurrMonth&&i.Year==i.CurrYear)&&(0==i.sub&&0==i.rej||0==i.sub&&1==i.rej||2==i.sub)),e.R7$(4),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.Y8G("placeholder","-- Projects --")("data",i.ProjectlistDropdownModel),e.R50("ngModel",i.selectedprojects),e.Y8G("settings",i.projectdropdownSettings),e.R7$(3),e.R50("ngModel",i.AllProjects),e.R7$(3),e.R50("ngModel",i.IsBillable),e.R7$(3),e.R50("ngModel",i.NonBillable),e.R7$(28),e.Y8G("ngIf",i.taskMonth==i.Months&&""!=i.Comment&&0==i.sub&&i.FYear==i.FinancialYear),e.R7$(3),e.Y8G("rows",i.userTimesheetListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("list",!0)("Hours",!0)("Total",i.productiveHour)("ShowProjStatus",!1),e.R7$(),e.Y8G("ngIf",""!=i.errorMessage),e.R7$(14),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,B.hZ,E.dg,D.et,w.b,_,hu],encapsulation:2})}return s})();function bu(s,l){1&s&&(e.j41(0,"span",45),e.EFF(1,"Date is required"),e.k0s())}function Mu(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectID),e.R7$(),e.SpI(" ",t.name," ")}}function Cu(s,l){1&s&&(e.j41(0,"div",45),e.EFF(1,"Please select project"),e.k0s())}function ku(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.taskID),e.R7$(),e.SpI(" ",t.title," ")}}function Iu(s,l){1&s&&(e.j41(0,"div",45),e.EFF(1,"Please select task"),e.k0s())}function vu(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t),e.R7$(),e.JRh(t)}}function Eu(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t),e.R7$(),e.JRh(t)}}function Fu(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Hours should be greater than 00:00. "),e.k0s())}function Tu(s,l){1&s&&(e.j41(0,"span",45),e.EFF(1," Description is required "),e.k0s())}function wu(s,l){1&s&&e.nrm(0,"img",48)}let Pu=(()=>{class s{constructor(t,n,i,o,r,a,d){this.usertimesheetService=t,this.TaskService=n,this.route=i,this.router=o,this.datePipe=r,this.cookieService=a,this.toastyService=d,this.userTimesheetViewModel=new xp,this.UsertimesheetID=0,this.loading=!1,this.result=[],this.productiveHours="00",this.productiveMinute="00",this.Projectdropdown=[],this.Project=0,this.TaskDropdown=[],this.TaskID=0,this.EmployeeID=0,this.isCompleted=!1,this.isBillable=!0,this.dpConfig=new k.iP,this.Projects=[],this.CurrYear=(new Date).getFullYear(),this.minDate=new Date,this.maxDate=new Date,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]})}ngOnInit(){this.EmployeeID=this.currentUser.employeeID,this.GetProjectByEmployee();let t=this.router.parseUrl(this.router.url);if(null!=t.queryParams.Project)this.UsertimesheetID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.Project);else{this.UsertimesheetID=t.queryParams.id,this.Months=+t.queryParams.id2,this.FinancialYear=+t.queryParams.id3,this.Year=+t.queryParams.Year,this.EstimatedHour=t.queryParams.estimatedHours,this.userTimesheetViewModel.description=t.queryParams.description,this.userTimesheetViewModel.taskID=t.queryParams.taskID;let n=t.queryParams.startDate;n==t.queryParams.endDate?this.tDate=n:this.Months=void 0,null==this.userTimesheetViewModel.taskID&&(this.userTimesheetViewModel.taskID=0)}null!=this.userTimesheetViewModel.taskID&&this.userTimesheetViewModel.taskID>0&&(this.userTimesheetViewModel.project=t.queryParams.projectID,this.is_edit=!0,this.onSelect(this.userTimesheetViewModel.project,this.userTimesheetViewModel.taskID)),0==this.Year&&(this.Year=this.CurrYear),this.Months==(new Date).getMonth()+1&&this.Year==(new Date).getFullYear()?(this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date):(this.minDate=new Date(this.Year,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)),this.UsertimesheetID>0&&(this.is_edit=!0,this.getUsertimesheetByID(this.UsertimesheetID)),this.Hours=Array.from({length:12},(n,i)=>i>=10?i:"0"+i),this.Minutes=Array.from({length:60},(n,i)=>i>=10?i:"0"+i)}GetProjectByEmployee(){14==this.currentUser.designationID||5==this.currentUser.designationID?this.TaskService.getBDEProject(this.EmployeeID,this.currentUser.designationID).subscribe(t=>{""!=t&&(this.Projectdropdown=t)},t=>{console.log(t)}):this.usertimesheetService.GetProjectByEmployee(this.EmployeeID).subscribe(t=>{""!=t&&(this.Projectdropdown=t)},t=>{console.log(t)})}SelecteDate(t){null==t?(this.SelectDate=!0,this.Projectdropdown=[0]):null==this.UsertimesheetID&&(this.SelectDate=!1,this.GetProjectByEmployee());var n="string"==typeof t?t.split("-"):"",i="string"==typeof t?new Date(+n[2],+n[1]-1,+n[0]):new Date;this.taskDate=t&&this.datePipe.transform("object"==typeof t?t:i,"yyyy-MM-dd")}onSelect(t,n=0){this.usertimesheetService.GetTaskByProject(t,this.taskDate,n,this.EmployeeID).subscribe(i=>{""!=i&&(this.TaskDropdown=i)},i=>{console.log(i)})}GetEstimatedHours(t,n=0){null==this.taskDate&&this.toastyService.error("Please select taskdate.","Select Date"),this.usertimesheetService.GetTaskByProject(n,this.taskDate,t,this.EmployeeID).subscribe(i=>{if(""!=i)for(let o=0;o<i.length;o++)this.EstimatedHour=i[o].estimatedHours},i=>{console.log(i)})}getUsertimesheetByID(t){this.usertimesheetService.getUserTimesheetByID(t).subscribe(n=>{if(""!=n){this.result=n,this.taskDate=n.usertimesheetViewModel.taskDate,this.userTimesheetViewModel=n.usertimesheetViewModel,this.tDate=n.usertimesheetViewModel.taskDate,0==n.usertimesheetViewModel.isBillable&&(this.isBillable=!1),this.EstimatedHour=n.usertimesheetViewModel.estimatedHours;let i=n.usertimesheetViewModel.productiveHours.split(":");this.productiveHours=i[0],this.productiveMinute=i[1];let o=n.usertimesheetViewModel.taskDate.split("-");this.Months=o[1],this.CurrYear=o[2],3==n.usertimesheetViewModel.taskstatusID&&(this.isCompleted=!0),this.Months==(new Date).getMonth()+1?(this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date):(this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)),this.onSelect(n.usertimesheetViewModel.project,n.usertimesheetViewModel.taskID)}},n=>{console.log(n)})}checkValue(t){this.isCompleted=1==t.currentTarget.checked}CheckBillable(t){this.isBillable=1==t.currentTarget.checked}saveUsertimesheet(t=""){if(this.loading=!0,this.currentUser){this.userTimesheetViewModel.productiveHours=this.productiveHours+":"+this.productiveMinute;var n="string"==typeof this.tDate?this.tDate.split("-"):"",i="string"==typeof this.tDate?new Date(+n[2],+n[1]-1,+n[0]):new Date,o=this.tDate&&this.datePipe.transform("object"==typeof this.tDate?this.tDate:i,"yyyy-MM-dd");if(this.userTimesheetViewModel.taskDate=o,this.userTimesheetViewModel.project=+this.userTimesheetViewModel.project,this.userTimesheetViewModel.taskID=+this.userTimesheetViewModel.taskID,this.userTimesheetViewModel.isBillable=this.isBillable,1==this.isCompleted){this.userTimesheetViewModel.TaskstatusID=3;var r=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure your task is completed?",type:"blue",buttons:{ok:{text:"Yes!",btnClass:"btn-primary",keys:["enter"],action:function(){r.SaveTimesheet()}},cancel:function(){r.loading=!1}}})}else this.userTimesheetViewModel.TaskstatusID=2,this.SaveTimesheet()}else this.loading=!0,this.router.navigate(["/login"])}SaveTimesheet(){this.usertimesheetService.saveUsertimesheet(this.userTimesheetViewModel,this.currentUser.employeeID).subscribe(t=>{this.loading=!1,t>0?this.route.params.subscribe(i=>{this.userTimesheetViewModel.usertimesheetID>0?this.toastyService.success("Timesheet updated successfully.","Update Timesheet"):this.toastyService.success("Timesheet saved successfully.","Save Timesheet"),this.loading=!1,window.location.href.toLowerCase().indexOf("project")<0?this.router.navigate(["/TimeSheet/Manage"],{queryParams:{id:this.Months,FinancialYear:this.FinancialYear},skipLocationChange:!0}):(document.getElementById("P").click(),this.resetFormInputs())}):(this.loading=!1,this.toastyService.error("Something error.","Save Timesheet"))},t=>{this.loading=!1,console.log(t)})}clearInputdata(){this.router.navigate(["/TimeSheet/Manage"],{queryParams:{id:this.Months,FinancialYear:this.FinancialYear},skipLocationChange:!0})}resetFormInputs(){document.getElementById("UsertimesheetForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(O),e.rXU(te),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-user-timesheet"]],features:[e.Jv_([u.vh,O,k.iP,te])],decls:99,vars:26,consts:[["f","ngForm"],["productiveHour","ngModel"],["productiveMinutes","ngModel"],["Description","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],["id","backtolist",1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],["action","","method","post","id","UsertimesheetForm","autocomplete","off","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"card-body","mb-3"],[1,"form-group","row","mb-3"],[1,"col-md-6"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6","usertimesheet-fields"],["type","text","placeholder","Date","bsDatepicker","","name","tDate","required","",1,"form-control",3,"ngModelChange","bsValueChange","ngModel","bsConfig","maxDate","minDate"],["class","error",4,"ngIf"],["name","Project","id","Project","required","",1,"form-control",3,"ngModelChange","change","disabled","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","col-form-label","required"],[1,"col-md-9"],["name","Task","id","Task","required","",1,"form-control",3,"ngModelChange","change","disabled","ngModel"],[1,"col-md-4","col-form-label"],["type","text","name","EstimatedHours","placeholder","Estimated hours","disabled","",1,"form-control",3,"value"],[1,"col-md-3","usertimesheet"],["name","productiveHours","id","productiveHours","required","",1,"productiveHours",3,"ngModelChange","ngModel"],["value","00","selected","","disabled",""],[1,"col-md-3","usertimesheet","pr-md-0"],["name","productiveMinute","id","productiveMinute","required","",1,"productiveMinute",3,"ngModelChange","ngModel"],["style","margin-left: 265px;","class","error",4,"ngIf"],[1,"col-md-9","usertimesheet-textarea"],["placeholder","Description...","name","Description","autocomplete","off","rows","10","required","",1,"form-control",3,"ngModelChange","ngModel","spellcheck"],["type","checkbox","name","isBillable",1,"col-md-4","col-form-label",2,"margin-top","7px",3,"change","checked"],["type","checkbox","name","IsCompleted",1,"col-md-4","col-form-label",2,"margin-top","7px",3,"change","checked"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","reset","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],[3,"value"],[1,"error",2,"margin-left","265px"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div"),e.nrm(7,"i",10),e.EFF(8," Timesheet "),e.k0s(),e.j41(9,"button",11),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",12),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"form",13,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(13),d=e.sdS(57),g=e.sdS(63);return e.Njj(a.form.valid&&i.userTimesheetViewModel.project>0&&i.userTimesheetViewModel.taskID>0&&!("00"==d.value&&"00"==g.value)&&i.saveUsertimesheet(a))}),e.j41(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",5)(18,"label",17),e.EFF(19,"Date"),e.k0s(),e.j41(20,"div",18)(21,"input",19),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.tDate,a)||(i.tDate=a),e.Njj(a)}),e.bIt("bsValueChange",function(a){return e.eBV(o),e.Njj(i.SelecteDate(a))}),e.k0s(),e.DNE(22,bu,2,0,"span",20),e.k0s()()(),e.j41(23,"div",16)(24,"div",5)(25,"label",17),e.EFF(26,"Project"),e.k0s(),e.j41(27,"div",16)(28,"select",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.userTimesheetViewModel.project,a)||(i.userTimesheetViewModel.project=a),e.Njj(a)}),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.onSelect(a.target.value))}),e.j41(29,"option",22),e.EFF(30,"-- Project --"),e.k0s(),e.DNE(31,Mu,2,2,"option",23),e.k0s(),e.DNE(32,Cu,2,0,"div",20),e.k0s()()()(),e.j41(33,"div",15)(34,"div",6)(35,"div",5)(36,"label",24),e.EFF(37,"Title"),e.k0s(),e.j41(38,"div",25)(39,"select",26),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.userTimesheetViewModel.taskID,a)||(i.userTimesheetViewModel.taskID=a),e.Njj(a)}),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.GetEstimatedHours(a.target.value))}),e.j41(40,"option",22),e.EFF(41,"-- Task --"),e.k0s(),e.DNE(42,ku,2,2,"option",23),e.k0s(),e.DNE(43,Iu,2,0,"div",20),e.k0s()()()(),e.j41(44,"div",15)(45,"div",16)(46,"div",5)(47,"label",27),e.EFF(48,"Estimated Hours"),e.k0s(),e.j41(49,"div",18),e.nrm(50,"input",28),e.k0s()()(),e.j41(51,"div",16)(52,"div",5)(53,"label",17),e.EFF(54,"Actual Hours"),e.k0s(),e.j41(55,"div",29)(56,"select",30,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.productiveHours,a)||(i.productiveHours=a),e.Njj(a)}),e.j41(58,"option",31),e.EFF(59,"-- Hours --"),e.k0s(),e.DNE(60,vu,2,2,"option",23),e.k0s()(),e.j41(61,"div",32)(62,"select",33,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.productiveMinute,a)||(i.productiveMinute=a),e.Njj(a)}),e.j41(64,"option",31),e.EFF(65,"-- Minutes --"),e.k0s(),e.DNE(66,Eu,2,2,"option",23),e.k0s()(),e.DNE(67,Fu,2,0,"span",34),e.k0s()()(),e.j41(68,"div",15)(69,"div",6)(70,"div",5)(71,"label",24),e.EFF(72,"Description"),e.k0s(),e.j41(73,"div",35)(74,"textarea",36,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.userTimesheetViewModel.description,a)||(i.userTimesheetViewModel.description=a),e.Njj(a)}),e.EFF(76,"                    "),e.k0s(),e.DNE(77,Tu,2,0,"span",20),e.k0s()()()(),e.j41(78,"div",15)(79,"div",16)(80,"div",5)(81,"label",27),e.EFF(82,"Billable"),e.k0s(),e.j41(83,"div",18)(84,"input",37),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.CheckBillable(a))}),e.k0s()()()(),e.j41(85,"div",16)(86,"div",5)(87,"label",27),e.EFF(88,"Completed"),e.k0s(),e.j41(89,"div",18)(90,"input",38),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.checkValue(a))}),e.k0s()()()()()(),e.j41(91,"div",39)(92,"button",40),e.nrm(93,"i",41),e.EFF(94," Submit "),e.k0s(),e.DNE(95,wu,1,0,"img",42),e.j41(96,"button",43),e.nrm(97,"i",44),e.EFF(98," Reset "),e.k0s()()()()()()()}if(2&n){const o=e.sdS(13),r=e.sdS(57),a=e.sdS(63),d=e.sdS(75);e.R7$(21),e.R50("ngModel",i.tDate),e.Y8G("bsConfig",i.dpConfig)("maxDate",i.maxDate)("minDate",i.minDate),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.tDate),e.R7$(6),e.Y8G("disabled",1==i.SelectDate),e.R50("ngModel",i.userTimesheetViewModel.project),e.R7$(3),e.Y8G("ngForOf",i.Projectdropdown),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.userTimesheetViewModel.project||null==i.userTimesheetViewModel.project||0==i.userTimesheetViewModel.project||!(i.userTimesheetViewModel.project>0))),e.R7$(7),e.Y8G("disabled",1==i.is_edit),e.R50("ngModel",i.userTimesheetViewModel.taskID),e.R7$(3),e.Y8G("ngForOf",i.TaskDropdown),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.userTimesheetViewModel.taskID||null==i.userTimesheetViewModel.taskID||0==i.userTimesheetViewModel.taskID||!(i.userTimesheetViewModel.taskID>0))),e.R7$(7),e.FS9("value",i.EstimatedHour),e.R7$(6),e.R50("ngModel",i.productiveHours),e.R7$(4),e.Y8G("ngForOf",i.Hours),e.R7$(2),e.R50("ngModel",i.productiveMinute),e.R7$(4),e.Y8G("ngForOf",i.Minutes),e.R7$(),e.Y8G("ngIf",o.submitted&&"00"==r.value&&"00"==a.value),e.R7$(7),e.R50("ngModel",i.userTimesheetViewModel.description),e.Y8G("spellcheck",!0),e.R7$(3),e.Y8G("ngIf",o.submitted&&!d.valid),e.R7$(7),e.Y8G("checked",1==i.isBillable),e.R7$(6),e.Y8G("checked",1==i.isCompleted),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,k.pc,k.p0],encapsulation:2})}return s})();class Ru{constructor(){this.projectID=0,this.assigneEmployee=0,this.taskPriorityID=0}}class le extends C{}function Gu(s,l){if(1&s&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectID),e.R7$(),e.SpI(" ",t.name," ")}}function Yu(s,l){1&s&&(e.j41(0,"div",46),e.EFF(1,"Please select project"),e.k0s())}function Hu(s,l){if(1&s&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Nu(s,l){1&s&&(e.j41(0,"div",46),e.EFF(1,"Please select employee"),e.k0s())}function Lu(s,l){1&s&&(e.j41(0,"span",46),e.EFF(1," Title is required "),e.k0s())}function Bu(s,l){1&s&&(e.j41(0,"span",46),e.EFF(1,"Start date is required"),e.k0s())}function Uu(s,l){1&s&&(e.j41(0,"span",46),e.EFF(1,"End date is required"),e.k0s())}function Vu(s,l){1&s&&(e.j41(0,"span",46),e.EFF(1,"End date should be greater than start date."),e.k0s())}function xu(s,l){if(1&s&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.taskPriorityID),e.R7$(),e.SpI(" ",t.priority," ")}}function Qu(s,l){1&s&&(e.j41(0,"div",46),e.EFF(1,"Please select priority"),e.k0s())}function Ou(s,l){if(1&s&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t),e.R7$(),e.JRh(t)}}function Ju(s,l){if(1&s&&(e.j41(0,"option",45),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t),e.R7$(),e.JRh(t)}}function $u(s,l){1&s&&(e.j41(0,"span",47),e.EFF(1,"Hours should be greater than 00:00. "),e.k0s())}function zu(s,l){1&s&&(e.j41(0,"span",46),e.EFF(1," Description is required "),e.k0s())}function Xu(s,l){1&s&&e.nrm(0,"img",48)}let ei=(()=>{class s{constructor(t,n,i,o,r,a,d){this.TaskService=t,this.usertimesheetService=n,this.route=i,this.datePipe=o,this.router=r,this.cookieService=a,this.toastyService=d,this.TaskID=0,this.taskViewModel=new Ru,this.estimatedHours="00",this.estimatedMinute="00",this.project=0,this.projectlistDropdownModel=[],this.Projectdropdown=[],this.TaskPriorityId=0,this.TaskPrioritydropdown=[],this.projectwiseEmployeeModel=[],this.Assignee=[],this.selectedItems=[],this.dropdownSettings={},this.Hours=[],this.Minutes=[],this.AssigneeEmployeeID=[],this.EmployeeID=0,this.ProjectID=0,this.arr=[],this.isDisable=!1,this.isPriorty=!1,this.dpConfig=new k.iP,this.minDate=new Date,this.maxDate=new Date,this.CurrYear=(new Date).getFullYear(),this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]})}ngOnInit(){let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Project?this.TaskID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.Project):(this.TaskID=+t.queryParams.id,this.ProjectID=+t.queryParams.id2,this.taskstatusID=+t.queryParams.taskstatusID,this.Months=+t.queryParams.month,this.FinancialYear=+t.queryParams.FinancialYear,this.Year=+t.queryParams.Year,this.filterModel=t.queryParams.filterModel),this.dropdownSettings={singleSelection:!1,idField:"employeeID",textField:"developer",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},0==this.Year&&(this.Year=this.CurrYear),this.Months==(new Date).getMonth()+1&&this.Year==(new Date).getFullYear()?(this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)):(this.minDate=new Date(this.Year,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)),this.Hours=Array.from({length:41},(n,i)=>i>=10?i:"0"+i),this.Minutes=Array.from({length:60},(n,i)=>i>=10?i:"0"+i),3==this.taskstatusID&&(this.is_edit=!0),this.GetProject(),this.GetTaskPriorityDropDown(),this.TaskID>0&&this.GetTaskByID(this.TaskID)}estimated(t){this.estimatedHours=t,this.isDisable="40"==this.estimatedHours}GetProjectWiseEmployee(t){this.ProjectID=t,null!=this.ProjectID&&(3==this.currentUser.roleID&&12!=this.currentUser.designationID?(5==this.currentUser.designationID&&(this.currentUser.companyID=0),this.TaskService.GetBDEEmployee(this.ProjectID,this.currentUser.companyID).subscribe(n=>{if(""!=n){this.projectwiseEmployeeModel=n;var i=this.projectwiseEmployeeModel.find(o=>o.id===this.currentUser.employeeID);i.id==this.currentUser.employeeID&&(this.taskViewModel.assigneEmployee=i.id)}})):this.TaskService.GetProjectWiseEmployee(this.ProjectID,this.currentUser.companyID).subscribe(n=>{if(""!=n){this.projectwiseEmployeeModel=n;var i=this.projectwiseEmployeeModel.find(o=>o.id===this.currentUser.employeeID);i.id==this.currentUser.employeeID&&(this.taskViewModel.assigneEmployee=i.id)}},n=>{console.log(n)}))}GetTaskByID(t){this.TaskService.getTaskByID(t,this.ProjectID).subscribe(n=>{if(""!=n){this.result=n,this.taskViewModel=n.taskViewModel,this.taskstartDate=n.taskViewModel.startDate,this.taskendDate=n.taskViewModel.endDate,this.taskViewModel.projectID=n.taskViewModel.projectID,this.projectwiseEmployeeModel=n.projectwiseEmployeeModel,3==n.taskViewModel.taskStatusID&&(this.isPriorty=!0);let i=n.taskViewModel.estimatedHours.split(":");this.estimatedHours=i[0],this.estimatedMinute=i[1];let o=n.taskViewModel.startDate.split("-");this.Months=o[1],this.CurrYear=o[2],(new Date).getMonth(),this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)}},n=>{console.log(n)})}GetTaskPriorityDropDown(){this.TaskService.GetTaskPriorityDropDown().subscribe(t=>{""!=t&&(this.TaskPrioritydropdown=t)},t=>{console.log(t)})}GetProject(){this.EmployeeID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID,14==this.currentUser.designationID||5==this.currentUser.designationID?this.TaskService.getBDEProject(this.EmployeeID,this.currentUser.designationID).subscribe(t=>{""!=t&&(this.Projectdropdown=t)},t=>{console.log(t)}):this.TaskService.getProject(this.EmployeeID).subscribe(t=>{""!=t&&(this.Projectdropdown=t)},t=>{console.log(t)})}onItemSelect(t){2==this.taskstatusID?(this.SelectedAssigneeEmployee=this.arr.map(n=>n.developer),t&&(this.SelectedAssigneeEmployee=[...this.SelectedAssigneeEmployee,t.map(n=>n.developer)])):null!=this.selectedItems&&(this.SelectedAssigneeEmployee=this.selectedItems.map(n=>n.developer))}saveTask(t=""){if(this.loading=!0,this.currentUser){this.taskViewModel.estimatedHours=this.estimatedHours+":"+this.estimatedMinute,this.taskViewModel.projectID=+this.taskViewModel.projectID,this.taskViewModel.taskPriorityID=+this.taskViewModel.taskPriorityID,this.taskViewModel.assigneEmployee=+this.taskViewModel.assigneEmployee;var n="string"==typeof this.taskstartDate?this.taskstartDate.split("-"):"",i="string"==typeof this.taskstartDate?new Date(+n[2],+n[1]-1,+n[0]):new Date,o=this.taskstartDate&&this.datePipe.transform("object"==typeof this.taskstartDate?this.taskstartDate:i,"yyyy-MM-dd");this.taskViewModel.startDate=o;var r="string"==typeof this.taskendDate?this.taskendDate.split("-"):"",a="string"==typeof this.taskendDate?new Date(+r[2],+r[1]-1,+r[0]):new Date,d=this.taskendDate&&this.datePipe.transform("object"==typeof this.taskendDate?this.taskendDate:a,"yyyy-MM-dd");this.taskViewModel.endDate=d,this.taskViewModel.TaskstatusID=1,this.TaskService.saveTask(this.taskViewModel).subscribe(g=>{this.loading=!1,g>0?this.route.params.subscribe(A=>{this.taskViewModel.taskID>0?this.toastyService.success("Task updated successfully.","Update Task"):this.toastyService.success("Task saved successfully.","Save Task"),this.loading=!1,window.location.href.toLowerCase().indexOf("projectID")<0?this.router.navigate(["/TimeSheet/Tasklist"],{queryParams:{id:this.Months,FinancialYear:this.FinancialYear,filterModel:this.filterModel},skipLocationChange:!0}):(document.getElementById("P").click(),this.resetFormInputs())}):0==g?(this.loading=!1,this.toastyService.error("Task already exsist for same date.","Duplicate Task")):(this.loading=!1,this.toastyService.error("Something error.","Save Task"))},g=>{this.loading=!1,console.log(g)})}}clearInputdata(){this.router.navigate(["/TimeSheet/Tasklist"],{queryParams:{id:this.Months,FinancialYear:this.FinancialYear,queryParams:{filterModel:this.filterModel}},skipLocationChange:!0})}resetFormInputs(){this.projectwiseEmployeeModel=null,document.getElementById("TaskForm").reset()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(te),e.rXU(O),e.rXU(f.nX),e.rXU(u.vh),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-task"]],features:[e.Jv_([u.vh,te,O,k.iP])],decls:107,vars:32,consts:[["f","ngForm"],["title","ngModel"],["estimatedHour","ngModel"],["estimatedMinutes","ngModel"],["description","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],["id","backtolist",1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],["action","","method","post","id","TaskForm","autocomplete","off","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"card-body","mb-3"],[1,"form-group","row","mb-3"],[1,"col-md-6"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6","task-fields"],["name","Project","id","Project","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["name","AssigneEmployee","id","AssigneEmployee","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"col-md-2","col-form-label","required"],[1,"col-md-9","task-fields"],["type","text","placeholder","Title","name","Title","required","","maxlength","200",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Start date","bsDatepicker","","name","taskstartDate","required","",1,"form-control",3,"ngModelChange","ngModel","disabled","bsConfig"],["type","text","placeholder","End date","bsDatepicker","","name","taskendDate","required","",1,"form-control",3,"ngModelChange","ngModel","disabled","bsConfig"],["name","TaskPriority","id","TaskPriority","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-3","task"],["name","productiveHours","id","productiveHours","required","",1,"productiveHours",3,"ngModelChange","change","ngModel"],["value","00","selected","","disabled",""],[1,"col-md-3","usertimesheet","pr-md-0"],["name","productiveMinute","id","productiveMinute","required","",1,"productiveMinute",3,"ngModelChange","ngModel","disabled"],["style","margin-left: 225px;","class","error",4,"ngIf"],[1,"col-md-9","task-textarea"],["rows","10","placeholder","Description...","name","Description","autocomplete","off","required","",1,"form-control",3,"ngModelChange","ngModel","spellcheck"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","reset","tabindex","7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[3,"value"],[1,"error"],[1,"error",2,"margin-left","225px"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div"),e.nrm(7,"i",11),e.EFF(8," Task "),e.k0s(),e.j41(9,"button",12),e.bIt("click",function(){return e.eBV(o),e.Njj(i.clearInputdata())}),e.nrm(10,"i",13),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"form",14,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(13),d=e.sdS(78),g=e.sdS(84);return e.Njj(a.form.valid&&i.taskViewModel.projectID>0&&i.taskViewModel.assigneEmployee>0&&i.taskViewModel.taskPriorityID>0&&!(i.taskstartDate>i.taskendDate)&&!(i.taskendDate<i.taskstartDate)&&!("00"==d.value&&"00"==g.value)&&d.value<"41"&&g.value<"61"&&i.saveTask(a))}),e.j41(14,"div",15)(15,"div",16)(16,"div",17)(17,"div",6)(18,"label",18),e.EFF(19,"Project"),e.k0s(),e.j41(20,"div",19)(21,"select",20),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.GetProjectWiseEmployee(a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskViewModel.projectID,a)||(i.taskViewModel.projectID=a),e.Njj(a)}),e.j41(22,"option",21),e.EFF(23,"-- Project --"),e.k0s(),e.DNE(24,Gu,2,2,"option",22),e.k0s(),e.DNE(25,Yu,2,0,"div",23),e.k0s()()(),e.j41(26,"div",17)(27,"div",6)(28,"label",18),e.EFF(29,"Employee"),e.k0s(),e.j41(30,"div",19)(31,"select",24),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskViewModel.assigneEmployee,a)||(i.taskViewModel.assigneEmployee=a),e.Njj(a)}),e.j41(32,"option",21),e.EFF(33,"-- Employee --"),e.k0s(),e.DNE(34,Hu,2,2,"option",22),e.k0s(),e.DNE(35,Nu,2,0,"div",23),e.k0s()()()(),e.j41(36,"div",16)(37,"div",7)(38,"div",6)(39,"label",25),e.EFF(40,"Title"),e.k0s(),e.j41(41,"div",26)(42,"input",27,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskViewModel.title,a)||(i.taskViewModel.title=a),e.Njj(a)}),e.k0s(),e.DNE(44,Lu,2,0,"span",23),e.k0s()()()(),e.j41(45,"div",16)(46,"div",17)(47,"div",6)(48,"label",18),e.EFF(49,"Start Date"),e.k0s(),e.j41(50,"div",17)(51,"input",28),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskstartDate,a)||(i.taskstartDate=a),e.Njj(a)}),e.k0s(),e.DNE(52,Bu,2,0,"span",23),e.k0s()()(),e.j41(53,"div",17)(54,"div",6)(55,"label",18),e.EFF(56,"End Date"),e.k0s(),e.j41(57,"div",17)(58,"input",29),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskendDate,a)||(i.taskendDate=a),e.Njj(a)}),e.k0s(),e.DNE(59,Uu,2,0,"span",23)(60,Vu,2,0,"span",23),e.k0s()()()(),e.j41(61,"div",16)(62,"div",17)(63,"div",6)(64,"label",18),e.EFF(65,"Priority"),e.k0s(),e.j41(66,"div",17)(67,"select",30),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskViewModel.taskPriorityID,a)||(i.taskViewModel.taskPriorityID=a),e.Njj(a)}),e.j41(68,"option",21),e.EFF(69,"-- Priority --"),e.k0s(),e.DNE(70,xu,2,2,"option",22),e.k0s(),e.DNE(71,Qu,2,0,"div",23),e.k0s()()(),e.j41(72,"div",17)(73,"div",6)(74,"label",18),e.EFF(75,"Estimated Hours"),e.k0s(),e.j41(76,"div",31)(77,"select",32,2),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.estimatedHours,a)||(i.estimatedHours=a),e.Njj(a)}),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.estimated(a.target.value))}),e.j41(79,"option",33),e.EFF(80,"-- Hours --"),e.k0s(),e.DNE(81,Ou,2,2,"option",22),e.k0s()(),e.j41(82,"div",34)(83,"select",35,3),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.estimatedMinute,a)||(i.estimatedMinute=a),e.Njj(a)}),e.j41(85,"option",33),e.EFF(86,"-- Minutes --"),e.k0s(),e.DNE(87,Ju,2,2,"option",22),e.k0s()(),e.DNE(88,$u,2,0,"span",36),e.k0s()()(),e.j41(89,"div",16)(90,"div",7)(91,"div",6)(92,"label",25),e.EFF(93,"Description"),e.k0s(),e.j41(94,"div",37)(95,"textarea",38,4),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.taskViewModel.description,a)||(i.taskViewModel.description=a),e.Njj(a)}),e.EFF(97,"                    "),e.k0s(),e.DNE(98,zu,2,0,"span",23),e.k0s()()()()(),e.j41(99,"div",39)(100,"button",40),e.nrm(101,"i",41),e.EFF(102," Submit "),e.k0s(),e.DNE(103,Xu,1,0,"img",42),e.j41(104,"button",43),e.nrm(105,"i",44),e.EFF(106," Reset "),e.k0s()()()()()()()}if(2&n){const o=e.sdS(13),r=e.sdS(43),a=e.sdS(78),d=e.sdS(84),g=e.sdS(96);e.R7$(21),e.R50("ngModel",i.taskViewModel.projectID),e.R7$(3),e.Y8G("ngForOf",i.Projectdropdown),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.taskViewModel.projectID||null==i.taskViewModel.projectID||0==i.taskViewModel.projectID||!(i.taskViewModel.projectID>0))),e.R7$(6),e.R50("ngModel",i.taskViewModel.assigneEmployee),e.Y8G("disabled",1==i.is_edit),e.R7$(3),e.Y8G("ngForOf",i.projectwiseEmployeeModel),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.taskViewModel.assigneEmployee||null==i.taskViewModel.assigneEmployee||0==i.taskViewModel.assigneEmployee||!(i.taskViewModel.assigneEmployee>0))),e.R7$(7),e.R50("ngModel",i.taskViewModel.title),e.R7$(2),e.Y8G("ngIf",o.submitted&&!r.valid),e.R7$(7),e.R50("ngModel",i.taskstartDate),e.Y8G("disabled",1==i.isPriorty)("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.taskstartDate),e.R7$(6),e.R50("ngModel",i.taskendDate),e.Y8G("disabled",1==i.isPriorty)("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.taskendDate),e.R7$(),e.Y8G("ngIf",o.submitted&&i.taskendDate&&i.taskstartDate>i.taskendDate),e.R7$(7),e.R50("ngModel",i.taskViewModel.taskPriorityID),e.R7$(3),e.Y8G("ngForOf",i.TaskPrioritydropdown),e.R7$(),e.Y8G("ngIf",o.submitted&&(null==i.taskViewModel.taskPriorityID||null==i.taskViewModel.taskPriorityID||0==i.taskViewModel.taskPriorityID||!(i.taskViewModel.taskPriorityID>0))),e.R7$(6),e.R50("ngModel",i.estimatedHours),e.R7$(4),e.Y8G("ngForOf",i.Hours),e.R7$(2),e.R50("ngModel",i.estimatedMinute),e.Y8G("disabled",1==i.isDisable),e.R7$(4),e.Y8G("ngForOf",i.Minutes),e.R7$(),e.Y8G("ngIf",o.submitted&&"00"==a.value&&"00"==d.value),e.R7$(7),e.R50("ngModel",i.taskViewModel.description),e.Y8G("spellcheck",!0),e.R7$(3),e.Y8G("ngIf",o.submitted&&!g.valid),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,k.pc,k.p0],encapsulation:2})}return s})();var qu=F(8141);const Ku=["myInput"];function Wu(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Zu(s,l){if(1&s&&(e.j41(0,"option",46),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function em(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",19)(1,"ng-multiselect-dropdown",47),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedEmployee,i)||(o.selectedEmployee=i),e.Njj(i)}),e.bIt("onSelect",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.getTaskList())}),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("placeholder","-- Employees --")("data",t.employeelist),e.R50("ngModel",t.selectedEmployee),e.Y8G("settings",t.employeedropdownSettings)}}function tm(s,l){if(1&s&&(e.j41(0,"li")(1,"span"),e.EFF(2),e.k0s(),e.EFF(3," => "),e.j41(4,"span",52),e.EFF(5),e.k0s()()),2&s){const t=l.$implicit;e.R7$(2),e.SpI(" ",t.record,""),e.R7$(3),e.SpI(" ",t.errorMessage,"")}}function im(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.nrm(6,"i",7),e.EFF(7," Import Excel Error list "),e.k0s(),e.j41(8,"div",48)(9,"button",49),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.CloseErrorList())}),e.j41(10,"span",50),e.EFF(11,"\xd7"),e.k0s()()()(),e.j41(12,"div",18)(13,"div",2)(14,"div",42),e.DNE(15,tm,6,2,"li",51),e.k0s()()()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.Y8G("ngForOf",t.errorMessage)}}let ti=(()=>{class s{constructor(t,n,i,o,r,a,d,g){this.http=t,this.router=i,this.spinner=o,this.taskService=r,this.cookieService=a,this.datePipe=d,this.toastyService=g,this.columns=[],this.filterModel=new le,this.currentPageNumber=1,this.dpConfig=new k.iP,this.project=0,this.ProjectlistDropdownModel=[],this.employee=0,this.employeelist=[],this.TaskstatusID=0,this.ProjectStatusList=[],this.ProjectStatus=2,this.Months=0,this.MonthList=[],this.FinancialYear=0,this.FinancialYearList=[],this.Year=0,this.projectdropdownSettings={},this.selectedprojects=[],this.selectedItems=[],this.selectedEmployee=[],this.dropdownSettings={},this.employeedropdownSettings={},this.minDate=new Date,this.maxDate=new Date,this.CurrYear=(new Date).getFullYear(),this.errorMessage="",this.pmtl=!1,this.datagrid=n,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="startDate",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer",this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]})}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.projectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.employeedropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.currentUser.designationID<=5&&(this.pmtl=!0);let t=new Date;this.minDate=new Date(t.getFullYear(),t.getMonth(),1),this.maxDate=new Date(t.getFullYear(),t.getMonth()+1,0),this.DesignationID=this.currentUser.designationID;let n=this.router.parseUrl(this.router.url);null!=n.queryParams.search&&(this.Search=n.queryParams.search),null==n.queryParams.id?this.Months=0:(this.Months=+n.queryParams.id,this.FinancialYear=+n.queryParams.FinancialYear),this.columns.push(new h("project","Project",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("assigneEmployeeName","Employee",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("title","Title",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("description","Description",'[{"width": "18%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("priority","Priority",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("status","Status",'[{"width": "6%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("estimatedHours","Estimated Hours",'[{"width": "8%" ,"hyperLink": false,"textAlign": "right", "disableSorting": false}]')),this.columns.push(new h("startDate","Start Date",'[{"width": "8%" ,"hyperLink": false,"textAlign": "right", "disableSorting": false}]')),this.columns.push(new h("endDate","End Date",'[{"width": "8%" ,"hyperLink": false,"textAlign": "right", "disableSorting": false}]')),this.currentUser.designationID>3&&this.columns.push(new h("Action","Action",'[{"width": "4%" ,"hyperLink": false,"textAlign": "center", "disableSorting": true,"isFill":true}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetProjectByStatus(),this.GetMonths(),this.GetFinancialYear(),this.GetEmployee()},t),this.spinner.hide()}GetProjectByStatus(){this.spinner.show();const t=new le;t.EmployeeID=1===this.currentUser.designationID||2===this.currentUser.designationID||3===this.currentUser.designationID||5===this.currentUser.designationID?0:this.currentUser.employeeID,t.projectstatus=this.AllProjects?"1,2,3,4,5,6":"";const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Task/GetProjectByStatus?DesignationID="+this.DesignationID,JSON.stringify(t),{headers:n}).subscribe(o=>{this.spinner.hide(),this.ProjectlistDropdownModel=o.projectlistDropdownModel})}GetFinancialYear(){const t=new le,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",JSON.stringify(t),{headers:n}).subscribe(o=>{this.FinancialYearList=o.financialYearDropdownModels,0==this.FinancialYear&&(this.FinancialYear=o.financialYear),this.search()})}GetMonths(){const t=new le,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetMonths",JSON.stringify(t),{headers:n}).subscribe(o=>{this.MonthList=o.monthsdropdown,0==this.Months&&(this.Months=o.month)})}GetEmployee(){if(5==this.currentUser.designationID)return this.taskService.GetBDEEmployee(0,this.currentUser.companyID).pipe((0,qu.M)(a=>{""!=a&&(this.employeelist=a)}));let t=new le,n=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID;const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/Getreportingemployee?ReportingID="+n,JSON.stringify(t),{headers:i}).subscribe(r=>{this.employeelist=r})}getTaskList(){this.spinner.show();let t=new le;if(t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.Month=this.Months,t.FinancialYear=this.FinancialYear,t.EmployeeID=this.currentUser.employeeID,t.projectstatus=this.AllProjects?"1,2,3,4,5,6":"",null!=this.startDate&&null!=this.endDate){const o="string"==typeof this.startDate?this.startDate.split("-"):"",r="string"==typeof this.startDate?new Date(+o[2],+o[1]-1,+o[0]):new Date,a=this.startDate&&this.datePipe.transform("object"==typeof this.startDate?this.startDate:r,"yyyy-MM-dd");t.startDate=a;const d="string"==typeof this.endDate?this.endDate.split("-"):"",g="string"==typeof this.endDate?new Date(+d[2],+d[1]-1,+d[0]):new Date,y=this.endDate&&this.datePipe.transform("object"==typeof this.endDate?this.endDate:g,"yyyy-MM-dd");t.endDate=y}t.projects=null!=this.selectedprojects?this.selectedprojects.map(o=>o.projectID).join(","):"",t.searchEmployee=null!=this.selectedEmployee?this.selectedEmployee.map(o=>o.id).join(","):"",this.filterModel=t;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Task/GetTaskList?DesignationID="+this.DesignationID,JSON.stringify(t),{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}DeleteTask(t,n){this.spinner.show(),1==n?this.taskService.deleteTask(t).subscribe(i=>{this.deleteOnSuccess(i)},i=>{this.deleteOnError(i)}):this.toastyService.error("Timesheet exists for this task, so you can't delete this task","Error"),this.spinner.hide()}SearchChanged(t){this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.getTaskList()}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.taskListViewModel=t.taskListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}Addfile(t){this.spinner.show(),this.file=t.target.files[0],this.extantion=t.target.files[0].name.split("."),"xlsx"!=this.extantion[1]&&"xls"!=this.extantion[1]&&this.toastyService.error("Please upload excel file","Upload"),this.spinner.hide()}ImportfromExcel(){if(this.spinner.show(),null==this.file)return this.spinner.hide(),void this.toastyService.error("Please upload an excel file","Upload");if("xlsx"!=this.extantion[1]&&"xls"!=this.extantion[1])return this.toastyService.error("Please upload an excel file","Upload"),void this.spinner.hide();let t=new FileReader;t.onload=n=>{this.arrayBuffer=t.result;for(var i=new Uint8Array(this.arrayBuffer),o=new Array,r=0;r!=i.length;++r)o[r]=String.fromCharCode(i[r]);var a=o.join(""),d=ae.LF(a,{type:"binary"}),y=d.Sheets[d.SheetNames[0]];this.ImportExcel=ae.Wp.sheet_to_json(y,{raw:!1});let v=ae.Wp.sheet_to_json(y,{header:1})[0],b=["Project","Employee","Title","StartDate","EndDate","Priority","Estimatedhours","Description"];if(v[0]!=b[0]||v[1]!=b[1]||v[2]!=b[2]||v[3]!=b[3]||v[4]!=b[4]||v[5]!=b[5]||v[6]!=b[6]||v[7]!=b[7])return this.spinner.hide(),void this.toastyService.error("Please upload a valid Excel file.","Invalid");let Y=this.ImportExcel,T=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});this.http.post(p.apiUrl+"api/Task/ImporttaskfromExcel",JSON.stringify(Y),{headers:T}).subscribe(P=>{1==P.importStatus?(this.spinner.hide(),this.myInputVariable.nativeElement.value="",this.toastyService.success("All Tasks imported successfully.","Save Tasks")):0==P.importStatus&&null!=P.errorLogList&&(this.errorMessage=P.errorLogList),this.getTaskList()},P=>{this.spinner.hide(),this.getRowOnError(P)})},t.readAsArrayBuffer(this.file),this.myInputVariable.nativeElement.value=""}CloseErrorList(){this.errorMessage=""}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"Sorting"==n.EventType?this.sortRow(n.SortDirection,n.SortExpression):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"ItemRedirect"==n.EventType&&this.selectedRowRedirect(n.ItemSelected,n.header)}selectedRowForEditDelete(t){let i=this.taskListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this task?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteTask(i.taskID,i.taskstatusID)}},cancel:function(){}}})}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.getTaskList()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.getTaskList()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.getTaskList()}SearchProject(t){""!=t&&(this.project=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getTaskList()},500))}selectedRow(t){let i=this.taskListViewModel[t];return this.router.navigate(["/TimeSheet/AddTask"],{queryParams:{id:i.taskID,id2:i.projectID,taskstatusID:i.taskstatusID,month:this.Months,FinancialYear:this.FinancialYear,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}selectedRowRedirect(t,n){let o=this.taskListViewModel[t];return this.router.navigate(["/TimeSheet/AddUsertimesheet"],{queryParams:{estimatedHours:o.estimatedHours,description:o.description,projectID:o.projectID,taskID:o.taskID,endDate:o.endDate,startDate:o.startDate,id3:this.FinancialYear,id2:this.Months,Year:this.Year,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getTaskList()},500))}SearchMonth(t){""!=t&&(this.Months=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getTaskList()},500))}onMonthChange(){let n=this.FinancialYearList.filter(i=>i.financialYearID==this.FinancialYear)[0].year.split("-");this.Year=this.Months>3?n[0]:n[1],0==this.Year&&(this.Year=this.CurrYear),this.Months==(new Date).getMonth()+1&&this.Year==(new Date).getFullYear()?(this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date):(this.minDate=new Date(this.Year,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0))}onChange(t){let i=t.target.options[t.target.options.selectedIndex].text.split("-");this.Year=this.Months>3?i[0]:i[1],0==this.Year&&(this.Year=this.CurrYear),this.Months==(new Date).getMonth()+1&&this.Year==(new Date).getFullYear()?(this.minDate=new Date(this.CurrYear,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)):(this.minDate=new Date(this.Year,this.Months-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0))}showTaskForm(){return this.router.navigate(["/TimeSheet/AddTask"],{queryParams:{month:this.Months,FinancialYear:this.FinancialYear,Year:this.Year},skipLocationChange:!0})}reset(){this.spinner.show(),this.Search="",this.currentPageNumber=1,this.Months=0,this.FinancialYear=0,this.myInputVariable.nativeElement.value="";let t=[];t.push(this.ProjectStatusList.find(n=>2==n.projectStatusID)),this.selectedItems=t,this.selectedprojects=null,this.selectedEmployee=null,this.delaySearch=!1,this.AllProjects=!1,this.startDate=null,this.endDate=null,this.GetProjectByStatus(),this.GetMonths(),this.GetFinancialYear(),this.spinner.hide()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}deleteOnSuccess(t){0==t?(this.getTaskList(),this.toastyService.success("Task deleted successfully.","Delete")):1==t?this.toastyService.error("This timesheet is associated with another resource so you cannot delete.","Can not delete this record"):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`${t}`,"Error")}SampleTimesheetExcel(){this.spinner.show(),this.taskService.SampleTaskExcel().subscribe(t=>{this.toastyService.success("Sample excel downloaded","Sample task excel")}),this.spinner.hide()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(te),e.rXU(S.O),e.rXU(u.vh),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-tasklist"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Ku,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.myInputVariable=o.first)}},features:[e.Jv_([te,k.iP,u.vh])],decls:64,vars:26,consts:[["myInput",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right",2,"display","flex"],[1,"position-relative"],["type","file","placeholder","Upload file","accept",".xlsx,.xls",1,"custom-file",3,"change"],[1,"upload-note"],["type","button","tooltip","Import from excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],[1,"fa","fa-upload"],["tooltip","Sample excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],[1,"fa","fa-download"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","From Date","bsDatepicker","",1,"form-control",3,"ngModelChange","ngModel","bsConfig","maxDate","minDate"],["type","text","placeholder","To Date","bsDatepicker","",1,"form-control",3,"ngModelChange","ngModel","bsConfig","maxDate","minDate"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","change","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","change","ngModel"],["class","col-md-3 paddingbottom",4,"ngIf"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],[2,"margin-right","8px"],["type","checkbox",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"row","mt-1"],[1,"col-md-6","paddingbottom"],["placement","bottom","tooltip","Timesheet Filled",1,"div-small"],[1,"Approved"],[1,"div-smalltext"],["placement","bottom","tooltip","Timesheet Not Fill",1,"div-small"],[1,"Rejected"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["class","animated fadeIn",4,"ngIf"],["size","medium",3,"type"],[3,"value"],["name","multiSelectEmployee",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],[1,"pull-right"],["type","button","tooltip","Close","placement","bottom","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[4,"ngFor","ngForOf"],[2,"color","red"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.nrm(6,"i",7),e.EFF(7," Tasks "),e.k0s(),e.j41(8,"div",8)(9,"div",9)(10,"input",10,0),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.Addfile(a))}),e.k0s(),e.j41(12,"span",11),e.EFF(13,"*Use sample file to import task"),e.k0s()(),e.j41(14,"button",12),e.bIt("click",function(){return e.eBV(o),e.Njj(i.ImportfromExcel())}),e.nrm(15,"i",13),e.k0s(),e.j41(16,"button",14),e.bIt("click",function(){return e.eBV(o),e.Njj(i.SampleTimesheetExcel())}),e.nrm(17,"i",15),e.k0s(),e.j41(18,"button",16),e.bIt("click",function(){return e.eBV(o),e.Njj(i.showTaskForm())}),e.nrm(19,"i",17),e.k0s()()(),e.j41(20,"div",18)(21,"div",2)(22,"div",19)(23,"input",20),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.startDate,a)||(i.startDate=a),e.Njj(a)}),e.k0s()(),e.j41(24,"div",19)(25,"input",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.endDate,a)||(i.endDate=a),e.Njj(a)}),e.k0s()(),e.j41(26,"div",19)(27,"select",22),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Months,a)||(i.Months=a),e.Njj(a)}),e.bIt("change",function(){return e.eBV(o),e.Njj(i.onMonthChange())})("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchMonth(a))}),e.j41(28,"option",23),e.EFF(29,"-- Month --"),e.k0s(),e.DNE(30,Wu,2,2,"option",24),e.k0s()(),e.j41(31,"div",19)(32,"select",25),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("change",function(a){return e.eBV(o),e.Njj(i.onChange(a))})("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchYear(a))}),e.DNE(33,Zu,2,2,"option",24),e.k0s()(),e.DNE(34,em,2,4,"div",26),e.j41(35,"div",19)(36,"input",27),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(37,"div",19)(38,"ng-multiselect-dropdown",28),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedprojects,a)||(i.selectedprojects=a),e.Njj(a)}),e.bIt("onSelect",function(){return e.eBV(o),e.Njj(i.getTaskList())}),e.k0s()(),e.j41(39,"div",19)(40,"label",29)(41,"input",30),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.AllProjects,a)||(i.AllProjects=a),e.Njj(a)}),e.bIt("ngModelChange",function(){return e.eBV(o),e.Njj(i.GetProjectByStatus())}),e.k0s(),e.EFF(42," All Projects "),e.k0s(),e.j41(43,"button",31),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(44,"i",32),e.k0s(),e.j41(45,"button",33),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(46,"i",34),e.k0s()()(),e.j41(47,"div",35)(48,"div",36)(49,"div")(50,"div",37),e.nrm(51,"div",38),e.j41(52,"div",39),e.EFF(53,"Task Completed"),e.k0s()()(),e.j41(54,"div")(55,"div",40),e.nrm(56,"div",41),e.j41(57,"div",39),e.EFF(58,"Task Pending"),e.k0s()()()()(),e.j41(59,"div",2)(60,"div",42)(61,"datagrid",43),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.DNE(62,im,16,1,"div",44),e.nrm(63,"ngx-spinner",45)}2&n&&(e.R7$(23),e.R50("ngModel",i.startDate),e.Y8G("bsConfig",i.dpConfig)("maxDate",i.maxDate)("minDate",i.minDate),e.R7$(2),e.R50("ngModel",i.endDate),e.Y8G("bsConfig",i.dpConfig)("maxDate",i.maxDate)("minDate",i.minDate),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(),e.Y8G("ngIf",1==i.pmtl),e.R7$(2),e.R50("ngModel",i.Search),e.R7$(2),e.Y8G("placeholder","-- Projects --")("data",i.ProjectlistDropdownModel),e.R50("ngModel",i.selectedprojects),e.Y8G("settings",i.projectdropdownSettings),e.R7$(3),e.R50("ngModel",i.AllProjects),e.R7$(20),e.Y8G("rows",i.taskListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(),e.Y8G("ngIf",""!=i.errorMessage),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,k.pc,k.p0,E.dg,D.et,w.b,_],encapsulation:2})}return s})();const nm=["RejectTimesheetModals"];let om=(()=>{class s{constructor(t,n,i,o,r,a,d,g,y){this.modalService=t,this.spinner=n,this.usertimesheetService=i,this.http=o,this.datePipe=a,this.router=d,this.cookieService=g,this.toastyService=y,this.DataEmit=new e.bkB,this.title="View UserTimesheet Report",this.dpConfig=new k.iP,this.usertimesheetStatusModel=new K,this.columns=[],this.currentPageNumber=1,this.ProjectlistDropdownModel=[],this.project=0,this.ProjectStatus=2,this.ProjectStatusList=[],this.EmployeeID=0,this.Month=0,this.filterModel=new U,this.FinancialYear=0,this.FinancialYearList=[],this.CurrMonth=(new Date).getMonth()+1,this.projectdropdownSettings={},this.selectedprojects=[],this.selectedItems=[],this.dropdownSettings={},this.minDate=new Date,this.maxDate=new Date,this.CurrYear=(new Date).getFullYear(),this.formData=new K,this.datagrid=r,this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=15,this.sortDirection="DESC",this.sortExpression="taskDate",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer",this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]})}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.projectdropdownSettings={singleSelection:!1,idField:"projectID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.dropdownSettings={singleSelection:!1,idField:"projectStatusID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);if(null!=t.queryParams.EmployeeID&&null!=t.queryParams.project&&null!=t.queryParams.taskMonth&&(this.EmployeeID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.EmployeeID)),null!=t.queryParams.FinancialYear)this.FinancialYear=+t.queryParams.FinancialYear;else{this.EmployeeID=+t.queryParams.id,this.Fyear=t.queryParams.id1,this.Month=+t.queryParams.id3,this.EmployeeName=t.queryParams.id4,this.Months=t.queryParams.id6,this.sub=+t.queryParams.id8,this.apv=+t.queryParams.id9,this.rej=+t.queryParams.id10,this.project=+t.queryParams.id2,this.ProjectStatus=+t.queryParams.ProjectStatus,this.Year=+t.queryParams.Year,this.Name=t.queryParams.name;let i=t.queryParams.NonBillable,o=t.queryParams.InProgress;this.IsBillable=JSON.parse(t.queryParams.IsBillable),this.NonBillable=JSON.parse(i),this.InProgress=JSON.parse(o)}0==this.Year&&(this.Year=this.CurrYear),this.Month==(new Date).getMonth()+1&&this.Year==(new Date).getFullYear()?(this.minDate=new Date(this.CurrYear,this.Month-1,1),this.maxDate=new Date):(this.minDate=new Date(this.Year,this.Month-1,1),this.maxDate=new Date(this.minDate.getFullYear(),this.minDate.getMonth()+1,0)),this.EmployeeID>0&&this.getUsertimesheetList(this.EmployeeID,this.Month),this.columns.push(new h("project","Project",'[{"width": "5%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("task","Task",'[{"width": "7%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("description","Description",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false ,"isEditor": true}]')),this.columns.push(new h("startDate","Start Date",'[{"width": "3%" ,"hyperLink": false,"textAlign": "center","disableSorting": false}]')),this.columns.push(new h("endDate","End Date",'[{"width": "3%" ,"hyperLink": false,"textAlign": "center","disableSorting": false}]')),this.columns.push(new h("estimatedHours","Estimated Hours",'[{"width": "3%" ,"hyperLink": false,"textAlign": "right","disableSorting": false}]')),this.columns.push(new h("productiveHours","Actual Hours",'[{"width": "3%" ,"hyperLink": false,"textAlign": "right","disableSorting": false}]')),this.columns.push(new h("status","Status",'[{"width": "3%" ,"hyperLink": false, "disableSorting": false}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetProjectStatus(),this.GetProjectByStatus()},t),this.spinner.hide()}GetProjectStatus(){const t=new U,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectStatus",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.ProjectStatusList=o;let r=[];r.push(this.ProjectStatusList.find(a=>2==a.projectStatusID)),this.selectedItems=r,this.search()},error:o=>{this.getRowOnError(o)}})}GetProjectByStatus(){const t=new U;t.employeeID=this.EmployeeID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){const r=JSON.parse(n.queryParams.filterModel);t.projectstatus=""!=r.projectstatus&&null!=r.projectstatus?r.projectstatus:null!=this.selectedItems?this.selectedItems.map(a=>a.projectStatusID).join(","):""}else t.projectstatus=null!=this.selectedItems?this.selectedItems.map(r=>r.projectStatusID).join(","):"";const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetProjectByStatus?DesignationID="+this.currentUser.designationID,JSON.stringify(t),{headers:i}).subscribe({next:r=>{this.ProjectlistDropdownModel=r.projectlistDropdownModel,this.getUsertimesheetList(this.EmployeeID,this.Month)},error:r=>{this.getRowOnError(r)}})}getUsertimesheetList(t,n){this.spinner.show();const i=new U;if(i.search=this.Search,i.pageSize=this.pageSize,i.sortDirection=this.sortDirection,i.sortExpression=this.sortExpression,i.currentPageNumber=this.currentPageNumber,i.IsBillable=this.IsBillable,i.NonBillable=this.NonBillable,i.InProgress=this.InProgress,null!=this.FromDate&&null!=this.ToDate){const g="string"==typeof this.FromDate?this.FromDate.split("-"):"",y="string"==typeof this.FromDate?new Date(+g[2],+g[1]-1,+g[0]):new Date,A=this.FromDate&&this.datePipe.transform("object"==typeof this.FromDate?this.FromDate:y,"yyyy-MM-dd");i.FromDate=A;const v="string"==typeof this.ToDate?this.ToDate.split("-"):"",b="string"==typeof this.ToDate?new Date(+v[2],+v[1]-1,+v[0]):new Date,Y=this.ToDate&&this.datePipe.transform("object"==typeof this.ToDate?this.ToDate:b,"yyyy-MM-dd");i.ToDate=Y}i.ReportingID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID,i.FinancialYear=+this.Fyear;let o=this.router.parseUrl(this.router.url);if(null!=o.queryParams.filterModel){const g=JSON.parse(o.queryParams.filterModel);i.projectstatus=""!=g.projectstatus&&null!=g.projectstatus?g.projectstatus:null!=this.selectedItems?this.selectedItems.map(y=>y.projectStatusID).join(","):""}else i.projectstatus=null!=this.selectedItems?this.selectedItems.map(g=>g.projectStatusID).join(","):"";i.projects=null!=this.selectedprojects?this.selectedprojects.map(g=>g.projectID).join(","):"";let r=0;r=this.currentUser.designationID<=5?this.currentUser.designationID:14==this.currentUser.designationID?5:4,this.filterModel=i;const a=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/ViewTaskwiseHoursReport?EmployeeID="+t+"&Month="+n+"&DesignationID="+r,JSON.stringify(i),{headers:a}).subscribe({next:g=>{this.getRowOnSuccess(g),this.spinner.hide()},error:g=>{this.getRowOnError(g),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;if(n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,""!=t.totalProductiveHour){let i=t.totalProductiveHour.split(":");this.totalProductiveHours=i[0]+":"+i[1]}else this.totalProductiveHours="";if(""!=t.totalEstimatedHours){let i=t.totalEstimatedHours.split(":");this.totalEstimatedHours=i[0]+":"+i[1]}else this.totalEstimatedHours="";this.datagrid.databind(n),this.runningSearch=!1,this.userTimesheetListViewModel=t.taskwiseHourReport;for(let i=0;i<t.taskwiseHourReport.length;i++){let o=t.taskwiseHourReport[i].productiveHours.split(":");this.userTimesheetListViewModel[i].productiveHours=o[0]+":"+o[1];let r=t.taskwiseHourReport[i].estimatedHours.split(":");this.userTimesheetListViewModel[i].estimatedHours=r[0]+":"+r[1];let a=t.taskwiseHourReport[i].description.replaceAll("|","\n");t.taskwiseHourReport[i].description=a}}getRowOnError(t){this.runningSearch=!1}TaskwisehourExcel(){let t=this.Name+"_Timesheet_"+this.Months+"_"+this.Year;if(null==this.IsBillable&&(this.IsBillable=!1),null==this.NonBillable&&(this.NonBillable=!1),null==this.InProgress&&(this.InProgress=!1),null==this.FromDate&&null==this.ToDate)this.FromDate="",this.ToDate="";else{var n="string"==typeof this.FromDate?this.FromDate.split("-"):"",i="string"==typeof this.FromDate?new Date(+n[2],+n[1]-1,+n[0]):new Date,o=this.FromDate&&this.datePipe.transform("object"==typeof this.FromDate?this.FromDate:i,"yyyy-MM-dd");this.FromDate=o;var r="string"==typeof this.ToDate?this.ToDate.split("-"):"",a="string"==typeof this.ToDate?new Date(+r[2],+r[1]-1,+r[0]):new Date,d=this.ToDate&&this.datePipe.transform("object"==typeof this.ToDate?this.ToDate:a,"yyyy-MM-dd");this.ToDate=d}this.ReportingID=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID,this.FinancialYear=+this.Fyear;let g=this.selectedItems.map(v=>v.projectStatusID).join(","),y="";null!=this.selectedprojects&&(y=this.selectedprojects.map(v=>v.projectID).join(","));let A=0;A=this.currentUser.designationID<=5?this.currentUser.designationID:14==this.currentUser.designationID?5:4,this.usertimesheetService.TaskwisehourExcel(A,this.EmployeeID,this.Month,y,this.FinancialYear,this.ReportingID,g,this.IsBillable,this.NonBillable,this.InProgress,this.FromDate,this.ToDate,t).subscribe(v=>{this.toastyService.success("Completed.","Export Report to excel")})}SearchChanged(t){0!=this.autoFilter&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID,this.Month)},500))}SearchProjectStatus(t){""!=t&&(this.ProjectStatus=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID,this.Month)},500))}SearchProject(t){""!=t&&(this.project=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.getUsertimesheetList(this.EmployeeID,this.Month)},500))}reset(){this.Search="",this.currentPageNumber=1;let t=[];t.push(this.ProjectStatusList.find(n=>2==n.projectStatusID)),this.selectedItems=t,this.selectedprojects=null,this.FromDate=null,this.ToDate=null,this.IsBillable=!1,this.NonBillable=!1,this.InProgress=!1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}clearInputdata(){this.router.navigate(["/Reports/UserTimeSheetReport"],{queryParams:{Month:this.Month,FinancialYear:this.Fyear,ProjectStatus:this.ProjectStatus,Project:this.project,InProgress:this.InProgress},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.getUsertimesheetList(this.EmployeeID,this.Month)}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.employeeID=t.employeeID,this.project=t.project,t.Month>0&&(this.Months=t.Month))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(B.I8),e.rXU(D.ex),e.rXU(O),e.rXU(m.Qq),e.rXU(_),e.rXU(u.vh),e.rXU(f.Ix),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-viewtaskwisehours"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(nm,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.template=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([u.vh,O,k.iP])],decls:47,vars:32,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header",2,"display","inline-flex"],[1,"caption","title-headline-wrap","col-lg-4"],[1,"fa","fa-align-justify"],[1,"col-lg-8","d-flex","justify-content-end","gap-2"],["tooltip","Excel","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o"],["type","reset",1,"btn","btn-primary","text-white","btn-small","float-right","ml-2",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],["type","text","placeholder","From Date","bsDatepicker","",1,"form-control",3,"ngModelChange","ngModel","bsConfig","maxDate","minDate"],["type","text","placeholder","To Date","bsDatepicker","",1,"form-control",3,"ngModelChange","ngModel","bsConfig","maxDate","minDate"],[1,"col-md-6","paddingbottom"],[2,"margin-top","3px"],["type","checkbox","value","",3,"ngModelChange","ngModel"],[2,"margin-left","3px"],[2,"margin-left","3px","margin-right","10px"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","Taskwisehour","TotalEstimated","Total","ShowProjStatus"],["size","medium",3,"type"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div"),e.nrm(7,"i",6),e.EFF(8),e.k0s()(),e.j41(9,"div",7)(10,"div")(11,"button",8),e.bIt("click",function(){return i.TaskwisehourExcel()}),e.nrm(12,"i",9),e.k0s()(),e.j41(13,"button",10),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(14,"i",11),e.EFF(15," Back To Report "),e.k0s()()(),e.j41(16,"div",12)(17,"div",1)(18,"div",13)(19,"input",14),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(20,"div",13)(21,"ng-multiselect-dropdown",15),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.bIt("onSelect",function(){return i.GetProjectByStatus()}),e.k0s()(),e.j41(22,"div",13)(23,"ng-multiselect-dropdown",15),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedprojects,r)||(i.selectedprojects=r),r}),e.bIt("onSelect",function(){return i.getUsertimesheetList(i.EmployeeID,i.Month)}),e.k0s()(),e.nrm(24,"div",13),e.j41(25,"div",13)(26,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.FromDate,r)||(i.FromDate=r),r}),e.k0s()(),e.j41(27,"div",13)(28,"input",17),e.mxI("ngModelChange",function(r){return e.DH7(i.ToDate,r)||(i.ToDate=r),r}),e.k0s()(),e.j41(29,"div",18)(30,"label",19)(31,"input",20),e.mxI("ngModelChange",function(r){return e.DH7(i.IsBillable,r)||(i.IsBillable=r),r}),e.k0s(),e.EFF(32," Billable "),e.k0s(),e.j41(33,"label",21)(34,"input",20),e.mxI("ngModelChange",function(r){return e.DH7(i.NonBillable,r)||(i.NonBillable=r),r}),e.k0s(),e.EFF(35," Non Billable "),e.k0s(),e.j41(36,"label",22)(37,"input",20),e.mxI("ngModelChange",function(r){return e.DH7(i.InProgress,r)||(i.InProgress=r),r}),e.k0s(),e.EFF(38," In Progress "),e.k0s(),e.j41(39,"button",23),e.bIt("click",function(){return i.search()}),e.nrm(40,"i",24),e.k0s(),e.j41(41,"button",25),e.bIt("click",function(){return i.reset()}),e.nrm(42,"i",26),e.k0s()()(),e.j41(43,"div",1)(44,"div",27)(45,"datagrid",28),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(46,"ngx-spinner",29)),2&n&&(e.R7$(8),e.E5c(" ",i.EmployeeName," - ",i.Months," ",i.Year," "),e.R7$(11),e.R50("ngModel",i.Search),e.R7$(2),e.Y8G("placeholder","-- Project Status --")("data",i.ProjectStatusList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Projects --")("data",i.ProjectlistDropdownModel),e.R50("ngModel",i.selectedprojects),e.Y8G("settings",i.projectdropdownSettings),e.R7$(3),e.R50("ngModel",i.FromDate),e.Y8G("bsConfig",i.dpConfig)("maxDate",i.maxDate)("minDate",i.minDate),e.R7$(2),e.R50("ngModel",i.ToDate),e.Y8G("bsConfig",i.dpConfig)("maxDate",i.maxDate)("minDate",i.minDate),e.R7$(3),e.R50("ngModel",i.IsBillable),e.R7$(3),e.R50("ngModel",i.NonBillable),e.R7$(3),e.R50("ngModel",i.InProgress),e.R7$(8),e.Y8G("rows",i.userTimesheetListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("Taskwisehour",!0)("TotalEstimated",i.totalEstimatedHours)("Total",i.totalProductiveHours)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[c.me,c.Zm,c.BC,c.vS,k.pc,k.p0,E.dg,D.et,w.b,_],encapsulation:2})}return s})(),sm=(()=>{class s{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-undermaintenance"]],decls:15,vars:0,consts:[[1,"maintenance_backgraound"],[1,"overlay"],["aria-hidden","true",1,"stars"],["aria-hidden","true",1,"starts2"],["aria-hidden","true",1,"stars3"],[1,"main1"],[1,"contact"],[1,"title"],[1,"sub-title"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"title"),e.EFF(2,"Site is under maintenance"),e.k0s(),e.nrm(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4),e.j41(7,"main",5)(8,"section",6)(9,"h1",7),e.EFF(10,"We\u2019ll be back soon!"),e.k0s(),e.j41(11,"h2",8),e.EFF(12,"Site Under Maintenance"),e.k0s(),e.j41(13,"p"),e.EFF(14,"Sorry for the inconvenience. We\u2019re performing some maintenance at the moment. "),e.k0s()()()())},encapsulation:2})}return s})();const rm=["myInput"],Se=()=>["active"],am=()=>["/Reports/YearlyResourceHours"],lm=()=>["/Reports/YearlyClientHours"],cm=()=>["/Reports/AnnualBillableHours"],hm=()=>["/Reports/BillableProjectHours"],dm=()=>["/Reports/MonthlyProjectHours"];function pm(s,l){1&s&&(e.j41(0,"div",1)(1,"div",27)(2,"ul",28)(3,"li",29)(4,"a",30),e.nrm(5,"i",31),e.EFF(6," Resource Yearly Hours "),e.k0s()(),e.j41(7,"li",29)(8,"a",32),e.nrm(9,"i",33),e.EFF(10," Client Yearly Hours "),e.k0s()(),e.j41(11,"li",29)(12,"a",32),e.nrm(13,"i",31),e.EFF(14," Project Wise Hours "),e.k0s()(),e.j41(15,"li",29)(16,"a",32),e.nrm(17,"i",33),e.EFF(18," User wise Hours "),e.k0s()(),e.j41(19,"li",29)(20,"a",32),e.nrm(21,"i",34),e.EFF(22," Month Wise Hours "),e.k0s()()()()()),2&s&&(e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(10,Se))("routerLink",e.lJ4(11,am)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(12,Se))("routerLink",e.lJ4(13,lm)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(14,Se))("routerLink",e.lJ4(15,cm)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(16,Se))("routerLink",e.lJ4(17,hm)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(18,Se))("routerLink",e.lJ4(19,dm)))}function um(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",10)(1,"ng-multiselect-dropdown",35),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedEmployee,i)||(o.selectedEmployee=i),e.Njj(i)}),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("placeholder","-- Employee --")("data",t.employeelist),e.R50("ngModel",t.selectedEmployee),e.Y8G("settings",t.employeedropdownSettings)}}function mm(s,l){if(1&s&&(e.j41(0,"option",36),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function gm(s,l){if(1&s&&(e.j41(0,"option",36),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function fm(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",10)(1,"select",37),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Department,i)||(o.Department=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.SearchDepartment(i))}),e.j41(2,"option",12),e.EFF(3,"-- Department --"),e.k0s(),e.DNE(4,gm,2,2,"option",13),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.R50("ngModel",t.Department),e.R7$(3),e.Y8G("ngForOf",t.DepartmentList)}}function Am(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",10)(1,"ng-multiselect-dropdown",38),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedItems,i)||(o.selectedItems=i),e.Njj(i)}),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("placeholder","-- Designation --")("data",t.DesignationList),e.R50("ngModel",t.selectedItems),e.Y8G("settings",t.dropdownSettings)}}function _m(s,l){if(1&s){const t=e.RV6();e.j41(0,"label",15)(1,"input",39),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.Active,i)||(o.Active=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.getResourceYearlyHourList())}),e.k0s(),e.EFF(2," Active "),e.k0s()}if(2&s){const t=e.XpG();e.R7$(),e.R50("ngModel",t.Active)}}function ym(s,l){1&s&&e.nrm(0,"i",45)}function Sm(s,l){1&s&&e.nrm(0,"i",46)}function Dm(s,l){1&s&&(e.j41(0,"td")(1,"div",47)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",17)}function jm(s,l){if(1&s&&(e.j41(0,"tbody",40)(1,"tr"),e.nrm(2,"td"),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td"),e.EFF(32),e.k0s()()()),2&s){const t=l.$implicit,n=l.index;e.FS9("id",t.EmployeeID),e.R7$(4),e.JRh(n+1),e.R7$(2),e.JRh(t.ProjectName),e.R7$(2),e.JRh(t.DetailApril),e.R7$(2),e.JRh(t.DetailMay),e.R7$(2),e.JRh(t.DetailJune),e.R7$(2),e.JRh(t.DetailJuly),e.R7$(2),e.JRh(t.DetailAuguest),e.R7$(2),e.JRh(t.DetailSeptember),e.R7$(2),e.JRh(t.DetailOctomber),e.R7$(2),e.JRh(t.DetailNovember),e.R7$(2),e.JRh(t.DetailDecember),e.R7$(2),e.JRh(t.DetailJanuary),e.R7$(2),e.JRh(t.DetailFebruary),e.R7$(2),e.JRh(t.DetailMarch),e.R7$(2),e.JRh(t.Total)}}function bm(s,l){if(1&s&&(e.j41(0,"table",49)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5,"#"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Project"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Apr"),e.k0s(),e.j41(10,"th"),e.EFF(11,"May"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Jun"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Jul"),e.k0s(),e.j41(16,"th"),e.EFF(17,"Aug"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Sep"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Oct"),e.k0s(),e.j41(22,"th"),e.EFF(23,"Nov"),e.k0s(),e.j41(24,"th"),e.EFF(25,"Dec"),e.k0s(),e.j41(26,"th"),e.EFF(27,"Jan"),e.k0s(),e.j41(28,"th"),e.EFF(29,"Feb"),e.k0s(),e.j41(30,"th"),e.EFF(31,"Mar"),e.k0s(),e.j41(32,"th"),e.EFF(33,"Total"),e.k0s()()(),e.DNE(34,jm,33,16,"tbody",24),e.k0s()),2&s){const t=e.XpG(4);e.R7$(34),e.Y8G("ngForOf",t.EmployeeDetailHourslist)}}function Mm(s,l){if(1&s&&(e.j41(0,"td"),e.DNE(1,bm,35,1,"table",48),e.k0s()),2&s){const t=e.XpG(2).$implicit,n=e.XpG();e.BMQ("colspan",17),e.R7$(),e.Y8G("ngIf",t.EmployeeID===n.expandedEmployee)}}function Cm(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,Dm,4,1,"td",44)(2,Mm,2,2,"td",44),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("ngIf",t.EmployeeID===n.expandedEmployee&&n.EmployeeDetailCount<1),e.R7$(),e.Y8G("ngIf",t.EmployeeID===n.expandedEmployee&&n.EmployeeDetailCount>0)}}function km(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",40)(1,"tr")(2,"td",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.Collaps(i.EmployeeID))}),e.DNE(3,ym,1,0,"i",42)(4,Sm,1,0,"i",43),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td"),e.EFF(32),e.k0s(),e.j41(33,"td"),e.EFF(34),e.k0s(),e.j41(35,"td"),e.EFF(36),e.k0s()(),e.DNE(37,Cm,3,2,"tr",44),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.EmployeeID),e.R7$(3),e.Y8G("ngIf",t.EmployeeID!==i.expandedEmployee),e.R7$(),e.Y8G("ngIf",t.EmployeeID===i.expandedEmployee),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.EmployeeName),e.R7$(2),e.JRh(t.April),e.R7$(2),e.JRh(t.May),e.R7$(2),e.JRh(t.June),e.R7$(2),e.JRh(t.July),e.R7$(2),e.JRh(t.Auguest),e.R7$(2),e.JRh(t.September),e.R7$(2),e.JRh(t.Octomber),e.R7$(2),e.JRh(t.November),e.R7$(2),e.JRh(t.December),e.R7$(2),e.JRh(t.January),e.R7$(2),e.JRh(t.February),e.R7$(2),e.JRh(t.March),e.R7$(2),e.JRh(t.TotalHours),e.R7$(2),e.JRh(t.Avarage),e.R7$(),e.Y8G("ngIf",t.EmployeeID===i.expandedEmployee)}}let Im=(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.router=n,this.spinner=i,this.reportService=r,this.cookieService=a,this.DataEmit=new e.bkB,this.FinancialYear=0,this.FinancialYearList=[],this.columns=[],this.currentPageNumber=1,this.Active=!0,this.Designation=0,this.DesignationList=[],this.DepartmentList=[],this.Department=0,this.dropdownSettings={},this.selectedItems=[],this.selectedEmployee=[],this.employeedropdownSettings={},this.employeelist=[],this.EmployeeHourslist=[],this.EmployeeDetailHourslist=[],this.EmployeeCount=0,this.EmployeeDetailCount=0,this.expandedEmployee=0,this.filterModel=new Q,this.user=!1,this.TL=!1,this.datagrid=o,this.currentPageNumber=1,this.totalPages=0,this.totalRows=0,this.pageSize=15,this.sortDirection="ASC",this.sortExpression="Name",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.expandedEmployee=-1,2==this.currentUser.roleID&&(this.user=!0),4==this.currentUser.designationID&&(this.TL=!0),this.dropdownSettings={singleSelection:!1,idField:"designationID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.employeedropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetFinancialYear(),this.Getreportingemployee()},t),this.spinner.hide()}GetFinancialYear(){let t=new Q,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",t,{headers:n}).subscribe(o=>{this.expandedEmployee=0,this.FinancialYearList=o.financialYearDropdownModels,0==this.FinancialYear&&(this.FinancialYear=o.financialYear)})}Getreportingemployee(){let t=new Q,n=0;n=1==this.currentUser.designationID||2==this.currentUser.designationID||3==this.currentUser.designationID?0:this.currentUser.employeeID;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/Getreportingemployee?ReportingID="+n,t,{headers:i}).subscribe(r=>{this.employeelist=r,this.getResourceYearlyHourList()})}getResourceYearlyHourList(){this.spinner.show();let t=new Q;if(t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYearID=this.FinancialYear,t.Timesheet=this.Timesheet,t.ActualHours=this.ActualHours,t.Active=this.Active,t.Department=+this.Department,1==this.user)t.searchEmployee=this.currentUser.employeeID.toString();else{let o=this.router.parseUrl(this.router.url);if(null!=o.queryParams.filterModel){let r=JSON.parse(o.queryParams.filterModel);""!=r.searchEmployee&&null!=r.searchEmployee&&(t.searchEmployee=r.searchEmployee),""!=r.Designation&&null!=r.Designation&&(t.Designation=r.Designation)}else t.Designation=this.selectedItems.map(r=>r.designationID).join(","),t.searchEmployee=this.selectedEmployee.map(r=>r.id).join(",")}4==this.currentUser.designationID&&(t.searchEmployee=this.employeelist.map(o=>o.id).toString()),null==this.Active&&(this.Active=!0),this.filterModel=t;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetResourceYearlyHoursReport?IsActive="+this.Active,t,{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.DepartmentList=t.departmentDropdownModel,this.DesignationList=t.designationDropdownModel,1!=this.TL&&(this.employeelist=t.employeeDropdownModel),this.EmployeeHourslist=[],this.EmployeeHours=t.resourceMonthlyHoursModel,this.EmployeeCount=t.resourceMonthlyHoursModel.length,this.EmployeeHours.forEach(i=>{this.EmployeeHourslist.push({EmployeeID:i.id,EmployeeName:i.name,April:i.april,May:i.may,June:i.june,July:i.july,Auguest:i.august,September:i.september,Octomber:i.october,November:i.november,December:i.december,January:i.january,February:i.february,March:i.march,TotalHours:i.total,Avarage:i.average})}),this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}Collaps(t){0!=t&&(this.expandedEmployee=t===this.expandedEmployee?-1:t,this.EmployeeDetailHourslist=[],this.GetEmployeeDetailHourslist(t))}GetEmployeeDetailHourslist(t){this.spinner.show(),void 0===this.ActualHours&&(this.ActualHours=!1),void 0===this.Timesheet&&(this.Timesheet=!1);let n=new Q,i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetEmployeeAllMonthHoursDetails?EmployeeID="+t+"&FinancialYearID="+this.FinancialYear+"&IsActual="+this.ActualHours+"&Timesheet="+this.Timesheet,n,{headers:i}).subscribe(r=>{this.GetRowOnDetilSuccessList(r),this.spinner.hide()},r=>{this.GetRowOnDetilErrorList(r),this.spinner.hide()})}GetRowOnDetilSuccessList(t){this.EmployeeDetailHourslist=[],this.EmployeeDetailHours=t,this.EmployeeDetailCount=t.length,this.EmployeeDetailHours.forEach(n=>{let i={ProjectID:n.ID,ProjectName:n.name,DetailApril:n.april,DetailMay:n.may,DetailJune:n.june,DetailJuly:n.july,DetailAuguest:n.august,DetailSeptember:n.september,DetailOctomber:n.october,DetailNovember:n.november,DetailDecember:n.december,DetailJanuary:n.january,DetailFebruary:n.february,DetailMarch:n.march,Total:Math.round(n.april+n.may+n.june+n.july+n.august+n.september+n.october+n.november+n.december+n.january+n.february+n.march)};this.EmployeeDetailHourslist.push(i)})}GetRowOnDetilErrorList(t){this.runningSearch=!1}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}reset(){this.Search="",this.cookieService.delete("filterData"),this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.selectedEmployee=[],this.Timesheet=!1,this.ActualHours=!1,this.Active=!0,this.selectedItems=[],this.Department=0,this.Designation=0,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){""!=t&&(this.Department=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDesignation(t){""!=t&&(this.Designation=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.getResourceYearlyHourList()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.getResourceYearlyHourList()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.getResourceYearlyHourList()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(_),e.rXU(Z),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-resource-yearly-hours"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(rm,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.myInputVariable=o.first)}},outputs:{DataEmit:"DataEmit"},decls:72,vars:13,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body","annualtable"],["class","row",4,"ngIf"],["class","col-md-2 paddingbottom",4,"ngIf"],[1,"col-md-2","paddingbottom"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","paddingbottom"],[2,"margin-right","8px"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["style","margin-right: 8px;",4,"ngIf"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12","table-responsive","mt-2"],[1,"table","table-responsive-sm","table-striped"],[3,"id",4,"ngFor","ngForOf"],[3,"datagridEvent","rows","pageSize"],["size","medium",3,"type"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-user-following"],[1,"fa","fa-hourglass-half"],["name","multiSelectEmployee",3,"ngModelChange","placeholder","data","ngModel","settings"],[3,"value"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["type","checkbox","value","",3,"ngModelChange","change","ngModel"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],[1,"search_no_results"],["class","table table-responsive-sm table-striped client-width",4,"ngIf"],[1,"table","table-responsive-sm","table-striped","client-width"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resource Yearly Hours "),e.k0s()(),e.j41(8,"div",7),e.DNE(9,pm,23,20,"div",8),e.j41(10,"div",1),e.DNE(11,um,2,4,"div",9),e.j41(12,"div",10)(13,"select",11),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.j41(14,"option",12),e.EFF(15,"-- Financial Year --"),e.k0s(),e.DNE(16,mm,2,2,"option",13),e.k0s()(),e.DNE(17,fm,5,2,"div",9)(18,Am,2,4,"div",9),e.j41(19,"div",14)(20,"label",15)(21,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.Timesheet,r)||(i.Timesheet=r),r}),e.k0s(),e.EFF(22," Timesheet "),e.k0s(),e.j41(23,"label",15)(24,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.ActualHours,r)||(i.ActualHours=r),r}),e.k0s(),e.EFF(25," Actual "),e.k0s(),e.DNE(26,_m,3,1,"label",17),e.j41(27,"button",18),e.bIt("click",function(){return i.search()}),e.nrm(28,"i",19),e.k0s(),e.j41(29,"button",20),e.bIt("click",function(){return i.reset()}),e.nrm(30,"i",21),e.k0s()()(),e.j41(31,"div",1)(32,"div",22)(33,"table",23)(34,"thead")(35,"tr"),e.nrm(36,"th"),e.j41(37,"th"),e.EFF(38,"#"),e.k0s(),e.j41(39,"th"),e.EFF(40,"Employee"),e.k0s(),e.j41(41,"th"),e.EFF(42,"Apr"),e.k0s(),e.j41(43,"th"),e.EFF(44,"May"),e.k0s(),e.j41(45,"th"),e.EFF(46,"Jun"),e.k0s(),e.j41(47,"th"),e.EFF(48,"Jul"),e.k0s(),e.j41(49,"th"),e.EFF(50,"Aug"),e.k0s(),e.j41(51,"th"),e.EFF(52,"Sep"),e.k0s(),e.j41(53,"th"),e.EFF(54,"Oct"),e.k0s(),e.j41(55,"th"),e.EFF(56,"Nov"),e.k0s(),e.j41(57,"th"),e.EFF(58,"Dec"),e.k0s(),e.j41(59,"th"),e.EFF(60,"Jan"),e.k0s(),e.j41(61,"th"),e.EFF(62,"Feb"),e.k0s(),e.j41(63,"th"),e.EFF(64,"Mar"),e.k0s(),e.j41(65,"th"),e.EFF(66,"Total"),e.k0s(),e.j41(67,"th"),e.EFF(68,"Average"),e.k0s()()(),e.DNE(69,km,38,20,"tbody",24),e.k0s(),e.j41(70,"datagrid",25),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(71,"ngx-spinner",26)),2&n&&(e.R7$(9),e.Y8G("ngIf",1!=i.user&&1!=i.TL),e.R7$(2),e.Y8G("ngIf",1!=i.user),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(),e.Y8G("ngIf",1!=i.user&&1!=i.TL),e.R7$(),e.Y8G("ngIf",1!=i.user),e.R7$(3),e.R50("ngModel",i.Timesheet),e.R7$(3),e.R50("ngModel",i.ActualHours),e.R7$(2),e.Y8G("ngIf",1!=i.user),e.R7$(43),e.Y8G("ngForOf",i.EmployeeHourslist),e.R7$(),e.Y8G("rows",i.EmployeeHourslist)("pageSize",i.pageSize),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.Zm,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_],encapsulation:2})}return s})();const vm=["myInput"],De=()=>["active"],Em=()=>["/Reports/YearlyResourceHours"],Fm=()=>["/Reports/YearlyClientHours"],Tm=()=>["/Reports/AnnualBillableHours"],wm=()=>["/Reports/BillableProjectHours"],Pm=()=>["/Reports/MonthlyProjectHours"];function Rm(s,l){if(1&s&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Gm(s,l){1&s&&e.nrm(0,"i",37)}function Ym(s,l){1&s&&e.nrm(0,"i",38)}function Hm(s,l){1&s&&(e.j41(0,"td")(1,"div",39)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",17)}function Nm(s,l){if(1&s&&(e.j41(0,"tbody",32)(1,"tr"),e.nrm(2,"td"),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s()()()),2&s){const t=l.$implicit,n=l.index;e.FS9("id",t.EmployeeID),e.R7$(4),e.JRh(n+1),e.R7$(2),e.JRh(t.EmployeeName),e.R7$(2),e.JRh(t.DetailApril),e.R7$(2),e.JRh(t.DetailMay),e.R7$(2),e.JRh(t.DetailJune),e.R7$(2),e.JRh(t.DetailJuly),e.R7$(2),e.JRh(t.DetailAuguest),e.R7$(2),e.JRh(t.DetailSeptember),e.R7$(2),e.JRh(t.DetailOctomber),e.R7$(2),e.JRh(t.DetailNovember),e.R7$(2),e.JRh(t.DetailDecember),e.R7$(2),e.JRh(t.DetailJanuary),e.R7$(2),e.JRh(t.DetailFebruary),e.R7$(2),e.JRh(t.DetailMarch)}}function Lm(s,l){if(1&s&&(e.j41(0,"table",41)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5,"#"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Employee"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Apr"),e.k0s(),e.j41(10,"th"),e.EFF(11,"May"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Jun"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Jul"),e.k0s(),e.j41(16,"th"),e.EFF(17,"Aug"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Sep"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Oct"),e.k0s(),e.j41(22,"th"),e.EFF(23,"Nov"),e.k0s(),e.j41(24,"th"),e.EFF(25,"Dec"),e.k0s(),e.j41(26,"th"),e.EFF(27,"Jan"),e.k0s(),e.j41(28,"th"),e.EFF(29,"Feb"),e.k0s(),e.j41(30,"th"),e.EFF(31,"Mar"),e.k0s()()(),e.DNE(32,Nm,31,15,"tbody",28),e.k0s()),2&s){const t=e.XpG(4);e.R7$(32),e.Y8G("ngForOf",t.clientDetailHourslist)}}function Bm(s,l){if(1&s&&(e.j41(0,"td"),e.DNE(1,Lm,33,1,"table",40),e.k0s()),2&s){const t=e.XpG(2).$implicit,n=e.XpG();e.BMQ("colspan",17),e.R7$(),e.Y8G("ngIf",t.ClientID===n.expandedClient)}}function Um(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,Hm,4,1,"td",36)(2,Bm,2,2,"td",36),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("ngIf",t.ClientID===n.expandedClient&&n.clientDetailCount<1),e.R7$(),e.Y8G("ngIf",t.ClientID===n.expandedClient&&n.clientDetailCount>0)}}function Vm(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",32)(1,"tr")(2,"td",33),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.Collaps(i.ClientID))}),e.DNE(3,Gm,1,0,"i",34)(4,Ym,1,0,"i",35),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td"),e.EFF(32),e.k0s(),e.j41(33,"td"),e.EFF(34),e.k0s(),e.j41(35,"td"),e.EFF(36),e.k0s()(),e.DNE(37,Um,3,2,"tr",36),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.ClientID),e.R7$(3),e.Y8G("ngIf",t.ClientID!==i.expandedClient),e.R7$(),e.Y8G("ngIf",t.ClientID===i.expandedClient),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.ClientName),e.R7$(2),e.JRh(t.April),e.R7$(2),e.JRh(t.May),e.R7$(2),e.JRh(t.June),e.R7$(2),e.JRh(t.July),e.R7$(2),e.JRh(t.Auguest),e.R7$(2),e.JRh(t.September),e.R7$(2),e.JRh(t.Octomber),e.R7$(2),e.JRh(t.November),e.R7$(2),e.JRh(t.December),e.R7$(2),e.JRh(t.January),e.R7$(2),e.JRh(t.February),e.R7$(2),e.JRh(t.March),e.R7$(2),e.JRh(t.TotalHours),e.R7$(2),e.JRh(t.Avarage),e.R7$(),e.Y8G("ngIf",t.ClientID===i.expandedClient)}}let xm=(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.router=n,this.spinner=i,this.reportService=r,this.cookieService=a,this.DataEmit=new e.bkB,this.FinancialYear=0,this.FinancialYearList=[],this.columns=[],this.currentPageNumber=1,this.clientHourslist=[],this.clientDetailHourslist=[],this.clientCount=0,this.clientDetailCount=0,this.expandedClient=0,this.datagrid=o,this.currentPageNumber=1,this.totalPages=0,this.totalRows=0,this.pageSize=15,this.sortDirection="ASC",this.sortExpression="Name",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.expandedClient=-1,this.spinner.show(),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetFinancialYear()},t),this.spinner.hide()}GetFinancialYear(){let t=new Q,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",t,{headers:n}).subscribe(o=>{this.expandedClient=0,this.FinancialYearList=o.financialYearDropdownModels,0==this.FinancialYear&&(this.FinancialYear=o.financialYear),this.GetClientYearlyHourList()})}GetClientYearlyHourList(){this.spinner.show();let t=new Q;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYearID=this.FinancialYear;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetClientYearlyHoursReport",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.datagrid.databind(n),this.clientHourslist=[],this.ClientHours=t.resourceMonthlyHoursModel,this.clientCount=t.resourceMonthlyHoursModel.length,this.ClientHours.forEach(i=>{this.clientHourslist.push({ClientID:i.id,ClientName:i.name,April:i.april,May:i.may,June:i.june,July:i.july,Auguest:i.august,September:i.september,Octomber:i.october,November:i.november,December:i.december,January:i.january,February:i.february,March:i.march,TotalHours:i.total,Avarage:i.average})}),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}Collaps(t){0!=t&&(this.expandedClient=t===this.expandedClient?-1:t,this.clientDetailHourslist=[],this.GetClientHoursDetailList(t))}GetClientHoursDetailList(t){this.spinner.show();let n=new Q,i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetClientAllMonthHoursDetails?ClientID="+t+"&FinancialYearID="+this.FinancialYear,n,{headers:i}).subscribe(r=>{this.GetRowOnDetilSuccessList(r),this.spinner.hide()},r=>{this.GetRowOnDetilErrorList(r),this.spinner.hide()})}GetRowOnDetilSuccessList(t){this.clientDetailHourslist=[],this.ClientDetailHours=t,this.clientDetailCount=t.length,this.ClientDetailHours.forEach((n,i)=>{this.clientDetailHourslist.push({EmployeeID:n.ID,EmployeeName:n.name,DetailApril:n.april,DetailMay:n.may,DetailJune:n.june,DetailJuly:n.july,DetailAuguest:n.august,DetailSeptember:n.september,DetailOctomber:n.october,DetailNovember:n.november,DetailDecember:n.december,DetailJanuary:n.january,DetailFebruary:n.february,DetailMarch:n.march})})}GetRowOnDetilErrorList(t){this.runningSearch=!1}search(){this.currentPageNumber=1,this.delaySearch=!1,this.expandedClient=0,this.clearFilterUrl(),this.executeSearch()}reset(){this.Search="",this.cookieService.delete("filterData"),this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.GetClientYearlyHourList()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.GetClientYearlyHourList()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.GetClientYearlyHourList()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(_),e.rXU(Z),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-yearly-hours"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(vm,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.myInputVariable=o.first)}},outputs:{DataEmit:"DataEmit"},decls:86,vars:28,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-user-following"],[1,"nav-link",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search Client",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12","table-responsive","mt-2"],[1,"table","table-responsive-sm","table-striped"],[3,"id",4,"ngFor","ngForOf"],[3,"datagridEvent","rows","pageSize","ShowProjStatus"],["size","medium",3,"type"],[3,"value"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],[1,"search_no_results"],["class","table table-responsive-sm table-striped client-width",4,"ngIf"],[1,"table","table-responsive-sm","table-striped","client-width"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Client Yearly Hours "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," Resource Yearly Hours "),e.k0s()(),e.j41(16,"li",10)(17,"a",13),e.nrm(18,"i",14),e.EFF(19," Client Yearly Hours "),e.k0s()(),e.j41(20,"li",10)(21,"a",15),e.nrm(22,"i",12),e.EFF(23," Project Wise Hours "),e.k0s()(),e.j41(24,"li",10)(25,"a",11),e.nrm(26,"i",14),e.EFF(27," User wise Hours "),e.k0s()(),e.j41(28,"li",10)(29,"a",15),e.nrm(30,"i",16),e.EFF(31," Month Wise Hours "),e.k0s()()()()(),e.j41(32,"div",1)(33,"div",17)(34,"input",18),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(35,"div",17)(36,"select",19),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.j41(37,"option",20),e.EFF(38,"-- Financial Year --"),e.k0s(),e.DNE(39,Rm,2,2,"option",21),e.k0s()(),e.j41(40,"div",17)(41,"button",22),e.bIt("click",function(){return i.search()}),e.nrm(42,"i",23),e.k0s(),e.j41(43,"button",24),e.bIt("click",function(){return i.reset()}),e.nrm(44,"i",25),e.k0s()()(),e.j41(45,"div",1)(46,"div",26)(47,"table",27)(48,"thead")(49,"tr"),e.nrm(50,"th"),e.j41(51,"th"),e.EFF(52,"#"),e.k0s(),e.j41(53,"th"),e.EFF(54,"Client"),e.k0s(),e.j41(55,"th"),e.EFF(56,"Apr"),e.k0s(),e.j41(57,"th"),e.EFF(58,"May"),e.k0s(),e.j41(59,"th"),e.EFF(60,"Jun"),e.k0s(),e.j41(61,"th"),e.EFF(62,"Jul"),e.k0s(),e.j41(63,"th"),e.EFF(64,"Aug"),e.k0s(),e.j41(65,"th"),e.EFF(66,"Sep"),e.k0s(),e.j41(67,"th"),e.EFF(68,"Oct"),e.k0s(),e.j41(69,"th"),e.EFF(70,"Nov"),e.k0s(),e.j41(71,"th"),e.EFF(72,"Dec"),e.k0s(),e.j41(73,"th"),e.EFF(74,"Jan"),e.k0s(),e.j41(75,"th"),e.EFF(76,"Feb"),e.k0s(),e.j41(77,"th"),e.EFF(78,"Mar"),e.k0s(),e.j41(79,"th"),e.EFF(80,"Total"),e.k0s(),e.j41(81,"th"),e.EFF(82,"Average"),e.k0s()()(),e.DNE(83,Vm,38,20,"tbody",28),e.k0s(),e.j41(84,"datagrid",29),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()(),e.nrm(85,"ngx-spinner",30),e.k0s()),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(18,De))("routerLink",e.lJ4(19,Em)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(20,De))("routerLink",e.lJ4(21,Fm)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(22,De))("routerLink",e.lJ4(23,Tm)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(24,De))("routerLink",e.lJ4(25,wm)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(26,De))("routerLink",e.lJ4(27,Pm)),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(44),e.Y8G("ngForOf",i.clientHourslist),e.R7$(),e.Y8G("rows",i.ClientHours)("pageSize",i.pageSize)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})();const Qm=["myInput"];function Om(s,l){if(1&s&&(e.j41(0,"option",19),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}let Jm=(()=>{class s{constructor(t,n,i,o,r){this.http=t,this.router=n,this.spinner=i,this.cookieService=r,this.DataEmit=new e.bkB,this.FinancialYear=0,this.FinancialYearList=[],this.columns=[],this.datagrid=o,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.columns.push(new h("month","Month",'[{"width": "10%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("april","April",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("may","May",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("june","June",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("july","July",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("august","August",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("september","September",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("october","October",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("november","November",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("december","December",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("january","January",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("february","February",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.columns.push(new h("march","March",'[{"width": "5%" ,"hyperLink": false,"textAlign":"right","disableSorting": true}]')),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetFinancialYear()},t),this.spinner.hide()}GetFinancialYear(){this.spinner.show();let t=new Q,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",t,{headers:n}).subscribe(o=>{this.FinancialYearList=o.financialYearDropdownModels,0==this.FinancialYear&&(this.FinancialYear=o.financialYear),this.GetProductivityReport()},o=>{this.getRowOnError(o),this.spinner.hide()})}GetProductivityReport(){this.spinner.show();let t=new Q;t.FinancialYearID=this.FinancialYear;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetProductivityReport?FinancialYearID="+this.FinancialYear,t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){this.yearlyResourHoursReportModel=t,this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}search(){this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}reset(){this.cookieService.delete("filterData"),this.FinancialYear=0,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(_),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-productivity-report"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Qm,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.myInputVariable=o.first)}},outputs:{DataEmit:"DataEmit"},decls:24,vars:7,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[3,"rows","columns","Productivity","ShowProjStatus"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Productivity Report "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"select",9),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.j41(12,"option",10),e.EFF(13,"-- Financial Year --"),e.k0s(),e.DNE(14,Om,2,2,"option",11),e.k0s()(),e.j41(15,"div",8)(16,"button",12),e.bIt("click",function(){return i.search()}),e.nrm(17,"i",13),e.k0s(),e.j41(18,"button",14),e.bIt("click",function(){return i.reset()}),e.nrm(19,"i",15),e.k0s()()(),e.j41(20,"div",1)(21,"div",16),e.nrm(22,"datagrid",17),e.k0s()()()()()()(),e.nrm(23,"ngx-spinner",18)),2&n&&(e.R7$(11),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(8),e.Y8G("rows",i.yearlyResourHoursReportModel)("columns",i.columns)("Productivity",!1)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,c.xH,c.y7,c.wz,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})(),$m=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.employeeService=i,this.router=o,this.spinner=r,this.cookieService=a,this.toastyService=d,this.columns=[],this.clientlistProjectWise=[],this.FinancialYear=0,this.clientCount=0,this.datagrid=n,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Project?this.EmployeeID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.Project):(this.IsEdit=JSON.parse(t.queryParams.isEdit),this.EmployeeID=t.queryParams.id,this.EmployeeName=t.queryParams.name,this.filterModel=t.queryParams.filterModel,this.FinancialYear=+t.queryParams.FinancialYear),this.columns.push(new h("clientName","Client Name",'[{"width": "50%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("projectName","Project Name",'[{"width": "50%" ,"hyperLink": false, "disableSorting": true}]')),this.GetClientWiseProjectlist(),this.spinner.hide()}clearInputdata(){1==this.IsEdit?this.router.navigate(["/Master/Employee"],{queryParams:{id:this.EmployeeID,FinancialYear:this.FinancialYear,filterModel:this.filterModel},skipLocationChange:!0}):this.router.navigate(["/Master/EmployeeList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}gettoken(){return this.currentUser.authtoken}GetClientWiseProjectlist(){this.spinner.show();let t=new Ct,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Employee/GetClientwiseProject?EmployeeID="+this.EmployeeID,t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){this.clientlistProjectWise=[],this.clientwiseProject=t,this.clientCount=t.length,this.clientwiseProject.forEach((n,i)=>{let o=t.filter(d=>d.clientID==n.clientID),r=[];if(n.projectID.indexOf("|")>-1){let d=n.projectID.split("|"),g=n.projectName.split("|");for(let y=0;y<d.length;y++)r.push({projectId:d[y],projectName:g[y]})}else r.push({projectId:n.projectID,projectName:n.projectName});this.clientlistProjectWise.push({ClientID:n.clientID,ClientName:n.clientName,projectcount:o.length,Data:r})}),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}RemoveProject(t,n){var i=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to remove this resource from this project?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){i.DeleteProject(t,n)}},cancel:function(){}}})}DeleteProject(t,n){this.employeeService.deleteProjectFromResource(t,this.EmployeeID,n).subscribe(i=>{this.deleteOnSuccess(i)},i=>{this.deleteOnError(i)})}deleteOnSuccess(t){1==t?(this.GetClientWiseProjectlist(),this.toastyService.success("Project deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(J),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-wise-project"]],features:[e.Jv_([J])],decls:16,vars:2,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right",2,"display","flex"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-12"],["size","medium",3,"type"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(10,"i",9),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",10)(13,"div",1),e.nrm(14,"div",11),e.k0s()()()()()(),e.nrm(15,"ngx-spinner",12)),2&n&&(e.R7$(7),e.SpI(" ",i.EmployeeName," - Client wise project "),e.R7$(8),e.Y8G("type",i.typeSelected))},dependencies:[D.et],encapsulation:2})}return s})();function zm(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",66)(1,"button",67),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.BackToTimesheet())}),e.nrm(2,"i",68),e.EFF(3," Back To List "),e.k0s(),e.j41(4,"button",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showTimeSheetForm())}),e.nrm(5,"i",70),e.k0s()()}}function Xm(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function qm(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Km(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}function Wm(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Zm(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.technologyID),e.R7$(),e.SpI(" ",t.name," ")}}function eg(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function tg(s,l){1&s&&(e.j41(0,"div",72),e.EFF(1,"Month is required"),e.k0s())}function ig(s,l){if(1&s&&(e.j41(0,"option",71),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function ng(s,l){1&s&&(e.j41(0,"div",72),e.EFF(1,"Month is required"),e.k0s())}let og=(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.spinner=n,this.router=o,this.monthlyTimeSheetService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.title="Monthly Time Sheet",this.columns=[],this.FinancialYear=0,this.FinancialYearList=[],this.EmployeeList=[],this.alerts=[],this.CopyProjectID=0,this.currentPageNumber=1,this.Project="",this.DepTechnologyList=[],this.TechnologyList=[],this.Technology=0,this.ClientList=[],this.Client=0,this.ProjectTypeList=[],this.ProjectType=0,this.MonthList=[],this.CopyMonths=0,this.pageTotal=0,this.DepartmentList=[],this.Department=0,this.result=[],this.AddAccess=!0,this.selectedItems=[],this.dropdownSettings={},this.filterModel=new W,this.datagrid=i,this.typeSelected="timer",this.currentPageNumber=1,this.autoFilter=!0,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="DESC",this.sortExpression="Month",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show(),"BDM"==this.currentUser.designation&&(this.AddAccess=!1),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0};let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Months&&(this.Months=+t.queryParams.Months),null!=t.queryParams.clientID&&(this.Client=+t.queryParams.clientID),null!=t.queryParams.FinancialYear&&(this.FinancialYear=+t.queryParams.FinancialYear),null!=t.queryParams.clientName&&(this.ClientName=t.queryParams.clientName),null!=t.queryParams.ProjectType&&(this.ProjectType=t.queryParams.ProjectType),null!=t.queryParams.Department&&(this.Department=t.queryParams.Department),null!=t.queryParams.Technology&&(this.Technology=t.queryParams.Technology),null!=t.queryParams.Months&&(this.Months=t.queryParams.Months,this.getMonthNumberFromName(this.Months)),this.columns.push(new h("month","Month",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "15%" , "hyperLink": true,"disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("technology","Technology",'[{"width": "10%" ,"hyperLink": false, "disableSorting": false}]')),1==this.showColumn&&(this.columns.push(new h("client","Client",'[{"width": "8%" ,"hyperLink":true, "disableSorting": false}]')),this.columns.push(new h("flow","Flow",'[{"width": "6%" ,"hyperLink": true, "disableSorting": true}]'))),this.columns.push(new h("pm","PM",'[{"width": "7%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("pmHours","PM/PL",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("tlHours","TL",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("developerHours","Developer",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designerHours","Designer",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("qaHours","QA",'[{"width": "4%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("totalHours","Total",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("Action","Action",'[{"width": "8%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.fillFilterModel(),this.executeSearch(),this.spinner.hide()}getMonthNumberFromName(t){this.Months=new Date(`${t} 1, 2022`).getMonth()+1}fillFilterModel(){let t=this.router.parseUrl(this.router.url);setTimeout(()=>{this.getCookiesFilterData(t.queryParams.filterModel)},500)}showTimeSheetForm(){this.router.navigate(["/SmartDesk/MonthlyTimeSheet"])}BackToTimesheet(){return this.router.navigate(["/SmartDesk/MonthlyTimeSheetList"],{queryParams:{FinancialYear:this.FinancialYear,ProjectType:this.ProjectType,department:this.Department,Technology:this.Technology},skipLocationChange:!0})}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.getTimeSheetList()},t),this.spinner.hide()}DeleteTimeSheet(t){this.spinner.show(),this.monthlyTimeSheetService.deleteMonthlyTimeSheet(t,this.currentUser.employeeID).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}gettoken(){return this.currentUser.authtoken}getTimeSheetList(){this.spinner.show();let t=new W;t.search=this.Project,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=+this.FinancialYear,t.month=+this.Months,t.ProjectType=+this.ProjectType,t.Technology=+this.Technology,t.Client=+this.Client,t.Department=+this.Department,t.CompanyID=+this.currentUser.companyID;let n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){let r=new W;r=JSON.parse(n.queryParams.filterModel),""!=r.EmployeeID&&null!=r.EmployeeID&&(t.EmployeeID=r.EmployeeID)}else t.EmployeeID=this.selectedItems.map(r=>r.id).join(",");this.filterModel=t;let i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/MonthlyTimeSheet/GetMonthlyTimeSheetList",t,{headers:i}).subscribe(r=>{this.getRowOnSuccess(r),this.spinner.hide()},r=>{this.getRowOnError(r),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("TimeSheet deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error(`Error : ${t}`,"Error")}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYear=t.financialYear,this.CopyFinancialYear=t.financialYear,this.pageTotal=0,t.monthlyTimeSheetListModel.forEach(i=>{i.totalHours=0,i.totalHours=i.pmHours+i.tlHours+i.developerHours+i.designerHours+i.qaHours,this.pageTotal=this.pageTotal+i.totalHours}),this.monthlyTimeSheetViewModels=t.monthlyTimeSheetListModel,this.FinancialYearList=t.financialYearDropdownModel,t.financialYearDropdownModel.forEach(i=>{i.financialYearID==t.financialYear&&(this.CurrentYear=i.name)}),this.EmployeeList=t.employeeDropdownModel,this.TechnologyList=t.technologyDropdownModel,this.ClientList=t.clientDropdownModel,this.MonthList=t.months,this.ProjectTypeList=t.projectTypeDropdownModel,this.DepartmentList=t.departmentDropdownModel,this.result=t.timeSheetTotalHoursModel,this.DepTechnologyList=this.TechnologyList.filter(i=>i.departmentID==this.Department),this.datagrid.databind(n),this.runningSearch=!1,this.fillFilterModel()}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;if("PagingEvent"==n.EventType)this.pagingRow(n.CurrentPageNumber);else if("PageSizeChanged"==n.EventType)this.pageSizeChanged(n.PageSize);else if("ItemSelected"==n.EventType)this.selectedRow(n.ItemSelected);else if("ButtonClicked"==n.EventType)this.selectedRowForEditDelete(n.ItemSelected);else if("Sorting"==n.EventType)this.sortRow(n.SortDirection,n.SortExpression);else if("ItemRedirect"==n.EventType)this.selectedRowRedirect(n.ItemSelected,n.header);else if("ItemSelectedForCopy"==n.EventType){let o=this.monthlyTimeSheetViewModels[n.ItemSelected];this.CopyID=o.monthlyTimeSheetID,this.CopyProjectName=o.project,this.CopyProjectID=o.projectID}}selectedRowForEditDelete(t){let i=this.monthlyTimeSheetViewModels[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this timesheet?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeleteTimeSheet(i.monthlyTimeSheetID)}},cancel:function(){}}})}selectedRow(t){let i=this.monthlyTimeSheetViewModels[t];return this.router.navigate(["/SmartDesk/MonthlyTimeSheet"],{queryParams:{id:i.monthlyTimeSheetID,projectType:i.projectType,clientID:i.clientID,Client:i.client,filterModel:JSON.stringify(this.filterModel)},skipLocationChange:!0})}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.Project="",this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.EmployeeID=[],this.selectedItems=[],this.Months=0,this.ProjectType=0,this.Technology=0,this.Department=0,this.clearFilterUrl(),this.executeSearch()}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){0!=this.autoFilter&&""!=t&&(this.Project=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){0!=this.autoFilter&&""!=t&&(this.FinancialYear=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}ShowHideColumn(t){this.showColumn=t,this.columns=[],this.ngOnInit()}SearchMonth(t){0!=this.autoFilter&&""!=t&&(this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchProjectType(t){0!=this.autoFilter&&""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchTechnology(t){0!=this.autoFilter&&""!=t&&(this.Technology=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchClient(t){0!=this.autoFilter&&""!=t&&(this.Client=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){0!=this.autoFilter&&""!=t&&(this.Department=t,this.DepTechnologyList=this.TechnologyList.filter(n=>n.departmentID==t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}selectedRowRedirect(t,n){let i=n,r=this.monthlyTimeSheetViewModels[t];return"Project"==i?this.router.navigate(["/Master/ProjectList"],{queryParams:{search:r.project},skipLocationChange:!0}):"Client"==i?this.router.navigate(["/Master/ClientList"],{queryParams:{search:r.client},skipLocationChange:!0}):"Flow"==i?this.router.navigate(["/Master/EmployeeList"]):void 0}getCookiesFilterData(t){if(""!=t&&null!=t&&(t=JSON.parse(t),this.Project=t.Project,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,t.Month>0&&t.FinancialYear>0&&(this.Months=t.Month,this.FinancialYear=t.FinancialYear),this.ProjectType=t.ProjectType,this.Technology=t.Technology,this.Client=t.Client,this.Department=t.Department,this.currentUser.companyID=t.CompanyID,""!=t.EmployeeID&&null!=t.EmployeeID)){let n=[];t.EmployeeID.split(",").forEach(o=>{n.push(this.EmployeeList.find(r=>r.id===parseInt(o)))}),this.selectedItems=n}}Closepopup(){(" "+document.getElementById("CopyModal").className+" ").indexOf(" show ")>-1&&document.getElementById("openCopyModalButton").click()}CopyTimeSheet(t=""){this.monthlyTimeSheetService.CheckTimeSheetExists(this.CopyProjectID,this.CopyFinancialYear,this.CopyMonths,0).subscribe(n=>{0==n&&0!=this.CopyMonths&&0!=this.CopyFinancialYear?this.monthlyTimeSheetService.CopyMonthlyHours(this.CopyFinancialYear,this.CopyMonths,this.CopyID).subscribe(i=>{i>0?(this.executeSearch(),(" "+document.getElementById("CopyModal").className+" ").indexOf(" show ")>-1&&document.getElementById("openCopyModalButton").click(),this.toastyService.success("Monthly hours copied successfully.","Copy Monthly hours")):this.toastyService.error("Something error.","Copy Monthly hours")}):this.toastyService.warning("Monthly hours already exists for this month.","Check Monthly hours")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(D.ex),e.rXU(_),e.rXU(f.Ix),e.rXU(V),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-client-timesheetlist"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([V])],decls:137,vars:39,consts:[["CopyModal","bs-modal"],["f","ngForm"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],["class","pull-right",4,"ngIf"],[1,"card-body"],[1,"col-sm-6","col-lg-4"],[1,"card-body","p-0"],[1,"col-6","pr-0"],[1,"bg-primary","text-center","p-2"],[1,"icon-speedometer","bg-primary","font-2xl"],[1,"text-uppercase","font-weight-bold","small","bg-primary"],[1,"col-6","bg-light"],[1,"text-center","p-2"],[1,"text-value-sm","text-primary"],[1,"text-muted","text-uppercase","font-weight-bold","small"],[1,"col-sm-6","col-lg-8"],[1,"brand-card"],[1,"brand-card-body"],[1,"text-value"],[1,"text-uppercase","text-muted","small"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Technology","id","Technology",1,"form-control",3,"ngModelChange","ngModel"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[1,"checkbox","pull-right"],["tooltip","if check-box checked then grid will filter on text type","placement","bottom"],["type","checkbox","value","",3,"ngModelChange","ngModel"],["tooltip","if check-box checked then display all columns","placement","bottom"],[3,"datagridEvent","rows","columns","pageSize","ShowFooter","Total"],["id","CopyModal","bsModal","","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-primary"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["action","","method","post","novalidate","",1,"form-horizontal",3,"ngSubmit"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12","row"],[1,"col-md-4","col-form-label","required"],[1,"col-md-6"],["name","CopyFinancialYear","id","CopyFinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["name","CopyMonths","id","CopyMonths",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],["size","medium",3,"type"],[1,"pull-right"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[3,"value"],[1,"error"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),e.nrm(6,"i",8),e.EFF(7),e.k0s(),e.DNE(8,zm,6,0,"div",9),e.k0s(),e.j41(9,"div",10)(10,"div",3)(11,"div",11)(12,"div",5)(13,"div",12)(14,"div",3)(15,"div",13)(16,"div",14),e.nrm(17,"i",15),e.j41(18,"div",16),e.EFF(19),e.k0s()()(),e.j41(20,"div",17)(21,"div",18)(22,"div",19),e.EFF(23),e.k0s(),e.j41(24,"div",20),e.EFF(25,"Total"),e.k0s()()()()()()(),e.j41(26,"div",21)(27,"div",22)(28,"div",23)(29,"div")(30,"div",24),e.EFF(31),e.k0s(),e.j41(32,"div",25),e.EFF(33,"PM/PL"),e.k0s()(),e.j41(34,"div")(35,"div",24),e.EFF(36),e.k0s(),e.j41(37,"div",25),e.EFF(38,"TL"),e.k0s()(),e.j41(39,"div")(40,"div",24),e.EFF(41),e.k0s(),e.j41(42,"div",25),e.EFF(43,"Developer"),e.k0s()(),e.j41(44,"div")(45,"div",24),e.EFF(46),e.k0s(),e.j41(47,"div",25),e.EFF(48,"Designer"),e.k0s()(),e.j41(49,"div")(50,"div",24),e.EFF(51),e.k0s(),e.j41(52,"div",25),e.EFF(53,"QA"),e.k0s()()()()()(),e.j41(54,"div",3)(55,"div",26)(56,"input",27),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Project,a)||(i.Project=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(57,"div",26)(58,"select",28),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchYear(a))}),e.DNE(59,Xm,2,2,"option",29),e.k0s()(),e.j41(60,"div",26)(61,"select",30),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Months,a)||(i.Months=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchMonth(a))}),e.j41(62,"option",31),e.EFF(63,"-- Month --"),e.k0s(),e.DNE(64,qm,2,2,"option",29),e.k0s()(),e.j41(65,"div",26)(66,"select",32),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.ProjectType,a)||(i.ProjectType=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchProjectType(a))}),e.j41(67,"option",31),e.EFF(68,"-- Project Type --"),e.k0s(),e.DNE(69,Km,2,2,"option",29),e.k0s()(),e.j41(70,"div",26)(71,"select",33),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Department,a)||(i.Department=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchDepartment(a))}),e.j41(72,"option",31),e.EFF(73,"-- Department --"),e.k0s(),e.DNE(74,Wm,2,2,"option",29),e.k0s()(),e.j41(75,"div",26)(76,"select",34),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Technology,a)||(i.Technology=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchTechnology(a))}),e.j41(77,"option",31),e.EFF(78,"-- Technology --"),e.k0s(),e.DNE(79,Zm,2,2,"option",29),e.k0s()(),e.j41(80,"div",26)(81,"ng-multiselect-dropdown",35),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.selectedItems,a)||(i.selectedItems=a),e.Njj(a)}),e.k0s()(),e.j41(82,"div",26)(83,"button",36),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(84,"i",37),e.k0s(),e.j41(85,"button",38),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(86,"i",39),e.k0s()(),e.nrm(87,"div",26),e.k0s(),e.j41(88,"div",3)(89,"div",40)(90,"div",41)(91,"label",42)(92,"input",43),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.autoFilter,a)||(i.autoFilter=a),e.Njj(a)}),e.k0s(),e.EFF(93," Auto Filter "),e.k0s(),e.j41(94,"label",44)(95,"input",43),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.showColumn,a)||(i.showColumn=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.ShowHideColumn(a))}),e.k0s(),e.EFF(96," Show Column "),e.k0s()()()(),e.j41(97,"div",3)(98,"div",40)(99,"datagrid",45),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.j41(100,"div",46,0)(102,"div",47)(103,"div",48)(104,"div",49)(105,"h4",50),e.EFF(106),e.k0s(),e.j41(107,"button",51),e.bIt("click",function(){return e.eBV(o),e.Njj(i.Closepopup())}),e.j41(108,"span",52),e.EFF(109,"\xd7"),e.k0s()()(),e.j41(110,"form",53,1),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(111);return e.Njj(a.form.valid&&0!=i.CopyFinancialYear&&0!=i.CopyMonths&&i.CopyTimeSheet(a))}),e.j41(112,"div",54)(113,"div",55)(114,"div",56)(115,"label",57),e.EFF(116,"Financial Year"),e.k0s(),e.j41(117,"div",58)(118,"select",59),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.CopyFinancialYear,a)||(i.CopyFinancialYear=a),e.Njj(a)}),e.DNE(119,eg,2,2,"option",29),e.k0s(),e.DNE(120,tg,2,0,"div",60),e.k0s()()(),e.j41(121,"div",55)(122,"div",56)(123,"label",57),e.EFF(124,"Month"),e.k0s(),e.j41(125,"div",58)(126,"select",61),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.CopyMonths,a)||(i.CopyMonths=a),e.Njj(a)}),e.j41(127,"option",31),e.EFF(128,"-- Month --"),e.k0s(),e.DNE(129,ig,2,2,"option",29),e.k0s(),e.DNE(130,ng,2,0,"div",60),e.k0s()()()(),e.j41(131,"div",62)(132,"button",63),e.EFF(133,"Submit"),e.k0s(),e.j41(134,"button",64),e.bIt("click",function(){return e.eBV(o),e.Njj(i.Closepopup())}),e.EFF(135,"Cancel"),e.k0s()()()()()(),e.nrm(136,"ngx-spinner",65)}if(2&n){const o=e.sdS(111);e.R7$(7),e.SpI(" ",i.ClientName," - Monthly Hours "),e.R7$(),e.Y8G("ngIf",i.AddAccess),e.R7$(11),e.SpI(" ",i.CurrentYear,""),e.R7$(4),e.JRh(i.result.totalHours),e.R7$(8),e.JRh(i.result.pmTotalHours),e.R7$(5),e.JRh(i.result.tlTotalHours),e.R7$(5),e.JRh(i.result.developerTotalHours),e.R7$(5),e.JRh(i.result.designerTotalHours),e.R7$(5),e.JRh(i.result.qaTotalHours),e.R7$(5),e.R50("ngModel",i.Project),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Technology),e.R7$(3),e.Y8G("ngForOf",i.DepTechnologyList),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.EmployeeList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(11),e.R50("ngModel",i.autoFilter),e.R7$(3),e.R50("ngModel",i.showColumn),e.R7$(4),e.Y8G("rows",i.monthlyTimeSheetViewModels)("columns",i.columns)("pageSize",i.pageSize)("ShowFooter",!0)("Total",i.pageTotal),e.R7$(7),e.SpI("Copy ",i.CopyProjectName," Hours"),e.R7$(12),e.R50("ngModel",i.CopyFinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.CopyFinancialYear&&0==i.CopyFinancialYear),e.R7$(6),e.R50("ngModel",i.CopyMonths),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(),e.Y8G("ngIf",o.submitted&&0==i.CopyMonths),e.R7$(6),e.Y8G("type",i.typeSelected)}},dependencies:[u.Sq,u.bT,c.qT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.cb,c.vS,c.cV,B.hZ,E.dg,D.et,w.b,_],encapsulation:2})}return s})();class Oe extends C{}function sg(s,l){1&s&&(e.j41(0,"span"),e.EFF(1," Holiday name is required "),e.k0s())}function rg(s,l){if(1&s&&(e.j41(0,"span",25),e.DNE(1,sg,2,0,"span",26),e.k0s()),2&s){e.XpG();const t=e.sdS(15);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function ag(s,l){1&s&&e.nrm(0,"span",25)}function lg(s,l){1&s&&(e.j41(0,"span",25),e.EFF(1,"From date is required"),e.k0s())}function cg(s,l){1&s&&(e.j41(0,"span",25),e.EFF(1,"To date is required"),e.k0s())}function hg(s,l){1&s&&(e.j41(0,"span",25),e.EFF(1," To date should be greater than from date. "),e.k0s())}function dg(s,l){1&s&&e.nrm(0,"img",27)}let pg=(()=>{class s{constructor(t,n,i){this.masterService=t,this.datePipe=n,this.toastyService=i,this.SaveSuccess=new e.bkB,this.publicHolidayViewModel={publicHolidayID:0,holidayName:"",fromDate:"",toDate:"",day:0},this.loading=!1,this.dpConfig=new k.iP,this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]}),this.masterService.PublicHolidayData.subscribe(o=>{this.publicHolidayViewModel.publicHolidayID=o.publicHolidayID,this.publicHolidayViewModel.holidayName=o.holidayName,this.fromDate=o.fromDate,this.toDate=o.toDate,this.publicHolidayViewModel.day=o.day})}ngOnInit(){}resetFormInputs(){this.masterService.PublicHolidayData.next({publicHolidayID:0,holidayName:"",fromDate:"",toDate:"",day:0}),document.getElementById("Holidayreset").click()}savePublicHoliday(t=null){if(this.publicHolidayViewModel.holidayName.length>0){null===this.publicHolidayViewModel.publicHolidayID&&(this.publicHolidayViewModel.publicHolidayID=0);var n="string"==typeof this.fromDate?this.fromDate.split("-"):"",i="string"==typeof this.fromDate?new Date(+n[2],+n[1]-1,+n[0]):new Date,o=this.fromDate&&this.datePipe.transform("object"==typeof this.fromDate?this.fromDate:i,"yyyy-MM-dd");this.publicHolidayViewModel.fromDate=o;var r="string"==typeof this.toDate?this.toDate.split("-"):"",a="string"==typeof this.toDate?new Date(+r[2],+r[1]-1,+r[0]):new Date,d=this.toDate&&this.datePipe.transform("object"==typeof this.toDate?this.toDate:a,"yyyy-MM-dd");if(this.publicHolidayViewModel.toDate=d,this.publicHolidayViewModel.fromDate>this.publicHolidayViewModel.toDate)return void this.toastyService.error("To date should be greater than from date.","Error");this.masterService.SaveUpdatePublicHoliday(this.publicHolidayViewModel).subscribe(g=>{g>0&&(this.SaveSuccess.emit("SuccessFul"),this.publicHolidayViewModel.publicHolidayID>0?this.toastyService.success("Holiday updated successfully.","Update Holiday"):this.toastyService.success("Holiday saved successfully.","Save Holiday"),this.resetFormInputs(),document.getElementById("PublicHolidayPopup").click(),this.masterService.refreshFromChid.next({PublicHolidayID:g,FrontendID:0,BackendID:0,ThiredpartyID:0,RequiredServerID:0}))})}}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU($),e.rXU(u.vh),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-public-holiday"]],inputs:{models:[e.Mj6.None,"parentData","models"]},outputs:{SaveSuccess:"SaveSuccess"},features:[e.Jv_([u.vh,k.iP])],decls:42,vars:13,consts:[["f","ngForm"],["name","ngModel"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],["action","","method","post","id","publicHolidayForm","novalidate","","autocomplete","off",1,"form-horizontal",3,"ngSubmit"],[1,"card-body","mb-3"],[1,"form-group","row","mb-3"],[1,"col-md-3","col-form-label","required",2,"margin-left","-63px"],[1,"col-md-9","task-fields"],["type","hidden","name","id",3,"ngModelChange","ngModel"],["type","text","placeholder","Holiday name","name","name","required","","maxlength","100",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"col-md-6"],[1,"col-md-4","col-form-label","required"],[1,"col-md-8"],["type","text","placeholder","From date","bsDatepicker","","name","fromDate","required","",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["type","text","placeholder","To date","bsDatepicker","","name","toDate","required","",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],[1,"card-footer","py-3"],["type","submit","tabindex","6",1,"btn","btn-sm","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-floppy-o"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["type","reset","id","Holidayreset","tabindex"," 7",1,"btn","btn-sm","btn-danger","text-white"],[1,"fa","fa-ban"],[1,"error"],[4,"ngIf"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"form",6,0),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.sdS(5);return e.Njj(a.form.valid&&!(i.fromDate>i.toDate)&&!(i.toDate<i.fromDate)&&i.savePublicHoliday(a))}),e.j41(6,"div",7)(7,"div",8)(8,"div",4)(9,"div",3)(10,"label",9),e.EFF(11,"Holiday name"),e.k0s(),e.j41(12,"div",10)(13,"input",11),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.publicHolidayViewModel.publicHolidayID,a)||(i.publicHolidayViewModel.publicHolidayID=a),e.Njj(a)}),e.k0s(),e.j41(14,"input",12,1),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.publicHolidayViewModel.holidayName,a)||(i.publicHolidayViewModel.holidayName=a),e.Njj(a)}),e.k0s(),e.DNE(16,rg,2,1,"span",13)(17,ag,1,0,"span",13),e.k0s()()()(),e.j41(18,"div",8)(19,"div",14)(20,"div",3)(21,"label",15),e.EFF(22,"From date"),e.k0s(),e.j41(23,"div",16)(24,"input",17),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.fromDate,a)||(i.fromDate=a),e.Njj(a)}),e.k0s(),e.DNE(25,lg,2,0,"span",13),e.k0s()()(),e.j41(26,"div",14)(27,"div",3)(28,"label",15),e.EFF(29,"To date"),e.k0s(),e.j41(30,"div",16)(31,"input",18),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.toDate,a)||(i.toDate=a),e.Njj(a)}),e.k0s(),e.DNE(32,cg,2,0,"span",13)(33,hg,2,0,"span",13),e.k0s()()()(),e.j41(34,"div",19)(35,"button",20),e.nrm(36,"i",21),e.EFF(37," Submit "),e.k0s(),e.DNE(38,dg,1,0,"img",22),e.j41(39,"button",23),e.nrm(40,"i",24),e.EFF(41," Reset "),e.k0s()()()()()()()()}if(2&n){const o=e.sdS(5),r=e.sdS(15);e.R7$(13),e.R50("ngModel",i.publicHolidayViewModel.publicHolidayID),e.R7$(),e.R50("ngModel",i.publicHolidayViewModel.holidayName),e.R7$(2),e.Y8G("ngIf",r.invalid&&o.submitted),e.R7$(),e.Y8G("ngIf",o.submitted&&""==i.publicHolidayViewModel.holidayName),e.R7$(7),e.R50("ngModel",i.fromDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.fromDate),e.R7$(6),e.R50("ngModel",i.toDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(),e.Y8G("ngIf",o.submitted&&!i.toDate),e.R7$(),e.Y8G("ngIf",o.submitted&&i.toDate&&i.fromDate>i.toDate),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(3),e.Y8G("ngIf",i.loading)}},dependencies:[u.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.tU,c.vS,c.cV,k.pc,k.p0],encapsulation:2})}return s})();const ug=["PublicHolidayModal"];function mg(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}let gg=(()=>{class s{constructor(t,n,i,o,r,a,d,g){this.http=t,this.spinner=i,this.datePipe=o,this.router=r,this.masterService=a,this.cookieService=d,this.toastyService=g,this.DataEmit=new e.bkB,this.title="Public-Holiday List",this.columns=[],this.alerts=[],this.currentPageNumber=1,this.FinancialYear=0,this.FinancialYearList=[],this.filterModel=new Oe,this.PublicHolidayData={publicHolidayID:0,holidayName:"",fromDate:"",toDate:"",day:0},this.config={keyboard:!1,ignoreBackdropClick:!0},this.datagrid=n,this.currentPageNumber=1,this.showColumn=!1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="ASC",this.sortExpression="FromDate",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.search&&(this.Search=t.queryParams.search),this.columns.push(new h("holidayName","Holiday Name",'[{"width": "30%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("fromDate","From Date",'[{"width": "8%" ,"hyperLink": false,"textAlign": "right","disableSorting": false}]')),this.columns.push(new h("toDate","To Date",'[{"width": "8%" ,"hyperLink": false,"textAlign": "right","disableSorting": false}]')),this.columns.push(new h("day","Total Day",'[{"width": "4%" ,"hyperLink": false,"textAlign": "right","disableSorting": false}]')),this.columns.push(new h("Action","Action",'[{"width": "5%" ,"hyperLink": false, "disableSorting": true,"multiButton":true,"buttonText":"Edit|Delete","isDelete":true,"isEdit":true}]')),this.getCookiesFilterData(t.queryParams.filterModel),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetFinancialYear()},t),this.spinner.hide()}SaveSuccessed(t){this.reset()}GetFinancialYear(){const t=new Oe,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",JSON.stringify(t),{headers:n}).subscribe({next:o=>{this.FinancialYearList=o.financialYearDropdownModels,0===this.FinancialYear&&(this.FinancialYear=o.financialYear),this.getPublicHolidayList()},error:o=>{}})}getPublicHolidayList(){this.spinner.show();let t=new Oe;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.companyID=this.currentUser.companyID,t.FinancialYearID=this.FinancialYear,this.filterModel=t;const n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/PublicHoliday/GetPublicHolidaylList",t,{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression;for(let r=0;r<t.publicHolidaylListModel.length;r++){var i=t.publicHolidaylListModel[r].fromDate.split("T");t.publicHolidaylListModel[r].fromDate=this.datePipe.transform(i[0],"dd-MM-yyyy");var o=t.publicHolidaylListModel[r].toDate.split("T");t.publicHolidaylListModel[r].toDate=this.datePipe.transform(o[0],"dd-MM-yyyy")}this.publicHolidaysListViewModel=t.publicHolidaylListModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}selectedRowForEditDelete(t){let i=this.publicHolidaysListViewModel[t];var o=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this Holiday?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){o.DeletePublicHoliday(i.publicHolidayID)}},cancel:function(){}}})}DeletePublicHoliday(t){this.spinner.show(),this.masterService.deletePublicHoliday(t).subscribe(n=>{this.deleteOnSuccess(n),this.spinner.hide()},n=>{this.deleteOnError(n),this.spinner.hide()})}deleteOnSuccess(t){1==t?(this.executeSearch(),this.toastyService.success("Holiday deleted successfully.","Delete")):this.toastyService.error("Something error.","Error")}deleteOnError(t){this.toastyService.error("Something error.","Error")}reset(){this.Search="",this.currentPageNumber=1,this.FinancialYear=0,this.delaySearch=!1,this.GetFinancialYear(),this.executeSearch()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"ItemSelected"==n.EventType?this.selectedRow(n.ItemSelected):"ButtonClicked"==n.EventType?this.selectedRowForEditDelete(n.ItemSelected):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}selectedRow(t){let i=this.publicHolidaysListViewModel[t];this.PublicHolidayData.publicHolidayID=i.publicHolidayID,this.PublicHolidayData.holidayName=i.holidayName,this.PublicHolidayData.fromDate=i.fromDate,this.PublicHolidayData.toDate=i.toDate,this.PublicHolidayData.day=i.day,this.masterService.PublicHolidayData.next(this.PublicHolidayData),this.PublicHolidayModal.show()}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}SearchChanged(t){""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.executeSearch()},500))}getCookiesFilterData(t){""!=t&&null!=t&&(t=JSON.parse(t),this.Search=t.search,this.pageSize=t.pageSize,this.sortDirection=t.sortDirection,this.sortExpression=t.sortExpression,this.currentPageNumber=t.currentPageNumber,this.currentUser.companyID=t.companyID)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(D.ex),e.rXU(u.vh),e.rXU(f.Ix),e.rXU($),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-public-holiday-list"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(ug,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.PublicHolidayModal=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([u.vh])],decls:40,vars:9,consts:[["PublicHolidayModal","bs-modal"],["appPublicHolidayPopup",""],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","id","PublicHolidayPopup","aria-label","Close",1,"close","btn","fs-4",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"SaveSuccess","parentData"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),e.nrm(6,"i",8),e.EFF(7," Public Holidays "),e.k0s(),e.j41(8,"div",9)(9,"button",10),e.bIt("click",function(){e.eBV(o);const a=e.sdS(27);return e.Njj(a.show())}),e.nrm(10,"i",11),e.k0s()()(),e.j41(11,"div",12)(12,"div",3)(13,"div",13)(14,"input",14),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.Search,a)||(i.Search=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchChanged(a))}),e.k0s()(),e.j41(15,"div",13)(16,"select",15),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(i.FinancialYear,a)||(i.FinancialYear=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(i.SearchYear(a))}),e.DNE(17,mg,2,2,"option",16),e.k0s()(),e.j41(18,"div",13)(19,"button",17),e.bIt("click",function(){return e.eBV(o),e.Njj(i.search())}),e.nrm(20,"i",18),e.k0s(),e.j41(21,"button",19),e.bIt("click",function(){return e.eBV(o),e.Njj(i.reset())}),e.nrm(22,"i",20),e.k0s()()(),e.j41(23,"div",3)(24,"div",21)(25,"datagrid",22),e.bIt("datagridEvent",function(a){return e.eBV(o),e.Njj(i.datagridEvent(a))}),e.k0s()()()()()()()(),e.j41(26,"div",23,0)(28,"div",24)(29,"div",25)(30,"div",26)(31,"h4",27),e.EFF(32,"Public Holidays"),e.k0s(),e.j41(33,"button",28),e.bIt("click",function(){e.eBV(o);const a=e.sdS(27),d=e.sdS(38);return a.hide(),e.Njj(d.resetFormInputs())}),e.j41(34,"span",29),e.EFF(35,"\xd7"),e.k0s()()(),e.j41(36,"div",30)(37,"app-public-holiday",31,1),e.bIt("SaveSuccess",function(a){return e.eBV(o),e.Njj(i.SaveSuccessed(a))}),e.k0s()()()()(),e.nrm(39,"ngx-spinner",32)}2&n&&(e.R7$(14),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(8),e.Y8G("rows",i.publicHolidaysListViewModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!1)("ShowProjStatus",!1),e.R7$(14),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,B.hZ,E.dg,D.et,_,pg],encapsulation:2})}return s})();const ii=()=>["active"],fg=()=>["/Reports/ResourcesProductivityReport"],Ag=()=>["/Reports/YearlyProductivity"];function _g(s,l){if(1&s&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function yg(s,l){if(1&s&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.SpI(" ",t.name," ")}}function Sg(s,l){if(1&s&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.productivityID),e.R7$(),e.SpI(" ",t.productivityLevel," ")}}function Dg(s,l){if(1&s&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function jg(s,l){1&s&&(e.j41(0,"tbody")(1,"tr")(2,"td")(3,"div",36)(4,"h5"),e.EFF(5,"No Record Found!"),e.k0s()()()()()),2&s&&(e.R7$(2),e.BMQ("colspan",8))}function bg(s,l){1&s&&e.nrm(0,"i",41)}function Mg(s,l){1&s&&e.nrm(0,"i",42)}function Cg(s,l){1&s&&(e.j41(0,"td")(1,"div",36)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",8)}function kg(s,l){if(1&s&&(e.j41(0,"tbody",37)(1,"tr"),e.nrm(2,"td"),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s()()()),2&s){const t=l.$implicit,n=l.index;e.FS9("id",t.ProjectID),e.R7$(4),e.JRh(n+1),e.R7$(2),e.JRh(t.ProjectName),e.R7$(2),e.JRh(t.ActualHours)}}function Ig(s,l){if(1&s&&(e.j41(0,"table",30)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5,"#"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Project"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Actual Hours"),e.k0s()()(),e.DNE(10,kg,9,4,"tbody",32),e.k0s()),2&s){const t=e.XpG(4);e.R7$(10),e.Y8G("ngForOf",t.EmployeeDetailHourslist)}}function vg(s,l){if(1&s&&(e.j41(0,"td"),e.DNE(1,Ig,11,1,"table",43),e.k0s()),2&s){const t=e.XpG(2).$implicit,n=e.XpG();e.BMQ("colspan",8),e.R7$(),e.Y8G("ngIf",t.employeeID===n.expandedEmployee)}}function Eg(s,l){if(1&s&&(e.j41(0,"tr"),e.DNE(1,Cg,4,1,"td",31)(2,vg,2,2,"td",31),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("ngIf",t.employeeID===n.expandedEmployee&&n.EmployeeDetailCount<1),e.R7$(),e.Y8G("ngIf",t.employeeID===n.expandedEmployee&&n.EmployeeDetailCount>0)}}function Fg(s,l){if(1&s){const t=e.RV6();e.j41(0,"tbody",37)(1,"tr")(2,"td",38),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.Collaps(i.employeeID))}),e.DNE(3,bg,1,0,"i",39)(4,Mg,1,0,"i",40),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s()(),e.DNE(19,Eg,3,2,"tr",31),e.k0s()}if(2&s){const t=l.$implicit,n=l.index,i=e.XpG();e.FS9("id",t.employeeID),e.R7$(3),e.Y8G("ngIf",t.employeeID!==i.expandedEmployee),e.R7$(),e.Y8G("ngIf",t.employeeID===i.expandedEmployee),e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.JRh(t.Designation),e.R7$(2),e.JRh(t.ProductivityLevel),e.R7$(2),e.JRh(t.ProductivityHours),e.R7$(2),e.JRh(t.ActualHours),e.R7$(2),e.JRh(t.ArchiveProductivity),e.R7$(),e.Y8G("ngIf",t.employeeID===i.expandedEmployee)}}let Tg=(()=>{class s{constructor(t,n,i,o){this.http=t,this.router=n,this.spinner=i,this.cookieService=o,this.title="Resource Productivity Report",this.alerts=[],this.currentPageNumber=1,this.pageTotal=0,this.filterModel=new Fe,this.MonthList=[],this.Months=0,this.FinancialYear=0,this.FinancialYearList=[],this.DepartmentList=[],this.Department=0,this.ProductivityLevelList=[],this.ProductivityLevelID=0,this.ResourceProductivitylist=[],this.ResourceProductivitylength=0,this.dropdownSettings={},this.designation=0,this.designationlist=[],this.selecteddesignation=[],this.employeedropdownSettings={},this.employee=0,this.employeelist=[],this.selectedEmployee=[],this.expandedEmployee=0,this.EmployeeDetailHourslist=[],this.EmployeeDetailCount=0,this.currentPageNumber=1,this.showColumn=!1,this.totalPages=0,this.typeSelected="timer",this.totalRows=0,this.pageSize=10,this.sortDirection="ASC",this.sortExpression="EmployeeID",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}ngOnInit(){this.spinner.show(),this.expandedEmployee=-1,this.dropdownSettings={singleSelection:!1,idField:"designationID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.employeedropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetResourceProductivityReport(),this.GetEmployee()},t),this.spinner.hide()}gettoken(){return this.currentUser.authtoken}GetEmployee(){this.spinner.show();let t=new Fe,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/Getreportingemployee?ReportingID=0",t,{headers:n}).subscribe({next:o=>{this.expandedEmployee=0,this.employeelist=o,this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}GetResourceProductivityReport(){this.spinner.show();let t=new Fe;t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYear=this.FinancialYear,t.Month=+this.Months,t.Department=+this.Department,t.ProductivityLevelID=+this.ProductivityLevelID,t.Designation=this.selecteddesignation?this.selecteddesignation.map(o=>o.designationID).join(","):"",t.searchEmployee=this.selectedEmployee?this.selectedEmployee.map(o=>o.id).join(","):"",this.filterModel=t;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetResourceProductivityReport",t,{headers:n}).subscribe({next:o=>{this.getRowOnSuccess(o),this.spinner.hide()},error:o=>{this.getRowOnError(o),this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYearList=t.financialYearDropdownModel,this.FinancialYear=t.financialYear,this.MonthList=t.monthList,this.Months=t.month,this.DepartmentList=t.departmentDropdownModel,this.ProductivityLevelList=t.productivityLevelModels,this.designationlist=t.designationDropdownModel,this.datagrid.databind(n),this.ResourceProductivitylist=[],this.ResourceProductivity=t.resourceProductivityReport;for(let r=0;r<t.resourceProductivityReport.length;r++){var i=t.resourceProductivityReport[r].actualHours.split(".");t.resourceProductivityReport[r].actualHours=i[0];var o=t.resourceProductivityReport[r].archiveProductivity.split(".");t.resourceProductivityReport[r].archiveProductivity=o[0]+"%"}this.ResourceProductivitylength=t.resourceProductivityReport.length,null!=this.ResourceProductivity&&this.ResourceProductivity.forEach(r=>{this.ResourceProductivitylist.push({employeeID:r.employeeID,employeeName:r.employeeName,Designation:r.designation,ProductivityLevel:r.productivityLevel,ProductivityHours:r.productivityHours,ActualHours:r.actualHours,ArchiveProductivity:r.archiveProductivity})}),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}Collaps(t){0!=t&&(this.expandedEmployee=t===this.expandedEmployee?-1:t,this.EmployeeDetailHourslist=[],this.GetEmployeeDetailHourslist(t))}GetEmployeeDetailHourslist(t){this.spinner.show();let n=new Fe,i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetEmployeeActualHours?EmployeeID="+t+"&FinancialYearID="+this.FinancialYear+"&Month="+this.Months,n,{headers:i}).subscribe(r=>{this.GetRowOnDetilSuccessList(r),this.spinner.hide()},r=>{this.GetRowOnDetilErrorList(r),this.spinner.hide()})}GetRowOnDetilSuccessList(t){this.EmployeeDetailHourslist=[];for(let i=0;i<t.length;i++){var n=t[i].actualHours.split(".");t[i].actualHours=n[0]}this.EmployeeDetailHours=t,this.EmployeeDetailCount=t.length,this.EmployeeDetailHours.forEach(i=>{this.EmployeeDetailHourslist.push({ProjectID:i.projectID,ProjectName:i.project,ActualHours:i.actualHours})})}GetRowOnDetilErrorList(t){this.runningSearch=!1}reset(){this.Search="",this.cookieService.delete("filterData"),this.FinancialYear=0,this.Months=0,this.Department=0,this.ProductivityLevelID=0,this.selecteddesignation=null,this.currentPageNumber=1,this.selectedEmployee=null,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.expandedEmployee=0,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetResourceProductivityReport()},500))}SearchYear(t){""!=t&&(this.expandedEmployee=0,this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetResourceProductivityReport()},500))}SearchMonth(t){""!=t&&(this.expandedEmployee=0,this.Months=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.GetResourceProductivityReport()},500))}SearchDepartment(t){""!=t&&(this.expandedEmployee=0,this.Department=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetResourceProductivityReport()},500))}SearchProductivityLevel(t){""!=t&&(this.expandedEmployee=0,this.ProductivityLevelID=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetResourceProductivityReport()},500))}SearchDesignation(t){""!=t&&(this.expandedEmployee=0,this.designation=parseInt(t),this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.GetResourceProductivityReport()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.GetResourceProductivityReport()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.GetResourceProductivityReport()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-resource-productivity-report"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},decls:74,vars:29,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body","annualtable"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-user-following"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","Months","id","Months",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],["name","ProductivityLevel","id","ProductivityLevel",1,"form-control",3,"ngModelChange","ngModel"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","multiSelectEmployee",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],["name","basicExampleSelectedItems",3,"ngModelChange","onSelect","placeholder","data","ngModel","settings"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12","table-responsive","mt-2"],[1,"table","table-responsive-sm","table-striped"],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"datagridEvent","pageSize"],["size","medium",3,"type"],[3,"value"],[1,"search_no_results"],[3,"id"],[3,"click"],["class","fa fa-lg fa-caret-right",4,"ngIf"],["class","fa fa-lg fa-caret-down",4,"ngIf"],[1,"fa","fa-lg","fa-caret-right"],[1,"fa","fa-lg","fa-caret-down"],["class","table table-responsive-sm table-striped",4,"ngIf"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resource Productivity "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"ul",9)(12,"li",10)(13,"a",11),e.nrm(14,"i",12),e.EFF(15," Monthly Productivity "),e.k0s()(),e.j41(16,"li",10)(17,"a",13),e.nrm(18,"i",14),e.EFF(19," Yearly Productivity "),e.k0s()()()()(),e.j41(20,"div",1)(21,"div",15)(22,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(23,"div",15)(24,"select",17),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(25,_g,2,2,"option",18),e.k0s()(),e.j41(26,"div",15)(27,"select",19),e.mxI("ngModelChange",function(r){return e.DH7(i.Months,r)||(i.Months=r),r}),e.bIt("ngModelChange",function(r){return i.SearchMonth(r)}),e.j41(28,"option",20),e.EFF(29,"-- Months --"),e.k0s(),e.DNE(30,yg,2,2,"option",18),e.k0s()(),e.j41(31,"div",15)(32,"select",21),e.mxI("ngModelChange",function(r){return e.DH7(i.ProductivityLevelID,r)||(i.ProductivityLevelID=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProductivityLevel(r)}),e.j41(33,"option",20),e.EFF(34,"-- Productivity Level --"),e.k0s(),e.DNE(35,Sg,2,2,"option",18),e.k0s()(),e.j41(36,"div",15)(37,"select",22),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(38,"option",20),e.EFF(39,"-- Department --"),e.k0s(),e.DNE(40,Dg,2,2,"option",18),e.k0s()(),e.j41(41,"div",15)(42,"ng-multiselect-dropdown",23),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedEmployee,r)||(i.selectedEmployee=r),r}),e.bIt("onSelect",function(){return i.GetResourceProductivityReport()}),e.k0s()(),e.j41(43,"div",15)(44,"ng-multiselect-dropdown",24),e.mxI("ngModelChange",function(r){return e.DH7(i.selecteddesignation,r)||(i.selecteddesignation=r),r}),e.bIt("onSelect",function(){return i.GetResourceProductivityReport()}),e.k0s()(),e.j41(45,"div",15)(46,"button",25),e.bIt("click",function(){return i.search()}),e.nrm(47,"i",26),e.k0s(),e.j41(48,"button",27),e.bIt("click",function(){return i.reset()}),e.nrm(49,"i",28),e.k0s()()(),e.j41(50,"div",1)(51,"div",29)(52,"table",30)(53,"thead")(54,"tr"),e.nrm(55,"th"),e.j41(56,"th"),e.EFF(57,"#"),e.k0s(),e.j41(58,"th"),e.EFF(59,"Employee"),e.k0s(),e.j41(60,"th"),e.EFF(61,"Designation"),e.k0s(),e.j41(62,"th"),e.EFF(63,"Defined productivity"),e.k0s(),e.j41(64,"th"),e.EFF(65,"Hours as per defined productivity"),e.k0s(),e.j41(66,"th"),e.EFF(67,"Actual Hours"),e.k0s(),e.j41(68,"th"),e.EFF(69,"Achieve productivity"),e.k0s()()(),e.DNE(70,jg,6,1,"tbody",31)(71,Fg,20,11,"tbody",32),e.k0s(),e.j41(72,"datagrid",33),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(73,"ngx-spinner",34)),2&n&&(e.R7$(13),e.Y8G("routerLinkActive",e.lJ4(25,ii))("routerLink",e.lJ4(26,fg)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(27,ii))("routerLink",e.lJ4(28,Ag)),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Months),e.R7$(3),e.Y8G("ngForOf",i.MonthList),e.R7$(2),e.R50("ngModel",i.ProductivityLevelID),e.R7$(3),e.Y8G("ngForOf",i.ProductivityLevelList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.Y8G("placeholder","-- Employees --")("data",i.employeelist),e.R50("ngModel",i.selectedEmployee),e.Y8G("settings",i.employeedropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Designation --")("data",i.designationlist),e.R50("ngModel",i.selecteddesignation),e.Y8G("settings",i.dropdownSettings),e.R7$(26),e.Y8G("ngIf",i.ResourceProductivitylength<1),e.R7$(),e.Y8G("ngForOf",i.ResourceProductivitylist),e.R7$(),e.Y8G("pageSize",i.pageSize),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,E.dg,D.et,w.b,_],encapsulation:2})}return s})();const ni=()=>["active"],wg=()=>["/Master/EmployeeProductivity"];function Pg(s,l){if(1&s&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Rg(s,l){if(1&s&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.JRh(t.name)}}function Gg(s,l){if(1&s&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.monthID),e.R7$(),e.JRh(t.name)}}function Yg(s,l){if(1&s&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.productivityID),e.R7$(),e.JRh(t.productivityLevel)}}function Hg(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",31)(1,"td")(2,"select",32)(3,"option",33),e.EFF(4,"-- Select Month --"),e.k0s(),e.DNE(5,Rg,2,2,"option",19),e.k0s()(),e.j41(6,"td")(7,"select",34)(8,"option",33),e.EFF(9,"-- Select Month --"),e.k0s(),e.DNE(10,Gg,2,2,"option",19),e.k0s()(),e.j41(11,"td")(12,"select",35)(13,"option",33),e.EFF(14,"-- Select Productivity level --"),e.k0s(),e.DNE(15,Yg,2,2,"option",19),e.k0s()(),e.j41(16,"td")(17,"button",36),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.recordSubmit(i))}),e.nrm(18,"i",37),e.EFF(19),e.k0s(),e.j41(20,"button",38),e.bIt("click",function(){const i=e.eBV(t),o=i.$implicit,r=i.index,a=e.XpG();return e.Njj(a.onDelete(o.get("EmployeeProductivityID").value,r))}),e.nrm(21,"i",39),e.EFF(22," Delete "),e.k0s()()()}if(2&s){const t=l.$implicit,n=e.XpG();e.Y8G("formGroup",t),e.R7$(5),e.Y8G("ngForOf",n.MonthDropdown),e.R7$(5),e.Y8G("ngForOf",n.MonthDropdown),e.R7$(5),e.Y8G("ngForOf",n.EmployeeProductivityList),e.R7$(2),e.Y8G("disabled",t.invalid)("ngClass",0==t.get("EmployeeProductivityID").value?"btn-success":"btn-outline-dark"),e.R7$(2),e.SpI(" ",0==t.get("EmployeeProductivityID").value?"Insert":"Update"," ")}}const Bg=["myInput"],oi=()=>["active"],Ug=()=>["/Reports/ResourcesProductivityReport"],Vg=()=>["/Reports/YearlyProductivity"];function xg(s,l){if(1&s&&(e.j41(0,"option",40),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.financialYearID),e.R7$(),e.SpI(" ",t.name," ")}}function Qg(s,l){if(1&s&&(e.j41(0,"option",40),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.departmentID),e.R7$(),e.SpI(" ",t.name," ")}}function Og(s,l){if(1&s&&(e.j41(0,"tbody")(1,"tr")(2,"td",41),e.EFF(3),e.k0s(),e.j41(4,"td",42),e.EFF(5),e.k0s(),e.j41(6,"td",42),e.EFF(7),e.k0s(),e.j41(8,"td",42),e.EFF(9),e.k0s(),e.j41(10,"td",42),e.EFF(11),e.k0s(),e.j41(12,"td",42),e.EFF(13),e.k0s(),e.j41(14,"td",42),e.EFF(15),e.k0s(),e.j41(16,"td",42),e.EFF(17),e.k0s(),e.j41(18,"td",42),e.EFF(19),e.k0s(),e.j41(20,"td",42),e.EFF(21),e.k0s(),e.j41(22,"td",42),e.EFF(23),e.k0s(),e.j41(24,"td",42),e.EFF(25),e.k0s(),e.j41(26,"td",42),e.EFF(27),e.k0s(),e.j41(28,"td",43),e.EFF(29),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.JRh(t.Heading),e.R7$(),e.Y8G("ngClass",t.TotalApril>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalApril),e.R7$(),e.Y8G("ngClass",t.TotalMay>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalMay),e.R7$(),e.Y8G("ngClass",t.TotalJune>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalJune),e.R7$(),e.Y8G("ngClass",t.TotalJuly>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalJuly),e.R7$(),e.Y8G("ngClass",t.TotalAuguest>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalAuguest),e.R7$(),e.Y8G("ngClass",t.TotalSeptember>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalSeptember),e.R7$(),e.Y8G("ngClass",t.TotalOctomber>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalOctomber),e.R7$(),e.Y8G("ngClass",t.TotalNovember>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalNovember),e.R7$(),e.Y8G("ngClass",t.TotalDecember>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalDecember),e.R7$(),e.Y8G("ngClass",t.TotalJanuary>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalJanuary),e.R7$(),e.Y8G("ngClass",t.TotalFebruary>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalFebruary),e.R7$(),e.Y8G("ngClass",t.TotalMarch>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalMarch),e.R7$(),e.Y8G("ngClass",t.TotalHours>=0?"clspositive":"clsnegative"),e.R7$(),e.JRh(t.TotalHours)}}function Jg(s,l){1&s&&(e.j41(0,"td")(1,"div",46)(2,"h5"),e.EFF(3,"No Record Found!"),e.k0s()()()),2&s&&e.BMQ("colspan",17)}function $g(s,l){if(1&s&&(e.j41(0,"tbody",44)(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td",41),e.EFF(29),e.k0s()(),e.j41(30,"tr"),e.DNE(31,Jg,4,1,"td",45),e.k0s()()),2&s){const t=l.$implicit,n=e.XpG();e.FS9("id",t.EmployeeID),e.R7$(3),e.JRh(t.Employee),e.R7$(2),e.JRh(t.April),e.R7$(2),e.JRh(t.May),e.R7$(2),e.JRh(t.June),e.R7$(2),e.JRh(t.July),e.R7$(2),e.JRh(t.Auguest),e.R7$(2),e.JRh(t.September),e.R7$(2),e.JRh(t.Octomber),e.R7$(2),e.JRh(t.November),e.R7$(2),e.JRh(t.December),e.R7$(2),e.JRh(t.January),e.R7$(2),e.JRh(t.February),e.R7$(2),e.JRh(t.March),e.R7$(2),e.JRh(t.TotalHours),e.R7$(2),e.Y8G("ngIf",n.ResourcesCount<0)}}function Xg(s,l){if(1&s&&(e.j41(0,"option",24),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.FS9("value",t.projectTypeID),e.R7$(),e.SpI(" ",t.name," ")}}const qg=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:it},{path:"SmartDesk",component:ie,data:{title:"Home"},children:[{path:"Dashboard",component:bt,canActivate:[M]},{path:"MonthlyTimeSheet",component:mt,canActivate:[M]},{path:"MonthlyTimeSheetList",component:ft,canActivate:[M]},{path:"ClientTimesheetList",component:og,canActivate:[M]},{path:"NestedMonthlyTimeSheetList",component:_t,canActivate:[M]},{path:"AccessDenied",component:Ra,canActivate:[M]},{path:"Sales",component:Oa,canActivate:[M]},{path:"SalesList",component:el,canActivate:[M]},{path:"MonthlySalesList",component:Gt,canActivate:[M]},{path:"ChangePassword",component:pl,canActivate:[M]},{path:"MonthlySalesList",component:Gt,canActivate:[M]}]},{path:"Environment",component:ie,data:{title:"Environment"},children:[{path:"FrontEndList",component:wp,canActivate:[M]},{path:"BackEndList",component:Rp,canActivate:[M]},{path:"ThiedPartyAPI",component:Yp,canActivate:[M]}]},{path:"Master",component:ie,data:{title:"Master"},children:[{path:"CoreSkill",component:Vt,canActivate:[M]},{path:"CoreSkillList",component:Qh,canActivate:[M]},{path:"Project",component:Le,canActivate:[M]},{path:"AddTask",component:ei,canActivate:[M]},{path:"Tasklist",component:ti,canActivate:[M]},{path:"ProjectSetup",component:Ip,canActivate:[M]},{path:"Git",component:Qt,canActivate:[M]},{path:"GitHistory",component:Fp,canActivate:[M]},{path:"ProjectList",component:ct,canActivate:[M]},{path:"Client",component:Ne,canActivate:[M]},{path:"ClientList",component:Mt,canActivate:[M]},{path:"Employee",component:vt,canActivate:[M]},{path:"AddEmployee",component:Ch,canActivate:[M]},{path:"EmployeeList",component:Et,canActivate:[M]},{path:"EmployeeProductivity",component:(()=>{class s{constructor(t,n,i,o,r,a,d,g){this.http=t,this.router=i,this.fb=o,this.spinner=r,this.employeeService=a,this.cookieService=d,this.toastyService=g,this.currentPageNumber=1,this.MonthDropdown=[],this.FinancialYear=0,this.FinancialYearList=[],this.employeeProductivityModel=new kt,this.EmployeeProductivityForms=this.fb.array([]),this.EmployeeProductivityList=[],this.datagrid=n,this.currentPageNumber=1,this.totalPages=0,this.totalRows=0,this.pageSize=10,this.sortDirection="ASC",this.sortExpression="FromMonth",this.typeSelected="timer",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}")}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);this.EmployeeID=+t.queryParams.EmployeeID,this.FinancialYear=+t.queryParams.FinancialYear,this.filterModel=t.queryParams.filterModel,this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetProductivity(),this.GetMonths(),this.GetFinancialYear()},t),this.spinner.hide()}GetProductivity(){this.employeeService.GetProductivity().subscribe(t=>this.EmployeeProductivityList=t.productivityLevelModels)}GetFinancialYear(){let t=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetFinancialYear",{},{headers:t}).subscribe(i=>{this.FinancialYearList=i.financialYearDropdownModels.slice(6,13),0==this.FinancialYear&&(this.FinancialYear=i.financialYear),this.getGetEmployeeProductivityList()})}GetMonths(){let t=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Usertimesheet/GetMonths",{},{headers:t}).subscribe(i=>{this.MonthDropdown=i.monthsdropdown})}SearchYear(t){""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,this.FinancialYear=+t,setTimeout(()=>{this.getGetEmployeeProductivityList()},500))}getGetEmployeeProductivityList(){this.spinner.show();let t=new kt;t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.EmployeeID=this.EmployeeID,t.FinancialYear=this.FinancialYear;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Employee/GetEmployeeProductivityList",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){this.EmployeeProductivityForms.clear();let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.employeeProductivity=t._employeeProductivityList,this.employeeProductivityModel=t._employeeProductivityList,this.datagrid.databind(n),t._employeeProductivityList.forEach(i=>{this.EmployeeProductivityForms.push(this.fb.group({EmployeeProductivityID:[i.employeeProductivityID],EmployeeID:[i.employeeName,c.k0.required],productivityID:[i.productivityID,c.k0.min(1)],FromMonth:[i.fromMonth,c.k0.min(1)],ToMonth:[i.toMonth,c.k0.min(1)]}))}),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1,console.log(t)}addProductivityForm(){this.EmployeeProductivityForms.push(this.fb.group({EmployeeProductivityID:[0],EmployeeID:[0],productivityID:[0,c.k0.min(1)],FromMonth:[0,c.k0.min(1)],ToMonth:[0,c.k0.min(1)]}))}recordSubmit(t){t.value.FinancialYear=+this.FinancialYear,t.value.EmployeeID=this.EmployeeID,t.value.FromMonth=+t.value.FromMonth,t.value.ToMonth=+t.value.ToMonth,t.value.productivityID=+t.value.productivityID,t.value.EmployeeProductivityID=+t.value.EmployeeProductivityID,(null==t.value.EmployeeProductivityID||Number.isNaN(t.value.EmployeeProductivityID))&&(t.value.EmployeeProductivityID=0),1!=t.value.FromMonth&&2!=t.value.FromMonth&&3!=t.value.FromMonth&&t.value.FromMonth>t.value.ToMonth&&1!=t.value.ToMonth&&2!=t.value.ToMonth&&3!=t.value.ToMonth?this.toastyService.error("To month should be greater than from month.","Error"):(0==t.value.EmployeeProductivityID?this.employeeService.CheckEmployeeProductivityExsist(t.value.FinancialYear,t.value.FromMonth,t.value.ToMonth,t.value.EmployeeID).subscribe(n=>{0==n?this.employeeService.SaveUpdateEmployeeProductivity(t.value).subscribe(i=>{0==i?this.toastyService.success("Productivity level saved successfully.","Save"):this.toastyService.success("Productivity level updated successfully.","Update"),t.patchValue({EmployeeProductivityID:i.EmployeeProductivityID})}):1==n?this.toastyService.error("Productivity level for this months are already exists.","Already Exists"):this.toastyService.error("Something went wrong.","Error")}):this.employeeService.SaveUpdateEmployeeProductivity(t.value).subscribe(n=>{0==n?this.toastyService.success("Productivity level saved successfully.","Save"):this.toastyService.success("Productivity level updated successfully.","Update"),t.patchValue({EmployeeProductivityID:n.EmployeeProductivityID})}),this.executeSearch())}onDelete(t,n){if(0==t)this.EmployeeProductivityForms.removeAt(n);else{var i=this;jQuery.confirm({title:"Confirmation?",content:"Are you sure you want to delete this productivity?",type:"blue",buttons:{ok:{text:"ok!",btnClass:"btn-primary",keys:["enter"],action:function(){i.deleteOnSuccess(t,n)}},cancel:function(){}}})}}deleteOnSuccess(t,n){this.employeeService.DeleteEmployeeProductivity(t).subscribe(i=>{this.EmployeeProductivityForms.removeAt(n),this.toastyService.success("Productivity level deleted successfully.","Delete")})}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType&&this.pageSizeChanged(n.PageSize)}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.executeSearch()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.executeSearch()}reset(){this.spinner.show(),this.currentPageNumber=1,this.runningSearch=!1,this.FinancialYear=0,this.executeSearch(),this.spinner.hide()}search(){this.spinner.show(),this.currentPageNumber=1,this.delaySearch=!1,this.getGetEmployeeProductivityList(),this.spinner.hide()}clearInputdata(){this.router.navigate(["/Master/EmployeeList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}RedirectEmployee(){this.router.navigate(["/Master/Employee"],{queryParams:{id:this.EmployeeID,FinancialYear:this.FinancialYear},skipLocationChange:!0})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(c.ze),e.rXU(D.ex),e.rXU(J),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-employee-productivity"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},features:[e.Jv_([J])],decls:51,vars:11,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption","title-headline-wrap"],[1,"fa","fa-align-justify"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click","routerLinkActive"],[1,"nav-icon","icon-user-following"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"fa","fa-hourglass-half"],[1,"col-md-3","paddingbottom"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-6","paddingbottom","text-right"],["tooltip","Add","placement","bottom",1,"btn","btn-primary","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"table","table-striped",2,"width","100%"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"datagridEvent","rows","pageSize"],[3,"value"],[3,"formGroup"],["formControlName","FromMonth",1,"form-control"],["value","0","selected","","disabled",""],["formControlName","ToMonth",1,"form-control"],["formControlName","productivityID",1,"form-control"],["type","submit",1,"btn",3,"click","disabled","ngClass"],["aria-hidden","true",1,"fa","fa-save","fa-lg",2,"cursor","pointer","margin-right","5px"],[1,"btn","btn-light","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-trash",2,"cursor","pointer"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div"),e.nrm(7,"i",6),e.EFF(8," Resource Setup"),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(10,"i",8),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",9)(13,"div",1)(14,"div",10)(15,"ul",11)(16,"li",12)(17,"a",13),e.bIt("click",function(){return i.RedirectEmployee()}),e.nrm(18,"i",14),e.EFF(19," Update Resources "),e.k0s()(),e.j41(20,"li",12)(21,"a",15),e.nrm(22,"i",16),e.EFF(23," Resource Productivity "),e.k0s()()()()(),e.j41(24,"div",1)(25,"div",17)(26,"select",18),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.DNE(27,Pg,2,2,"option",19),e.k0s()(),e.j41(28,"div",17)(29,"button",20),e.bIt("click",function(){return i.search()}),e.nrm(30,"i",21),e.k0s(),e.j41(31,"button",22),e.bIt("click",function(){return i.reset()}),e.nrm(32,"i",23),e.k0s()(),e.j41(33,"div",24)(34,"button",25),e.bIt("click",function(){return i.addProductivityForm()}),e.nrm(35,"i",26),e.EFF(36," Add "),e.k0s()()(),e.j41(37,"table",27)(38,"thead")(39,"tr")(40,"th"),e.EFF(41,"From"),e.k0s(),e.j41(42,"th"),e.EFF(43,"To"),e.k0s(),e.j41(44,"th"),e.EFF(45,"Productivity Level"),e.k0s(),e.j41(46,"th"),e.EFF(47,"Action"),e.k0s()()(),e.j41(48,"tbody"),e.DNE(49,Hg,23,7,"tr",28),e.k0s()(),e.j41(50,"datagrid",29),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()),2&n&&(e.R7$(17),e.Y8G("routerLinkActive",e.lJ4(8,ni)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(9,ni))("routerLink",e.lJ4(10,wg)),e.R7$(5),e.R50("ngModel",i.FinancialYear),e.R7$(),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(22),e.Y8G("ngForOf",i.EmployeeProductivityForms.controls),e.R7$(),e.Y8G("rows",i.employeeProductivity)("pageSize",i.pageSize))},dependencies:[u.YU,u.Sq,f.Wk,f.wQ,c.xH,c.y7,c.wz,c.BC,c.cb,c.vS,c.j4,c.JD,E.dg,_],encapsulation:2})}return s})(),canActivate:[M]},{path:"History",component:Ft,canActivate:[M]},{path:"ViewProjectHistory",component:wl,canActivate:[M]},{path:"ViewProject",component:Tt,canActivate:[M]},{path:"Technology",component:pt,canActivate:[M]},{path:"ProjectResources",component:Ml,canActivate:[M]},{path:"ResourceProjects",component:Cl,canActivate:[M]},{path:"ClientWiseProject",component:$m,canActivate:[M]},{path:"OldClientWiseProject",component:(()=>{class s{constructor(t,n,i,o,r,a){this.http=t,this.employeeService=i,this.router=o,this.spinner=r,this.cookieService=a,this.columns=[],this.clientlistProjectWise=[],this.clientCount=0,this.datagrid=n,this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}ngOnInit(){this.spinner.show();let t=this.router.parseUrl(this.router.url);null!=t.queryParams.Project?this.EmployeeID=+this.commonFunctionsService.decryptUsingAES256(t.queryParams.Project):(this.EmployeeID=t.queryParams.id,this.FinacialYearID=t.queryParams.FinancialYear,this.Month=t.queryParams.Month,this.EmployeeName=t.queryParams.name,this.filterModel=t.queryParams.filterModel),this.columns.push(new h("clientName","Client Name",'[{"width": "50%" ,"hyperLink": false, "disableSorting": true}]')),this.columns.push(new h("projectName","Project Name",'[{"width": "50%" ,"hyperLink": false, "disableSorting": true}]')),this.GetClientWiseProjectlist(),this.spinner.hide()}clearInputdata(){this.router.navigate(["/Master/EmployeeList"],{queryParams:{filterModel:this.filterModel},skipLocationChange:!0})}gettoken(){return this.currentUser.authtoken}GetClientWiseProjectlist(){this.spinner.show();let t=new Ct,n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Employee/GetClientwiseProject?EmployeeID="+this.EmployeeID,t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){this.clientlistProjectWise=[],this.clientwiseProject=t,this.clientCount=t.length,this.clientwiseProject.forEach((n,i)=>{let o=t.filter(d=>d.clientID==n.clientID),r=[];if(n.projectID.indexOf(",")>-1){let d=n.projectID.split(","),g=n.projectName.split(",");for(let y=0;y<d.length;y++)r.push({projectId:d[y],projectName:g[y]})}else r.push({projectId:n.projectID,projectName:n.projectName});this.clientlistProjectWise.push({ClientID:n.clientID,ClientName:n.clientName,projectcount:o.length,Data:r})}),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(_),e.rXU(J),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-old-client-wise-projectlist"]],features:[e.Jv_([J])],decls:16,vars:2,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"pull-right",2,"display","flex"],["type","reset",1,"btn","btn-primary","text-white","btn-small",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-left"],[1,"card-body"],[1,"col-md-12"],["size","medium",3,"type"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.clearInputdata()}),e.nrm(10,"i",9),e.EFF(11," Back To List "),e.k0s()()(),e.j41(12,"div",10)(13,"div",1),e.nrm(14,"div",11),e.k0s()()()()()(),e.nrm(15,"ngx-spinner",12)),2&n&&(e.R7$(7),e.SpI(" ",i.EmployeeName," - Client wise project "),e.R7$(8),e.Y8G("type",i.typeSelected))},dependencies:[D.et],encapsulation:2})}return s})(),canActivate:[M]}]},{path:"TimeSheet",component:ie,data:{title:"TimeSheet"},children:[{path:"AddTask",component:ei,canActivate:[M]},{path:"Tasklist",component:ti,canActivate:[M]},{path:"Manage",component:ju,canActivate:[M]},{path:"AddUsertimesheet",component:Pu,canActivate:[M]}]},{path:"Settings",component:ie,children:[{path:"PublicHolidaysList",component:gg,canActivate:[M]},{path:"FinancialYearList",component:bl,canActivate:[M]},{path:"FinancialYear",component:Nt,canActivate:[M]},{path:"TargetedHours",component:_l,canActivate:[M]}]},{path:"Reports",component:ie,children:[{path:"AnnualBillableHours",component:Mc,canActivate:[M]},{path:"BillableProjectHours",component:Ql,canActivate:[M]},{path:"MonthlyProjectHours",component:Yc,canActivate:[M]},{path:"Productivity",component:Jm,canActivate:[M]},{path:"MonthlyUserProject",component:$c,canActivate:[M]},{path:"MonthlyResourceHours",component:dh,canActivate:[M]},{path:"YearlyResourceHours",component:Im,canActivate:[M]},{path:"YearlyClientHours",component:xm,canActivate:[M]},{path:"AvailableResource",component:Th,canActivate:[M]},{path:"MonthwiseAvailableResource",component:Vp,canActivate:[M]},{path:"ResourceReport",component:Hh,canActivate:[M]},{path:"UserTimeSheetReport",component:eu,canActivate:[M]},{path:"ViewUsertimesheetReport",component:ru,canActivate:[M]},{path:"ViewTaskwiseHoursReport",component:om,canActivate:[M]},{path:"ResourcesProductivityReport",component:Tg,canActivate:[M]},{path:"YearlyProductivity",component:(()=>{class s{constructor(t,n,i,o,r,a,d){this.http=t,this.router=n,this.spinner=i,this.reportService=r,this.cookieService=a,this.toastyService=d,this.DataEmit=new e.bkB,this.FinancialYear=0,this.FinancialYearList=[],this.columns=[],this.currentPageNumber=1,this.MonthlyProductivitylist=[],this.TotalProductivitylist=[],this.ResourcesCount=0,this.DepartmentList=[],this.Department=0,this.Status=1,this.datagrid=o,this.currentPageNumber=1,this.totalPages=0,this.totalRows=0,this.pageSize=15,this.sortDirection="ASC",this.sortExpression="Employee",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.executeSearch(),this.spinner.hide()}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetResourcesYearlyProductivity()},t),this.spinner.hide()}GetResourcesYearlyProductivity(){this.spinner.show();let t=new Q;t.search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYearID=this.FinancialYear,t.Department=+this.Department,t.Status=+this.Status;let n=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetAllMonthResourceProductivity",t,{headers:n}).subscribe(o=>{this.getRowOnSuccess(o),this.spinner.hide()},o=>{this.getRowOnError(o),this.spinner.hide()})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,this.FinancialYearList=t.financialYearDropdownModel,this.FinancialYear=t.financialYearID,this.datagrid.databind(n),this.MonthlyProductivitylist=[],this.AllMonthProductivity=t.allMonthProductivity,this.ResourcesCount=t.allMonthProductivity.length,this.DepartmentList=t.departmentDropdownModel.filter(i=>3!=i.departmentID),this.AllMonthProductivity.forEach(i=>{this.MonthlyProductivitylist.push({EmployeeID:i.employeeID,Employee:i.employee,April:i.april,May:i.may,June:i.june,July:i.july,Auguest:i.august,September:i.september,Octomber:i.october,November:i.november,December:i.december,January:i.january,February:i.february,March:i.march,TotalHours:i.total})}),this.TotalProductivitylist=[],this.TotalProductivity=t.totalMonthlyHours,this.TotalProductivity.forEach(i=>{this.TotalProductivitylist.push({Heading:i.heading,TotalApril:i.april,TotalMay:i.may,TotalJune:i.june,TotalJuly:i.july,TotalAuguest:i.august,TotalSeptember:i.september,TotalOctomber:i.october,TotalNovember:i.november,TotalDecember:i.december,TotalJanuary:i.january,TotalFebruary:i.february,TotalMarch:i.march,TotalHours:i.totalHours})}),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}ExportToExcel(){this.spinner.show();let t=new Q;t.search=this.Search,t.pageSize=0,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.FinancialYearID=this.FinancialYear,t.Department=+this.Department,this.reportService.ExportToExcel(t,"Yearly_Productivity_Report").subscribe(i=>{this.toastyService.success("Completed.","Export to excel"),this.spinner.hide()})}search(){this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}reset(){this.Search="",this.Department=0,this.Status=0,this.cookieService.delete("filterData"),this.FinancialYear=0,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.executeSearch()}SearchChanged(t){""!=t&&(this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}SearchDepartment(t){""!=t&&(this.Department=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetResourcesYearlyProductivity()},500))}SearchYear(t){""!=t&&(this.FinancialYear=+t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.GetResourcesYearlyProductivity()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.GetResourcesYearlyProductivity()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.GetResourcesYearlyProductivity()}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.Qq),e.rXU(f.Ix),e.rXU(D.ex),e.rXU(_),e.rXU(Z),e.rXU(S.O),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-yearly-resource-productivity"]],viewQuery:function(n,i){if(1&n&&(e.GBs(_,7),e.GBs(Bg,7)),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first),e.mGM(o=e.lsd())&&(i.myInputVariable=o.first)}},outputs:{DataEmit:"DataEmit"},decls:120,vars:19,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],["tooltip","Export to excel","placement","bottom",1,"btn","btn-primary","text-white","btn-small","float-right","ml-2",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o"],[1,"card-body"],[1,"col-md-12","mb-4"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-calendar"],[1,"nav-link","active","show",3,"routerLinkActive","routerLink"],[1,"nav-icon","icon-user-following"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Search employee",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2","paddingbottom"],["name","FinancialYear","id","FinancialYear",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","Department","id","Department",1,"form-control",3,"ngModelChange","ngModel"],["name","Status","id","Status",1,"form-control",3,"ngModelChange","ngModel"],["value","0"],["value","1","selected",""],["value","2"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12","table-responsive","mt-2"],[1,"card","shadow-md"],[1,"table","table-responsive-sm","table-striped","difference-Productivity"],[4,"ngFor","ngForOf"],[1,"table","table-responsive-sm","table-striped"],[3,"id",4,"ngFor","ngForOf"],[3,"datagridEvent","pageSize","ShowProjStatus"],["size","medium",3,"type"],[3,"value"],[1,"text-uppercase","text-value"],[3,"ngClass"],[1,"text-uppercase","text-value",3,"ngClass"],[3,"id"],[4,"ngIf"],[1,"search_no_results"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resource Productivity "),e.k0s(),e.j41(8,"button",7),e.bIt("click",function(){return i.ExportToExcel()}),e.nrm(9,"i",8),e.k0s()(),e.j41(10,"div",9)(11,"div",1)(12,"div",10)(13,"ul",11)(14,"li",12)(15,"a",13),e.nrm(16,"i",14),e.EFF(17," Monthly Productivity "),e.k0s()(),e.j41(18,"li",12)(19,"a",15),e.nrm(20,"i",16),e.EFF(21," Yearly Productivity "),e.k0s()()()()(),e.j41(22,"div",1)(23,"div",17)(24,"input",18),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(25,"div",19)(26,"select",20),e.mxI("ngModelChange",function(r){return e.DH7(i.FinancialYear,r)||(i.FinancialYear=r),r}),e.bIt("ngModelChange",function(r){return i.SearchYear(r)}),e.j41(27,"option",21),e.EFF(28,"-- Financial Year --"),e.k0s(),e.DNE(29,xg,2,2,"option",22),e.k0s()(),e.j41(30,"div",19)(31,"select",23),e.mxI("ngModelChange",function(r){return e.DH7(i.Department,r)||(i.Department=r),r}),e.bIt("ngModelChange",function(r){return i.SearchDepartment(r)}),e.j41(32,"option",21),e.EFF(33,"-- Department --"),e.k0s(),e.DNE(34,Qg,2,2,"option",22),e.k0s()(),e.j41(35,"div",19)(36,"select",24),e.mxI("ngModelChange",function(r){return e.DH7(i.Status,r)||(i.Status=r),r}),e.bIt("ngModelChange",function(){return i.GetResourcesYearlyProductivity()}),e.j41(37,"option",25),e.EFF(38,"-- All --"),e.k0s(),e.j41(39,"option",26),e.EFF(40,"Active"),e.k0s(),e.j41(41,"option",27),e.EFF(42,"In-Active"),e.k0s()()(),e.j41(43,"div",17)(44,"button",28),e.bIt("click",function(){return i.search()}),e.nrm(45,"i",29),e.k0s(),e.j41(46,"button",30),e.bIt("click",function(){return i.reset()}),e.nrm(47,"i",31),e.k0s()()(),e.j41(48,"div",1)(49,"div",32)(50,"div",33)(51,"div",9)(52,"table",34)(53,"thead")(54,"tr")(55,"th"),e.EFF(56,"MONTHS"),e.k0s(),e.j41(57,"th"),e.EFF(58,"Apr"),e.k0s(),e.j41(59,"th"),e.EFF(60,"May"),e.k0s(),e.j41(61,"th"),e.EFF(62,"Jun"),e.k0s(),e.j41(63,"th"),e.EFF(64,"Jul"),e.k0s(),e.j41(65,"th"),e.EFF(66,"Aug"),e.k0s(),e.j41(67,"th"),e.EFF(68,"Sep"),e.k0s(),e.j41(69,"th"),e.EFF(70,"Oct"),e.k0s(),e.j41(71,"th"),e.EFF(72,"Nov"),e.k0s(),e.j41(73,"th"),e.EFF(74,"Dec"),e.k0s(),e.j41(75,"th"),e.EFF(76,"Jan"),e.k0s(),e.j41(77,"th"),e.EFF(78,"Feb"),e.k0s(),e.j41(79,"th"),e.EFF(80,"Mar"),e.k0s(),e.j41(81,"th"),e.EFF(82,"Total"),e.k0s()()(),e.DNE(83,Og,30,27,"tbody",35),e.k0s()()()()(),e.j41(84,"div",1)(85,"div",32)(86,"table",36)(87,"thead")(88,"tr")(89,"th"),e.EFF(90,"Employee"),e.k0s(),e.j41(91,"th"),e.EFF(92,"Apr"),e.k0s(),e.j41(93,"th"),e.EFF(94,"May"),e.k0s(),e.j41(95,"th"),e.EFF(96,"Jun"),e.k0s(),e.j41(97,"th"),e.EFF(98,"Jul"),e.k0s(),e.j41(99,"th"),e.EFF(100,"Aug"),e.k0s(),e.j41(101,"th"),e.EFF(102,"Sep"),e.k0s(),e.j41(103,"th"),e.EFF(104,"Oct"),e.k0s(),e.j41(105,"th"),e.EFF(106,"Nov"),e.k0s(),e.j41(107,"th"),e.EFF(108,"Dec"),e.k0s(),e.j41(109,"th"),e.EFF(110,"Jan"),e.k0s(),e.j41(111,"th"),e.EFF(112,"Feb"),e.k0s(),e.j41(113,"th"),e.EFF(114,"Mar"),e.k0s(),e.j41(115,"th"),e.EFF(116,"Total"),e.k0s()()(),e.DNE(117,$g,32,16,"tbody",37),e.k0s(),e.j41(118,"datagrid",38),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()(),e.nrm(119,"ngx-spinner",39),e.k0s()),2&n&&(e.R7$(15),e.Y8G("routerLinkActive",e.lJ4(15,oi))("routerLink",e.lJ4(16,Ug)),e.R7$(4),e.Y8G("routerLinkActive",e.lJ4(17,oi))("routerLink",e.lJ4(18,Vg)),e.R7$(5),e.R50("ngModel",i.Search),e.R7$(2),e.R50("ngModel",i.FinancialYear),e.R7$(3),e.Y8G("ngForOf",i.FinancialYearList),e.R7$(2),e.R50("ngModel",i.Department),e.R7$(3),e.Y8G("ngForOf",i.DepartmentList),e.R7$(2),e.R50("ngModel",i.Status),e.R7$(47),e.Y8G("ngForOf",i.TotalProductivitylist),e.R7$(34),e.Y8G("ngForOf",i.MonthlyProductivitylist),e.R7$(),e.Y8G("pageSize",i.pageSize)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.YU,u.Sq,u.bT,f.Wk,f.wQ,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,E.dg,D.et,_],encapsulation:2})}return s})(),canActivate:[M]},{path:"ResourceProjectTask",component:(()=>{class s{constructor(t,n,i,o,r,a){this.spinner=t,this.http=n,this.router=o,this.datePipe=r,this.cookieService=a,this.DataEmit=new e.bkB,this.columns=[],this.currentPageNumber=1,this.dpConfig=new k.iP,this.filterModel=new jt,this.Designation=0,this.DesignationList=[],this.dropdownSettings={},this.selectedItems=[],this.selectedEmployee=[],this.employeedropdownSettings={},this.employeelist=[],this.ProjectTypeList=[],this.ProjectType=0,this.datagrid=i,this.currentPageNumber=1,this.totalPages=0,this.totalRows=0,this.pageSize=30,this.sortDirection="DESC",this.sortExpression="Designation",this.currentUser=JSON.parse(this.cookieService.get("currentUser")||"{}"),this.dpConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,dateInputFormat:"DD-MM-YYYY",dayDisabled:[0,1,2]}),this.typeSelected="timer"}gettoken(){return this.currentUser.authtoken}ngOnInit(){this.spinner.show(),this.calculateWeekDates(),this.dropdownSettings={singleSelection:!1,idField:"designationID",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.employeedropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,maxHeight:107,allowSearchFilter:!0},this.columns.push(new h("employee","Employee",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("designation","Designation",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("client","Client",'[{"width": "15%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("project","Project",'[{"width": "20%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("projectType","Project Type",'[{"width": "8%" ,"hyperLink": false, "disableSorting": false}]')),this.columns.push(new h("estimatedHours","Estimated",'[{"width": "5%" ,"hyperLink": false, "textAlign": "right", "disableSorting": false}]')),this.columns.push(new h("actualHours","Actual",'[{"width": "5%" ,"hyperLink": false, "textAlign": "right", "disableSorting": false}]')),this.executeSearch(),this.spinner.hide()}GetEndDate(t){const n=new Date(t);n.setDate(n.getDate()+6),this.endDate=n}calculateWeekDates(){const t=new Date,n=t.getDate()-t.getDay(),i=new Date(t.setDate(n)),o=new Date(i);o.setDate(o.getDate()+6),this.startDate=i,this.endDate=o}executeSearch(){if(this.spinner.show(),1==this.runningSearch)return;let t=500;0==this.delaySearch&&(t=0),this.runningSearch=!0,setTimeout(()=>{this.GetResourcesProjectTask()},t),this.spinner.hide()}GetResourcesProjectTask(){this.spinner.show();const t=new jt;if(t.Search=this.Search,t.pageSize=this.pageSize,t.sortDirection=this.sortDirection,t.sortExpression=this.sortExpression,t.currentPageNumber=this.currentPageNumber,t.ProjectTypeId=+this.ProjectType,null!=this.startDate&&null!=this.endDate){const r=this.datePipe.transform(this.startDate,"yyyy-MM-dd"),a=this.datePipe.transform(this.endDate,"yyyy-MM-dd");t.StartDate=r,t.EndDate=a}const n=this.router.parseUrl(this.router.url);if(null!=n.queryParams.filterModel){const r=JSON.parse(n.queryParams.filterModel);""!=r.SearchEmployee&&null!=r.SearchEmployee&&(t.SearchEmployee=r.SearchEmployee),""!=r.Designation&&null!=r.Designation&&(t.Designation=r.Designation)}else t.Designation=this.selectedItems.map(r=>r.designationID).join(","),t.SearchEmployee=this.selectedEmployee.map(r=>r.id).join(",");this.filterModel=t;const i=new m.Lr({"Content-Type":"application/json",Authorization:"Bearer "+this.gettoken()});return this.http.post(p.apiUrl+"api/Report/GetProjectResourcesTaskReport",JSON.stringify(t),{headers:i}).subscribe({next:r=>(this.spinner.hide(),r),error:r=>{this.spinner.hide()}})}getRowOnSuccess(t){let n=new C;n.currentPageNumber=this.currentPageNumber,n.pageSize=this.pageSize,n.totalPages=t.totalPages,n.totalRows=t.totalRows,n.sortDirection=this.sortDirection,n.sortExpression=this.sortExpression,t.projectResourcesTasks.forEach(i=>{if(null!=i.estimatedHours){let o=i.estimatedHours.split(":");i.estimatedHours=o[0]+":"+o[1]}else i.estimatedHours="-";if(null!=i.actualHours){let o=i.actualHours.split(":");i.actualHours=o[0]+":"+o[1]}else i.actualHours="-"}),this.employeelist=t.employeeDropdownModel,this.DesignationList=t.designationDropdownModel,this.resourceProjectTaskModel=t.projectResourcesTasks,this.ProjectTypeList=t.projectTypeDropdownModel,this.datagrid.databind(n),this.runningSearch=!1}getRowOnError(t){this.runningSearch=!1}datagridEvent(t){let n=t.value;"PagingEvent"==n.EventType?this.pagingRow(n.CurrentPageNumber):"PageSizeChanged"==n.EventType?this.pageSizeChanged(n.PageSize):"Sorting"==n.EventType&&this.sortRow(n.SortDirection,n.SortExpression)}sortRow(t,n){this.sortDirection=t,this.sortExpression=n,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.GetResourcesProjectTask()}pagingRow(t){this.currentPageNumber=t,this.delaySearch=!1,this.clearFilterUrl(),this.GetResourcesProjectTask()}pageSizeChanged(t){this.pageSize=t,this.currentPageNumber=1,this.delaySearch=!1,this.clearFilterUrl(),this.GetResourcesProjectTask()}SearchProjectType(t){""!=t&&(this.ProjectType=t,this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.executeSearch()},500))}reset(){this.Search="",this.currentPageNumber=1,this.delaySearch=!1,this.startDate=null,this.endDate=null,this.selectedEmployee=[],this.Designation=0,this.ProjectType=0,this.selectedItems=[],this.clearFilterUrl(),this.calculateWeekDates(),this.GetResourcesProjectTask()}search(){this.currentPageNumber=1,this.delaySearch=!1,this.GetResourcesProjectTask()}SearchYear(t){""!=t&&(this.currentPageNumber=1,this.delaySearch=!0,this.clearFilterUrl(),setTimeout(()=>{this.GetResourcesProjectTask()},500))}SearchChanged(t){this.Search=t,this.currentPageNumber=1,this.delaySearch=!0,setTimeout(()=>{this.GetResourcesProjectTask()},500)}clearFilterUrl(){let t=this.router.url.substring(0,this.router.url.indexOf("?"));""!=t&&this.router.navigateByUrl(t)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(D.ex),e.rXU(m.Qq),e.rXU(_),e.rXU(f.Ix),e.rXU(u.vh),e.rXU(S.O))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-resource-project-task-report"]],viewQuery:function(n,i){if(1&n&&e.GBs(_,7),2&n){let o;e.mGM(o=e.lsd())&&(i.datagrid=o.first)}},outputs:{DataEmit:"DataEmit"},features:[e.Jv_([k.iP,u.vh])],decls:34,vars:21,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","main-card-header"],[1,"caption"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"col-md-3","paddingbottom"],["type","text","placeholder","Start Date","bsDatepicker","",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["type","text","placeholder","End Date","bsDatepicker","","disabled","",1,"form-control",3,"ngModelChange","ngModel","bsConfig"],["name","basicExampleSelectedItems",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","multiSelectEmployee",3,"ngModelChange","placeholder","data","ngModel","settings"],["name","ProjectType","id","ProjectType",1,"form-control",3,"ngModelChange","ngModel"],["value","0","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Search",1,"form-control",3,"ngModelChange","ngModel"],["tooltip","Search","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-search"],["tooltip","Reset","placement","bottom",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-refresh"],[1,"col-md-12"],[3,"datagridEvent","rows","columns","pageSize","ShowStatus","ShowProjStatus"],["size","medium",3,"type"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"i",6),e.EFF(7," Resources Project Report "),e.k0s()(),e.j41(8,"div",7)(9,"div",1)(10,"div",8)(11,"input",9),e.mxI("ngModelChange",function(r){return e.DH7(i.startDate,r)||(i.startDate=r),r}),e.bIt("ngModelChange",function(r){return i.GetEndDate(r)}),e.k0s()(),e.j41(12,"div",8)(13,"input",10),e.mxI("ngModelChange",function(r){return e.DH7(i.endDate,r)||(i.endDate=r),r}),e.k0s()(),e.j41(14,"div",8)(15,"ng-multiselect-dropdown",11),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedItems,r)||(i.selectedItems=r),r}),e.k0s()(),e.j41(16,"div",8)(17,"ng-multiselect-dropdown",12),e.mxI("ngModelChange",function(r){return e.DH7(i.selectedEmployee,r)||(i.selectedEmployee=r),r}),e.k0s()(),e.j41(18,"div",8)(19,"select",13),e.mxI("ngModelChange",function(r){return e.DH7(i.ProjectType,r)||(i.ProjectType=r),r}),e.bIt("ngModelChange",function(r){return i.SearchProjectType(r)}),e.j41(20,"option",14),e.EFF(21,"-- Project Type --"),e.k0s(),e.DNE(22,Xg,2,2,"option",15),e.k0s()(),e.j41(23,"div",8)(24,"input",16),e.mxI("ngModelChange",function(r){return e.DH7(i.Search,r)||(i.Search=r),r}),e.bIt("ngModelChange",function(r){return i.SearchChanged(r)}),e.k0s()(),e.j41(25,"div",8)(26,"button",17),e.bIt("click",function(){return i.search()}),e.nrm(27,"i",18),e.k0s(),e.j41(28,"button",19),e.bIt("click",function(){return i.reset()}),e.nrm(29,"i",20),e.k0s()()(),e.j41(30,"div",1)(31,"div",21)(32,"datagrid",22),e.bIt("datagridEvent",function(r){return i.datagridEvent(r)}),e.k0s()()()()()()()(),e.nrm(33,"ngx-spinner",23)),2&n&&(e.R7$(11),e.R50("ngModel",i.startDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(2),e.R50("ngModel",i.endDate),e.Y8G("bsConfig",i.dpConfig),e.R7$(2),e.Y8G("placeholder","-- Designation --")("data",i.DesignationList),e.R50("ngModel",i.selectedItems),e.Y8G("settings",i.dropdownSettings),e.R7$(2),e.Y8G("placeholder","-- Employee --")("data",i.employeelist),e.R50("ngModel",i.selectedEmployee),e.Y8G("settings",i.employeedropdownSettings),e.R7$(2),e.R50("ngModel",i.ProjectType),e.R7$(3),e.Y8G("ngForOf",i.ProjectTypeList),e.R7$(2),e.R50("ngModel",i.Search),e.R7$(8),e.Y8G("rows",i.resourceProjectTaskModel)("columns",i.columns)("pageSize",i.pageSize)("ShowStatus",!0)("ShowProjStatus",!1),e.R7$(),e.Y8G("type",i.typeSelected))},dependencies:[u.Sq,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,k.pc,k.p0,E.dg,D.et,w.b,_],encapsulation:2})}return s})(),canActivate:[M]}]},{path:"Undermaintenance",component:sm}];let Kg=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#i=this.\u0275inj=e.G2t({imports:[f.iI.forRoot(qg,{}),c.YN,f.iI]})}return s})();var Wg=F(2458),Zg=F(728),e1=F(7406);const h1=window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1;let d1=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s,bootstrap:[An]});static#i=this.\u0275inj=e.G2t({providers:[_,M,S.O,R,dt,Z,$,ne,et],imports:[je.Bb,Kg,c.YN,c.X1,ke.zE.forRoot(),_e.jr.forRoot(),G.nAL,G._SP,G.GCM,G.kiz,Ue.FR,m.q1,I._B.forRoot(),B.Q_.forRoot(),k.YN.forRoot(),E.Ss.forRoot(),Zg.wb,Wg.h6.forRoot(),zt.G.forRoot(),D.PO,Ze.Id,G.Ied,G.pc9,w.O.forRoot(),Re.oH.forRoot(new e1.v({auth:{clientId:"8a6903e8-b1b5-46ae-b347-4de2cc2fa5a5",authority:"https://login.microsoftonline.com/da93e239-2d3c-4fe6-9751-1b7ca3aec0d9",redirectUri:"https://smartdesk.tretainfotech.com"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:h1}}),null,null),Pa.Kj,I._B.forRoot()]})}return s})();(0,e.SmG)(),je.sG().bootstrapModule(d1).catch(s=>console.log(s))},477:()=>{}},ce=>{ce.O(0,[502],()=>ce(ce.s=20)),ce.O()}]);